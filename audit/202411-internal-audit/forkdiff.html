<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css">

    <title>immutable-geth - go-ethereum fork diff overview</title>

    <link rel="icon" type="image/x-icon" href="">

    <style>
        .line-stat {
            width: 14rem;
            float: right;
        }
        .line-stat div {
            width: 50%;
        }
        .text-add-ignored {
            color: #93ad93;
            font-style: italic;
        }
        .text-delete-ignored {
            color: #c47777;
            font-style: italic;
        }
        .toplevelstat {
            margin-left: 0 !important;
            width: 15rem;
        }
    </style>

    
<style>
    .term-container {
        background: #171717;
        border-radius: 5px;
        color: white;
        word-break: break-word;
        overflow-wrap: break-word;
        font-family: "SFMono-Regular", Monaco, Menlo, Consolas, "Liberation Mono", Courier, monospace;
        font-size: 12px;
        line-height: 20px;
        padding: 14px 18px;
        white-space: pre-wrap;
    }

    .term-container img { max-width: 100%; }

    .term a { color: inherit; text-decoration: underline; text-decoration-style: dashed; }
    .term a:hover { color: #2882F9 }

    @keyframes blink-animation {
        to {
            visibility: hidden;
        }
    }

    .term-fg1 { } /* don't bold beccause it looks weird */
    .term-fg2 { color: #838887; } /* faint (decreased intensity) - same as gray really */
    .term-fg3 { font-style: italic; } /* italic */
    .term-fg4 { text-decoration: underline; } /* underline */
    .term-fg5 { animation: blink-animation 1s steps(3, start) infinite; } /* blink */
    .term-fg9 { text-decoration: line-through; } /* crossed-out */

    .term-fg30 { color: #666666; } /* black (but we can't use black, so a diff color) */
    .term-fg31 { color: #ff7070; } /* red */
    .term-fg32 { color: #b0f986; } /* green */
    .term-fg33 { color: #c6c502; } /* yellow */
    .term-fg34 { color: #8db7e0; } /* blue */
    .term-fg35 { color: #f271fb; } /* magenta */
    .term-fg36 { color: #6bf7ff; } /* cyan */

    /* high intense colors */
    .term-fgi1 { color: #5ef765; }
    .term-fgi90 { color: #838887; } /* grey */
    .term-fgi91 { color: #ff3333; } /* red */
    .term-fgi92 { color: #00FF00; } /* green */
    .term-fgi93 { color: #fffc67; } /* yellow */
    .term-fgi94 { color: #6871ff; } /* blue */
    .term-fgi95 { color: #ff76ff; } /* magenta */
    .term-fgi96 { color: #60fcff; } /* cyan */

    /* background colors */
    .term-bg40 { background: #676767; } /* grey */
    .term-bg41 { background: #ff4343; } /* red */
    .term-bg42 { background: #99ff5f; } /* green */

    /* custom foreground/background combos for readability */
    .term-fg31.term-bg40 { color: #F8A39F; }

    /* xterm colors */
    .term-fgx16 { color: #000000; }
    .term-fgx17 { color: #00005f; }
    .term-fgx18 { color: #000087; }
    .term-fgx19 { color: #0000af; }
    .term-fgx20 { color: #0000d7; }
    .term-fgx21 { color: #0000ff; }
    .term-fgx22 { color: #005f00; }
    .term-fgx23 { color: #005f5f; }
    .term-fgx24 { color: #005f87; }
    .term-fgx25 { color: #005faf; }
    .term-fgx26 { color: #005fd7; }
    .term-fgx27 { color: #005fff; }
    .term-fgx28 { color: #008700; }
    .term-fgx29 { color: #00875f; }
    .term-fgx30 { color: #008787; }
    .term-fgx31 { color: #0087af; }
    .term-fgx32 { color: #0087d7; }
    .term-fgx33 { color: #0087ff; }
    .term-fgx34 { color: #00af00; }
    .term-fgx35 { color: #00af5f; }
    .term-fgx36 { color: #00af87; }
    .term-fgx37 { color: #00afaf; }
    .term-fgx38 { color: #00afd7; }
    .term-fgx39 { color: #00afff; }
    .term-fgx40 { color: #00d700; }
    .term-fgx41 { color: #00d75f; }
    .term-fgx42 { color: #00d787; }
    .term-fgx43 { color: #00d7af; }
    .term-fgx44 { color: #00d7d7; }
    .term-fgx45 { color: #00d7ff; }
    .term-fgx46 { color: #00ff00; }
    .term-fgx47 { color: #00ff5f; }
    .term-fgx48 { color: #00ff87; }
    .term-fgx49 { color: #00ffaf; }
    .term-fgx50 { color: #00ffd7; }
    .term-fgx51 { color: #00ffff; }
    .term-fgx52 { color: #5f0000; }
    .term-fgx53 { color: #5f005f; }
    .term-fgx54 { color: #5f0087; }
    .term-fgx55 { color: #5f00af; }
    .term-fgx56 { color: #5f00d7; }
    .term-fgx57 { color: #5f00ff; }
    .term-fgx58 { color: #5f5f00; }
    .term-fgx59 { color: #5f5f5f; }
    .term-fgx60 { color: #5f5f87; }
    .term-fgx61 { color: #5f5faf; }
    .term-fgx62 { color: #5f5fd7; }
    .term-fgx63 { color: #5f5fff; }
    .term-fgx64 { color: #5f8700; }
    .term-fgx65 { color: #5f875f; }
    .term-fgx66 { color: #5f8787; }
    .term-fgx67 { color: #5f87af; }
    .term-fgx68 { color: #5f87d7; }
    .term-fgx69 { color: #5f87ff; }
    .term-fgx70 { color: #5faf00; }
    .term-fgx71 { color: #5faf5f; }
    .term-fgx72 { color: #5faf87; }
    .term-fgx73 { color: #5fafaf; }
    .term-fgx74 { color: #5fafd7; }
    .term-fgx75 { color: #5fafff; }
    .term-fgx76 { color: #5fd700; }
    .term-fgx77 { color: #5fd75f; }
    .term-fgx78 { color: #5fd787; }
    .term-fgx79 { color: #5fd7af; }
    .term-fgx80 { color: #5fd7d7; }
    .term-fgx81 { color: #5fd7ff; }
    .term-fgx82 { color: #5fff00; }
    .term-fgx83 { color: #5fff5f; }
    .term-fgx84 { color: #5fff87; }
    .term-fgx85 { color: #5fffaf; }
    .term-fgx86 { color: #5fffd7; }
    .term-fgx87 { color: #5fffff; }
    .term-fgx88 { color: #870000; }
    .term-fgx89 { color: #87005f; }
    .term-fgx90 { color: #870087; }
    .term-fgx91 { color: #8700af; }
    .term-fgx92 { color: #8700d7; }
    .term-fgx93 { color: #8700ff; }
    .term-fgx94 { color: #875f00; }
    .term-fgx95 { color: #875f5f; }
    .term-fgx96 { color: #875f87; }
    .term-fgx97 { color: #875faf; }
    .term-fgx98 { color: #875fd7; }
    .term-fgx99 { color: #875fff; }
    .term-fgx100 { color: #878700; }
    .term-fgx101 { color: #87875f; }
    .term-fgx102 { color: #878787; }
    .term-fgx103 { color: #8787af; }
    .term-fgx104 { color: #8787d7; }
    .term-fgx105 { color: #8787ff; }
    .term-fgx106 { color: #87af00; }
    .term-fgx107 { color: #87af5f; }
    .term-fgx108 { color: #87af87; }
    .term-fgx109 { color: #87afaf; }
    .term-fgx110 { color: #87afd7; }
    .term-fgx111 { color: #87afff; }
    .term-fgx112 { color: #87d700; }
    .term-fgx113 { color: #87d75f; }
    .term-fgx114 { color: #87d787; }
    .term-fgx115 { color: #87d7af; }
    .term-fgx116 { color: #87d7d7; }
    .term-fgx117 { color: #87d7ff; }
    .term-fgx118 { color: #87ff00; }
    .term-fgx119 { color: #87ff5f; }
    .term-fgx120 { color: #87ff87; }
    .term-fgx121 { color: #87ffaf; }
    .term-fgx122 { color: #87ffd7; }
    .term-fgx123 { color: #87ffff; }
    .term-fgx124 { color: #af0000; }
    .term-fgx125 { color: #af005f; }
    .term-fgx126 { color: #af0087; }
    .term-fgx127 { color: #af00af; }
    .term-fgx128 { color: #af00d7; }
    .term-fgx129 { color: #af00ff; }
    .term-fgx130 { color: #af5f00; }
    .term-fgx131 { color: #af5f5f; }
    .term-fgx132 { color: #af5f87; }
    .term-fgx133 { color: #af5faf; }
    .term-fgx134 { color: #af5fd7; }
    .term-fgx135 { color: #af5fff; }
    .term-fgx136 { color: #af8700; }
    .term-fgx137 { color: #af875f; }
    .term-fgx138 { color: #af8787; }
    .term-fgx139 { color: #af87af; }
    .term-fgx140 { color: #af87d7; }
    .term-fgx141 { color: #af87ff; }
    .term-fgx142 { color: #afaf00; }
    .term-fgx143 { color: #afaf5f; }
    .term-fgx144 { color: #afaf87; }
    .term-fgx145 { color: #afafaf; }
    .term-fgx146 { color: #afafd7; }
    .term-fgx147 { color: #afafff; }
    .term-fgx148 { color: #afd700; }
    .term-fgx149 { color: #afd75f; }
    .term-fgx150 { color: #afd787; }
    .term-fgx151 { color: #afd7af; }
    .term-fgx152 { color: #afd7d7; }
    .term-fgx153 { color: #afd7ff; }
    .term-fgx154 { color: #afff00; }
    .term-fgx155 { color: #afff5f; }
    .term-fgx156 { color: #afff87; }
    .term-fgx157 { color: #afffaf; }
    .term-fgx158 { color: #afffd7; }
    .term-fgx159 { color: #afffff; }
    .term-fgx160 { color: #d70000; }
    .term-fgx161 { color: #d7005f; }
    .term-fgx162 { color: #d70087; }
    .term-fgx163 { color: #d700af; }
    .term-fgx164 { color: #d700d7; }
    .term-fgx165 { color: #d700ff; }
    .term-fgx166 { color: #d75f00; }
    .term-fgx167 { color: #d75f5f; }
    .term-fgx168 { color: #d75f87; }
    .term-fgx169 { color: #d75faf; }
    .term-fgx170 { color: #d75fd7; }
    .term-fgx171 { color: #d75fff; }
    .term-fgx172 { color: #d78700; }
    .term-fgx173 { color: #d7875f; }
    .term-fgx174 { color: #d78787; }
    .term-fgx175 { color: #d787af; }
    .term-fgx176 { color: #d787d7; }
    .term-fgx177 { color: #d787ff; }
    .term-fgx178 { color: #d7af00; }
    .term-fgx179 { color: #d7af5f; }
    .term-fgx180 { color: #d7af87; }
    .term-fgx181 { color: #d7afaf; }
    .term-fgx182 { color: #d7afd7; }
    .term-fgx183 { color: #d7afff; }
    .term-fgx184 { color: #d7d700; }
    .term-fgx185 { color: #d7d75f; }
    .term-fgx186 { color: #d7d787; }
    .term-fgx187 { color: #d7d7af; }
    .term-fgx188 { color: #d7d7d7; }
    .term-fgx189 { color: #d7d7ff; }
    .term-fgx190 { color: #d7ff00; }
    .term-fgx191 { color: #d7ff5f; }
    .term-fgx192 { color: #d7ff87; }
    .term-fgx193 { color: #d7ffaf; }
    .term-fgx194 { color: #d7ffd7; }
    .term-fgx195 { color: #d7ffff; }
    .term-fgx196 { color: #ff0000; }
    .term-fgx197 { color: #ff005f; }
    .term-fgx198 { color: #ff0087; }
    .term-fgx199 { color: #ff00af; }
    .term-fgx200 { color: #ff00d7; }
    .term-fgx201 { color: #ff00ff; }
    .term-fgx202 { color: #ff5f00; }
    .term-fgx203 { color: #ff5f5f; }
    .term-fgx204 { color: #ff5f87; }
    .term-fgx205 { color: #ff5faf; }
    .term-fgx206 { color: #ff5fd7; }
    .term-fgx207 { color: #ff5fff; }
    .term-fgx208 { color: #ff8700; }
    .term-fgx209 { color: #ff875f; }
    .term-fgx210 { color: #ff8787; }
    .term-fgx211 { color: #ff87af; }
    .term-fgx212 { color: #ff87d7; }
    .term-fgx213 { color: #ff87ff; }
    .term-fgx214 { color: #ffaf00; }
    .term-fgx215 { color: #ffaf5f; }
    .term-fgx216 { color: #ffaf87; }
    .term-fgx217 { color: #ffafaf; }
    .term-fgx218 { color: #ffafd7; }
    .term-fgx219 { color: #ffafff; }
    .term-fgx220 { color: #ffd700; }
    .term-fgx221 { color: #ffd75f; }
    .term-fgx222 { color: #ffd787; }
    .term-fgx223 { color: #ffd7af; }
    .term-fgx224 { color: #ffd7d7; }
    .term-fgx225 { color: #ffd7ff; }
    .term-fgx226 { color: #ffff00; }
    .term-fgx227 { color: #ffff5f; }
    .term-fgx228 { color: #ffff87; }
    .term-fgx229 { color: #ffffaf; }
    .term-fgx230 { color: #ffffd7; }
    .term-fgx231 { color: #ffffff; }
    .term-fgx232 { color: #080808; }
    .term-fgx233 { color: #121212; }
    .term-fgx234 { color: #1c1c1c; }
    .term-fgx235 { color: #262626; }
    .term-fgx236 { color: #303030; }
    .term-fgx237 { color: #3a3a3a; }
    .term-fgx238 { color: #444444; }
    .term-fgx239 { color: #4e4e4e; }
    .term-fgx240 { color: #585858; }
    .term-fgx241 { color: #626262; }
    .term-fgx242 { color: #6c6c6c; }
    .term-fgx243 { color: #767676; }
    .term-fgx244 { color: #808080; }
    .term-fgx245 { color: #8a8a8a; }
    .term-fgx246 { color: #949494; }
    .term-fgx247 { color: #9e9e9e; }
    .term-fgx248 { color: #a8a8a8; }
    .term-fgx249 { color: #b2b2b2; }
    .term-fgx250 { color: #bcbcbc; }
    .term-fgx251 { color: #c6c6c6; }
    .term-fgx252 { color: #d0d0d0; }
    .term-fgx253 { color: #dadada; }
    .term-fgx254 { color: #e4e4e4; }
    .term-fgx255 { color: #eeeeee; }
</style>

</head>
<body>
    <div class="col-xl-10 col-xxl-8 mx-auto px-3 py-1 py-md-3">
        <main class="container-fluid">
            <div class="row">
                <div>
                    <div class="float-end">
                        <div class="form-check form-switch">
                            <i class="bi bi-brightness-low" id="dark-mode-icon"></i>
                            <input class="form-check-input" type="checkbox" role="switch" id="dark-mode-toggle" data-bs-toggle="tooltip"
                                   data-bs-placement="bottom" data-bs-title="Toggle Dark Mode"/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"role="button" aria-expanded="true" aria-controls="id-83040e187f62ecded69667b5">
        
            <div class="col-12 col-md-12 col-lg-6 col-xl-6 text-start"><h1>immutable-geth</h1></div>
        

        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2">
            <div class="row line-stat">
                
                    <span class="text-end">diff:</span>
                
                
                    <span class="text-end">ignored:</span>
                
            </div>
        </div>
        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2 toplevelstat">
            <div class="row line-stat">
                
                    <div class="text-end"><span class="text-success">+11849</span></div>
                    <div class="text-start"><span class="text-danger">-652</span></div>
                
                
                    <div class="text-end"><span class="text-add-ignored">+4645</span></div>
                    <div class="text-start"><span class="text-delete-ignored">-173</span></div>
                
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse show border-1 ps-3 my-3" id="id-83040e187f62ecded69667b5">
        <div><p>All modifications made by Immutable to the go-ethereum codebase are listed here.
The diff is based on the <code>v1.13.15</code> tag of go-ethereum and the <code>audit.1</code> tag of immutable-geth.</p>
</div>
        <div>
            
            
        </div>
        <div>
            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-08491e7a37ea3560a8f3599d"role="button" aria-expanded="false" aria-controls="id-08491e7a37ea3560a8f3599d">
        
            <div class="col-12 col-md-12 col-lg-6 col-xl-6 text-start"><h2>Go Source Changes</h2></div>
        

        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2">
            <div class="row line-stat">
                
                
            </div>
        </div>
        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2 ">
            <div class="row line-stat">
                
                    <div class="text-end"><span class="text-success">+10793</span></div>
                    <div class="text-start"><span class="text-danger">-172</span></div>
                
                
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-08491e7a37ea3560a8f3599d">
        <div><p>This section contains diffs organized by each root Go pkg of the repository.</p>
</div>
        <div>
            
            
        </div>
        <div>
            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-4aa08a07c4259f88c55b0eeb"role="button" aria-expanded="false" aria-controls="id-4aa08a07c4259f88c55b0eeb">
        
            <div class="col-12 col-md-12 col-lg-6 col-xl-6 text-start"><h3>core</h3></div>
        

        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2">
            <div class="row line-stat">
                
                
            </div>
        </div>
        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2 ">
            <div class="row line-stat">
                
                    <div class="text-end"><span class="text-success">+580</span></div>
                    <div class="text-start"><span class="text-danger">-26</span></div>
                
                
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-4aa08a07c4259f88c55b0eeb">
        <div></div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-7600f40ea28cb4658babb848" role="button"
                       aria-expanded="false" aria-controls="id-7600f40ea28cb4658babb848">
                        <code>core/chain_makers.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/core/chain_makers.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/core/chain_makers.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+1</span></div>
                            <div class="text-start"><span class="text-danger">-1</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-7600f40ea28cb4658babb848"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;chain_makers.go immutable-geth&#47;core&#47;chain_makers.go</span>
<span class="term-fg1">index 733030fd1c9eb8fff850a87babe2a71b491a7ba5..b6ebcc8849a3839ef02646499df5970af7a57141 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;chain_makers.go</span>
<span class="term-fg1">+++ immutable-geth&#47;core&#47;chain_makers.go</span>
<span class="term-fg36">@@ -98,7 +98,7 @@</span> &#47;&#47; block.
 func (b *BlockGen) SetParentBeaconRoot(root common.Hash) {
 	b.header.ParentBeaconRoot = &amp;root
 	var (
<span class="term-fg31">-		blockContext = NewEVMBlockContext(b.header, b.cm, &amp;b.header.Coinbase)</span>
<span class="term-fg32">+		blockContext = NewEVMBlockContext(b.header, b.cm, &amp;b.header.Coinbase, b.cm.config)</span>
 		vmenv        = vm.NewEVM(blockContext, vm.TxContext{}, b.statedb, b.cm.config, vm.Config{})
 	)
 	ProcessBeaconBlockRoot(root, vmenv, b.statedb)</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-398e2696edb4c2e8b1ab24bf" role="button"
                       aria-expanded="false" aria-controls="id-398e2696edb4c2e8b1ab24bf">
                        <code>core/state_prefetcher.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/core/state_prefetcher.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/core/state_prefetcher.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+1</span></div>
                            <div class="text-start"><span class="text-danger">-1</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-398e2696edb4c2e8b1ab24bf"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;state_prefetcher.go immutable-geth&#47;core&#47;state_prefetcher.go</span>
<span class="term-fg1">index ff867309de302b90dc3e071e97cbe3705d34c970..5cc9594923da2be8c80c696274bba2ca80503870 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;state_prefetcher.go</span>
<span class="term-fg1">+++ immutable-geth&#47;core&#47;state_prefetcher.go</span>
<span class="term-fg36">@@ -51,7 +51,7 @@</span> func (p *statePrefetcher) Prefetch(block *types.Block, statedb *state.StateDB, cfg vm.Config, interrupt *atomic.Bool) {
 	var (
 		header       = block.Header()
 		gaspool      = new(GasPool).AddGas(block.GasLimit())
<span class="term-fg31">-		blockContext = NewEVMBlockContext(header, p.bc, nil)</span>
<span class="term-fg32">+		blockContext = NewEVMBlockContext(header, p.bc, nil, p.config)</span>
 		evm          = vm.NewEVM(blockContext, vm.TxContext{}, statedb, p.config, cfg)
 		signer       = types.MakeSigner(p.config, header.Number, header.Time)
 	)</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-a25134699cb726e3a0efd7b1" role="button"
                       aria-expanded="false" aria-controls="id-a25134699cb726e3a0efd7b1">
                        <code>core/state_transition.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/core/state_transition.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/core/state_transition.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+5</span></div>
                            <div class="text-start"><span class="text-danger">-1</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-a25134699cb726e3a0efd7b1"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;state_transition.go immutable-geth&#47;core&#47;state_transition.go</span>
<span class="term-fg1">index 9c4f76d1c58538b9fe8ead870c989f27bfbd70b6..b1005c22d81308a6dc716a48be358d7a8d807dab 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;state_transition.go</span>
<span class="term-fg1">+++ immutable-geth&#47;core&#47;state_transition.go</span>
<span class="term-fg36">@@ -26,6 +26,7 @@</span> 	cmath &quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&#47;math&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;vm&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;crypto&#47;kzg4844&quot;
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;log&quot;</span>
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;params&quot;
 	&quot;github.com&#47;holiman&#47;uint256&quot;
 )
<span class="term-fg36">@@ -458,7 +459,10 @@</span> 		fee := new(uint256.Int).SetUint64(st.gasUsed())
 		fee.Mul(fee, effectiveTipU256)
 		st.state.AddBalance(st.evm.Context.Coinbase, fee)
 	}
<span class="term-fg31">-</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable) add error logging</span>
<span class="term-fg32">+	if vmerr != nil {</span>
<span class="term-fg32">+		log.Warn(&quot;vm execution error&quot;, &quot;err&quot;, vmerr)</span>
<span class="term-fg32">+	}</span>
 	return &amp;ExecutionResult{
 		UsedGas:     st.gasUsed(),
 		RefundedGas: gasRefund,</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-6e1f0426b596f76e7a4f132e" role="button"
                       aria-expanded="false" aria-controls="id-6e1f0426b596f76e7a4f132e">
                        <code>core/types/block.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/core/types/block.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/core/types/block.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+6</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-6e1f0426b596f76e7a4f132e"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;types&#47;block.go immutable-geth&#47;core&#47;types&#47;block.go</span>
<span class="term-fg1">index 1a357baa3a4152470233bec308804044ce37c76b..ae2225e6d6ce2f19fbc880365b6772b3e9943e94 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;types&#47;block.go</span>
<span class="term-fg1">+++ immutable-geth&#47;core&#47;types&#47;block.go</span>
<span class="term-fg36">@@ -165,6 +165,12 @@</span> func (h *Header) EmptyReceipts() bool {
 	return h.ReceiptHash == EmptyReceiptsHash
 }
&nbsp;
<span class="term-fg32">+&#47;&#47; EmptyWithdrawalsHash returns true if the WithdrawalsHash is EmptyWithdrawalsHash.</span>
<span class="term-fg32">+&#47;&#47; CHANGE(immutable): Add EmptyWithdrawalsHash</span>
<span class="term-fg32">+func (h *Header) EmptyWithdrawalsHash() bool {</span>
<span class="term-fg32">+	return h.WithdrawalsHash != nil &amp;&amp; *h.WithdrawalsHash == EmptyWithdrawalsHash</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
 &#47;&#47; Body is a simple (mutable, non-safe) data container for storing and moving
 &#47;&#47; a block&#39;s data contents (transactions and uncles) together.
 type Body struct {</div>
    </div>

            
            
        </div>
        <div>
            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-11ea733446dfe4c14610c048"role="button" aria-expanded="false" aria-controls="id-11ea733446dfe4c14610c048">
        
            <div class="col-12 col-md-12 col-lg-6 col-xl-6 text-start"><h4>Reorg Invariant</h4></div>
        

        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2">
            <div class="row line-stat">
                
                
            </div>
        </div>
        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2 ">
            <div class="row line-stat">
                
                    <div class="text-end"><span class="text-success">+58</span></div>
                    <div class="text-start"><span class="text-danger">-0</span></div>
                
                
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-11ea733446dfe4c14610c048">
        <div></div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-74c74b33c12beddf8a4af52e" role="button"
                       aria-expanded="false" aria-controls="id-74c74b33c12beddf8a4af52e">
                        <code>core/blockchain.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/core/blockchain.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/core/blockchain.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+58</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-74c74b33c12beddf8a4af52e"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;blockchain.go immutable-geth&#47;core&#47;blockchain.go</span>
<span class="term-fg1">index b1bbc3d5982ded15ea3659b8141a85f5fc842a65..29e4af0482c475874e8e657a024f4779556f0b8a 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;blockchain.go</span>
<span class="term-fg1">+++ immutable-geth&#47;core&#47;blockchain.go</span>
<span class="term-fg36">@@ -82,6 +82,11 @@</span> 	blockInsertTimer     = metrics.NewRegisteredTimer(&quot;chain&#47;inserts&quot;, nil)
 	blockValidationTimer = metrics.NewRegisteredTimer(&quot;chain&#47;validation&quot;, nil)
 	blockExecutionTimer  = metrics.NewRegisteredTimer(&quot;chain&#47;execution&quot;, nil)
 	blockWriteTimer      = metrics.NewRegisteredTimer(&quot;chain&#47;write&quot;, nil)
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Add metric for blocks</span>
<span class="term-fg32">+	&#47;&#47; blockPeriodTimer records number of seconds between adjacent blocks</span>
<span class="term-fg32">+	blockPeriodTimer = metrics.NewRegisteredTimer(&quot;chain&#47;block&#47;period&quot;, nil)</span>
<span class="term-fg32">+	&#47;&#47; blockPropagationTimer records time taken to receive a block and insert it into the chain</span>
<span class="term-fg32">+	blockPropagationTimer = metrics.NewRegisteredTimer(&quot;chain&#47;block&#47;propagation&quot;, nil)</span>
&nbsp;
 	blockReorgMeter     = metrics.NewRegisteredMeter(&quot;chain&#47;reorg&#47;executes&quot;, nil)
 	blockReorgAddMeter  = metrics.NewRegisteredMeter(&quot;chain&#47;reorg&#47;add&quot;, nil)
<span class="term-fg36">@@ -94,6 +99,9 @@</span> 	errInsertionInterrupted = errors.New(&quot;insertion is interrupted&quot;)
 	errChainStopped         = errors.New(&quot;blockchain is stopped&quot;)
 	errInvalidOldChain      = errors.New(&quot;invalid old chain&quot;)
 	errInvalidNewChain      = errors.New(&quot;invalid new chain&quot;)
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; ErrReorgAttempted CHANGE(immutable) is a new error type returned when a fork invariant is hit.</span>
<span class="term-fg32">+	ErrReorgAttempted = errors.New(&quot;reorg was attempted&quot;)</span>
 )
&nbsp;
 const (
<span class="term-fg36">@@ -1437,6 +1445,12 @@</span> 		return NonStatTy, errChainStopped
 	}
 	defer bc.chainmu.Unlock()
&nbsp;
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Record block period and log info</span>
<span class="term-fg32">+	parentTime := time.Unix(int64(bc.CurrentBlock().Time), 0)</span>
<span class="term-fg32">+	headTime := time.Unix(int64(block.Time()), 0)</span>
<span class="term-fg32">+	blockPeriod := headTime.Sub(parentTime)</span>
<span class="term-fg32">+	blockPeriodTimer.Update(blockPeriod)</span>
<span class="term-fg32">+	log.Info(&quot;Writing block and setting head&quot;, &quot;period&quot;, blockPeriod.Milliseconds(), &quot;number&quot;, block.Number(), &quot;hash&quot;, block.Hash())</span>
 	return bc.writeBlockAndSetHead(block, receipts, logs, state, emitHeadEvent)
 }
&nbsp;
<span class="term-fg36">@@ -1484,6 +1498,7 @@</span> 		}
 	} else {
 		bc.chainSideFeed.Send(ChainSideEvent{Block: block})
 	}
<span class="term-fg32">+</span>
 	return status, nil
 }
&nbsp;
<span class="term-fg36">@@ -1822,6 +1837,9 @@</span>
 		blockWriteTimer.Update(time.Since(wstart) - statedb.AccountCommits - statedb.StorageCommits - statedb.SnapshotCommits - statedb.TrieDBCommits)
 		blockInsertTimer.UpdateSince(start)
&nbsp;
<span class="term-fg32">+		&#47;&#47; CHANGE(immutable): Record block metrics</span>
<span class="term-fg32">+		blockPropagationTimer.Update(time.Since(time.Unix(int64(block.Time()), 0)))</span>
<span class="term-fg32">+</span>
 		&#47;&#47; Report the import stats before returning the various results
 		stats.processed++
 		stats.usedGas += usedGas
<span class="term-fg36">@@ -2104,6 +2122,22 @@</span> &#47;&#47; potential missing transactions and post an event about them.
 &#47;&#47; Note the new head block won&#39;t be processed here, callers need to handle it
 &#47;&#47; externally.
 func (bc *BlockChain) reorg(oldHead *types.Header, newHead *types.Block) error {
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Add logging for &#39;potential&#39; reorgs</span>
<span class="term-fg32">+	if bc.chainConfig.IsReorgBlocked {</span>
<span class="term-fg32">+		&#47;&#47; This is not necessarily a reorg. It could be a future block that does not cause our old head to be reverted</span>
<span class="term-fg32">+		&#47;&#47; We track it for visibility. This is a path that often occurs when a node is syncing.</span>
<span class="term-fg32">+		&#47;&#47; An example such chain is as follows</span>
<span class="term-fg32">+		&#47;&#47; Old Chain: A -&gt; B -&gt; C -&gt; D</span>
<span class="term-fg32">+		&#47;&#47; NewChain:  A -&gt; B -&gt; C -&gt; D -&gt; E -&gt; F</span>
<span class="term-fg32">+		&#47;&#47; If such a chain is observed, it is considered a &#39;potential reorg&#39;</span>
<span class="term-fg32">+		log.Info(&quot;Potential Reorg detected&quot;,</span>
<span class="term-fg32">+			&quot;oldHead.Number&quot;, oldHead.Number.String(),</span>
<span class="term-fg32">+			&quot;newHead.Number&quot;, newHead.Number().String(),</span>
<span class="term-fg32">+			&quot;oldHead.Hash&quot;, oldHead.Hash().String(),</span>
<span class="term-fg32">+			&quot;newHead.Hash&quot;, newHead.Hash().String(),</span>
<span class="term-fg32">+			&quot;newHead.ParentHash&quot;, newHead.ParentHash().String())</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 	var (
 		newChain    types.Blocks
 		oldChain    types.Blocks
<span class="term-fg36">@@ -2139,6 +2173,30 @@</span> 	}
 	if newBlock == nil {
 		return errInvalidNewChain
 	}
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Logic to check if this is a reorg attempt</span>
<span class="term-fg32">+	if bc.chainConfig.IsReorgBlocked {</span>
<span class="term-fg32">+		&#47;&#47; We allow &#39;forward-reorgs&#39;, i.e. where blocks from the further in the future can be appended</span>
<span class="term-fg32">+		&#47;&#47; to the chain, even if they don&#39;t follow the oldChain directly.</span>
<span class="term-fg32">+		&#47;&#47; By this point, we have reduced the lengths of the chains to a common ancestor. If they don&#39;t have a</span>
<span class="term-fg32">+		&#47;&#47; common ancestor after reducing to the same length, it means we are attempting to remove blocks from</span>
<span class="term-fg32">+		&#47;&#47; the original chain which is not allowed.</span>
<span class="term-fg32">+		&#47;&#47; An example chain that has reached this point is:</span>
<span class="term-fg32">+		&#47;&#47; oldChain: A -&gt; B -&gt; C -&gt; D</span>
<span class="term-fg32">+		&#47;&#47; newChain: A -&gt; B -&gt; C -&gt; E</span>
<span class="term-fg32">+		if oldBlock.Hash() != newBlock.Hash() {</span>
<span class="term-fg32">+			&#47;&#47; Mark as a reorg for metrics and alerting. Although a reorg was technically prevented,</span>
<span class="term-fg32">+			log.Error(&quot;Reorg detected&quot;,</span>
<span class="term-fg32">+				&quot;oldHead.Number&quot;, oldHead.Number.String(),</span>
<span class="term-fg32">+				&quot;newHead.Number&quot;, newHead.Number().String(),</span>
<span class="term-fg32">+				&quot;oldHead.Hash&quot;, oldHead.Hash().String(),</span>
<span class="term-fg32">+				&quot;newHead.Hash&quot;, newHead.Hash().String(),</span>
<span class="term-fg32">+				&quot;newHead.ParentHash&quot;, newHead.ParentHash().String())</span>
<span class="term-fg32">+			blockReorgMeter.Mark(1)</span>
<span class="term-fg32">+			return ErrReorgAttempted</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 	&#47;&#47; Both sides of the reorg are at the same number, reduce both until the common
 	&#47;&#47; ancestor is found
 	for {</div>
    </div>

            
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-fad50bf6615416a15dda3728"role="button" aria-expanded="false" aria-controls="id-fad50bf6615416a15dda3728">
        
            <div class="col-12 col-md-12 col-lg-6 col-xl-6 text-start"><h4>Immutable Genesis / Forks</h4></div>
        

        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2">
            <div class="row line-stat">
                
                
            </div>
        </div>
        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2 ">
            <div class="row line-stat">
                
                    <div class="text-end"><span class="text-success">+57</span></div>
                    <div class="text-start"><span class="text-danger">-4</span></div>
                
                
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-fad50bf6615416a15dda3728">
        <div></div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-0b8266defac1ef7bcc9fe394" role="button"
                       aria-expanded="false" aria-controls="id-0b8266defac1ef7bcc9fe394">
                        <code>core/evm.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/core/evm.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/core/evm.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+6</span></div>
                            <div class="text-start"><span class="text-danger">-2</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-0b8266defac1ef7bcc9fe394"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;evm.go immutable-geth&#47;core&#47;evm.go</span>
<span class="term-fg1">index 73f6d7bc20a09ad5e2e9ae4f4a81018a5efe1444..726fadaa0a7924030f354b92b8c1837f867424b3 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;evm.go</span>
<span class="term-fg1">+++ immutable-geth&#47;core&#47;evm.go</span>
<span class="term-fg36">@@ -24,6 +24,7 @@</span> 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;consensus&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;consensus&#47;misc&#47;eip4844&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;vm&quot;
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;params&quot;</span>
 	&quot;github.com&#47;holiman&#47;uint256&quot;
 )
&nbsp;
<span class="term-fg36">@@ -37,8 +38,9 @@</span> 	&#47;&#47; GetHeader returns the header corresponding to the hash&#47;number argument pair.
 	GetHeader(common.Hash, uint64) *types.Header
 }
&nbsp;
<span class="term-fg32">+&#47;&#47; CHANGE(immutable): Pass in ChainConfig to NewEVMBlockContext to allow determination that network is Immutable zkEVM</span>
 &#47;&#47; NewEVMBlockContext creates a new context for use in the EVM.
<span class="term-fg31">-func NewEVMBlockContext(header *types.Header, chain ChainContext, author *common.Address) vm.BlockContext {</span>
<span class="term-fg32">+func NewEVMBlockContext(header *types.Header, chain ChainContext, author *common.Address, params *params.ChainConfig) vm.BlockContext {</span>
 	var (
 		beneficiary common.Address
 		baseFee     *big.Int
<span class="term-fg36">@@ -58,7 +60,9 @@</span> 	}
 	if header.ExcessBlobGas != nil {
 		blobBaseFee = eip4844.CalcBlobFee(*header.ExcessBlobGas)
 	}
<span class="term-fg31">-	if header.Difficulty.Cmp(common.Big0) == 0 {</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Enable EIP-4399 based on prevrandao fork</span>
<span class="term-fg32">+	if params.IsImmutableZKEVMPrevrandao(header.Time) ||</span>
<span class="term-fg32">+		header.Difficulty.Cmp(common.Big0) == 0 {</span>
 		random = &amp;header.MixDigest
 	}
 	return vm.BlockContext{</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-866708c685f6a817e09db13b" role="button"
                       aria-expanded="false" aria-controls="id-866708c685f6a817e09db13b">
                        <code>core/forkid/forkid.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/core/forkid/forkid.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/core/forkid/forkid.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+1</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-866708c685f6a817e09db13b"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;forkid&#47;forkid.go immutable-geth&#47;core&#47;forkid&#47;forkid.go</span>
<span class="term-fg1">index 76825d3befc16f8fab6f38560df5c376f1509017..3fe6a04c1a2d5626d5925290fff0f2b373ce63fb 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;forkid&#47;forkid.go</span>
<span class="term-fg1">+++ immutable-geth&#47;core&#47;forkid&#47;forkid.go</span>
<span class="term-fg36">@@ -293,5 +293,6 @@</span> 	&#47;&#47; Skip any forks before genesis.
 	for len(forksByTime) &gt; 0 &amp;&amp; forksByTime[0] &lt;= genesis {
 		forksByTime = forksByTime[1:]
 	}
<span class="term-fg32">+</span>
 	return forksByBlock, forksByTime
 }</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-e58c4df5ad33f4261ada4bde" role="button"
                       aria-expanded="false" aria-controls="id-e58c4df5ad33f4261ada4bde">
                        <code>core/gen_genesis.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/core/gen_genesis.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/core/gen_genesis.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+2</span></div>
                            <div class="text-start"><span class="text-danger">-2</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-e58c4df5ad33f4261ada4bde"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;gen_genesis.go immutable-geth&#47;core&#47;gen_genesis.go</span>
<span class="term-fg1">index b8acf9df7c91cc03c8cfda2fcba226b4f8d365be..f59a0b53004574f5449ad651441536fa5928a6d3 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;gen_genesis.go</span>
<span class="term-fg1">+++ immutable-geth&#47;core&#47;gen_genesis.go</span>
<span class="term-fg36">@@ -27,7 +27,7 @@</span> 		GasLimit      math.HexOrDecimal64                               `json:&quot;gasLimit&quot;   gencodec:&quot;required&quot;`
 		Difficulty    *math.HexOrDecimal256                             `json:&quot;difficulty&quot; gencodec:&quot;required&quot;`
 		Mixhash       common.Hash                                       `json:&quot;mixHash&quot;`
 		Coinbase      common.Address                                    `json:&quot;coinbase&quot;`
<span class="term-fg31">-		Alloc         map[common.UnprefixedAddress]types.Account `json:&quot;alloc&quot;      gencodec:&quot;required&quot;`</span>
<span class="term-fg32">+		Alloc         map[common.UnprefixedAddress]types.Account 		`json:&quot;alloc&quot;      gencodec:&quot;required&quot;`</span>
 		Number        math.HexOrDecimal64                               `json:&quot;number&quot;`
 		GasUsed       math.HexOrDecimal64                               `json:&quot;gasUsed&quot;`
 		ParentHash    common.Hash                                       `json:&quot;parentHash&quot;`
<span class="term-fg36">@@ -70,7 +70,7 @@</span> 		GasLimit      *math.HexOrDecimal64                              `json:&quot;gasLimit&quot;   gencodec:&quot;required&quot;`
 		Difficulty    *math.HexOrDecimal256                             `json:&quot;difficulty&quot; gencodec:&quot;required&quot;`
 		Mixhash       *common.Hash                                      `json:&quot;mixHash&quot;`
 		Coinbase      *common.Address                                   `json:&quot;coinbase&quot;`
<span class="term-fg31">-		Alloc         map[common.UnprefixedAddress]types.Account `json:&quot;alloc&quot;      gencodec:&quot;required&quot;`</span>
<span class="term-fg32">+		Alloc         map[common.UnprefixedAddress]types.Account 		`json:&quot;alloc&quot;      gencodec:&quot;required&quot;`</span>
 		Number        *math.HexOrDecimal64                              `json:&quot;number&quot;`
 		GasUsed       *math.HexOrDecimal64                              `json:&quot;gasUsed&quot;`
 		ParentHash    *common.Hash                                      `json:&quot;parentHash&quot;`</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-f387050efec72b5deee5d904" role="button"
                       aria-expanded="false" aria-controls="id-f387050efec72b5deee5d904">
                        <code>core/genesis.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/core/genesis.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/core/genesis.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+11</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-f387050efec72b5deee5d904"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;genesis.go immutable-geth&#47;core&#47;genesis.go</span>
<span class="term-fg1">index 54570ac61e4c7d3de57a00ad9e34d22aa02a18a3..f0fa9e3f424dcb1ee54c7be5c864c258713dd5e0 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;genesis.go</span>
<span class="term-fg1">+++ immutable-geth&#47;core&#47;genesis.go</span>
<span class="term-fg36">@@ -210,6 +210,9 @@</span> &#47;&#47; ChainOverrides contains the changes to chain config.
 type ChainOverrides struct {
 	OverrideCancun *uint64
 	OverrideVerkle *uint64
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Add Prevrandao and Shanghai overrides</span>
<span class="term-fg32">+	OverridePrevrandao *uint64</span>
<span class="term-fg32">+	OverrideShanghai   *uint64</span>
 }
&nbsp;
 &#47;&#47; SetupGenesisBlock writes or updates the genesis block in db.
<span class="term-fg36">@@ -240,6 +243,14 @@</span> 				config.CancunTime = overrides.OverrideCancun
 			}
 			if overrides != nil &amp;&amp; overrides.OverrideVerkle != nil {
 				config.VerkleTime = overrides.OverrideVerkle
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			&#47;&#47; CHANGE(immutable): Add Prevrandao override</span>
<span class="term-fg32">+			if overrides != nil &amp;&amp; overrides.OverridePrevrandao != nil {</span>
<span class="term-fg32">+				config.PrevrandaoTime = overrides.OverridePrevrandao</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			&#47;&#47; CHANGE(immutable): Add Shanghai override</span>
<span class="term-fg32">+			if overrides != nil &amp;&amp; overrides.OverrideShanghai != nil {</span>
<span class="term-fg32">+				config.ShanghaiTime = overrides.OverrideShanghai</span>
 			}
 		}
 	}</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-8e04b2427930e5c9b21f37dd" role="button"
                       aria-expanded="false" aria-controls="id-8e04b2427930e5c9b21f37dd">
                        <code>core/immutable_genesis.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/core/immutable_genesis.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+37</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-8e04b2427930e5c9b21f37dd"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;immutable_genesis.go immutable-geth&#47;core&#47;immutable_genesis.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..824c83ab7053f6a48b82933c2b23f5300a405629</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;core&#47;immutable_genesis.go</span>
<span class="term-fg36">@@ -0,0 +1,37 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package core</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;encoding&#47;json&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;settings&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ImmutableGenesisBlock returns the immutable genesis block for the specified network (mainnet, testnet, devnet).</span>
<span class="term-fg32">+func ImmutableGenesisBlock(network string) *Genesis {</span>
<span class="term-fg32">+	net, err := settings.NewNetwork(network)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		panic(err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Unmarshal the JSON string into a Genesis struct</span>
<span class="term-fg32">+	genesis := &amp;Genesis{}</span>
<span class="term-fg32">+	if err := json.Unmarshal([]byte(net.GenesisJSON()), genesis); err != nil {</span>
<span class="term-fg32">+		panic(err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return genesis</span>
<span class="term-fg32">+}</span></div>
    </div>

            
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-abedf634c17bf37ebce92554"role="button" aria-expanded="false" aria-controls="id-abedf634c17bf37ebce92554">
        
            <div class="col-12 col-md-12 col-lg-6 col-xl-6 text-start"><h4>Blobs</h4></div>
        

        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2">
            <div class="row line-stat">
                
                
            </div>
        </div>
        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2 ">
            <div class="row line-stat">
                
                    <div class="text-end"><span class="text-success">+34</span></div>
                    <div class="text-start"><span class="text-danger">-3</span></div>
                
                
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-abedf634c17bf37ebce92554">
        <div></div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-f02edc91e77163c3e5045ea0" role="button"
                       aria-expanded="false" aria-controls="id-f02edc91e77163c3e5045ea0">
                        <code>core/state_processor.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/core/state_processor.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/core/state_processor.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+6</span></div>
                            <div class="text-start"><span class="text-danger">-2</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-f02edc91e77163c3e5045ea0"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;state_processor.go immutable-geth&#47;core&#47;state_processor.go</span>
<span class="term-fg1">index 9e32ab4e569600636e88bd8c6579771bfdb18733..613a20d696611a634f0571c3c5c7cb1a1d1fa3d7 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;state_processor.go</span>
<span class="term-fg1">+++ immutable-geth&#47;core&#47;state_processor.go</span>
<span class="term-fg36">@@ -72,7 +72,7 @@</span> 	if p.config.DAOForkSupport &amp;&amp; p.config.DAOForkBlock != nil &amp;&amp; p.config.DAOForkBlock.Cmp(block.Number()) == 0 {
 		misc.ApplyDAOHardFork(statedb)
 	}
 	var (
<span class="term-fg31">-		context = NewEVMBlockContext(header, p.bc, nil)</span>
<span class="term-fg32">+		context = NewEVMBlockContext(header, p.bc, nil, p.config)</span>
 		vmenv   = vm.NewEVM(context, vm.TxContext{}, statedb, p.config, cfg)
 		signer  = types.MakeSigner(p.config, header.Number, header.Time)
 	)
<span class="term-fg36">@@ -136,6 +136,10 @@</span> 	receipt.TxHash = tx.Hash()
 	receipt.GasUsed = result.UsedGas
&nbsp;
 	if tx.Type() == types.BlobTxType {
<span class="term-fg32">+		&#47;&#47; CHANGE(immutable): Disable blob transactions as it is not yet a feature of Immutable zkEVM.</span>
<span class="term-fg32">+		if config.IsImmutableZKEVM() {</span>
<span class="term-fg32">+			return nil, errors.New(&quot;blob transactions are not supported&quot;)</span>
<span class="term-fg32">+		}</span>
 		receipt.BlobGasUsed = uint64(len(tx.BlobHashes()) * params.BlobTxBlobGasPerBlob)
 		receipt.BlobGasPrice = evm.Context.BlobBaseFee
 	}
<span class="term-fg36">@@ -164,7 +168,7 @@</span> 	if err != nil {
 		return nil, err
 	}
 	&#47;&#47; Create a new context to be used in the EVM environment
<span class="term-fg31">-	blockContext := NewEVMBlockContext(header, bc, author)</span>
<span class="term-fg32">+	blockContext := NewEVMBlockContext(header, bc, author, config)</span>
 	txContext := NewEVMTxContext(msg)
 	vmenv := vm.NewEVM(blockContext, txContext, statedb, config, cfg)
 	return applyTransaction(msg, config, gp, statedb, header.Number, header.Hash(), tx, usedGas, vmenv)</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-2b41fc421d66943e74cd4991" role="button"
                       aria-expanded="false" aria-controls="id-2b41fc421d66943e74cd4991">
                        <code>core/txpool/blobpool/blobpool.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/core/txpool/blobpool/blobpool.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/core/txpool/blobpool/blobpool.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+9</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-2b41fc421d66943e74cd4991"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;txpool&#47;blobpool&#47;blobpool.go immutable-geth&#47;core&#47;txpool&#47;blobpool&#47;blobpool.go</span>
<span class="term-fg1">index 3ed698c1b18fcc4bfa0d8622208917cdd7c1ad33..f219586f4541d7fb4bbee2a0e31a8d3f9ef40071 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;txpool&#47;blobpool&#47;blobpool.go</span>
<span class="term-fg1">+++ immutable-geth&#47;core&#47;txpool&#47;blobpool&#47;blobpool.go</span>
<span class="term-fg36">@@ -339,6 +339,15 @@</span> func (p *BlobPool) Filter(tx *types.Transaction) bool {
 	return tx.Type() == types.BlobTxType
 }
&nbsp;
<span class="term-fg32">+&#47;&#47; FilterWithError returns error or nil whether the given transaction can be consumed by the blob pool.</span>
<span class="term-fg32">+&#47;&#47; CHANGE(immutable): extended filter to use filter with error function to allow access control per tx</span>
<span class="term-fg32">+func (p *BlobPool) FilterWithError(tx *types.Transaction) error {</span>
<span class="term-fg32">+	if !p.Filter(tx) {</span>
<span class="term-fg32">+		return core.ErrTxTypeNotSupported</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
 &#47;&#47; Init sets the gas price needed to keep a transaction in the pool and the chain
 &#47;&#47; head to allow balance &#47; nonce checks. The transaction journal will be loaded
 &#47;&#47; from disk and filtered based on the provided starting settings.</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-cbc4ad34097e892e477c43b9" role="button"
                       aria-expanded="false" aria-controls="id-cbc4ad34097e892e477c43b9">
                        <code>core/txpool/blobpool/limbo.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/core/txpool/blobpool/limbo.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/core/txpool/blobpool/limbo.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+4</span></div>
                            <div class="text-start"><span class="text-danger">-1</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-cbc4ad34097e892e477c43b9"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;txpool&#47;blobpool&#47;limbo.go immutable-geth&#47;core&#47;txpool&#47;blobpool&#47;limbo.go</span>
<span class="term-fg1">index ec754f6894ec5565a0eea65e23312ab5258ba191..602e57afcbb06ffb6f2006408aaab42add76d49d 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;txpool&#47;blobpool&#47;limbo.go</span>
<span class="term-fg1">+++ immutable-geth&#47;core&#47;txpool&#47;blobpool&#47;limbo.go</span>
<span class="term-fg36">@@ -116,9 +116,12 @@</span> func (l *limbo) finalize(final *types.Header) {
 	&#47;&#47; Just in case there&#39;s no final block yet (network not yet merged, weird
 	&#47;&#47; restart, sethead, etc), fail gracefully.
 	if final == nil {
<span class="term-fg31">-		log.Error(&quot;Nil finalized block cannot evict old blobs&quot;)</span>
<span class="term-fg32">+		&#47;&#47; CHANGE(immutable): Decrease log severity because our BAU involves nil final header.</span>
<span class="term-fg32">+		log.Info(&quot;Nil finalized block cannot evict old blobs&quot;)</span>
 		return
 	}
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Additional log line.</span>
<span class="term-fg32">+	log.Warn(&quot;Evicting old blobs&quot;, &quot;block&quot;, *final)</span>
 	for block, ids := range l.groups {
 		if block &gt; final.Number.Uint64() {
 			continue</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-08896fd6b3b4d905cbfdcc41" role="button"
                       aria-expanded="false" aria-controls="id-08896fd6b3b4d905cbfdcc41">
                        <code>core/txpool/validation.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/core/txpool/validation.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/core/txpool/validation.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+15</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-08896fd6b3b4d905cbfdcc41"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;txpool&#47;validation.go immutable-geth&#47;core&#47;txpool&#47;validation.go</span>
<span class="term-fg1">index 8913859e846e73c032120dd9110791e6a1954d9d..520556027323fbe0e499925b55d9a165782979f9 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;txpool&#47;validation.go</span>
<span class="term-fg1">+++ immutable-geth&#47;core&#47;txpool&#47;validation.go</span>
<span class="term-fg36">@@ -20,6 +20,7 @@</span> import (
 	&quot;crypto&#47;sha256&quot;
 	&quot;fmt&quot;
 	&quot;math&#47;big&quot;
<span class="term-fg32">+	&quot;os&quot;</span>
&nbsp;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&quot;
<span class="term-fg36">@@ -71,6 +72,10 @@</span> 		return fmt.Errorf(&quot;%w: type %d rejected, pool not yet in London&quot;, core.ErrTxTypeNotSupported, tx.Type())
 	}
 	if !opts.Config.IsCancun(head.Number, head.Time) &amp;&amp; tx.Type() == types.BlobTxType {
 		return fmt.Errorf(&quot;%w: type %d rejected, pool not yet in Cancun&quot;, core.ErrTxTypeNotSupported, tx.Type())
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Reject blob transactions</span>
<span class="term-fg32">+	if opts.Config.IsImmutableZKEVM() &amp;&amp; tx.Type() == types.BlobTxType {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;%w: type %d rejected, blob transactions not supported&quot;, core.ErrTxTypeNotSupported, tx.Type())</span>
 	}
 	&#47;&#47; Check whether the init code size has been exceeded
 	if opts.Config.IsShanghai(head.Number, head.Time) &amp;&amp; tx.To() == nil &amp;&amp; len(tx.Data()) &gt; params.MaxInitCodeSize {
<span class="term-fg36">@@ -247,3 +252,13 @@</span> 		}
 	}
 	return nil
 }
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; EnsureFileCanBeRead checks if a file exists at the specified path</span>
<span class="term-fg32">+&#47;&#47; CHANGE(immutable): utility function to help check for file existence</span>
<span class="term-fg32">+func EnsureFileCanBeRead(filePath string) error {</span>
<span class="term-fg32">+	_, err := os.Stat(filePath)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;File couldn&#39;t be read: %s, %w&quot;, filePath, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return nil</span>
<span class="term-fg32">+}</span></div>
    </div>

            
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-0bc5532915ed43e8f70ed272"role="button" aria-expanded="false" aria-controls="id-0bc5532915ed43e8f70ed272">
        
            <div class="col-12 col-md-12 col-lg-6 col-xl-6 text-start"><h4>ACL</h4></div>
        

        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2">
            <div class="row line-stat">
                
                
            </div>
        </div>
        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2 ">
            <div class="row line-stat">
                
                    <div class="text-end"><span class="text-success">+418</span></div>
                    <div class="text-start"><span class="text-danger">-16</span></div>
                
                
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-0bc5532915ed43e8f70ed272">
        <div></div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-c2e0cfb481822dfa27ec3ebe" role="button"
                       aria-expanded="false" aria-controls="id-c2e0cfb481822dfa27ec3ebe">
                        <code>core/txpool/errors.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/core/txpool/errors.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/core/txpool/errors.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+4</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-c2e0cfb481822dfa27ec3ebe"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;txpool&#47;errors.go immutable-geth&#47;core&#47;txpool&#47;errors.go</span>
<span class="term-fg1">index 3a6a913976cacee42c29803309ae6e803a1cbfa8..61c5489caff19e6f44eb31eb3a0c23e925e7c1c7 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;txpool&#47;errors.go</span>
<span class="term-fg1">+++ immutable-geth&#47;core&#47;txpool&#47;errors.go</span>
<span class="term-fg36">@@ -55,6 +55,10 @@</span> 	&#47;&#47; ErrFutureReplacePending is returned if a future transaction replaces a pending
 	&#47;&#47; one. Future transactions should only be able to replace other future transactions.
 	ErrFutureReplacePending = errors.New(&quot;future transaction tries to replace pending&quot;)
&nbsp;
<span class="term-fg32">+	&#47;&#47; ErrTxIsUnauthorized indicates that the sender is not authorized to submit transaction</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): ErrTxIsUnauthorized error for transactions that are blocked&#47;filtered out</span>
<span class="term-fg32">+	ErrTxIsUnauthorized = errors.New(&quot;transaction is not allowed, sender is not authorized to perform transaction&quot;)</span>
<span class="term-fg32">+</span>
 	&#47;&#47; ErrAlreadyReserved is returned if the sender address has a pending transaction
 	&#47;&#47; in a different subpool. For example, this error is returned in response to any
 	&#47;&#47; input transaction of non-blob type when a blob transaction from this sender</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-9ebb6dc17c5dc3ec723ad10d" role="button"
                       aria-expanded="false" aria-controls="id-9ebb6dc17c5dc3ec723ad10d">
                        <code>core/txpool/immutable/accesscontrol/address_provider.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/core/txpool/immutable/accesscontrol/address_provider.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+32</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-9ebb6dc17c5dc3ec723ad10d"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;txpool&#47;immutable&#47;accesscontrol&#47;address_provider.go immutable-geth&#47;core&#47;txpool&#47;immutable&#47;accesscontrol&#47;address_provider.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..618dc70fca1a795bf7e615aef37f2f09efd4dd7b</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;core&#47;txpool&#47;immutable&#47;accesscontrol&#47;address_provider.go</span>
<span class="term-fg36">@@ -0,0 +1,32 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package accesscontrol</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import &quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; AddressProvider is an interface for providing a list of Ethereum addresses.</span>
<span class="term-fg32">+&#47;&#47; Implementations of this interface should return a map where the keys are</span>
<span class="term-fg32">+&#47;&#47; Ethereum addresses (common.Address) and the values are of an empty struct</span>
<span class="term-fg32">+&#47;&#47; (struct{}{}).</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; This interface is typically used for providing a list of</span>
<span class="term-fg32">+&#47;&#47; addresses that are used for access control purposes, such as blocklists</span>
<span class="term-fg32">+&#47;&#47; or allowlists.</span>
<span class="term-fg32">+type AddressProvider interface {</span>
<span class="term-fg32">+	&#47;&#47; Provide a list of hex addressses</span>
<span class="term-fg32">+	Provide() map[common.Address]struct{}</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-95dfc424298852c347f9616d" role="button"
                       aria-expanded="false" aria-controls="id-95dfc424298852c347f9616d">
                        <code>core/txpool/immutable/accesscontrol/contract_creation_controller.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/core/txpool/immutable/accesscontrol/contract_creation_controller.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+77</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-95dfc424298852c347f9616d"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;txpool&#47;immutable&#47;accesscontrol&#47;contract_creation_controller.go immutable-geth&#47;core&#47;txpool&#47;immutable&#47;accesscontrol&#47;contract_creation_controller.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..a1d5651834b526bc4f327f9f7597d7a880869399</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;core&#47;txpool&#47;immutable&#47;accesscontrol&#47;contract_creation_controller.go</span>
<span class="term-fg36">@@ -0,0 +1,77 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package accesscontrol</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;fmt&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ContractCreation is a an access controller that specifically targets transactions which is a contract creation transactions.</span>
<span class="term-fg32">+type ContractCreation struct {</span>
<span class="term-fg32">+	&#47;&#47; Map of filename to address provider</span>
<span class="term-fg32">+	providers map[string]AddressProvider</span>
<span class="term-fg32">+	&#47;&#47; isAnAllowList indicates that it is an allowlist otherwise the inverse is a blocklist</span>
<span class="term-fg32">+	isAnAllowList bool</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewContractCreation initializes an access controller that specifically controls contract creation txs.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Parameters:</span>
<span class="term-fg32">+&#47;&#47;   - filePaths: A slice of strings containing file paths to blocklist</span>
<span class="term-fg32">+&#47;&#47;     files, usually an sdn file that comes in the format of xml</span>
<span class="term-fg32">+&#47;&#47;   - isAnAllowList: Indicates if the controller is an allow controller or</span>
<span class="term-fg32">+&#47;&#47;     a block controller.</span>
<span class="term-fg32">+func NewContractCreation(filePaths []string, isAnAllowList bool) (*ContractCreation, error) {</span>
<span class="term-fg32">+	providers := make(map[string]AddressProvider, len(filePaths))</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	for _, filename := range filePaths {</span>
<span class="term-fg32">+		sdnProvider, err := newCSVProvider(filename)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return nil, fmt.Errorf(&quot;couldn&#39;t initialize access controller provider: %w&quot;, err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		providers[filename] = sdnProvider</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return &amp;ContractCreation{</span>
<span class="term-fg32">+		providers:     providers,</span>
<span class="term-fg32">+		isAnAllowList: isAnAllowList,</span>
<span class="term-fg32">+	}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (c *ContractCreation) IsBlocklist() bool {</span>
<span class="term-fg32">+	return !c.isAnAllowList</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (c *ContractCreation) IsAllowed(addr common.Address, tx *types.Transaction) bool {</span>
<span class="term-fg32">+	&#47;&#47; Only control contract creation transactions,</span>
<span class="term-fg32">+	&#47;&#47; By definition contract creation has its tx.To() as nil.</span>
<span class="term-fg32">+	if tx.To() != nil {</span>
<span class="term-fg32">+		return true</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	for _, list := range c.providers {</span>
<span class="term-fg32">+		addresses := list.Provide()</span>
<span class="term-fg32">+		if _, exist := addresses[addr]; exist {</span>
<span class="term-fg32">+			return c.isAnAllowList</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; If the address is not in the list and it&#39;s not an allow list, return true</span>
<span class="term-fg32">+	return !c.isAnAllowList</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-64901e42e0ee5a2979f96e81" role="button"
                       aria-expanded="false" aria-controls="id-64901e42e0ee5a2979f96e81">
                        <code>core/txpool/immutable/accesscontrol/controller.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/core/txpool/immutable/accesscontrol/controller.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+76</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-64901e42e0ee5a2979f96e81"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;txpool&#47;immutable&#47;accesscontrol&#47;controller.go immutable-geth&#47;core&#47;txpool&#47;immutable&#47;accesscontrol&#47;controller.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..10e0e6ca44e4e78e64a22e896652dd41a524dfa3</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;core&#47;txpool&#47;immutable&#47;accesscontrol&#47;controller.go</span>
<span class="term-fg36">@@ -0,0 +1,76 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package accesscontrol</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;fmt&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+type Controller struct {</span>
<span class="term-fg32">+	&#47;&#47; Map of filename to address provider</span>
<span class="term-fg32">+	providers map[string]AddressProvider</span>
<span class="term-fg32">+	&#47;&#47; isAnAllowList indicates that it is an allowlist otherwise the inverse is a blocklist</span>
<span class="term-fg32">+	isAnAllowList bool</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; New initializes an access controller with blocklists specified by file paths.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Parameters:</span>
<span class="term-fg32">+&#47;&#47;   - filePaths: A slice of strings containing file paths to blocklist</span>
<span class="term-fg32">+&#47;&#47;     files, usually an sdn file that comes in the format of txt as comma separated values</span>
<span class="term-fg32">+&#47;&#47;   - isAnAllowList: Indicates if the controller is an allow controller or</span>
<span class="term-fg32">+&#47;&#47;     a block controller.</span>
<span class="term-fg32">+func New(filePaths []string, isAnAllowList bool) (*Controller, error) {</span>
<span class="term-fg32">+	providers := make(map[string]AddressProvider, len(filePaths))</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	for _, filename := range filePaths {</span>
<span class="term-fg32">+		csvProvider, err := newCSVProvider(filename)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return nil, fmt.Errorf(&quot;couldn&#39;t initialize access controller provider: %w&quot;, err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		providers[filename] = csvProvider</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return &amp;Controller{</span>
<span class="term-fg32">+		providers:     providers,</span>
<span class="term-fg32">+		isAnAllowList: isAnAllowList,</span>
<span class="term-fg32">+	}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (c *Controller) IsBlocklist() bool {</span>
<span class="term-fg32">+	return !c.isAnAllowList</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (c *Controller) IsAllowed(addr common.Address, tx *types.Transaction) bool {</span>
<span class="term-fg32">+	for _, list := range c.providers {</span>
<span class="term-fg32">+		addresses := list.Provide()</span>
<span class="term-fg32">+		if _, exist := addresses[addr]; exist {</span>
<span class="term-fg32">+			return c.isAnAllowList</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if c.IsBlocklist() &amp;&amp; tx.To() != nil {</span>
<span class="term-fg32">+			if _, exist := addresses[*tx.To()]; exist {</span>
<span class="term-fg32">+				return c.isAnAllowList</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; If the address is not in the list and it&#39;s not an allow list, return true</span>
<span class="term-fg32">+	return !c.isAnAllowList</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-83004f6f8566b8c1f7489a51" role="button"
                       aria-expanded="false" aria-controls="id-83004f6f8566b8c1f7489a51">
                        <code>core/txpool/immutable/accesscontrol/sdn_provider.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/core/txpool/immutable/accesscontrol/sdn_provider.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+75</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-83004f6f8566b8c1f7489a51"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;txpool&#47;immutable&#47;accesscontrol&#47;sdn_provider.go immutable-geth&#47;core&#47;txpool&#47;immutable&#47;accesscontrol&#47;sdn_provider.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..83c583b4cbf6abd83ed82e97553f5c818a9284c6</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;core&#47;txpool&#47;immutable&#47;accesscontrol&#47;sdn_provider.go</span>
<span class="term-fg36">@@ -0,0 +1,75 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package accesscontrol</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;errors&quot;</span>
<span class="term-fg32">+	&quot;os&quot;</span>
<span class="term-fg32">+	&quot;strings&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;log&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+type CSVProvider struct {</span>
<span class="term-fg32">+	filePath string</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Contains a set of blockchain addresses, struct{} is used here as value to optimize memory footprint</span>
<span class="term-fg32">+	addresses map[common.Address]struct{}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func newCSVProvider(filePath string) (*CSVProvider, error) {</span>
<span class="term-fg32">+	addresses, err := load(filePath)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return &amp;CSVProvider{</span>
<span class="term-fg32">+		filePath:  filePath,</span>
<span class="term-fg32">+		addresses: addresses,</span>
<span class="term-fg32">+	}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func load(filePath string) (map[common.Address]struct{}, error) {</span>
<span class="term-fg32">+	addresses := make(map[common.Address]struct{})</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	log.Info(&quot;Loading ACL file&quot;, &quot;filepath&quot;, filePath)</span>
<span class="term-fg32">+	byteValue, err := os.ReadFile(filePath)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	log.Info(&quot;Loaded ACL file&quot;, &quot;filepath&quot;, filePath, &quot;content&quot;, string(byteValue))</span>
<span class="term-fg32">+	&#47;&#47; Split the file content by comma to get individual Ethereum addresses</span>
<span class="term-fg32">+	ethAddresses := strings.Split(string(byteValue), &quot;,&quot;)</span>
<span class="term-fg32">+	for _, ethAddress := range ethAddresses {</span>
<span class="term-fg32">+		ethAddress = strings.TrimSpace(ethAddress) &#47;&#47; Just to be sure there&#39;s no leading or trailing whitespace</span>
<span class="term-fg32">+		if common.IsHexAddress(ethAddress) {</span>
<span class="term-fg32">+			addresses[common.HexToAddress(ethAddress)] = struct{}{}</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; if we can&#39;t parse any address, the file might be empty or corrupted</span>
<span class="term-fg32">+	if len(addresses) == 0 {</span>
<span class="term-fg32">+		return nil, errors.New(&quot;file is empty or does not contain any valid addresses&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return addresses, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (s *CSVProvider) Provide() map[common.Address]struct{} {</span>
<span class="term-fg32">+	return s.addresses</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-9f498d1a1f45f60a30669825" role="button"
                       aria-expanded="false" aria-controls="id-9f498d1a1f45f60a30669825">
                        <code>core/txpool/immutable_access_controller.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/core/txpool/immutable_access_controller.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+30</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-9f498d1a1f45f60a30669825"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;txpool&#47;immutable_access_controller.go immutable-geth&#47;core&#47;txpool&#47;immutable_access_controller.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..a09eb2cae4caecc0f5b89525cb7288cdc8f858d5</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;core&#47;txpool&#47;immutable_access_controller.go</span>
<span class="term-fg36">@@ -0,0 +1,30 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package txpool</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; AccessController defines access control for Ethereum addresses with relation to allowlists and blocklists.</span>
<span class="term-fg32">+type AccessController interface {</span>
<span class="term-fg32">+	&#47;&#47; IsAllowed returns a bool indicating whether an address is allowed to perform its corresponding transaction</span>
<span class="term-fg32">+	IsAllowed(sender common.Address, tx *types.Transaction) bool</span>
<span class="term-fg32">+	&#47;&#47; IsBlocklist returns a bool indicating whether the controller is a blocklist type or is an allowlist type</span>
<span class="term-fg32">+	IsBlocklist() bool</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-785703f8c3ef55d7a4d8081e" role="button"
                       aria-expanded="false" aria-controls="id-785703f8c3ef55d7a4d8081e">
                        <code>core/txpool/legacypool/legacypool.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/core/txpool/legacypool/legacypool.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/core/txpool/legacypool/legacypool.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+98</span></div>
                            <div class="text-start"><span class="text-danger">-6</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-785703f8c3ef55d7a4d8081e"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;txpool&#47;legacypool&#47;legacypool.go immutable-geth&#47;core&#47;txpool&#47;legacypool&#47;legacypool.go</span>
<span class="term-fg1">index 4e1d26acf4056712a3a4bff2f8bc796fc81f8759..8da35413a3d4352e18b31a8902820bbc895f0b91 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;txpool&#47;legacypool&#47;legacypool.go</span>
<span class="term-fg1">+++ immutable-geth&#47;core&#47;txpool&#47;legacypool&#47;legacypool.go</span>
<span class="term-fg36">@@ -32,6 +32,7 @@</span> 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;consensus&#47;misc&#47;eip1559&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;state&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;txpool&quot;
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;txpool&#47;immutable&#47;accesscontrol&quot;</span>
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;event&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;log&quot;
<span class="term-fg36">@@ -135,6 +136,9 @@</span> 	AccountQueue uint64 &#47;&#47; Maximum number of non-executable transaction slots permitted per account
 	GlobalQueue  uint64 &#47;&#47; Maximum number of non-executable transaction slots for all accounts
&nbsp;
 	Lifetime time.Duration &#47;&#47; Maximum amount of time non-executable transaction are queued
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Added access controllers filepaths for blocklist</span>
<span class="term-fg32">+	BlockListFilePaths []string `toml:&quot;,omitempty&quot;`</span>
 }
&nbsp;
 &#47;&#47; DefaultConfig contains the default configurations for the transaction pool.
<span class="term-fg36">@@ -151,6 +155,9 @@</span> 	AccountQueue: 64,
 	GlobalQueue:  1024,
&nbsp;
 	Lifetime: 3 * time.Hour,
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Added access controllers filepaths for blocklist</span>
<span class="term-fg32">+	BlockListFilePaths: []string{},</span>
 }
&nbsp;
 &#47;&#47; sanitize checks the provided user configurations and changes anything that&#39;s
<span class="term-fg36">@@ -189,6 +196,14 @@</span> 	if conf.Lifetime &lt; 1 {
 		log.Warn(&quot;Sanitizing invalid txpool lifetime&quot;, &quot;provided&quot;, conf.Lifetime, &quot;updated&quot;, DefaultConfig.Lifetime)
 		conf.Lifetime = DefaultConfig.Lifetime
 	}
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Ensure each file in BlockListFiles exists</span>
<span class="term-fg32">+	for _, filePath := range config.BlockListFilePaths {</span>
<span class="term-fg32">+		if err := txpool.EnsureFileCanBeRead(filePath); err != nil {</span>
<span class="term-fg32">+			log.Warn(&quot;Sanitizing invalid txpool block list filepaths&quot;, err.Error(), &quot;provided&quot;, conf.BlockListFilePaths, &quot;updated&quot;, DefaultConfig.BlockListFilePaths)</span>
<span class="term-fg32">+			conf.BlockListFilePaths = DefaultConfig.BlockListFilePaths</span>
<span class="term-fg32">+			break</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
 	return conf
 }
&nbsp;
<span class="term-fg36">@@ -231,6 +246,9 @@</span> 	wg              sync.WaitGroup &#47;&#47; tracks loop, scheduleReorgLoop
 	initDoneCh      chan struct{}  &#47;&#47; is closed once the pool is initialized (for tests)
&nbsp;
 	changesSinceReorg int &#47;&#47; A counter for how many drops we&#39;ve performed in-between reorg.
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Added a list of access controllers to legacy pool</span>
<span class="term-fg32">+	accessControllers []txpool.AccessController &#47;&#47; List of access controllers that determines whether a sender is allowed to perform a tx</span>
 }
&nbsp;
 type txpoolResetRequest struct {
<span class="term-fg36">@@ -259,6 +277,8 @@</span> 		queueTxEventCh:  make(chan *types.Transaction),
 		reorgDoneCh:     make(chan chan struct{}),
 		reorgShutdownCh: make(chan struct{}),
 		initDoneCh:      make(chan struct{}),
<span class="term-fg32">+		&#47;&#47; CHANGE(immutable): Added a list of access controllers to legacy pool</span>
<span class="term-fg32">+		accessControllers: []txpool.AccessController{},</span>
 	}
 	pool.locals = newAccountSet(pool.signer)
 	for _, addr := range config.Locals {
<span class="term-fg36">@@ -284,6 +304,34 @@</span> 		return false
 	}
 }
&nbsp;
<span class="term-fg32">+&#47;&#47; FilterWithError</span>
<span class="term-fg32">+&#47;&#47; CHANGE(immutable):</span>
<span class="term-fg32">+&#47;&#47; Exclude transactions that are not valid based on access control structure</span>
<span class="term-fg32">+func (pool *LegacyPool) FilterWithError(tx *types.Transaction) error {</span>
<span class="term-fg32">+	if !pool.Filter(tx) {</span>
<span class="term-fg32">+		return core.ErrTxTypeNotSupported</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	from, err := types.Sender(pool.signer, tx)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return txpool.ErrInvalidSender</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if len(pool.accessControllers) == 0 {</span>
<span class="term-fg32">+		&#47;&#47; No access controllers, allow the transaction to pass</span>
<span class="term-fg32">+		return nil</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Check for every access controllers that this transaction is allowed to go through</span>
<span class="term-fg32">+	for _, accessControl := range pool.accessControllers {</span>
<span class="term-fg32">+		if !accessControl.IsAllowed(from, tx) {</span>
<span class="term-fg32">+			log.Warn(&quot;Transaction is not allowed by access control&quot;, &quot;from&quot;, from, &quot;tx&quot;, tx.Hash(), &quot;isBlockList&quot;, accessControl.IsBlocklist())</span>
<span class="term-fg32">+			&#47;&#47; If any access control doesn&#39;t allow</span>
<span class="term-fg32">+			return txpool.ErrTxIsUnauthorized</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
 &#47;&#47; Init sets the gas price needed to keep a transaction in the pool and the chain
 &#47;&#47; head to allow balance &#47; nonce checks. The transaction journal will be loaded
 &#47;&#47; from disk and filtered based on the provided starting settings. The internal
<span class="term-fg36">@@ -323,6 +371,18 @@</span> 		if err := pool.journal.rotate(pool.local()); err != nil {
 			log.Warn(&quot;Failed to rotate transaction journal&quot;, &quot;err&quot;, err)
 		}
 	}
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Initialize accessControllers on pool based on pool acls config</span>
<span class="term-fg32">+	acls := []txpool.AccessController{}</span>
<span class="term-fg32">+	if len(pool.config.BlockListFilePaths) &gt; 0 {</span>
<span class="term-fg32">+		blockListACL, err := accesscontrol.New(pool.config.BlockListFilePaths, false)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return err</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		acls = append(acls, blockListACL)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	pool.accessControllers = acls</span>
<span class="term-fg32">+</span>
 	pool.wg.Add(1)
 	go pool.loop()
 	return nil
<span class="term-fg36">@@ -613,7 +673,8 @@</span> 			1&lt;&lt;types.DynamicFeeTxType,
 		MaxSize: txMaxSize,
 		MinTip:  pool.gasTip.Load().ToBig(),
 	}
<span class="term-fg31">-	if local {</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): check if NoLocals has been set to reject underpriced transactions</span>
<span class="term-fg32">+	if local &amp;&amp; !pool.config.NoLocals {</span>
 		opts.MinTip = new(big.Int)
 	}
 	if err := txpool.ValidateTransaction(tx, pool.currentHead.Load(), pool.signer, opts); err != nil {
<span class="term-fg36">@@ -998,6 +1059,7 @@</span> 			log.Trace(&quot;Discarding invalid transaction&quot;, &quot;hash&quot;, tx.Hash(), &quot;err&quot;, err)
 			invalidTxMeter.Mark(1)
 			continue
 		}
<span class="term-fg32">+</span>
 		&#47;&#47; Accumulate all unknown transactions for deeper processing
 		news = append(news, tx)
 	}
<span class="term-fg36">@@ -1318,6 +1380,19 @@</span> 	pool.truncateQueue()
&nbsp;
 	dropBetweenReorgHistogram.Update(int64(pool.changesSinceReorg))
 	pool.changesSinceReorg = 0 &#47;&#47; Reset change counter
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Get the list of pending transactions and add them to a rebroadcast list</span>
<span class="term-fg32">+	&#47;&#47; Pending transactions are those that could be included in a block successfully, as opposed to the</span>
<span class="term-fg32">+	&#47;&#47; queued transactions which are not ready to be included in a block. Only pending transactions are</span>
<span class="term-fg32">+	&#47;&#47; rebroadcast to avoid making the network too noisy. We only want to rebroadcast on a new block</span>
<span class="term-fg32">+	&#47;&#47; hence, we check if reset is nil. Reset will be non-nil if a new block was received.</span>
<span class="term-fg32">+	rebroadcastList := make([]types.Transactions, 0, len(pool.pending))</span>
<span class="term-fg32">+	if reset != nil {</span>
<span class="term-fg32">+		for _, txs := range pool.pending {</span>
<span class="term-fg32">+			rebroadcastList = append(rebroadcastList, txs.Flatten())</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 	pool.mu.Unlock()
&nbsp;
 	&#47;&#47; Notify subsystems for newly added transactions
<span class="term-fg36">@@ -1328,12 +1403,29 @@</span> 			events[addr] = newSortedMap()
 		}
 		events[addr].Put(tx)
 	}
<span class="term-fg31">-	if len(events) &gt; 0 {</span>
<span class="term-fg31">-		var txs []*types.Transaction</span>
<span class="term-fg31">-		for _, set := range events {</span>
<span class="term-fg31">-			txs = append(txs, set.Flatten()...)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): deduplicate the broadcast lists so that transactions are not broadcast multiple times</span>
<span class="term-fg32">+	&#47;&#47; at the same time.</span>
<span class="term-fg32">+	uniqueTxs := make(map[common.Hash]*types.Transaction)</span>
<span class="term-fg32">+	for _, set := range events {</span>
<span class="term-fg32">+		for _, tx := range set.Flatten() {</span>
<span class="term-fg32">+			uniqueTxs[tx.Hash()] = tx</span>
 		}
<span class="term-fg31">-		pool.txFeed.Send(core.NewTxsEvent{Txs: txs})</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	for _, set := range rebroadcastList {</span>
<span class="term-fg32">+		for _, tx := range set {</span>
<span class="term-fg32">+			uniqueTxs[tx.Hash()] = tx</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	var txs []*types.Transaction</span>
<span class="term-fg32">+	for _, tx := range uniqueTxs {</span>
<span class="term-fg32">+		txs = append(txs, tx)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if len(txs) &gt; 0 {</span>
<span class="term-fg32">+		if numSubscribers := pool.txFeed.Send(core.NewTxsEvent{Txs: txs}); numSubscribers == 0 {</span>
<span class="term-fg32">+			log.Warn(&quot;Transaction pool is not being rebroadcast to any subscribers&quot;)</span>
<span class="term-fg32">+		}</span>
 	}
 }
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-c010a4dc357d067989e79973" role="button"
                       aria-expanded="false" aria-controls="id-c010a4dc357d067989e79973">
                        <code>core/txpool/subpool.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/core/txpool/subpool.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/core/txpool/subpool.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+4</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-c010a4dc357d067989e79973"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;txpool&#47;subpool.go immutable-geth&#47;core&#47;txpool&#47;subpool.go</span>
<span class="term-fg1">index 9881ed1b8f960f0a61b7666a5a22412fa0228779..c7ab4e5faacbde31dd1253f509d6a22e6575ae32 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;txpool&#47;subpool.go</span>
<span class="term-fg1">+++ immutable-geth&#47;core&#47;txpool&#47;subpool.go</span>
<span class="term-fg36">@@ -95,6 +95,10 @@</span> 	&#47;&#47; Filter is a selector used to decide whether a transaction would be added
 	&#47;&#47; to this particular subpool.
 	Filter(tx *types.Transaction) bool
&nbsp;
<span class="term-fg32">+	&#47;&#47; FilterWithError is a selector used to decide whether a transaction whould be added</span>
<span class="term-fg32">+	&#47;&#47; to this particular subpool.</span>
<span class="term-fg32">+	FilterWithError(tx *types.Transaction) error</span>
<span class="term-fg32">+</span>
 	&#47;&#47; Init sets the base parameters of the subpool, allowing it to load any saved
 	&#47;&#47; transactions from disk and also permitting internal maintenance routines to
 	&#47;&#47; start up.</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-4ce2603c73eba94cef11dc7b" role="button"
                       aria-expanded="false" aria-controls="id-4ce2603c73eba94cef11dc7b">
                        <code>core/txpool/txpool.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/core/txpool/txpool.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/core/txpool/txpool.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+22</span></div>
                            <div class="text-start"><span class="text-danger">-10</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-4ce2603c73eba94cef11dc7b"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;txpool&#47;txpool.go immutable-geth&#47;core&#47;txpool&#47;txpool.go</span>
<span class="term-fg1">index be7435247d92749027ccbee4e92f0d44153b4a4b..13349cf6813880f1e7330aec99d77d9ff67eadb7 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;txpool&#47;txpool.go</span>
<span class="term-fg1">+++ immutable-geth&#47;core&#47;txpool&#47;txpool.go</span>
<span class="term-fg36">@@ -315,19 +315,31 @@</span> 	&#47;&#47; errors.
 	&#47;&#47;
 	&#47;&#47; We also need to track how the transactions were split across the subpools,
 	&#47;&#47; so we can piece back the returned errors into the original order.
<span class="term-fg32">+	&#47;&#47;</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Adding a error to the subpool split to indicate the specifity of</span>
<span class="term-fg32">+	&#47;&#47; why this transaction is not included in any subpool</span>
<span class="term-fg32">+	type SplitError struct {</span>
<span class="term-fg32">+		index int</span>
<span class="term-fg32">+		err   error</span>
<span class="term-fg32">+	}</span>
 	txsets := make([][]*types.Transaction, len(p.subpools))
<span class="term-fg31">-	splits := make([]int, len(txs))</span>
<span class="term-fg32">+	splits := make([]SplitError, len(txs))</span>
&nbsp;
 	for i, tx := range txs {
<span class="term-fg31">-		&#47;&#47; Mark this transaction belonging to no-subpool</span>
<span class="term-fg31">-		splits[i] = -1</span>
<span class="term-fg31">-</span>
 		&#47;&#47; Try to find a subpool that accepts the transaction
 		for j, subpool := range p.subpools {
<span class="term-fg31">-			if subpool.Filter(tx) {</span>
<span class="term-fg32">+			err := subpool.FilterWithError(tx)</span>
<span class="term-fg32">+			if err == nil {</span>
 				txsets[j] = append(txsets[j], tx)
<span class="term-fg31">-				splits[i] = j</span>
<span class="term-fg32">+				splits[i] = SplitError{index: j, err: nil}</span>
 				break
<span class="term-fg32">+			} else if err == ErrTxIsUnauthorized {</span>
<span class="term-fg32">+				&#47;&#47; CHANGE(immutable): Subpool exists that handles this tx but it is blocked and&#47;or unauthorized</span>
<span class="term-fg32">+				splits[i] = SplitError{index: j, err: err}</span>
<span class="term-fg32">+				break</span>
<span class="term-fg32">+			} else {</span>
<span class="term-fg32">+				&#47;&#47; Mark this transaction belonging to no-subpool</span>
<span class="term-fg32">+				splits[i] = SplitError{index: -1, err: err}</span>
 			}
 		}
 	}
<span class="term-fg36">@@ -340,13 +352,13 @@</span> 	}
 	errs := make([]error, len(txs))
 	for i, split := range splits {
 		&#47;&#47; If the transaction was rejected by all subpools, mark it unsupported
<span class="term-fg31">-		if split == -1 {</span>
<span class="term-fg31">-			errs[i] = core.ErrTxTypeNotSupported</span>
<span class="term-fg32">+		if split.err != nil {</span>
<span class="term-fg32">+			errs[i] = split.err</span>
 			continue
 		}
 		&#47;&#47; Find which subpool handled it and pull in the corresponding error
<span class="term-fg31">-		errs[i] = errsets[split][0]</span>
<span class="term-fg31">-		errsets[split] = errsets[split][1:]</span>
<span class="term-fg32">+		errs[i] = errsets[split.index][0]</span>
<span class="term-fg32">+		errsets[split.index] = errsets[split.index][1:]</span>
 	}
 	return errs
 }</div>
    </div>

            
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-3a69ce5fea56c6096e6572a6"role="button" aria-expanded="false" aria-controls="id-3a69ce5fea56c6096e6572a6">
        
            <div class="col-12 col-md-12 col-lg-6 col-xl-6 text-start"><h3>node</h3></div>
        

        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2">
            <div class="row line-stat">
                
                
            </div>
        </div>
        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2 ">
            <div class="row line-stat">
                
                    <div class="text-end"><span class="text-success">+213</span></div>
                    <div class="text-start"><span class="text-danger">-17</span></div>
                
                
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-3a69ce5fea56c6096e6572a6">
        <div></div>
        <div>
            
            
        </div>
        <div>
            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-cd7f3d3705de47d6b7bdaa3b"role="button" aria-expanded="false" aria-controls="id-cd7f3d3705de47d6b7bdaa3b">
        
            <div class="col-12 col-md-12 col-lg-6 col-xl-6 text-start"><h4>New Relic</h4></div>
        

        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2">
            <div class="row line-stat">
                
                
            </div>
        </div>
        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2 ">
            <div class="row line-stat">
                
                    <div class="text-end"><span class="text-success">+180</span></div>
                    <div class="text-start"><span class="text-danger">-9</span></div>
                
                
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-cd7f3d3705de47d6b7bdaa3b">
        <div></div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-bb35fbeb6a508f0469f04f61" role="button"
                       aria-expanded="false" aria-controls="id-bb35fbeb6a508f0469f04f61">
                        <code>node/api.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/node/api.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/node/api.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+4</span></div>
                            <div class="text-start"><span class="text-danger">-2</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-bb35fbeb6a508f0469f04f61"><span class="term-fg1">diff --git go-ethereum&#47;node&#47;api.go immutable-geth&#47;node&#47;api.go</span>
<span class="term-fg1">index f81f394beb24a72068a968c248b9894da31717b1..947aed15baf475802b0ac6ec8af85b5fcdbc439c 100644</span>
<span class="term-fg1">--- go-ethereum&#47;node&#47;api.go</span>
<span class="term-fg1">+++ immutable-geth&#47;node&#47;api.go</span>
<span class="term-fg36">@@ -203,7 +203,8 @@</span>
 	if err := api.node.http.setListenAddr(*host, *port); err != nil {
 		return false, err
 	}
<span class="term-fg31">-	if err := api.node.http.enableRPC(api.node.rpcAPIs, config); err != nil {</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable) add NR agent</span>
<span class="term-fg32">+	if err := api.node.http.enableRPC(api.node.NewRelic, api.node.rpcAPIs, config); err != nil {</span>
 		return false, err
 	}
 	if err := api.node.http.start(); err != nil {
<span class="term-fg36">@@ -278,7 +279,8 @@</span> 	if err := server.setListenAddr(*host, *port); err != nil {
 		return false, err
 	}
 	openApis, _ := api.node.getAPIs()
<span class="term-fg31">-	if err := server.enableWS(openApis, config); err != nil {</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable) add NR agent</span>
<span class="term-fg32">+	if err := server.enableWS(api.node.NewRelic, openApis, config); err != nil {</span>
 		return false, err
 	}
 	if err := server.start(); err != nil {</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-3ee43ff307185ea019306f17" role="button"
                       aria-expanded="false" aria-controls="id-3ee43ff307185ea019306f17">
                        <code>node/immutable_newrelic.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/node/immutable_newrelic.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+111</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-3ee43ff307185ea019306f17"><span class="term-fg1">diff --git go-ethereum&#47;node&#47;immutable_newrelic.go immutable-geth&#47;node&#47;immutable_newrelic.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..9f874c78fbee4d73363f6c022c7bbb45b0edc0fe</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;node&#47;immutable_newrelic.go</span>
<span class="term-fg36">@@ -0,0 +1,111 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package node</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;bytes&quot;</span>
<span class="term-fg32">+	&quot;encoding&#47;json&quot;</span>
<span class="term-fg32">+	&quot;fmt&quot;</span>
<span class="term-fg32">+	&quot;io&quot;</span>
<span class="term-fg32">+	&quot;net&#47;http&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	newrelic &quot;github.com&#47;newrelic&#47;go-agent&#47;v3&#47;newrelic&quot;</span>
<span class="term-fg32">+	log &quot;github.com&#47;sirupsen&#47;logrus&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+var (</span>
<span class="term-fg32">+	errBodySizeExceedsLimit = fmt.Errorf(&quot;request body size exceeds limit&quot;)</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+type RequestBody struct {</span>
<span class="term-fg32">+	Jsonrpc string `json:&quot;jsonrpc&quot;`</span>
<span class="term-fg32">+	Id      int64  `json:&quot;id&quot;`</span>
<span class="term-fg32">+	Method  string `json:&quot;method&quot;`</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func newRelicMiddleware(nrApp *newrelic.Application, next http.Handler) http.Handler { &#47;&#47;nolint:unused</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable) add NR agent</span>
<span class="term-fg32">+	if nrApp == nil {</span>
<span class="term-fg32">+		log.Error(&quot;Failed to initialise New Relic middlware: nrApp is nil&quot;)</span>
<span class="term-fg32">+		return next</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	_, handler := newrelic.WrapHandleFunc(nrApp, &quot;&#47;&quot;, func(w http.ResponseWriter, req *http.Request) {</span>
<span class="term-fg32">+		txn := newrelic.FromContext(req.Context())</span>
<span class="term-fg32">+		txn.AddAttribute(&quot;x-api-key&quot;, req.Header.Get(&quot;x-api-key&quot;))</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		&#47;&#47; Capture ethAddress from headers in order to monitor usage and errors</span>
<span class="term-fg32">+		txn.AddAttribute(&quot;x-imx-eth-address&quot;, req.Header.Get(&quot;x-imx-eth-address&quot;))</span>
<span class="term-fg32">+		&#47;&#47; Capture SDK version from headers in order to monitor usage and errors</span>
<span class="term-fg32">+		txn.AddAttribute(&quot;x-sdk-version&quot;, req.Header.Get(&quot;x-sdk-version&quot;))</span>
<span class="term-fg32">+		txn.AddAttribute(&quot;x-forwarded-for&quot;, req.Header.Get(&quot;x-forwarded-for&quot;))</span>
<span class="term-fg32">+		txn.AddAttribute(&quot;x-zkevm-rpc-sticky&quot;, req.Header.Get(&quot;x-zkevm-rpc-sticky&quot;))</span>
<span class="term-fg32">+		txn.AddAttribute(&quot;k6-load-test-id&quot;, req.Header.Get(&quot;k6-load-test-id&quot;))</span>
<span class="term-fg32">+		&#47;&#47; the W3C trace context header entries.</span>
<span class="term-fg32">+		&#47;&#47; see: https:&#47;&#47;github.com&#47;w3c&#47;trace-context&#47;blob&#47;main&#47;spec&#47;20-http_request_header_format.md</span>
<span class="term-fg32">+		&#47;&#47; RFC: https:&#47;&#47;www.w3.org&#47;TR&#47;trace-context&#47;</span>
<span class="term-fg32">+		&#47;&#47; NR, k6 and any other services following the W3C standard can generate these header entries.</span>
<span class="term-fg32">+		txn.AddAttribute(&quot;traceparent&quot;, req.Header.Get(&quot;traceparent&quot;))</span>
<span class="term-fg32">+		txn.AddAttribute(&quot;tracestate&quot;, req.Header.Get(&quot;tracestate&quot;))</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		&#47;&#47; Capture the request body</span>
<span class="term-fg32">+		mb := int64(1024 * 1024)</span>
<span class="term-fg32">+		body, bodyReader, err := limitedTeeRead(req.Body, mb)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			log.WithError(err).Error(&quot;Failed to read request body&quot;)</span>
<span class="term-fg32">+			&#47;&#47; respond to the client with a 503 error.</span>
<span class="term-fg32">+			&#47;&#47; We want to respond here because we can&#39;t use the body in subsequent handlers anyway.</span>
<span class="term-fg32">+			http.Error(w, &quot;Failed to read request body&quot;, http.StatusInternalServerError)</span>
<span class="term-fg32">+			return</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		requestBody := RequestBody{}</span>
<span class="term-fg32">+		if err = json.Unmarshal(body, &amp;requestBody); err != nil {</span>
<span class="term-fg32">+			log.WithError(err).Error(&quot;Failed to parse request body&quot;)</span>
<span class="term-fg32">+		} else {</span>
<span class="term-fg32">+			&#47;&#47; Add the RPC method to the transaction attributes</span>
<span class="term-fg32">+			txn.AddAttribute(&quot;rpcMethod&quot;, requestBody.Method)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		&#47;&#47; Reset the request body to the original state</span>
<span class="term-fg32">+		req.Body = bodyReader</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		&#47;&#47; Next handler</span>
<span class="term-fg32">+		ctx := newrelic.NewContext(req.Context(), txn)</span>
<span class="term-fg32">+		next.ServeHTTP(w, req.WithContext(ctx))</span>
<span class="term-fg32">+	})</span>
<span class="term-fg32">+	return http.HandlerFunc(handler)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; limitedTeeRead reads the request body while writing it back to an io.ReadCloser</span>
<span class="term-fg32">+&#47;&#47; that can be used to read the same data again.</span>
<span class="term-fg32">+&#47;&#47; It returns the content of the input reader, the new io.ReadCloser and an error</span>
<span class="term-fg32">+&#47;&#47; if the content size exceeds the limit.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The returned io.ReadCloser uses the same underlying buffer as the returned []byte.</span>
<span class="term-fg32">+&#47;&#47; This is done for performance reasons. Care should therefore be taken to ensure</span>
<span class="term-fg32">+&#47;&#47; that the returned content buffer is not be written to. As this would affect the</span>
<span class="term-fg32">+&#47;&#47; content of the returned io.ReadCloser downstream.</span>
<span class="term-fg32">+func limitedTeeRead(reader io.ReadCloser, limitBytes int64) ([]byte, io.ReadCloser, error) {</span>
<span class="term-fg32">+	limitReader := io.LimitReader(reader, limitBytes)</span>
<span class="term-fg32">+	content, err := io.ReadAll(limitReader)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if len(content) &gt;= int(limitBytes) {</span>
<span class="term-fg32">+		return nil, nil, errBodySizeExceedsLimit</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return content, io.NopCloser(bytes.NewBuffer(content)), nil</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-041e95cb29ac8c6c1bece709" role="button"
                       aria-expanded="false" aria-controls="id-041e95cb29ac8c6c1bece709">
                        <code>node/node.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/node/node.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/node/node.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+65</span></div>
                            <div class="text-start"><span class="text-danger">-7</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-041e95cb29ac8c6c1bece709"><span class="term-fg1">diff --git go-ethereum&#47;node&#47;node.go immutable-geth&#47;node&#47;node.go</span>
<span class="term-fg1">index dfa83d58c7260fee12076b11f5d045cd699b2333..41599677e002510f47a47143e158455776ad9c2e 100644</span>
<span class="term-fg1">--- go-ethereum&#47;node&#47;node.go</span>
<span class="term-fg1">+++ immutable-geth&#47;node&#47;node.go</span>
<span class="term-fg36">@@ -38,6 +38,8 @@</span> 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;log&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;p2p&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;rpc&quot;
 	&quot;github.com&#47;gofrs&#47;flock&quot;
<span class="term-fg32">+	&quot;github.com&#47;newrelic&#47;go-agent&#47;v3&#47;integrations&#47;nrlogrus&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;newrelic&#47;go-agent&#47;v3&#47;newrelic&quot;</span>
 )
&nbsp;
 &#47;&#47; Node is a container on which services can be registered.
<span class="term-fg36">@@ -53,7 +55,7 @@</span> 	stop          chan struct{} &#47;&#47; Channel to wait for termination notifications
 	server        *p2p.Server   &#47;&#47; Currently running P2P networking layer
 	startStopLock sync.Mutex    &#47;&#47; Start&#47;Stop are protected by an additional lock
 	state         int           &#47;&#47; Tracks state of node lifecycle
<span class="term-fg31">-</span>
<span class="term-fg32">+	NewRelic      *newrelic.Application</span>
 	lock          sync.Mutex
 	lifecycles    []Lifecycle &#47;&#47; All registered backends, services, and auxiliary services that have a lifecycle
 	rpcAPIs       []rpc.API   &#47;&#47; List of APIs currently provided by the node
<span class="term-fg36">@@ -103,6 +105,27 @@</span> 		return nil, errors.New(`Config.Name cannot end in &quot;.ipc&quot;`)
 	}
 	server := rpc.NewServer()
 	server.SetBatchLimits(conf.BatchRequestLimit, conf.BatchResponseMaxSize)
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Initialise New Relic agent</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable) add NR agent</span>
<span class="term-fg32">+	conf.Logger.Info(&quot;initialising New Relic agent...&quot;)</span>
<span class="term-fg32">+	var nrApp *newrelic.Application</span>
<span class="term-fg32">+	var err error</span>
<span class="term-fg32">+	if os.Getenv(&quot;NEW_RELIC_APP_NAME&quot;) != &quot;&quot; {</span>
<span class="term-fg32">+		nrApp, err = newrelic.NewApplication(</span>
<span class="term-fg32">+			newrelic.ConfigFromEnvironment(),</span>
<span class="term-fg32">+			newrelic.ConfigEnabled(true),</span>
<span class="term-fg32">+			nrlogrus.ConfigStandardLogger(),</span>
<span class="term-fg32">+			newrelic.ConfigDistributedTracerEnabled(true),</span>
<span class="term-fg32">+		)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			log.Error(&quot;Failed to initialise New Relic agent: &quot;, err)</span>
<span class="term-fg32">+			nrApp = nil</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	} else {</span>
<span class="term-fg32">+		log.Error(&quot;Failed to initialise New Relic agent: NEW_RELIC_APP_NAME missing&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 	node := &amp;Node{
 		config:        conf,
 		inprocHandler: server,
<span class="term-fg36">@@ -111,6 +134,7 @@</span> 		log:           conf.Logger,
 		stop:          make(chan struct{}),
 		server:        &amp;p2p.Server{Config: conf.P2P},
 		databases:     make(map[*closeTrackingDB]struct{}),
<span class="term-fg32">+		NewRelic:      nrApp,</span>
 	}
&nbsp;
 	&#47;&#47; Register built-in APIs.
<span class="term-fg36">@@ -209,11 +233,18 @@</span>
 	n.lock.Lock()
 	state := n.state
 	n.lock.Unlock()
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): log node close procedure</span>
<span class="term-fg32">+	logFunc := func(state string) {</span>
<span class="term-fg32">+		n.log.Info(&quot;Node close procedure&quot;, &quot;state&quot;, state)</span>
<span class="term-fg32">+	}</span>
 	switch state {
 	case initializingState:
<span class="term-fg32">+		logFunc(&quot;initializing&quot;)</span>
 		&#47;&#47; The node was never started.
 		return n.doClose(nil)
 	case runningState:
<span class="term-fg32">+		logFunc(&quot;running&quot;)</span>
 		&#47;&#47; The node was started, release resources acquired by Start().
 		var errs []error
 		if err := n.stopServices(n.lifecycles); err != nil {
<span class="term-fg36">@@ -221,6 +252,7 @@</span> 			errs = append(errs, err)
 		}
 		return n.doClose(errs)
 	case closedState:
<span class="term-fg32">+		logFunc(&quot;closed&quot;)</span>
 		return ErrNodeStopped
 	default:
 		panic(fmt.Sprintf(&quot;node is in unknown state %d&quot;, state))
<span class="term-fg36">@@ -413,7 +445,8 @@</span> 	initHttp := func(server *httpServer, port int) error {
 		if err := server.setListenAddr(n.config.HTTPHost, port); err != nil {
 			return err
 		}
<span class="term-fg31">-		if err := server.enableRPC(openAPIs, httpConfig{</span>
<span class="term-fg32">+		&#47;&#47; CHANGE(immutable) add NR agent</span>
<span class="term-fg32">+		if err := server.enableRPC(n.NewRelic, openAPIs, httpConfig{</span>
 			CorsAllowedOrigins: n.config.HTTPCors,
 			Vhosts:             n.config.HTTPVirtualHosts,
 			Modules:            n.config.HTTPModules,
<span class="term-fg36">@@ -431,7 +464,7 @@</span> 		server := n.wsServerForPort(port, false)
 		if err := server.setListenAddr(n.config.WSHost, port); err != nil {
 			return err
 		}
<span class="term-fg31">-		if err := server.enableWS(openAPIs, wsConfig{</span>
<span class="term-fg32">+		if err := server.enableWS(n.NewRelic, openAPIs, wsConfig{</span>
 			Modules:           n.config.WSModules,
 			Origins:           n.config.WSOrigins,
 			prefix:            n.config.WSPathPrefix,
<span class="term-fg36">@@ -455,7 +488,8 @@</span> 			batchItemLimit:         engineAPIBatchItemLimit,
 			batchResponseSizeLimit: engineAPIBatchResponseSizeLimit,
 			httpBodyLimit:          engineAPIBodyLimit,
 		}
<span class="term-fg31">-		err := server.enableRPC(allAPIs, httpConfig{</span>
<span class="term-fg32">+		&#47;&#47; CHANGE(immutable) add NR agent</span>
<span class="term-fg32">+		err := server.enableRPC(n.NewRelic, allAPIs, httpConfig{</span>
 			CorsAllowedOrigins: DefaultAuthCors,
 			Vhosts:             n.config.AuthVirtualHosts,
 			Modules:            DefaultAuthModules,
<span class="term-fg36">@@ -472,7 +506,7 @@</span> 		server = n.wsServerForPort(port, true)
 		if err := server.setListenAddr(n.config.AuthAddr, port); err != nil {
 			return err
 		}
<span class="term-fg31">-		if err := server.enableWS(allAPIs, wsConfig{</span>
<span class="term-fg32">+		if err := server.enableWS(n.NewRelic, allAPIs, wsConfig{</span>
 			Modules:           DefaultAuthModules,
 			Origins:           DefaultAuthOrigins,
 			prefix:            DefaultAuthPrefix,
<span class="term-fg36">@@ -597,6 +631,30 @@</span> &#47;&#47; getAPIs return two sets of APIs, both the ones that do not require
 &#47;&#47; authentication, and the complete set
 func (n *Node) getAPIs() (unauthenticated, all []rpc.API) {
 	for _, api := range n.rpcAPIs {
<span class="term-fg32">+		&#47;&#47; CHANGE(immutable): the rpc apis returned here are the ones used by rpc</span>
<span class="term-fg32">+		&#47;&#47; We&#39;ve made a modification here to filter out certain rpc API depending on</span>
<span class="term-fg32">+		&#47;&#47; config flags</span>
<span class="term-fg32">+		if n.config.DisableAdmin &amp;&amp; api.Namespace == &quot;admin&quot; {</span>
<span class="term-fg32">+			continue</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if n.config.DisableEngine &amp;&amp; api.Namespace == &quot;engine&quot; {</span>
<span class="term-fg32">+			continue</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if n.config.DisableTxPool &amp;&amp; api.Namespace == &quot;txpool&quot; {</span>
<span class="term-fg32">+			continue</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if n.config.DisableDebug &amp;&amp; api.Namespace == &quot;debug&quot; {</span>
<span class="term-fg32">+			continue</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if n.config.DisableClique &amp;&amp; api.Namespace == &quot;clique&quot; {</span>
<span class="term-fg32">+			continue</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if n.config.DisableMiner &amp;&amp; api.Namespace == &quot;miner&quot; {</span>
<span class="term-fg32">+			continue</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if n.config.DisablePersonal &amp;&amp; api.Namespace == &quot;personal&quot; {</span>
<span class="term-fg32">+			continue</span>
<span class="term-fg32">+		}</span>
 		if !api.Authenticated {
 			unauthenticated = append(unauthenticated, api)
 		}
<span class="term-fg36">@@ -615,8 +673,8 @@</span>
 	if n.state != initializingState {
 		panic(&quot;can&#39;t register HTTP handler on running&#47;stopped node&quot;)
 	}
<span class="term-fg31">-</span>
<span class="term-fg31">-	n.http.mux.Handle(path, handler)</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): wrap the handler with newrelic middleware</span>
<span class="term-fg32">+	n.http.mux.Handle(path, newRelicMiddleware(n.NewRelic, handler))</span>
 	n.http.handlerNames[path] = name
 }
</div>
    </div>

            
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-274a567a6012febba21d92f0"role="button" aria-expanded="false" aria-controls="id-274a567a6012febba21d92f0">
        
            <div class="col-12 col-md-12 col-lg-6 col-xl-6 text-start"><h4>RPC</h4></div>
        

        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2">
            <div class="row line-stat">
                
                
            </div>
        </div>
        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2 ">
            <div class="row line-stat">
                
                    <div class="text-end"><span class="text-success">+33</span></div>
                    <div class="text-start"><span class="text-danger">-8</span></div>
                
                
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-274a567a6012febba21d92f0">
        <div></div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-594f9e72e4a6e6ab08deb63e" role="button"
                       aria-expanded="false" aria-controls="id-594f9e72e4a6e6ab08deb63e">
                        <code>node/config.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/node/config.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/node/config.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+10</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-594f9e72e4a6e6ab08deb63e"><span class="term-fg1">diff --git go-ethereum&#47;node&#47;config.go immutable-geth&#47;node&#47;config.go</span>
<span class="term-fg1">index 949db887e4e4bf4d841c0db62d31844e2671c58d..b830b7009c2fca925f9266d756eb96445328b5cb 100644</span>
<span class="term-fg1">--- go-ethereum&#47;node&#47;config.go</span>
<span class="term-fg1">+++ immutable-geth&#47;node&#47;config.go</span>
<span class="term-fg36">@@ -210,6 +210,16 @@</span>
 	&#47;&#47; EnablePersonal enables the deprecated personal namespace.
 	EnablePersonal bool `toml:&quot;-&quot;`
&nbsp;
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Disable specific namespaces from the rpc server,</span>
<span class="term-fg32">+	&#47;&#47; By default they&#39;re enabled</span>
<span class="term-fg32">+	DisableDebug    bool `toml:&quot;-&quot;`</span>
<span class="term-fg32">+	DisableAdmin    bool `toml:&quot;-&quot;`</span>
<span class="term-fg32">+	DisableEngine   bool `toml:&quot;-&quot;`</span>
<span class="term-fg32">+	DisableTxPool   bool `toml:&quot;-&quot;`</span>
<span class="term-fg32">+	DisableClique   bool `toml:&quot;-&quot;`</span>
<span class="term-fg32">+	DisableMiner    bool `toml:&quot;-&quot;`</span>
<span class="term-fg32">+	DisablePersonal bool `toml:&quot;-&quot;`</span>
<span class="term-fg32">+</span>
 	DBEngine string `toml:&quot;,omitempty&quot;`
 }
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-3e454c9b1652641a71ab7831" role="button"
                       aria-expanded="false" aria-controls="id-3e454c9b1652641a71ab7831">
                        <code>node/defaults.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/node/defaults.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/node/defaults.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+7</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-3e454c9b1652641a71ab7831"><span class="term-fg1">diff --git go-ethereum&#47;node&#47;defaults.go immutable-geth&#47;node&#47;defaults.go</span>
<span class="term-fg1">index 307d9e186a251b7963b5fbb4266249fbfbcc6fa4..4fad4e09c82616179f7422e2e349ea59d626bf06 100644</span>
<span class="term-fg1">--- go-ethereum&#47;node&#47;defaults.go</span>
<span class="term-fg1">+++ immutable-geth&#47;node&#47;defaults.go</span>
<span class="term-fg36">@@ -73,6 +73,13 @@</span> 		MaxPeers:   50,
 		NAT:        nat.Any(),
 	},
 	DBEngine: &quot;&quot;, &#47;&#47; Use whatever exists, will default to Pebble if non-existent and supported
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Disable specific namespaces from the rpc server,</span>
<span class="term-fg32">+	&#47;&#47; By default they&#39;re enabled</span>
<span class="term-fg32">+	DisableDebug:  false,</span>
<span class="term-fg32">+	DisableAdmin:  false,</span>
<span class="term-fg32">+	DisableEngine: false,</span>
<span class="term-fg32">+	DisableTxPool: false,</span>
 }
&nbsp;
 &#47;&#47; DefaultDataDir is the default data directory to use for the databases and other</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-4e88fd9b899c234f3e2eadc8" role="button"
                       aria-expanded="false" aria-controls="id-4e88fd9b899c234f3e2eadc8">
                        <code>node/rpcstack.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/node/rpcstack.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/node/rpcstack.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+16</span></div>
                            <div class="text-start"><span class="text-danger">-8</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-4e88fd9b899c234f3e2eadc8"><span class="term-fg1">diff --git go-ethereum&#47;node&#47;rpcstack.go immutable-geth&#47;node&#47;rpcstack.go</span>
<span class="term-fg1">index d80d5271a7fafc36636eec6a29b369e0dbb9e3c5..b61d53e89dcb34eb024236cea341993045a29642 100644</span>
<span class="term-fg1">--- go-ethereum&#47;node&#47;rpcstack.go</span>
<span class="term-fg1">+++ immutable-geth&#47;node&#47;rpcstack.go</span>
<span class="term-fg36">@@ -32,6 +32,7 @@</span> 	&quot;time&quot;
&nbsp;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;log&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;rpc&quot;
<span class="term-fg32">+	&quot;github.com&#47;newrelic&#47;go-agent&#47;v3&#47;newrelic&quot;</span>
 	&quot;github.com&#47;rs&#47;cors&quot;
 )
&nbsp;
<span class="term-fg36">@@ -294,7 +295,8 @@</span> 	h.server, h.listener = nil, nil
 }
&nbsp;
 &#47;&#47; enableRPC turns on JSON-RPC over HTTP on the server.
<span class="term-fg31">-func (h *httpServer) enableRPC(apis []rpc.API, config httpConfig) error {</span>
<span class="term-fg32">+&#47;&#47; CHANGE(immutable) add NR agent</span>
<span class="term-fg32">+func (h *httpServer) enableRPC(nrApp *newrelic.Application, apis []rpc.API, config httpConfig) error {</span>
 	h.mu.Lock()
 	defer h.mu.Unlock()
&nbsp;
<span class="term-fg36">@@ -312,10 +314,13 @@</span> 	if err := RegisterApis(apis, config.Modules, srv); err != nil {
 		return err
 	}
 	h.httpConfig = config
<span class="term-fg31">-	h.httpHandler.Store(&amp;rpcHandler{</span>
<span class="term-fg31">-		Handler: NewHTTPHandlerStack(srv, config.CorsAllowedOrigins, config.Vhosts, config.jwtSecret),</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): wrap the RPC handler with newrelic middleware</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	rpcHandler := &amp;rpcHandler{</span>
<span class="term-fg32">+		Handler: NewHTTPHandlerStack(newRelicMiddleware(nrApp, srv), config.CorsAllowedOrigins, config.Vhosts, config.jwtSecret),</span>
 		server:  srv,
<span class="term-fg31">-	})</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	h.httpHandler.Store(rpcHandler)</span>
 	return nil
 }
&nbsp;
<span class="term-fg36">@@ -330,7 +335,8 @@</span> 	return handler != nil
 }
&nbsp;
 &#47;&#47; enableWS turns on JSON-RPC over WebSocket on the server.
<span class="term-fg31">-func (h *httpServer) enableWS(apis []rpc.API, config wsConfig) error {</span>
<span class="term-fg32">+&#47;&#47; CHANGE(immutable) add NR agent</span>
<span class="term-fg32">+func (h *httpServer) enableWS(nrApp *newrelic.Application, apis []rpc.API, config wsConfig) error {</span>
 	h.mu.Lock()
 	defer h.mu.Unlock()
&nbsp;
<span class="term-fg36">@@ -347,10 +353,12 @@</span> 	if err := RegisterApis(apis, config.Modules, srv); err != nil {
 		return err
 	}
 	h.wsConfig = config
<span class="term-fg31">-	h.wsHandler.Store(&amp;rpcHandler{</span>
<span class="term-fg31">-		Handler: NewWSHandlerStack(srv.WebsocketHandler(config.Origins), config.jwtSecret),</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): wrap the websocket handler with newrelic middleware</span>
<span class="term-fg32">+	wsHandler := &amp;rpcHandler{</span>
<span class="term-fg32">+		Handler: NewWSHandlerStack(newRelicMiddleware(nrApp, srv.WebsocketHandler(config.Origins)), config.jwtSecret),</span>
 		server:  srv,
<span class="term-fg31">-	})</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	h.wsHandler.Store(wsHandler)</span>
 	return nil
 }
</div>
    </div>

            
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-cbca31ddbf9cd4742a5ea87a"role="button" aria-expanded="false" aria-controls="id-cbca31ddbf9cd4742a5ea87a">
        
            <div class="col-12 col-md-12 col-lg-6 col-xl-6 text-start"><h3>consensus</h3></div>
        

        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2">
            <div class="row line-stat">
                
                
            </div>
        </div>
        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2 ">
            <div class="row line-stat">
                
                    <div class="text-end"><span class="text-success">+118</span></div>
                    <div class="text-start"><span class="text-danger">-23</span></div>
                
                
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-cbca31ddbf9cd4742a5ea87a">
        <div></div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-a6698f5a39dd8666e07d11c3" role="button"
                       aria-expanded="false" aria-controls="id-a6698f5a39dd8666e07d11c3">
                        <code>consensus/clique/clique.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/consensus/clique/clique.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/consensus/clique/clique.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+118</span></div>
                            <div class="text-start"><span class="text-danger">-23</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-a6698f5a39dd8666e07d11c3"><span class="term-fg1">diff --git go-ethereum&#47;consensus&#47;clique&#47;clique.go immutable-geth&#47;consensus&#47;clique&#47;clique.go</span>
<span class="term-fg1">index c693189ea5effd24af980a29f83622e6de73e828..8ae1af318b91d662409e46c7ec3789418acfd7da 100644</span>
<span class="term-fg1">--- go-ethereum&#47;consensus&#47;clique&#47;clique.go</span>
<span class="term-fg1">+++ immutable-geth&#47;consensus&#47;clique&#47;clique.go</span>
<span class="term-fg36">@@ -34,6 +34,7 @@</span> 	lru &quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&#47;lru&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;consensus&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;consensus&#47;misc&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;consensus&#47;misc&#47;eip1559&quot;
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;consensus&#47;misc&#47;eip4844&quot;</span>
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;state&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;crypto&quot;
<span class="term-fg36">@@ -68,6 +69,8 @@</span> 	uncleHash = types.CalcUncleHash(nil) &#47;&#47; Always Keccak256(RLP([])) as uncles are meaningless outside of PoW.
&nbsp;
 	diffInTurn = big.NewInt(2) &#47;&#47; Block difficulty for in-turn signatures
 	diffNoTurn = big.NewInt(1) &#47;&#47; Block difficulty for out-of-turn signatures
<span class="term-fg32">+</span>
<span class="term-fg32">+	ErrWithdrawalsDetected = errors.New(&quot;withdrawals have been passed to consensus layer&quot;)</span>
 )
&nbsp;
 &#47;&#47; Various error messages to mark blocks invalid. These should be private to
<span class="term-fg36">@@ -299,24 +302,20 @@</span> 	&#47;&#47; Verify that the gas limit is &lt;= 2^63-1
 	if header.GasLimit &gt; params.MaxGasLimit {
 		return fmt.Errorf(&quot;invalid gasLimit: have %v, max %v&quot;, header.GasLimit, params.MaxGasLimit)
 	}
<span class="term-fg31">-	if chain.Config().IsShanghai(header.Number, header.Time) {</span>
<span class="term-fg31">-		return errors.New(&quot;clique does not support shanghai fork&quot;)</span>
<span class="term-fg31">-	}</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Allow Shanghai</span>
 	&#47;&#47; Verify the non-existence of withdrawalsHash.
<span class="term-fg31">-	if header.WithdrawalsHash != nil {</span>
<span class="term-fg31">-		return fmt.Errorf(&quot;invalid withdrawalsHash: have %x, expected nil&quot;, header.WithdrawalsHash)</span>
<span class="term-fg31">-	}</span>
<span class="term-fg31">-	if chain.Config().IsCancun(header.Number, header.Time) {</span>
<span class="term-fg31">-		return errors.New(&quot;clique does not support cancun fork&quot;)</span>
<span class="term-fg32">+	&#47;&#47; Before Cancun, withdrawalsHash must be nil. After Cancun, it must be EmptyWithdrawalsHash</span>
<span class="term-fg32">+	isCancun := chain.Config().IsCancun(header.Number, header.Time)</span>
<span class="term-fg32">+	if !isCancun &amp;&amp; header.WithdrawalsHash != nil {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;invalid withdrawalsHash: have %x, expected nil before Cancun&quot;, header.WithdrawalsHash)</span>
 	}
<span class="term-fg31">-	&#47;&#47; Verify the non-existence of cancun-specific header fields</span>
<span class="term-fg31">-	switch {</span>
<span class="term-fg31">-	case header.ExcessBlobGas != nil:</span>
<span class="term-fg31">-		return fmt.Errorf(&quot;invalid excessBlobGas: have %d, expected nil&quot;, header.ExcessBlobGas)</span>
<span class="term-fg31">-	case header.BlobGasUsed != nil:</span>
<span class="term-fg31">-		return fmt.Errorf(&quot;invalid blobGasUsed: have %d, expected nil&quot;, header.BlobGasUsed)</span>
<span class="term-fg31">-	case header.ParentBeaconRoot != nil:</span>
<span class="term-fg31">-		return fmt.Errorf(&quot;invalid parentBeaconRoot, have %#x, expected nil&quot;, header.ParentBeaconRoot)</span>
<span class="term-fg32">+	if isCancun {</span>
<span class="term-fg32">+		if header.WithdrawalsHash == nil {</span>
<span class="term-fg32">+			return fmt.Errorf(&quot;invalid withdrawalsHash: nil, expected EmptyWithdrawalsHash after Cancun&quot;)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if *header.WithdrawalsHash != types.EmptyWithdrawalsHash {</span>
<span class="term-fg32">+			return fmt.Errorf(&quot;invalid withdrawalsHash: have %x, expected EmptyWithdrawalsHash after Cancun&quot;, header.WithdrawalsHash)</span>
<span class="term-fg32">+		}</span>
 	}
 	&#47;&#47; All basic checks passed, verify cascading fields
 	return c.verifyCascadingFields(chain, header, parents)
<span class="term-fg36">@@ -361,6 +360,32 @@</span> 	} else if err := eip1559.VerifyEIP1559Header(chain.Config(), parent, header); err != nil {
 		&#47;&#47; Verify the header&#39;s EIP-1559 attributes.
 		return err
 	}
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Allow Cancun</span>
<span class="term-fg32">+	isCancun := chain.Config().IsCancun(header.Number, header.Time)</span>
<span class="term-fg32">+	if isCancun {</span>
<span class="term-fg32">+		&#47;&#47; Perform default verification to ensure we are consistent</span>
<span class="term-fg32">+		if err := eip4844.VerifyEIP4844Header(parent, header); err != nil {</span>
<span class="term-fg32">+			return err</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		&#47;&#47; Immutable zkEVM should have 0 values for all headers.</span>
<span class="term-fg32">+		&#47;&#47; VerifyEIP4844Header has checked that Blob fields are non nil,</span>
<span class="term-fg32">+		&#47;&#47; hence at this point we know they are not nil</span>
<span class="term-fg32">+		if err := enforceCancunHeaderInvariants(header); err != nil {</span>
<span class="term-fg32">+			return err</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	} else {</span>
<span class="term-fg32">+		&#47;&#47; If the chain is not Cancun, we expect fields to be nil</span>
<span class="term-fg32">+		switch {</span>
<span class="term-fg32">+		case header.ExcessBlobGas != nil:</span>
<span class="term-fg32">+			return fmt.Errorf(&quot;invalid excessBlobGas: have %d, expected nil&quot;, header.ExcessBlobGas)</span>
<span class="term-fg32">+		case header.BlobGasUsed != nil:</span>
<span class="term-fg32">+			return fmt.Errorf(&quot;invalid blobGasUsed: have %d, expected nil&quot;, header.BlobGasUsed)</span>
<span class="term-fg32">+		case header.ParentBeaconRoot != nil:</span>
<span class="term-fg32">+			return fmt.Errorf(&quot;invalid parentBeaconRoot, have %#x, expected nil&quot;, header.ParentBeaconRoot)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 	&#47;&#47; Retrieve the snapshot needed to verify this header and cache it
 	snap, err := c.snapshot(chain, number-1, header.ParentHash, parents)
 	if err != nil {
<span class="term-fg36">@@ -587,9 +612,24 @@</span>
 &#47;&#47; FinalizeAndAssemble implements consensus.Engine, ensuring no uncles are set,
 &#47;&#47; nor block rewards given, and returns the final block.
 func (c *Clique) FinalizeAndAssemble(chain consensus.ChainHeaderReader, header *types.Header, state *state.StateDB, txs []*types.Transaction, uncles []*types.Header, receipts []*types.Receipt, withdrawals []*types.Withdrawal) (*types.Block, error) {
<span class="term-fg31">-	if len(withdrawals) &gt; 0 {</span>
<span class="term-fg31">-		return nil, errors.New(&quot;clique does not support withdrawals&quot;)</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Withdrawals should not be passed in here.</span>
<span class="term-fg32">+	if withdrawals != nil {</span>
<span class="term-fg32">+		log.Warn(&quot;Withdrawals passed to consensus layer&quot;, &quot;block number&quot;, header.Number.String())</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Handle various forks.</span>
<span class="term-fg32">+	&#47;&#47; The order of the forks in the switch statement matters - based on fork order.</span>
<span class="term-fg32">+	switch {</span>
<span class="term-fg32">+	case chain.Config().IsCancun(header.Number, header.Time):</span>
<span class="term-fg32">+		&#47;&#47; Withdrawals should exist but be empty</span>
<span class="term-fg32">+		withdrawals = make([]*types.Withdrawal, 0)</span>
<span class="term-fg32">+	case chain.Config().IsImmutableZKEVMPrevrandao(header.Time):</span>
<span class="term-fg32">+		withdrawals = nil</span>
<span class="term-fg32">+	case chain.Config().IsShanghai(header.Number, header.Time):</span>
<span class="term-fg32">+		withdrawals = nil</span>
<span class="term-fg32">+	default:</span>
<span class="term-fg32">+		withdrawals = nil</span>
 	}
<span class="term-fg32">+</span>
 	&#47;&#47; Finalize block
 	c.Finalize(chain, header, state, txs, uncles, nil)
&nbsp;
<span class="term-fg36">@@ -597,7 +637,8 @@</span> 	&#47;&#47; Assign the final state root to header.
 	header.Root = state.IntermediateRoot(chain.Config().IsEIP158(header.Number))
&nbsp;
 	&#47;&#47; Assemble and return the final block for sealing.
<span class="term-fg31">-	return types.NewBlock(header, txs, nil, receipts, trie.NewStackTrie(nil)), nil</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Use NewBlockWithWithdrawals so that the WithdrawalsHash is appropriately set</span>
<span class="term-fg32">+	return types.NewBlockWithWithdrawals(header, txs, nil, receipts, withdrawals, trie.NewStackTrie(nil)), nil</span>
 }
&nbsp;
 &#47;&#47; Authorize injects a private key into the consensus engine to mint new blocks
<span class="term-fg36">@@ -655,6 +696,15 @@</span> 		delay += time.Duration(rand.Int63n(int64(wiggle)))
&nbsp;
 		log.Trace(&quot;Out-of-turn signing requested&quot;, &quot;wiggle&quot;, common.PrettyDuration(wiggle))
 	}
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Allow Cancun. We do this check in Seal as an extra sanity check so that blocks are halted from</span>
<span class="term-fg32">+	&#47;&#47; being propagated to peers to insulate them potential issues.</span>
<span class="term-fg32">+	isCancun := chain.Config().IsCancun(header.Number, header.Time)</span>
<span class="term-fg32">+	if isCancun {</span>
<span class="term-fg32">+		if err := enforceCancunHeaderInvariants(header); err != nil {</span>
<span class="term-fg32">+			log.Error(&quot;Failed to Seal block due to failed header invariants&quot;, &quot;err&quot;, err)</span>
<span class="term-fg32">+			return err</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
 	&#47;&#47; Sign all the things!
 	sighash, err := signFn(accounts.Account{Address: signer}, accounts.MimetypeClique, CliqueRLP(header))
 	if err != nil {
<span class="term-fg36">@@ -666,12 +716,16 @@</span> 	log.Trace(&quot;Waiting for slot to sign and propagate&quot;, &quot;delay&quot;, common.PrettyDuration(delay))
 	go func() {
 		select {
 		case &lt;-stop:
<span class="term-fg32">+			&#47;&#47; CHANAGE(immutable): log interrupt</span>
<span class="term-fg32">+			log.Info(&quot;interrupted on clique seal&quot;, &quot;block number&quot;, header.Number.String())</span>
 			return
 		case &lt;-time.After(delay):
 		}
&nbsp;
 		select {
 		case results &lt;- block.WithSeal(header):
<span class="term-fg32">+			&#47;&#47; CHANGE(immutable): log seal success</span>
<span class="term-fg32">+			log.Info(&quot;Sealed new block in clique&quot;, &quot;block number&quot;, header.Number.String())</span>
 		default:
 			log.Warn(&quot;Sealing result is not read by miner&quot;, &quot;sealhash&quot;, SealHash(header))
 		}
<span class="term-fg36">@@ -763,19 +817,60 @@</span> 	}
 	if header.BaseFee != nil {
 		enc = append(enc, header.BaseFee)
 	}
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Allow Shanghai</span>
 	if header.WithdrawalsHash != nil {
<span class="term-fg31">-		panic(&quot;unexpected withdrawal hash value in clique&quot;)</span>
<span class="term-fg32">+		&#47;&#47; CHANGE(immutable): Post-Cancun blocks will have a non-nil WithdrawalsHash set to EmptyWithdrawalsHash</span>
<span class="term-fg32">+		if *header.WithdrawalsHash != types.EmptyWithdrawalsHash {</span>
<span class="term-fg32">+			panic(fmt.Sprintf(&quot;withdrawalsHash (%x) should be EmptyWithdrawalsHash&quot;, *header.WithdrawalsHash))</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		enc = append(enc, *header.WithdrawalsHash)</span>
 	}
 	if header.ExcessBlobGas != nil {
<span class="term-fg31">-		panic(&quot;unexpected excess blob gas value in clique&quot;)</span>
<span class="term-fg32">+		&#47;&#47; CHANGE(immutable): Allow Cancun</span>
<span class="term-fg32">+		if *header.ExcessBlobGas != 0 {</span>
<span class="term-fg32">+			panic(fmt.Sprintf(&quot;excessBlobGas (%d) should be 0&quot;, *header.ExcessBlobGas))</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		enc = append(enc, *header.ExcessBlobGas)</span>
 	}
 	if header.BlobGasUsed != nil {
<span class="term-fg31">-		panic(&quot;unexpected blob gas used value in clique&quot;)</span>
<span class="term-fg32">+		&#47;&#47; CHANGE(immutable): Allow Cancun</span>
<span class="term-fg32">+		if *header.BlobGasUsed != 0 {</span>
<span class="term-fg32">+			panic(fmt.Sprintf(&quot;blobGasUsed (%d) should be 0&quot;, *header.BlobGasUsed))</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		enc = append(enc, *header.BlobGasUsed)</span>
 	}
 	if header.ParentBeaconRoot != nil {
<span class="term-fg31">-		panic(&quot;unexpected parent beacon root value in clique&quot;)</span>
<span class="term-fg32">+		&#47;&#47; CHANGE(immutable): Allow Cancun</span>
<span class="term-fg32">+		if *header.ParentBeaconRoot != common.MinHash {</span>
<span class="term-fg32">+			panic(fmt.Sprintf(&quot;parentBeaconRoot (%x) should be 0x0&quot;, *header.ParentBeaconRoot))</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		enc = append(enc, *header.ParentBeaconRoot)</span>
 	}
 	if err := rlp.Encode(w, enc); err != nil {
 		panic(&quot;can&#39;t encode: &quot; + err.Error())
 	}
 }
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; CHANGE(immutable): In post-merge networks, the ParentBeaconRoot is verified by the consensus client</span>
<span class="term-fg32">+&#47;&#47; and propagated to the Execution Client. However, in a Pre-merge network, there is no existing mechanism to verify</span>
<span class="term-fg32">+&#47;&#47; that it is correct. Therefore, we enforce that it is always set to 0x0. We also disable blobs and hence enforce</span>
<span class="term-fg32">+&#47;&#47; their absence here.</span>
<span class="term-fg32">+func enforceCancunHeaderInvariants(header *types.Header) error {</span>
<span class="term-fg32">+	&#47;&#47; These should never be nil given that it is checked in other areas but is added here for completeness</span>
<span class="term-fg32">+	if header.ParentBeaconRoot == nil || header.BlobGasUsed == nil || header.ExcessBlobGas == nil {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;invalid header with nil values: %v, %v, %v&quot;,</span>
<span class="term-fg32">+			header.ParentBeaconRoot,</span>
<span class="term-fg32">+			header.BlobGasUsed,</span>
<span class="term-fg32">+			header.ExcessBlobGas)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if *header.BlobGasUsed != 0 {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;invalid BlobGasUsed: have %d, expected 0&quot;, *header.BlobGasUsed)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if *header.ExcessBlobGas != 0 {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;invalid ExcessBlobGas: have %d, expected 0&quot;, *header.ExcessBlobGas)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if header.ParentBeaconRoot.Cmp(common.MinHash) != 0 {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;invalid parentBeaconRoot, have %#x, expected zero hash&quot;, header.ParentBeaconRoot)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return nil</span>
<span class="term-fg32">+}</span></div>
    </div>

            
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-0ed99db719df83ce8c7a0fb6"role="button" aria-expanded="false" aria-controls="id-0ed99db719df83ce8c7a0fb6">
        
            <div class="col-12 col-md-12 col-lg-6 col-xl-6 text-start"><h3>miner</h3></div>
        

        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2">
            <div class="row line-stat">
                
                
            </div>
        </div>
        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2 ">
            <div class="row line-stat">
                
                    <div class="text-end"><span class="text-success">+100</span></div>
                    <div class="text-start"><span class="text-danger">-18</span></div>
                
                
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-0ed99db719df83ce8c7a0fb6">
        <div></div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-9c438e04a5e3130458c6bbd9" role="button"
                       aria-expanded="false" aria-controls="id-9c438e04a5e3130458c6bbd9">
                        <code>miner/worker.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/miner/worker.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/miner/worker.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+100</span></div>
                            <div class="text-start"><span class="text-danger">-18</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-9c438e04a5e3130458c6bbd9"><span class="term-fg1">diff --git go-ethereum&#47;miner&#47;worker.go immutable-geth&#47;miner&#47;worker.go</span>
<span class="term-fg1">index 9a36106231e9828713c628fb33f9cbaf1003c491..78cb6136a0b93d4eabf53f55ef84eaa8bc91ff6f 100644</span>
<span class="term-fg1">--- go-ethereum&#47;miner&#47;worker.go</span>
<span class="term-fg1">+++ immutable-geth&#47;miner&#47;worker.go</span>
<span class="term-fg36">@@ -35,6 +35,7 @@</span> 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;vm&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;event&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;log&quot;
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;metrics&quot;</span>
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;params&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;trie&quot;
 	&quot;github.com&#47;holiman&#47;uint256&quot;
<span class="term-fg36">@@ -60,7 +61,8 @@</span> 	minRecommitInterval = 1 * time.Second
&nbsp;
 	&#47;&#47; maxRecommitInterval is the maximum time interval to recreate the sealing block with
 	&#47;&#47; any newly arrived transactions.
<span class="term-fg31">-	maxRecommitInterval = 15 * time.Second</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): set to max to avoid reorg</span>
<span class="term-fg32">+	maxRecommitInterval = 999999999 * time.Second</span>
&nbsp;
 	&#47;&#47; intervalAdjustRatio is the impact a single interval adjustment has on sealing work
 	&#47;&#47; resubmitting interval.
<span class="term-fg36">@@ -78,6 +80,21 @@</span> var (
 	errBlockInterruptedByNewHead  = errors.New(&quot;new head arrived while building block&quot;)
 	errBlockInterruptedByRecommit = errors.New(&quot;recommit interrupt while building block&quot;)
 	errBlockInterruptedByTimeout  = errors.New(&quot;timeout while building block&quot;)
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): add metrics to geth worker loop</span>
<span class="term-fg32">+	gasUsedGuage           = metrics.NewRegisteredGauge(&quot;worker&#47;block&#47;gasused&quot;, nil)</span>
<span class="term-fg32">+	blockTxGauge           = metrics.NewRegisteredGauge(&quot;worker&#47;block&#47;tx&quot;, nil)</span>
<span class="term-fg32">+	txExecutionTimer       = metrics.NewRegisteredTimer(&quot;worker&#47;block&#47;txexecution&quot;, nil)</span>
<span class="term-fg32">+	blockConstructionTimer = metrics.NewRegisteredTimer(&quot;worker&#47;block&#47;blockconstruction&quot;, nil)</span>
<span class="term-fg32">+	commitWorkTimer        = metrics.NewRegisteredTimer(&quot;worker&#47;block&#47;commitwork&quot;, nil)</span>
<span class="term-fg32">+	prepareWorkTimer       = metrics.NewRegisteredTimer(&quot;worker&#47;block&#47;preparework&quot;, nil)</span>
<span class="term-fg32">+	taskLoopTimer          = metrics.NewRegisteredTimer(&quot;worker&#47;block&#47;taskloop&quot;, nil)</span>
<span class="term-fg32">+	resultLoopTimer        = metrics.NewRegisteredTimer(&quot;worker&#47;block&#47;resultloop&quot;, nil)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): define start time for block construction as process is across multiple functions</span>
<span class="term-fg32">+	blockConstructionStartTime time.Time</span>
<span class="term-fg32">+	taskLoopStartTime          time.Time</span>
<span class="term-fg32">+	blockConstructionTrigger   bool</span>
 )
&nbsp;
 &#47;&#47; environment is the worker&#39;s current environment and holds all
<span class="term-fg36">@@ -464,6 +481,9 @@</span> 			timestamp = time.Now().Unix()
 			commit(commitInterruptNewHead)
&nbsp;
 		case head := &lt;-w.chainHeadCh:
<span class="term-fg32">+			&#47;&#47; CHANGE(immutable): capture start time for block construction</span>
<span class="term-fg32">+			blockConstructionStartTime = time.Now()</span>
<span class="term-fg32">+			blockConstructionTrigger = true</span>
 			clearPending(head.Block.NumberU64())
 			timestamp = time.Now().Unix()
 			commit(commitInterruptNewHead)
<span class="term-fg36">@@ -499,11 +519,11 @@</span> 			if adjust.inc {
 				before := recommit
 				target := float64(recommit.Nanoseconds()) &#47; adjust.ratio
 				recommit = recalcRecommit(minRecommit, recommit, target, true)
<span class="term-fg31">-				log.Trace(&quot;Increase miner recommit interval&quot;, &quot;from&quot;, before, &quot;to&quot;, recommit)</span>
<span class="term-fg32">+				log.Warn(&quot;Increase miner recommit interval&quot;, &quot;from&quot;, before, &quot;to&quot;, recommit)</span>
 			} else {
 				before := recommit
 				recommit = recalcRecommit(minRecommit, recommit, float64(minRecommit.Nanoseconds()), false)
<span class="term-fg31">-				log.Trace(&quot;Decrease miner recommit interval&quot;, &quot;from&quot;, before, &quot;to&quot;, recommit)</span>
<span class="term-fg32">+				log.Warn(&quot;Decrease miner recommit interval&quot;, &quot;from&quot;, before, &quot;to&quot;, recommit)</span>
 			}
&nbsp;
 			if w.resubmitHook != nil {
<span class="term-fg36">@@ -604,7 +624,11 @@</span> 		prev   common.Hash
 	)
&nbsp;
 	&#47;&#47; interrupt aborts the in-flight sealing task.
<span class="term-fg31">-	interrupt := func() {</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): add task parameter for logging</span>
<span class="term-fg32">+	interrupt := func(task *task) {</span>
<span class="term-fg32">+		if task != nil {</span>
<span class="term-fg32">+			log.Info(&quot;Interrupting sealing task&quot;, &quot;block number&quot;, task.block.Number().String())</span>
<span class="term-fg32">+		}</span>
 		if stopCh != nil {
 			close(stopCh)
 			stopCh = nil
<span class="term-fg36">@@ -613,6 +637,8 @@</span> 	}
 	for {
 		select {
 		case task := &lt;-w.taskCh:
<span class="term-fg32">+			&#47;&#47; CHANGE(immutable): capture time we receive a new task</span>
<span class="term-fg32">+			taskLoopStartTime = time.Now()</span>
 			if w.newTaskHook != nil {
 				w.newTaskHook(task)
 			}
<span class="term-fg36">@@ -622,9 +648,9 @@</span> 			if sealHash == prev {
 				continue
 			}
 			&#47;&#47; Interrupt previous sealing operation
<span class="term-fg31">-			interrupt()</span>
<span class="term-fg32">+			interrupt(task)</span>
 			stopCh, prev = make(chan struct{}), sealHash
<span class="term-fg31">-</span>
<span class="term-fg32">+			&#47;&#47; Log the interrupt here w&#47; block number</span>
 			if w.skipSealHook != nil &amp;&amp; w.skipSealHook(task) {
 				continue
 			}
<span class="term-fg36">@@ -638,8 +664,10 @@</span> 				w.pendingMu.Lock()
 				delete(w.pendingTasks, sealHash)
 				w.pendingMu.Unlock()
 			}
<span class="term-fg32">+			&#47;&#47; Log here when the sealing task is complete</span>
 		case &lt;-w.exitCh:
<span class="term-fg31">-			interrupt()</span>
<span class="term-fg32">+			&#47;&#47; CHANGE(immutable): populate empty task for logging</span>
<span class="term-fg32">+			interrupt(nil)</span>
 			return
 		}
 	}
<span class="term-fg36">@@ -652,6 +680,11 @@</span> 	defer w.wg.Done()
 	for {
 		select {
 		case block := &lt;-w.resultCh:
<span class="term-fg32">+			&#47;&#47; CHANGE(immutable): capture taskloop processing time</span>
<span class="term-fg32">+			taskLoopTimer.UpdateSince(taskLoopStartTime)</span>
<span class="term-fg32">+			&#47;&#47; CHANGE(immutable): capture result loop start time</span>
<span class="term-fg32">+			start := time.Now()</span>
<span class="term-fg32">+</span>
 			&#47;&#47; Short circuit when receiving empty result.
 			if block == nil {
 				continue
<span class="term-fg36">@@ -709,6 +742,21 @@</span>
 			&#47;&#47; Broadcast the block and announce chain insertion event
 			w.mux.Post(core.NewMinedBlockEvent{Block: block})
&nbsp;
<span class="term-fg32">+			&#47;&#47; CHANGE(immutable): capture block construction time</span>
<span class="term-fg32">+			if blockConstructionTrigger {</span>
<span class="term-fg32">+				blockConstructionTimer.UpdateSince(blockConstructionStartTime)</span>
<span class="term-fg32">+				blockConstructionTrigger = false</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+			&#47;&#47; CHANGE(immutable): update tx count in block based on receipts</span>
<span class="term-fg32">+			blockTxGauge.Update(int64(len(task.receipts)))</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+			&#47;&#47; CHANGE(immutable): capture gas used in block</span>
<span class="term-fg32">+			gasUsedGuage.Update(int64(block.GasUsed()))</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+			&#47;&#47; CHANGE(immutable): capture result loop processing time</span>
<span class="term-fg32">+			resultLoopTimer.UpdateSince(start)</span>
<span class="term-fg32">+</span>
 		case &lt;-w.exitCh:
 			return
 		}
<span class="term-fg36">@@ -755,13 +803,23 @@</span> }
&nbsp;
 func (w *worker) commitTransaction(env *environment, tx *types.Transaction) ([]*types.Log, error) {
 	if tx.Type() == types.BlobTxType {
<span class="term-fg32">+		&#47;&#47; CHANGE(immutable) disable blob transactions</span>
<span class="term-fg32">+		if w.chainConfig.IsImmutableZKEVM() {</span>
<span class="term-fg32">+			return nil, fmt.Errorf(&quot;blob transactions are not supported&quot;)</span>
<span class="term-fg32">+		}</span>
 		return w.commitBlobTransaction(env, tx)
 	}
 	receipt, err := w.applyTransaction(env, tx)
 	if err != nil {
<span class="term-fg32">+		&#47;&#47; CHANGE(immutable) add error logging</span>
<span class="term-fg32">+		log.Warn(&quot;Transaction failed, discarding&quot;, &quot;hash&quot;, tx.Hash(), &quot;err&quot;, err)</span>
 		return nil, err
 	}
 	env.txs = append(env.txs, tx)
<span class="term-fg32">+	if receipt.Status == types.ReceiptStatusFailed {</span>
<span class="term-fg32">+		&#47;&#47; CHANGE(immutable) add error logging</span>
<span class="term-fg32">+		log.Warn(&quot;receipt status : failed&quot;, &quot;hash&quot;, tx.Hash())</span>
<span class="term-fg32">+	}</span>
 	env.receipts = append(env.receipts, receipt)
 	return receipt.Logs, nil
 }
<span class="term-fg36">@@ -905,6 +963,7 @@</span> 			log.Debug(&quot;Transaction failed, account skipped&quot;, &quot;hash&quot;, ltx.Hash, &quot;err&quot;, err)
 			txs.Pop()
 		}
 	}
<span class="term-fg32">+</span>
 	if !w.isRunning() &amp;&amp; len(coalescedLogs) &gt; 0 {
 		&#47;&#47; We don&#39;t push the pendingLogsEvent while we are sealing. The reason is that
 		&#47;&#47; when we are sealing, the worker will regenerate a sealing block every 3 seconds.
<span class="term-fg36">@@ -984,8 +1043,18 @@</span> 			parentGasLimit := parent.GasLimit * w.chainConfig.ElasticityMultiplier()
 			header.GasLimit = core.CalcGasLimit(parentGasLimit, w.config.GasCeil)
 		}
 	}
<span class="term-fg31">-	&#47;&#47; Apply EIP-4844, EIP-4788.</span>
<span class="term-fg32">+	&#47;&#47; Run the consensus preparation with the default or customized consensus engine.</span>
<span class="term-fg32">+	if err := w.engine.Prepare(w.chain, header); err != nil {</span>
<span class="term-fg32">+		log.Error(&quot;Failed to prepare header for sealing&quot;, &quot;err&quot;, err)</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Move this logic after engine.Prepare because</span>
<span class="term-fg32">+	&#47;&#47; clique can update the block time which would cause the logic below to</span>
<span class="term-fg32">+	&#47;&#47; panic if the change in time brought a parent block into cancun fork time.</span>
<span class="term-fg32">+	&#47;&#47; This change means that consensus implementations will not have access to</span>
<span class="term-fg32">+	&#47;&#47; blob related fields and parent beacon root.</span>
 	if w.chainConfig.IsCancun(header.Number, header.Time) {
<span class="term-fg32">+		&#47;&#47; Apply EIP-4844, EIP-4788.</span>
 		var excessBlobGas uint64
 		if w.chainConfig.IsCancun(parent.Number, parent.Time) {
 			excessBlobGas = eip4844.CalcExcessBlobGas(*parent.ExcessBlobGas, *parent.BlobGasUsed)
<span class="term-fg36">@@ -997,11 +1066,6 @@</span> 		header.BlobGasUsed = new(uint64)
 		header.ExcessBlobGas = &amp;excessBlobGas
 		header.ParentBeaconRoot = genParams.beaconRoot
 	}
<span class="term-fg31">-	&#47;&#47; Run the consensus preparation with the default or customized consensus engine.</span>
<span class="term-fg31">-	if err := w.engine.Prepare(w.chain, header); err != nil {</span>
<span class="term-fg31">-		log.Error(&quot;Failed to prepare header for sealing&quot;, &quot;err&quot;, err)</span>
<span class="term-fg31">-		return nil, err</span>
<span class="term-fg31">-	}</span>
 	&#47;&#47; Could potentially happen if starting to mine in an odd state.
 	&#47;&#47; Note genParams.coinbase can be different with header.Coinbase
 	&#47;&#47; since clique algorithm can modify the coinbase field in header.
<span class="term-fg36">@@ -1011,7 +1075,7 @@</span> 		log.Error(&quot;Failed to create sealing context&quot;, &quot;err&quot;, err)
 		return nil, err
 	}
 	if header.ParentBeaconRoot != nil {
<span class="term-fg31">-		context := core.NewEVMBlockContext(header, w.chain, nil)</span>
<span class="term-fg32">+		context := core.NewEVMBlockContext(header, w.chain, nil, w.chainConfig)</span>
 		vmenv := vm.NewEVM(context, vm.TxContext{}, env.state, w.chainConfig, vm.Config{})
 		core.ProcessBeaconBlockRoot(*header.ParentBeaconRoot, vmenv, env.state)
 	}
<span class="term-fg36">@@ -1022,14 +1086,19 @@</span> &#47;&#47; fillTransactions retrieves the pending transactions from the txpool and fills them
 &#47;&#47; into the given sealing block. The transaction selection and ordering strategy can
 &#47;&#47; be customized with the plugin in the future.
 func (w *worker) fillTransactions(interrupt *atomic.Int32, env *environment) error {
<span class="term-fg31">-	w.mu.RLock()</span>
<span class="term-fg31">-	tip := w.tip</span>
<span class="term-fg31">-	w.mu.RUnlock()</span>
<span class="term-fg31">-</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Disable tip enforcement so that we mine txs</span>
<span class="term-fg32">+	&#47;&#47; that are priced below price limit + base fee.</span>
 	&#47;&#47; Retrieve the pending transactions pre-filtered by the 1559&#47;4844 dynamic fees
<span class="term-fg32">+	var tip *uint256.Int</span>
<span class="term-fg32">+	if !w.chainConfig.IsImmutableZKEVM() {</span>
<span class="term-fg32">+		w.mu.RLock()</span>
<span class="term-fg32">+		tip = w.tip</span>
<span class="term-fg32">+		w.mu.RUnlock()</span>
<span class="term-fg32">+	}</span>
 	filter := txpool.PendingFilter{
 		MinTip: tip,
 	}
<span class="term-fg32">+</span>
 	if env.header.BaseFee != nil {
 		filter.BaseFee = uint256.MustFromBig(env.header.BaseFee)
 	}
<span class="term-fg36">@@ -1073,6 +1142,7 @@</span> 		if err := w.commitTransactions(env, plainTxs, blobTxs, interrupt); err != nil {
 			return err
 		}
 	}
<span class="term-fg32">+</span>
 	return nil
 }
&nbsp;
<span class="term-fg36">@@ -1128,12 +1198,21 @@</span> 	}
 	work, err := w.prepareWork(&amp;generateParams{
 		timestamp: uint64(timestamp),
 		coinbase:  coinbase,
<span class="term-fg32">+		&#47;&#47; CHANGE(immutable): Add the BeaconRoot value of MinHash as an input to work generation,</span>
<span class="term-fg32">+		&#47;&#47; so that the block producer appropriately sets the Beacon Root</span>
<span class="term-fg32">+		beaconRoot: &amp;common.MinHash,</span>
 	})
 	if err != nil {
 		return
 	}
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): capture time spent preparing work</span>
<span class="term-fg32">+	prepareWorkTimer.UpdateSince(start)</span>
<span class="term-fg32">+</span>
 	&#47;&#47; Fill pending transactions from the txpool into the block.
 	err = w.fillTransactions(interrupt, work)
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): update tx execution timer</span>
<span class="term-fg32">+	txExecutionTimer.UpdateSince(start)</span>
<span class="term-fg32">+</span>
 	switch {
 	case err == nil:
 		&#47;&#47; The entire block is filled, decrease resubmit interval in case
<span class="term-fg36">@@ -1198,6 +1277,9 @@</span> 				feesInEther := new(big.Float).Quo(new(big.Float).SetInt(fees), big.NewFloat(params.Ether))
 				log.Info(&quot;Commit new sealing work&quot;, &quot;number&quot;, block.Number(), &quot;sealhash&quot;, w.engine.SealHash(block.Header()),
 					&quot;txs&quot;, env.tcount, &quot;gas&quot;, block.GasUsed(), &quot;fees&quot;, feesInEther,
 					&quot;elapsed&quot;, common.PrettyDuration(time.Since(start)))
<span class="term-fg32">+</span>
<span class="term-fg32">+				&#47;&#47; CHANGE(immutable): capture time spent committing sealing work</span>
<span class="term-fg32">+				commitWorkTimer.UpdateSince(start)</span>
&nbsp;
 			case &lt;-w.exitCh:
 				log.Info(&quot;Worker has exited&quot;)</div>
    </div>

            
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-472d931a761617516382fbcf"role="button" aria-expanded="false" aria-controls="id-472d931a761617516382fbcf">
        
            <div class="col-12 col-md-12 col-lg-6 col-xl-6 text-start"><h3>common</h3></div>
        

        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2">
            <div class="row line-stat">
                
                
            </div>
        </div>
        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2 ">
            <div class="row line-stat">
                
                    <div class="text-end"><span class="text-success">+3</span></div>
                    <div class="text-start"><span class="text-danger">-0</span></div>
                
                
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-472d931a761617516382fbcf">
        <div></div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-13c7e25433338bd6cf07a09a" role="button"
                       aria-expanded="false" aria-controls="id-13c7e25433338bd6cf07a09a">
                        <code>common/types.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/common/types.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/common/types.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+3</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-13c7e25433338bd6cf07a09a"><span class="term-fg1">diff --git go-ethereum&#47;common&#47;types.go immutable-geth&#47;common&#47;types.go</span>
<span class="term-fg1">index aadca87f82af89543de3387e24a90cba5fe1846f..ceec2cc552e0fab17071bb7d79edad8a2ef7e531 100644</span>
<span class="term-fg1">--- go-ethereum&#47;common&#47;types.go</span>
<span class="term-fg1">+++ immutable-geth&#47;common&#47;types.go</span>
<span class="term-fg36">@@ -48,6 +48,9 @@</span>
 	&#47;&#47; MaxAddress represents the maximum possible address value.
 	MaxAddress = HexToAddress(&quot;0xffffffffffffffffffffffffffffffffffffffff&quot;)
&nbsp;
<span class="term-fg32">+	&#47;&#47; MinHash represents the minimum possible hash value.</span>
<span class="term-fg32">+	MinHash = HexToHash(&quot;0x0&quot;) &#47;&#47; CHANGE(immutable): Add MinHash var.</span>
<span class="term-fg32">+</span>
 	&#47;&#47; MaxHash represents the maximum possible hash value.
 	MaxHash = HexToHash(&quot;0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff&quot;)
 )</div>
    </div>

            
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-ec57fe2d43ad2fc026c02ecf"role="button" aria-expanded="false" aria-controls="id-ec57fe2d43ad2fc026c02ecf">
        
            <div class="col-12 col-md-12 col-lg-6 col-xl-6 text-start"><h3>internal</h3></div>
        

        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2">
            <div class="row line-stat">
                
                
            </div>
        </div>
        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2 ">
            <div class="row line-stat">
                
                    <div class="text-end"><span class="text-success">+11</span></div>
                    <div class="text-start"><span class="text-danger">-3</span></div>
                
                
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-ec57fe2d43ad2fc026c02ecf">
        <div></div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-4db531f55ea16b13d8d64178" role="button"
                       aria-expanded="false" aria-controls="id-4db531f55ea16b13d8d64178">
                        <code>internal/era/era.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/internal/era/era.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/internal/era/era.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+2</span></div>
                            <div class="text-start"><span class="text-danger">-1</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-4db531f55ea16b13d8d64178"><span class="term-fg1">diff --git go-ethereum&#47;internal&#47;era&#47;era.go immutable-geth&#47;internal&#47;era&#47;era.go</span>
<span class="term-fg1">index a0e701b7e0f920b8b1be5e2ebec70502014ff7b9..8e5ad3cbf9d1e7bc610d7356cf69155c163a39db 100644</span>
<span class="term-fg1">--- go-ethereum&#47;internal&#47;era&#47;era.go</span>
<span class="term-fg1">+++ immutable-geth&#47;internal&#47;era&#47;era.go</span>
<span class="term-fg36">@@ -150,7 +150,8 @@</span> 	var body types.Body
 	if err := rlp.Decode(r, &amp;body); err != nil {
 		return nil, err
 	}
<span class="term-fg31">-	return types.NewBlockWithHeader(&amp;header).WithBody(body.Transactions, body.Uncles), nil</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Add Withdrawals support</span>
<span class="term-fg32">+	return types.NewBlockWithHeader(&amp;header).WithBody(body.Transactions, body.Uncles).WithWithdrawals(body.Withdrawals), nil</span>
 }
&nbsp;
 &#47;&#47; Accumulator reads the accumulator entry in the Era1 file.</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-e5ae1087a10f96bf2bf189af" role="button"
                       aria-expanded="false" aria-controls="id-e5ae1087a10f96bf2bf189af">
                        <code>internal/era/iterator.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/internal/era/iterator.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/internal/era/iterator.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+2</span></div>
                            <div class="text-start"><span class="text-danger">-1</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-e5ae1087a10f96bf2bf189af"><span class="term-fg1">diff --git go-ethereum&#47;internal&#47;era&#47;iterator.go immutable-geth&#47;internal&#47;era&#47;iterator.go</span>
<span class="term-fg1">index e74a8154b1a63f58ac82e04b9584080a8a6c6505..85ed1a466912ff524f4ed2e33a1f27d5d3201c95 100644</span>
<span class="term-fg1">--- go-ethereum&#47;internal&#47;era&#47;iterator.go</span>
<span class="term-fg1">+++ immutable-geth&#47;internal&#47;era&#47;iterator.go</span>
<span class="term-fg36">@@ -73,7 +73,8 @@</span> 	}
 	if err := rlp.Decode(it.inner.Body, &amp;body); err != nil {
 		return nil, err
 	}
<span class="term-fg31">-	return types.NewBlockWithHeader(&amp;header).WithBody(body.Transactions, body.Uncles), nil</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Add Withdrawals support</span>
<span class="term-fg32">+	return types.NewBlockWithHeader(&amp;header).WithBody(body.Transactions, body.Uncles).WithWithdrawals(body.Withdrawals), nil</span>
 }
&nbsp;
 &#47;&#47; Receipts returns the receipts for the iterator&#39;s current position.</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-d3ea730b6258acefc2591d57" role="button"
                       aria-expanded="false" aria-controls="id-d3ea730b6258acefc2591d57">
                        <code>internal/ethapi/api.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/internal/ethapi/api.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/internal/ethapi/api.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+1</span></div>
                            <div class="text-start"><span class="text-danger">-1</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-d3ea730b6258acefc2591d57"><span class="term-fg1">diff --git go-ethereum&#47;internal&#47;ethapi&#47;api.go immutable-geth&#47;internal&#47;ethapi&#47;api.go</span>
<span class="term-fg1">index 863849f4da6a3457fcfbe787c0f041265029523a..4f55ee352cb8be44e1e40f1967602a1a0db9203f 100644</span>
<span class="term-fg1">--- go-ethereum&#47;internal&#47;ethapi&#47;api.go</span>
<span class="term-fg1">+++ immutable-geth&#47;internal&#47;ethapi&#47;api.go</span>
<span class="term-fg36">@@ -1093,7 +1093,7 @@</span> 	&#47;&#47; this makes sure resources are cleaned up.
 	defer cancel()
&nbsp;
 	&#47;&#47; Get a new instance of the EVM.
<span class="term-fg31">-	blockCtx := core.NewEVMBlockContext(header, NewChainContext(ctx, b), nil)</span>
<span class="term-fg32">+	blockCtx := core.NewEVMBlockContext(header, NewChainContext(ctx, b), nil, b.ChainConfig())</span>
 	if blockOverrides != nil {
 		blockOverrides.Apply(&amp;blockCtx)
 	}</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-5c3dce63e1b283fd75092cae" role="button"
                       aria-expanded="false" aria-controls="id-5c3dce63e1b283fd75092cae">
                        <code>internal/shutdowncheck/shutdown_tracker.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/internal/shutdowncheck/shutdown_tracker.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/internal/shutdowncheck/shutdown_tracker.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+6</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-5c3dce63e1b283fd75092cae"><span class="term-fg1">diff --git go-ethereum&#47;internal&#47;shutdowncheck&#47;shutdown_tracker.go immutable-geth&#47;internal&#47;shutdowncheck&#47;shutdown_tracker.go</span>
<span class="term-fg1">index c95b4f02f4b022cd99dfb509b0cd2a8a8c3a1aa0..2e0e70c8d01c751458a53a52c3ed5279bc59785e 100644</span>
<span class="term-fg1">--- go-ethereum&#47;internal&#47;shutdowncheck&#47;shutdown_tracker.go</span>
<span class="term-fg1">+++ immutable-geth&#47;internal&#47;shutdowncheck&#47;shutdown_tracker.go</span>
<span class="term-fg36">@@ -58,6 +58,8 @@</span> 			log.Warn(&quot;Unclean shutdown detected&quot;, &quot;booted&quot;, t,
 				&quot;age&quot;, common.PrettyAge(t))
 		}
 	}
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): log shutdown tracker steps</span>
<span class="term-fg32">+	log.Info(&quot;Shutdown tracker started marker&quot;)</span>
 }
&nbsp;
 &#47;&#47; Start runs an event loop that updates the current marker&#39;s timestamp every 5 minutes.
<span class="term-fg36">@@ -69,6 +71,8 @@</span> 		for {
 			select {
 			case &lt;-ticker.C:
 				rawdb.UpdateUncleanShutdownMarker(t.db)
<span class="term-fg32">+				&#47;&#47; CHANGE(immutable): log shutdown tracker steps</span>
<span class="term-fg32">+				log.Info(&quot;Shutdown tracker updated marker&quot;)</span>
 			case &lt;-t.stopCh:
 				return
 			}
<span class="term-fg36">@@ -82,4 +86,6 @@</span> 	&#47;&#47; Stop update loop.
 	t.stopCh &lt;- struct{}{}
 	&#47;&#47; Clear last marker.
 	rawdb.PopUncleanShutdownMarker(t.db)
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): log shutdown tracker steps</span>
<span class="term-fg32">+	log.Info(&quot;Shutdown tracker stopped&quot;)</span>
 }</div>
    </div>

            
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-a0b0aa723d77f5ce33030e81"role="button" aria-expanded="false" aria-controls="id-a0b0aa723d77f5ce33030e81">
        
            <div class="col-12 col-md-12 col-lg-6 col-xl-6 text-start"><h3>cmd</h3></div>
        

        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2">
            <div class="row line-stat">
                
                
            </div>
        </div>
        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2 ">
            <div class="row line-stat">
                
                    <div class="text-end"><span class="text-success">+3611</span></div>
                    <div class="text-start"><span class="text-danger">-10</span></div>
                
                
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-a0b0aa723d77f5ce33030e81">
        <div></div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-7f36383425b4aabdbb1903b1" role="button"
                       aria-expanded="false" aria-controls="id-7f36383425b4aabdbb1903b1">
                        <code>cmd/geth/main.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/cmd/geth/main.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/geth/main.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+35</span></div>
                            <div class="text-start"><span class="text-danger">-3</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-7f36383425b4aabdbb1903b1"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;main.go immutable-geth&#47;cmd&#47;geth&#47;main.go</span>
<span class="term-fg1">index 2f7d37fdd7e7b7a8d69f2a7be749bdd9d34a21bb..123c79b75990730d7a747a9089f5d24a0d73a984 100644</span>
<span class="term-fg1">--- go-ethereum&#47;cmd&#47;geth&#47;main.go</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;geth&#47;main.go</span>
<span class="term-fg36">@@ -67,6 +67,9 @@</span> 		utils.USBFlag,
 		utils.SmartCardDaemonPathFlag,
 		utils.OverrideCancun,
 		utils.OverrideVerkle,
<span class="term-fg32">+		&#47;&#47; CHANGE(immutable): Add fork overrides</span>
<span class="term-fg32">+		utils.OverridePrevrandao,</span>
<span class="term-fg32">+		utils.OverrideShanghai,</span>
 		utils.EnablePersonal,
 		utils.TxPoolLocalsFlag,
 		utils.TxPoolNoLocalsFlag,
<span class="term-fg36">@@ -79,6 +82,8 @@</span> 		utils.TxPoolGlobalSlotsFlag,
 		utils.TxPoolAccountQueueFlag,
 		utils.TxPoolGlobalQueueFlag,
 		utils.TxPoolLifetimeFlag,
<span class="term-fg32">+		&#47;&#47; CHANGE(immutable): added flags to configure tx pool acls</span>
<span class="term-fg32">+		utils.TxPoolBlockListFilePaths,</span>
 		utils.BlobPoolDataDirFlag,
 		utils.BlobPoolDataCapFlag,
 		utils.BlobPoolPriceBumpFlag,
<span class="term-fg36">@@ -120,6 +125,8 @@</span> 		utils.MiningEnabledFlag,
 		utils.MinerGasLimitFlag,
 		utils.MinerGasPriceFlag,
 		utils.MinerEtherbaseFlag,
<span class="term-fg32">+		&#47;&#47; CHANGE(immutable): added flag for etherebase file</span>
<span class="term-fg32">+		utils.MinerEtherbaseFileFlag,</span>
 		utils.MinerExtraDataFlag,
 		utils.MinerRecommitIntervalFlag,
 		utils.MinerNewPayloadTimeout,
<span class="term-fg36">@@ -146,6 +153,12 @@</span> 		utils.GpoIgnoreGasPriceFlag,
 		configFileFlag,
 		utils.LogDebugFlag,
 		utils.LogBacktraceAtFlag,
<span class="term-fg32">+		&#47;&#47; CHANGE(immutable): Add flag for using geths default gossiping.</span>
<span class="term-fg32">+		utils.ImmutableGossipDefaultFlag,</span>
<span class="term-fg32">+		&#47;&#47; CHANGE(immutable): Add flag for disabling tx pool gossiping.</span>
<span class="term-fg32">+		utils.ImmutableDisableTxPoolGossipFlag,</span>
<span class="term-fg32">+		&#47;&#47; CHANGE(immutable): Add flag for rpc proxy forwarding.</span>
<span class="term-fg32">+		utils.ImmutableRPCProxyFlag,</span>
 	}, utils.NetworkFlags, utils.DatabaseFlags)
&nbsp;
 	rpcFlags = []cli.Flag{
<span class="term-fg36">@@ -170,6 +183,13 @@</span> 		utils.WSApiFlag,
 		utils.WSAllowedOriginsFlag,
 		utils.WSPathPrefixFlag,
 		utils.IPCDisabledFlag,
<span class="term-fg32">+		utils.IsTxPoolRPCDisabledFlag,</span>
<span class="term-fg32">+		utils.IsEngineRPCDisabledFlag,</span>
<span class="term-fg32">+		utils.IsDebugRPCDisabledFlag,</span>
<span class="term-fg32">+		utils.IsAdminRPCDisabledFlag,</span>
<span class="term-fg32">+		utils.IsCliqueRPCDisabledFlag,</span>
<span class="term-fg32">+		utils.IsMinerRPCDisabledFlag,</span>
<span class="term-fg32">+		utils.IsPersonalRPCDisabledFlag,</span>
 		utils.IPCPathFlag,
 		utils.InsecureUnlockAllowedFlag,
 		utils.RPCGlobalGasCapFlag,
<span class="term-fg36">@@ -235,6 +255,8 @@</span> 		&#47;&#47; See snapshot.go
 		snapshotCommand,
 		&#47;&#47; See verkle.go
 		verkleCommand,
<span class="term-fg32">+		&#47;&#47; CHANGE(immutable): Add immutable subcommand</span>
<span class="term-fg32">+		immutableCommand,</span>
 	}
 	if logTestCommand != nil {
 		app.Commands = append(app.Commands, logTestCommand)
<span class="term-fg36">@@ -287,6 +309,10 @@</span>
 	case ctx.IsSet(utils.HoleskyFlag.Name):
 		log.Info(&quot;Starting Geth on Holesky testnet...&quot;)
&nbsp;
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Add network log</span>
<span class="term-fg32">+	case ctx.IsSet(utils.ImmutableNetworkFlag.Name):</span>
<span class="term-fg32">+		log.Info(fmt.Sprintf(&quot;Starting Geth on Immutable zkEVM %s...&quot;, ctx.String(utils.ImmutableNetworkFlag.Name)))</span>
<span class="term-fg32">+</span>
 	case ctx.IsSet(utils.DeveloperFlag.Name):
 		log.Info(&quot;Starting Geth in ephemeral dev mode...&quot;)
 		log.Warn(`You are running Geth in --dev mode. Please note the following:
<span class="term-fg36">@@ -304,9 +330,9 @@</span>      are pending in the mempool. The miner&#39;s minimum accepted gas price is 1.
   5. Networking is disabled; there is no listen-address, the maximum number of peers is set
      to 0, and discovery is disabled.
 `)
<span class="term-fg31">-</span>
<span class="term-fg31">-	case !ctx.IsSet(utils.NetworkIdFlag.Name):</span>
<span class="term-fg31">-		log.Info(&quot;Starting Geth on Ethereum mainnet...&quot;)</span>
<span class="term-fg32">+		&#47;&#47; CHANGE(immutable): RM misleading log</span>
<span class="term-fg32">+		&#47;&#47;case !ctx.IsSet(utils.NetworkIdFlag.Name):</span>
<span class="term-fg32">+		&#47;&#47;	log.Info(&quot;Starting Geth on Ethereum mainnet...&quot;)</span>
 	}
 	&#47;&#47; If we&#39;re a full node on mainnet without --cache specified, bump default cache allowance
 	if !ctx.IsSet(utils.CacheFlag.Name) &amp;&amp; !ctx.IsSet(utils.NetworkIdFlag.Name) {
<span class="term-fg36">@@ -339,6 +365,12 @@</span>
 	prepare(ctx)
 	stack, backend := makeFullNode(ctx)
 	defer stack.Close()
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Disallow running misconfigured Immutable zkEVM settings</span>
<span class="term-fg32">+	if backend.ChainConfig().IsImmutableZKEVM() &amp;&amp;</span>
<span class="term-fg32">+		!backend.ChainConfig().IsValidImmutableZKEVM() {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;Immutable zkEVM network ID sepcified but the configuration is invalid: %+v&quot;, *backend.ChainConfig())</span>
<span class="term-fg32">+	}</span>
&nbsp;
 	startNode(ctx, stack, backend, false)
 	stack.Wait()</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-b741f0da93130f1325dcbec6" role="button"
                       aria-expanded="false" aria-controls="id-b741f0da93130f1325dcbec6">
                        <code>cmd/utils/flags.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/cmd/utils/flags.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/utils/flags.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+193</span></div>
                            <div class="text-start"><span class="text-danger">-7</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-b741f0da93130f1325dcbec6"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;utils&#47;flags.go immutable-geth&#47;cmd&#47;utils&#47;flags.go</span>
<span class="term-fg1">index b813e52970d82a99205240866c8d291044b18161..48cfaa8838071eeb9a2c5cc2f0c17b3fc149cc62 100644</span>
<span class="term-fg1">--- go-ethereum&#47;cmd&#47;utils&#47;flags.go</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;utils&#47;flags.go</span>
<span class="term-fg36">@@ -36,6 +36,7 @@</span> 	&quot;time&quot;
&nbsp;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&#47;keystore&quot;
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;settings&quot;</span>
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&#47;fdlimit&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&quot;
<span class="term-fg36">@@ -155,6 +156,34 @@</span> 		Name:     &quot;holesky&quot;,
 		Usage:    &quot;Holesky network: pre-configured proof-of-stake test network&quot;,
 		Category: flags.EthCategory,
 	}
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Add network flag for zkEVM.</span>
<span class="term-fg32">+	ImmutableNetworkFlag = &amp;cli.StringFlag{</span>
<span class="term-fg32">+		Name:     &quot;zkevm&quot;,</span>
<span class="term-fg32">+		Usage:    &quot;Immutable zkEVM network (mainnet, testnet, devnet)&quot;,</span>
<span class="term-fg32">+		Category: flags.EthCategory,</span>
<span class="term-fg32">+		EnvVars:  []string{&quot;GETH_FLAG_IMMUTABLE_NETWORK&quot;},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Add flag for toggling default peer gossiping.</span>
<span class="term-fg32">+	ImmutableGossipDefaultFlag = &amp;cli.BoolFlag{</span>
<span class="term-fg32">+		Name:     &quot;gossipdefault&quot;,</span>
<span class="term-fg32">+		Usage:    &quot;If set, use the default geth gossiping behaviour, only gossiping to a subset of peers&quot;,</span>
<span class="term-fg32">+		Category: flags.EthCategory,</span>
<span class="term-fg32">+		EnvVars:  []string{&quot;GETH_FLAG_IMMUTABLE_GOSSIPDEFAULT&quot;},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Add flag to disable tx gossiping.</span>
<span class="term-fg32">+	ImmutableDisableTxPoolGossipFlag = &amp;cli.BoolFlag{</span>
<span class="term-fg32">+		Name:     &quot;disabletxpoolgossip&quot;,</span>
<span class="term-fg32">+		Usage:    &quot;If set, disable tx gossiping (egress)&quot;,</span>
<span class="term-fg32">+		Category: flags.EthCategory,</span>
<span class="term-fg32">+		EnvVars:  []string{&quot;GETH_FLAG_IMMUTABLE_DISABLETXPOOLGOSSIP&quot;},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Add flag to forward to the Immutable RPC.</span>
<span class="term-fg32">+	ImmutableRPCProxyFlag = &amp;cli.BoolFlag{</span>
<span class="term-fg32">+		Name:     &quot;rpcproxy&quot;,</span>
<span class="term-fg32">+		Usage:    &quot;If set, forward transactions to the Immutable RPC&quot;,</span>
<span class="term-fg32">+		Category: flags.EthCategory,</span>
<span class="term-fg32">+		EnvVars:  []string{&quot;GETH_FLAG_IMMUTABLE_RPCPROXY&quot;},</span>
<span class="term-fg32">+	}</span>
 	&#47;&#47; Dev mode
 	DeveloperFlag = &amp;cli.BoolFlag{
 		Name:     &quot;dev&quot;,
<span class="term-fg36">@@ -252,6 +281,17 @@</span> 		Name:     &quot;override.verkle&quot;,
 		Usage:    &quot;Manually specify the Verkle fork timestamp, overriding the bundled setting&quot;,
 		Category: flags.EthCategory,
 	}
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Add fork override flags</span>
<span class="term-fg32">+	OverridePrevrandao = &amp;cli.Uint64Flag{</span>
<span class="term-fg32">+		Name:     &quot;override.prevrandao&quot;,</span>
<span class="term-fg32">+		Usage:    &quot;Manually specify the Prevrandao fork timestamp. Intended for testing only, use --zkevm.* instead&quot;,</span>
<span class="term-fg32">+		Category: flags.EthCategory,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	OverrideShanghai = &amp;cli.Uint64Flag{</span>
<span class="term-fg32">+		Name:     &quot;override.shanghai&quot;,</span>
<span class="term-fg32">+		Usage:    &quot;Manually specify the Shanghai fork timestamp. Intended for testing only, use --zkevm.* instead&quot;,</span>
<span class="term-fg32">+		Category: flags.EthCategory,</span>
<span class="term-fg32">+	}</span>
 	SyncModeFlag = &amp;flags.TextMarshalerFlag{
 		Name:     &quot;syncmode&quot;,
 		Usage:    `Blockchain sync mode (&quot;snap&quot; or &quot;full&quot;)`,
<span class="term-fg36">@@ -346,6 +386,13 @@</span> 		Usage:    &quot;Maximum amount of time non-executable transaction are queued&quot;,
 		Value:    ethconfig.Defaults.TxPool.Lifetime,
 		Category: flags.TxPoolCategory,
 	}
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): allow the setting of ACLs block&#47;allow lists for txpool</span>
<span class="term-fg32">+	TxPoolBlockListFilePaths = &amp;cli.StringSliceFlag{</span>
<span class="term-fg32">+		Name:     &quot;txpool.blocklistfilepaths&quot;,</span>
<span class="term-fg32">+		Usage:    &quot;TxPoolBlockListFilePaths allows you to specify one or more file paths containing blocklists for the transaction pool&quot;,</span>
<span class="term-fg32">+		Category: flags.TxPoolCategory,</span>
<span class="term-fg32">+		Value:    &amp;cli.StringSlice{},</span>
<span class="term-fg32">+	}</span>
 	&#47;&#47; Blob transaction pool settings
 	BlobPoolDataDirFlag = &amp;cli.StringFlag{
 		Name:     &quot;blobpool.datadir&quot;,
<span class="term-fg36">@@ -446,6 +493,14 @@</span> 	MinerEtherbaseFlag = &amp;cli.StringFlag{
 		Name:     &quot;miner.etherbase&quot;,
 		Usage:    &quot;0x prefixed public address for block mining rewards&quot;,
 		Category: flags.MinerCategory,
<span class="term-fg32">+		&#47;&#47; CHANGE(immutable): Add env var</span>
<span class="term-fg32">+		EnvVars: []string{&quot;GETH_FLAG_MINER_ETHERBASE&quot;},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Add flag for etherbase address file</span>
<span class="term-fg32">+	MinerEtherbaseFileFlag = &amp;cli.StringFlag{</span>
<span class="term-fg32">+		Name:     &quot;miner.etherbase-file&quot;,</span>
<span class="term-fg32">+		Usage:    &quot;filepath to file containing 0x prefixed public address for block mining rewards&quot;,</span>
<span class="term-fg32">+		Category: flags.MinerCategory,</span>
 	}
 	MinerExtraDataFlag = &amp;cli.StringFlag{
 		Name:     &quot;miner.extradata&quot;,
<span class="term-fg36">@@ -471,12 +526,30 @@</span> 		Name:     &quot;unlock&quot;,
 		Usage:    &quot;Comma separated list of accounts to unlock&quot;,
 		Value:    &quot;&quot;,
 		Category: flags.AccountCategory,
<span class="term-fg32">+		&#47;&#47; CHANGE(immutable): Add env var</span>
<span class="term-fg32">+		EnvVars: []string{&quot;GETH_FLAG_UNLOCK_ACCOUNT&quot;},</span>
 	}
 	PasswordFileFlag = &amp;cli.PathFlag{
 		Name:      &quot;password&quot;,
 		Usage:     &quot;Password file to use for non-interactive password input&quot;,
 		TakesFile: true,
 		Category:  flags.AccountCategory,
<span class="term-fg32">+		&#47;&#47; CHANGE(immutable): Add flag for local keystore pw</span>
<span class="term-fg32">+		EnvVars: []string{&quot;GETH_FLAG_PASSWORD_FILEPATH&quot;},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Add AWS region flag</span>
<span class="term-fg32">+	ImmutableAWSRegion = &amp;cli.BoolFlag{</span>
<span class="term-fg32">+		Name:     &quot;aws.region&quot;,</span>
<span class="term-fg32">+		Usage:    &quot;name of AWS region used for secret key backends&quot;,</span>
<span class="term-fg32">+		Category: flags.AccountCategory,</span>
<span class="term-fg32">+		EnvVars:  []string{&quot;GETH_FLAG_IMMUTABLE_AWS_REGION&quot;},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Add pod namespace flag</span>
<span class="term-fg32">+	ImmutablePodNamespace = &amp;cli.BoolFlag{</span>
<span class="term-fg32">+		Name:     &quot;k8s.namespace&quot;,</span>
<span class="term-fg32">+		Usage:    &quot;kubernetes namespace pod is running in. Used for secret key backends&quot;,</span>
<span class="term-fg32">+		Category: flags.AccountCategory,</span>
<span class="term-fg32">+		EnvVars:  []string{&quot;POD_NAMESPACE&quot;},</span>
 	}
 	ExternalSignerFlag = &amp;cli.StringFlag{
 		Name:     &quot;signer&quot;,
<span class="term-fg36">@@ -516,6 +589,49 @@</span> 		Usage:    &quot;Sets a cap on transaction fee (in ether) that can be sent via the RPC APIs (0 = no cap)&quot;,
 		Value:    ethconfig.Defaults.RPCTxFeeCap,
 		Category: flags.APICategory,
 	}
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): add a flag option to disable the debug rpc endpoints</span>
<span class="term-fg32">+	IsDebugRPCDisabledFlag = &amp;cli.BoolFlag{</span>
<span class="term-fg32">+		Name:     &quot;rpc.debugdisable&quot;,</span>
<span class="term-fg32">+		Usage:    &quot;Disable the Debug RPC endpoints&quot;,</span>
<span class="term-fg32">+		Value:    node.DefaultConfig.DisableDebug,</span>
<span class="term-fg32">+		Category: flags.APICategory,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	IsAdminRPCDisabledFlag = &amp;cli.BoolFlag{</span>
<span class="term-fg32">+		Name:     &quot;rpc.admindisable&quot;,</span>
<span class="term-fg32">+		Usage:    &quot;Disable the Admin RPC endpoints&quot;,</span>
<span class="term-fg32">+		Value:    node.DefaultConfig.DisableAdmin,</span>
<span class="term-fg32">+		Category: flags.APICategory,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	IsTxPoolRPCDisabledFlag = &amp;cli.BoolFlag{</span>
<span class="term-fg32">+		Name:     &quot;rpc.txpooldisable&quot;,</span>
<span class="term-fg32">+		Usage:    &quot;Disable the txpool RPC endpoints&quot;,</span>
<span class="term-fg32">+		Value:    node.DefaultConfig.DisableTxPool,</span>
<span class="term-fg32">+		Category: flags.APICategory,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	IsEngineRPCDisabledFlag = &amp;cli.BoolFlag{</span>
<span class="term-fg32">+		Name:     &quot;rpc.enginedisable&quot;,</span>
<span class="term-fg32">+		Usage:    &quot;Disable the engine RPC endpoints&quot;,</span>
<span class="term-fg32">+		Value:    node.DefaultConfig.DisableEngine,</span>
<span class="term-fg32">+		Category: flags.APICategory,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	IsCliqueRPCDisabledFlag = &amp;cli.BoolFlag{</span>
<span class="term-fg32">+		Name:     &quot;rpc.cliquedisable&quot;,</span>
<span class="term-fg32">+		Usage:    &quot;Disable the clique RPC endpoints&quot;,</span>
<span class="term-fg32">+		Value:    node.DefaultConfig.DisableClique,</span>
<span class="term-fg32">+		Category: flags.APICategory,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	IsMinerRPCDisabledFlag = &amp;cli.BoolFlag{</span>
<span class="term-fg32">+		Name:     &quot;rpc.minerdisable&quot;,</span>
<span class="term-fg32">+		Usage:    &quot;Disable the miner RPC endpoints&quot;,</span>
<span class="term-fg32">+		Value:    node.DefaultConfig.DisableMiner,</span>
<span class="term-fg32">+		Category: flags.APICategory,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	IsPersonalRPCDisabledFlag = &amp;cli.BoolFlag{</span>
<span class="term-fg32">+		Name:     &quot;rpc.personaldisable&quot;,</span>
<span class="term-fg32">+		Usage:    &quot;Disable the personal RPC endpoints&quot;,</span>
<span class="term-fg32">+		Value:    node.DefaultConfig.DisablePersonal,</span>
<span class="term-fg32">+		Category: flags.APICategory,</span>
<span class="term-fg32">+	}</span>
 	&#47;&#47; Authenticated RPC HTTP settings
 	AuthListenFlag = &amp;cli.StringFlag{
 		Name:     &quot;authrpc.addr&quot;,
<span class="term-fg36">@@ -761,6 +877,8 @@</span> 	NetrestrictFlag = &amp;cli.StringFlag{
 		Name:     &quot;netrestrict&quot;,
 		Usage:    &quot;Restricts network communication to the given IP networks (CIDR masks)&quot;,
 		Category: flags.NetworkingCategory,
<span class="term-fg32">+		&#47;&#47; CHANGE(immutable): Add env var</span>
<span class="term-fg32">+		EnvVars: []string{&quot;GETH_FLAG_NET_RESTRICT&quot;},</span>
 	}
 	DNSDiscoveryFlag = &amp;cli.StringFlag{
 		Name:     &quot;discovery.dns&quot;,
<span class="term-fg36">@@ -911,14 +1029,15 @@</span> 	}
 )
&nbsp;
 var (
<span class="term-fg31">-	&#47;&#47; TestnetFlags is the flag group of all built-in supported testnets.</span>
<span class="term-fg31">-	TestnetFlags = []cli.Flag{</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): append Immutable network flags</span>
<span class="term-fg32">+	&#47;&#47; NetworkFlags is the flag group of all built-in supported networks.</span>
<span class="term-fg32">+	NetworkFlags = []cli.Flag{</span>
<span class="term-fg32">+		MainnetFlag,</span>
<span class="term-fg32">+		ImmutableNetworkFlag,</span>
 		GoerliFlag,
 		SepoliaFlag,
 		HoleskyFlag,
 	}
<span class="term-fg31">-	&#47;&#47; NetworkFlags is the flag group of all built-in supported networks.</span>
<span class="term-fg31">-	NetworkFlags = append([]cli.Flag{MainnetFlag}, TestnetFlags...)</span>
&nbsp;
 	&#47;&#47; DatabaseFlags is the flag group of all database flags.
 	DatabaseFlags = []cli.Flag{
<span class="term-fg36">@@ -1268,10 +1387,24 @@</span> }
&nbsp;
 &#47;&#47; setEtherbase retrieves the etherbase from the directly specified command line flags.
 func setEtherbase(ctx *cli.Context, cfg *ethconfig.Config) {
<span class="term-fg31">-	if !ctx.IsSet(MinerEtherbaseFlag.Name) {</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Handle etherbase file env var</span>
<span class="term-fg32">+	&#47;&#47; Get address from one flag or another</span>
<span class="term-fg32">+	addr := &quot;&quot;</span>
<span class="term-fg32">+	if ctx.IsSet(MinerEtherbaseFileFlag.Name) {</span>
<span class="term-fg32">+		&#47;&#47; Read the address from the specified file</span>
<span class="term-fg32">+		addrBytes, err := os.ReadFile(ctx.String(MinerEtherbaseFileFlag.Name))</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			Fatalf(&quot;Failed to read etherbase addr file: %w&quot;, err)</span>
<span class="term-fg32">+			return</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		addr = string(addrBytes)</span>
<span class="term-fg32">+	} else if ctx.IsSet(MinerEtherbaseFlag.Name) {</span>
<span class="term-fg32">+		addr = ctx.String(MinerEtherbaseFlag.Name)</span>
<span class="term-fg32">+	} else {</span>
<span class="term-fg32">+		&#47;&#47; None specified</span>
 		return
 	}
<span class="term-fg31">-	addr := ctx.String(MinerEtherbaseFlag.Name)</span>
<span class="term-fg32">+	&#47;&#47; Handle the address</span>
 	if strings.HasPrefix(addr, &quot;0x&quot;) || strings.HasPrefix(addr, &quot;0X&quot;) {
 		addr = addr[2:]
 	}
<span class="term-fg36">@@ -1393,6 +1526,28 @@</span> 		}
 		log.Info(fmt.Sprintf(&quot;Using %s as db engine&quot;, dbEngine))
 		cfg.DBEngine = dbEngine
 	}
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): add a flag to disable the txpool&#47;engine&#47;debug&#47;admin rpc endpoints</span>
<span class="term-fg32">+	if ctx.IsSet(IsDebugRPCDisabledFlag.Name) {</span>
<span class="term-fg32">+		cfg.DisableDebug = ctx.Bool(IsDebugRPCDisabledFlag.Name)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if ctx.IsSet(IsAdminRPCDisabledFlag.Name) {</span>
<span class="term-fg32">+		cfg.DisableAdmin = ctx.Bool(IsAdminRPCDisabledFlag.Name)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if ctx.IsSet(IsTxPoolRPCDisabledFlag.Name) {</span>
<span class="term-fg32">+		cfg.DisableTxPool = ctx.Bool(IsTxPoolRPCDisabledFlag.Name)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if ctx.IsSet(IsEngineRPCDisabledFlag.Name) {</span>
<span class="term-fg32">+		cfg.DisableEngine = ctx.Bool(IsEngineRPCDisabledFlag.Name)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if ctx.IsSet(IsCliqueRPCDisabledFlag.Name) {</span>
<span class="term-fg32">+		cfg.DisableClique = ctx.Bool(IsCliqueRPCDisabledFlag.Name)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if ctx.IsSet(IsMinerRPCDisabledFlag.Name) {</span>
<span class="term-fg32">+		cfg.DisableMiner = ctx.Bool(IsMinerRPCDisabledFlag.Name)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if ctx.IsSet(IsPersonalRPCDisabledFlag.Name) {</span>
<span class="term-fg32">+		cfg.DisablePersonal = ctx.Bool(IsPersonalRPCDisabledFlag.Name)</span>
<span class="term-fg32">+	}</span>
 	&#47;&#47; deprecation notice for log debug flags (TODO: find a more appropriate place to put these?)
 	if ctx.IsSet(LogBacktraceAtFlag.Name) {
 		log.Warn(&quot;log.backtrace flag is deprecated&quot;)
<span class="term-fg36">@@ -1493,6 +1648,10 @@</span> 	}
 	if ctx.IsSet(TxPoolLifetimeFlag.Name) {
 		cfg.Lifetime = ctx.Duration(TxPoolLifetimeFlag.Name)
 	}
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): added flags to configure tx pool acls</span>
<span class="term-fg32">+	if ctx.IsSet(TxPoolBlockListFilePaths.Name) {</span>
<span class="term-fg32">+		cfg.BlockListFilePaths = ctx.StringSlice(TxPoolBlockListFilePaths.Name)</span>
<span class="term-fg32">+	}</span>
 }
&nbsp;
 func setMiner(ctx *cli.Context, cfg *miner.Config) {
<span class="term-fg36">@@ -1585,7 +1744,7 @@</span>
 &#47;&#47; SetEthConfig applies eth-related command line flags to the config.
 func SetEthConfig(ctx *cli.Context, stack *node.Node, cfg *ethconfig.Config) {
 	&#47;&#47; Avoid conflicting network flags
<span class="term-fg31">-	CheckExclusive(ctx, MainnetFlag, DeveloperFlag, GoerliFlag, SepoliaFlag, HoleskyFlag)</span>
<span class="term-fg32">+	CheckExclusive(ctx, MainnetFlag, DeveloperFlag, GoerliFlag, SepoliaFlag, HoleskyFlag, ImmutableNetworkFlag)</span>
 	CheckExclusive(ctx, DeveloperFlag, ExternalSignerFlag) &#47;&#47; Can&#39;t use both ephemeral unlocked and external signer
&nbsp;
 	&#47;&#47; Set configurations from CLI flags
<span class="term-fg36">@@ -1728,8 +1887,32 @@</span> 		} else {
 			cfg.EthDiscoveryURLs = SplitAndTrim(urls)
 		}
 	}
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Handle gossiping configuration.</span>
<span class="term-fg32">+	cfg.GossipDefault = ctx.Bool(ImmutableGossipDefaultFlag.Name)</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Handle disable txpool gossip configuration.</span>
<span class="term-fg32">+	cfg.DisableTxPoolGossip = ctx.Bool(ImmutableDisableTxPoolGossipFlag.Name)</span>
 	&#47;&#47; Override any default configs for hard coded networks.
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Handle proxy RPC forwarding configuration. Ensure this is only on RPC nodes</span>
<span class="term-fg32">+	&#47;&#47; and is set correctly depending on the Immutable network flag.</span>
<span class="term-fg32">+	CheckExclusive(ctx, ImmutableRPCProxyFlag, MiningEnabledFlag)</span>
<span class="term-fg32">+	if ctx.IsSet(ImmutableRPCProxyFlag.Name) &amp;&amp; ctx.IsSet(ImmutableNetworkFlag.Name) {</span>
<span class="term-fg32">+		network, err := settings.NewNetwork(ctx.String(ImmutableNetworkFlag.Name))</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			Fatalf(err.Error())</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		cfg.RPCProxyURL, err = network.RPC()</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			Fatalf(err.Error())</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		log.Info(&quot;Setting RPC Proxy on node&quot;, &quot;url&quot;, cfg.RPCProxyURL)</span>
<span class="term-fg32">+	}</span>
 	switch {
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): handle Immutable networks</span>
<span class="term-fg32">+	case ctx.IsSet(ImmutableNetworkFlag.Name):</span>
<span class="term-fg32">+		cfg.Genesis = core.ImmutableGenesisBlock(ctx.String(ImmutableNetworkFlag.Name))</span>
<span class="term-fg32">+		if !ctx.IsSet(NetworkIdFlag.Name) {</span>
<span class="term-fg32">+			cfg.NetworkId = cfg.Genesis.Config.ChainID.Uint64()</span>
<span class="term-fg32">+		}</span>
 	case ctx.Bool(MainnetFlag.Name):
 		if !ctx.IsSet(NetworkIdFlag.Name) {
 			cfg.NetworkId = 1
<span class="term-fg36">@@ -2055,6 +2238,9 @@</span>
 func MakeGenesis(ctx *cli.Context) *core.Genesis {
 	var genesis *core.Genesis
 	switch {
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): handle Immutable networks</span>
<span class="term-fg32">+	case ctx.IsSet(ImmutableNetworkFlag.Name):</span>
<span class="term-fg32">+		genesis = core.ImmutableGenesisBlock(ctx.String(ImmutableNetworkFlag.Name))</span>
 	case ctx.Bool(MainnetFlag.Name):
 		genesis = core.DefaultGenesisBlock()
 	case ctx.Bool(HoleskyFlag.Name):</div>
    </div>

            
            
        </div>
        <div>
            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-8ca981ad70036ffa54414206"role="button" aria-expanded="false" aria-controls="id-8ca981ad70036ffa54414206">
        
            <div class="col-12 col-md-12 col-lg-6 col-xl-6 text-start"><h4>Bootstrap</h4></div>
        

        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2">
            <div class="row line-stat">
                
                
            </div>
        </div>
        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2 ">
            <div class="row line-stat">
                
                    <div class="text-end"><span class="text-success">+3136</span></div>
                    <div class="text-start"><span class="text-danger">-0</span></div>
                
                
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-8ca981ad70036ffa54414206">
        <div><p>Logic for bootstrapping Immutable geth instances both locally and inside K8s pods</p>
</div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-4a2453ae8d31dcb2e6a25970" role="button"
                       aria-expanded="false" aria-controls="id-4a2453ae8d31dcb2e6a25970">
                        <code>cmd/geth/immutable.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/geth/immutable.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+148</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-4a2453ae8d31dcb2e6a25970"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;immutable.go immutable-geth&#47;cmd&#47;geth&#47;immutable.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..1d648fe9d603c35eecc4276f89d82b568f62c097</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;geth&#47;immutable.go</span>
<span class="term-fg36">@@ -0,0 +1,148 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package main</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;immutable&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;utils&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;internal&#47;flags&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;urfave&#47;cli&#47;v2&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+var (</span>
<span class="term-fg32">+	immutableCommand = &amp;cli.Command{</span>
<span class="term-fg32">+		Name: &quot;immutable&quot;,</span>
<span class="term-fg32">+		Usage: `A set of commands to manage bootstrap and deployment for Immutable infrastructure.</span>
<span class="term-fg32">+Local bootstrap will also run the validator node that is configured by the bootstrap.`,</span>
<span class="term-fg32">+		Description: &quot;&quot;,</span>
<span class="term-fg32">+		Subcommands: []*cli.Command{</span>
<span class="term-fg32">+			{</span>
<span class="term-fg32">+				Name:  &quot;bootstrap&quot;,</span>
<span class="term-fg32">+				Usage: &quot;bootstrap geth network configurations&quot;,</span>
<span class="term-fg32">+				Subcommands: []*cli.Command{</span>
<span class="term-fg32">+					{</span>
<span class="term-fg32">+						Name:   &quot;local&quot;,</span>
<span class="term-fg32">+						Usage:  &quot;bootstrap local geth network configurations&quot;,</span>
<span class="term-fg32">+						Action: bootstrapLocalCommand,</span>
<span class="term-fg32">+						Flags: flags.Merge([]cli.Flag{</span>
<span class="term-fg32">+							immutable.GasLimit,</span>
<span class="term-fg32">+							immutable.BootCount,</span>
<span class="term-fg32">+							immutable.ValidatorCount,</span>
<span class="term-fg32">+							immutable.RPCCount,</span>
<span class="term-fg32">+							immutable.BlockListFilepath,</span>
<span class="term-fg32">+							immutable.Env,</span>
<span class="term-fg32">+							immutable.DataDirpath,</span>
<span class="term-fg32">+							utils.OverrideShanghai,</span>
<span class="term-fg32">+							utils.OverridePrevrandao,</span>
<span class="term-fg32">+							utils.OverrideCancun,</span>
<span class="term-fg32">+							utils.SyncModeFlag,</span>
<span class="term-fg32">+							configFileFlag,</span>
<span class="term-fg32">+							utils.GCModeFlag,</span>
<span class="term-fg32">+						}),</span>
<span class="term-fg32">+					},</span>
<span class="term-fg32">+					{</span>
<span class="term-fg32">+						Name:   &quot;node&quot;,</span>
<span class="term-fg32">+						Usage:  &quot;bootstrap node from within a k8s pod&quot;,</span>
<span class="term-fg32">+						Action: bootstrapK8sNodeCommand,</span>
<span class="term-fg32">+						Flags: flags.Merge([]cli.Flag{</span>
<span class="term-fg32">+							immutable.Role,</span>
<span class="term-fg32">+							immutable.Region,</span>
<span class="term-fg32">+							utils.ImmutableNetworkFlag,</span>
<span class="term-fg32">+							immutable.DataDirpath,</span>
<span class="term-fg32">+						}),</span>
<span class="term-fg32">+					},</span>
<span class="term-fg32">+					{</span>
<span class="term-fg32">+						Name:   &quot;rpc&quot;,</span>
<span class="term-fg32">+						Usage:  &quot;bootstrap rpc node&quot;,</span>
<span class="term-fg32">+						Action: bootstrapExternalNodeCommand,</span>
<span class="term-fg32">+						Flags: flags.Merge([]cli.Flag{</span>
<span class="term-fg32">+							utils.ImmutableNetworkFlag,</span>
<span class="term-fg32">+							immutable.DataDirpath,</span>
<span class="term-fg32">+						}),</span>
<span class="term-fg32">+					},</span>
<span class="term-fg32">+				},</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			{</span>
<span class="term-fg32">+				Name:  &quot;run&quot;,</span>
<span class="term-fg32">+				Usage: &quot;run a process in the geth network&quot;,</span>
<span class="term-fg32">+				Subcommands: []*cli.Command{</span>
<span class="term-fg32">+					{</span>
<span class="term-fg32">+						Name:   &quot;boot&quot;,</span>
<span class="term-fg32">+						Usage:  &quot;run a boot node&quot;,</span>
<span class="term-fg32">+						Action: runBootNodeCommand,</span>
<span class="term-fg32">+						Flags: flags.Merge([]cli.Flag{</span>
<span class="term-fg32">+							immutable.Region,</span>
<span class="term-fg32">+							utils.ListenPortFlag,</span>
<span class="term-fg32">+							utils.KeyStoreDirFlag,</span>
<span class="term-fg32">+						}),</span>
<span class="term-fg32">+					},</span>
<span class="term-fg32">+				},</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			{</span>
<span class="term-fg32">+				Name:   &quot;configure&quot;,</span>
<span class="term-fg32">+				Usage:  &quot;configure geth node environment before every time runtime executes&quot;,</span>
<span class="term-fg32">+				Action: configureNodeInPodCommand,</span>
<span class="term-fg32">+				Flags: flags.Merge([]cli.Flag{</span>
<span class="term-fg32">+					immutable.Role,</span>
<span class="term-fg32">+					immutable.ConfigFilepath,</span>
<span class="term-fg32">+					immutable.DataDirpath,</span>
<span class="term-fg32">+				}),</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			{</span>
<span class="term-fg32">+				Name:      &quot;rewind&quot;,</span>
<span class="term-fg32">+				Usage:     &quot;rewind chain to a specific block&quot;,</span>
<span class="term-fg32">+				ArgsUsage: &quot;[? &lt;blockHash&gt; | &lt;blockNum&gt;]&quot;,</span>
<span class="term-fg32">+				Action:    runRewindChainCommand,</span>
<span class="term-fg32">+				Flags: flags.Merge([]cli.Flag{</span>
<span class="term-fg32">+					immutable.OverrideFlag(immutable.DataDirpath, true),</span>
<span class="term-fg32">+				}),</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			{</span>
<span class="term-fg32">+				Name:   &quot;decode&quot;,</span>
<span class="term-fg32">+				Usage:  &quot;decode an encoded resource&quot;,</span>
<span class="term-fg32">+				Action: runDecodeCommand,</span>
<span class="term-fg32">+				Flags: flags.Merge([]cli.Flag{</span>
<span class="term-fg32">+					immutable.PublicKey,</span>
<span class="term-fg32">+				}),</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			{</span>
<span class="term-fg32">+				Name:  &quot;vote&quot;,</span>
<span class="term-fg32">+				Usage: &quot;vote in or out new validators by connecting to multiple validators simultaneously&quot;,</span>
<span class="term-fg32">+				Subcommands: []*cli.Command{</span>
<span class="term-fg32">+					{</span>
<span class="term-fg32">+						Name:   &quot;add&quot;,</span>
<span class="term-fg32">+						Usage:  &quot;vote in a validator&quot;,</span>
<span class="term-fg32">+						Action: addValidatorCommand,</span>
<span class="term-fg32">+						Flags: flags.Merge([]cli.Flag{</span>
<span class="term-fg32">+							immutable.Voters,</span>
<span class="term-fg32">+							immutable.ValidatorAddress,</span>
<span class="term-fg32">+						}),</span>
<span class="term-fg32">+					},</span>
<span class="term-fg32">+					{</span>
<span class="term-fg32">+						Name:   &quot;remove&quot;,</span>
<span class="term-fg32">+						Usage:  &quot;vote out a validator&quot;,</span>
<span class="term-fg32">+						Action: removeValidatorCommand,</span>
<span class="term-fg32">+						Flags: flags.Merge([]cli.Flag{</span>
<span class="term-fg32">+							immutable.Voters,</span>
<span class="term-fg32">+							immutable.ValidatorAddress,</span>
<span class="term-fg32">+						}),</span>
<span class="term-fg32">+					},</span>
<span class="term-fg32">+				},</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+)</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-f3839503060ea934a10a557a" role="button"
                       aria-expanded="false" aria-controls="id-f3839503060ea934a10a557a">
                        <code>cmd/geth/immutable/env/env.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/geth/immutable/env/env.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+68</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-f3839503060ea934a10a557a"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;env&#47;env.go immutable-geth&#47;cmd&#47;geth&#47;immutable&#47;env&#47;env.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..2fcc6f16b1104cba97ee7938f7fa4eb312851cc8</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;geth&#47;immutable&#47;env&#47;env.go</span>
<span class="term-fg36">@@ -0,0 +1,68 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package env</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;fmt&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;settings&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Environment represents an Immutable zkEVM environment</span>
<span class="term-fg32">+&#47;&#47; and assists referencing resources correctly, such as AWS secrets, k8s YAMLs, and</span>
<span class="term-fg32">+&#47;&#47; configuration files.</span>
<span class="term-fg32">+type Environment struct {</span>
<span class="term-fg32">+	string</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (e Environment) String() string {</span>
<span class="term-fg32">+	return e.string</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ChainID returns the chain ID for the environment</span>
<span class="term-fg32">+func (e Environment) ChainID() int {</span>
<span class="term-fg32">+	switch e {</span>
<span class="term-fg32">+	case Devnet:</span>
<span class="term-fg32">+		return settings.DevnetNetworkID</span>
<span class="term-fg32">+	case Testnet:</span>
<span class="term-fg32">+		return settings.TestnetNetworkID</span>
<span class="term-fg32">+	case Mainnet:</span>
<span class="term-fg32">+		return settings.MainnetNetworkID</span>
<span class="term-fg32">+	default:</span>
<span class="term-fg32">+		panic(fmt.Sprintf(&quot;unsupported env: %s&quot;, e))</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+var (</span>
<span class="term-fg32">+	Devnet  = Environment{&quot;dev&quot;}</span>
<span class="term-fg32">+	Testnet = Environment{&quot;sandbox&quot;}</span>
<span class="term-fg32">+	Mainnet = Environment{&quot;prod&quot;}</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewFromString returns an Environment from a string</span>
<span class="term-fg32">+func NewFromString(env string) (Environment, error) {</span>
<span class="term-fg32">+	switch env {</span>
<span class="term-fg32">+	case Devnet.String():</span>
<span class="term-fg32">+		return Devnet, nil</span>
<span class="term-fg32">+	case Testnet.String():</span>
<span class="term-fg32">+		return Testnet, nil</span>
<span class="term-fg32">+	case Mainnet.String():</span>
<span class="term-fg32">+		return Mainnet, nil</span>
<span class="term-fg32">+	default:</span>
<span class="term-fg32">+		return Environment{}, fmt.Errorf(&quot;unsupported env: %s&quot;, env)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-f25f8400ea3f0350b7a736b6" role="button"
                       aria-expanded="false" aria-controls="id-f25f8400ea3f0350b7a736b6">
                        <code>cmd/geth/immutable/keys/keys.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/geth/immutable/keys/keys.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+132</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-f25f8400ea3f0350b7a736b6"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;keys&#47;keys.go immutable-geth&#47;cmd&#47;geth&#47;immutable&#47;keys&#47;keys.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..748b215a3484ded342340903ec7d91af2bab885c</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;geth&#47;immutable&#47;keys&#47;keys.go</span>
<span class="term-fg36">@@ -0,0 +1,132 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package keys</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;context&quot;</span>
<span class="term-fg32">+	&quot;crypto&#47;ecdsa&quot;</span>
<span class="term-fg32">+	&quot;encoding&#47;hex&quot;</span>
<span class="term-fg32">+	&quot;errors&quot;</span>
<span class="term-fg32">+	&quot;fmt&quot;</span>
<span class="term-fg32">+	&quot;os&quot;</span>
<span class="term-fg32">+	&quot;strings&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;immutable&#47;remote&#47;aws&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;crypto&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;log&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+const (</span>
<span class="term-fg32">+	&#47;&#47; EmptyPrivateKeySecretValue is the value of the private key secret before it is set</span>
<span class="term-fg32">+	&#47;&#47; by the node-in-pod bootstrap operation.</span>
<span class="term-fg32">+	EmptyPrivateKeySecretValue = &quot;EMPTY&quot;</span>
<span class="term-fg32">+	&#47;&#47; SecretKeyEnvVar is the environment variable used to retrieve the secret path from the environment.</span>
<span class="term-fg32">+	SecretKeyEnvVar = &quot;KEY_PATH&quot;</span>
<span class="term-fg32">+	&#47;&#47; RolePlaceHolder is the placeholder for the role in the secret ID template.</span>
<span class="term-fg32">+	RolePlaceHolder = &quot;{POD_ROLE}&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+var (</span>
<span class="term-fg32">+	ErrPrivateKeyInvalid  = errors.New(&quot;private key is invalid&quot;)</span>
<span class="term-fg32">+	ErrPrivateKeyNotFound = errors.New(&quot;private key is not found&quot;)</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SecretIDTemplate retrieves the path to the secret key from the environment.</span>
<span class="term-fg32">+func SecretIDTemplate() (string, error) {</span>
<span class="term-fg32">+	path := os.Getenv(SecretKeyEnvVar)</span>
<span class="term-fg32">+	if path == &quot;&quot; {</span>
<span class="term-fg32">+		return &quot;&quot;, fmt.Errorf(&quot;failed to retrieve secret path from environment&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return path, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SecretID is the identifier used to store a private key (decrypted keystore) in a secure remote store.</span>
<span class="term-fg32">+&#47;&#47; The secret path must contain the placeholder {POD_ROLE}, which will be populated role of the node.</span>
<span class="term-fg32">+&#47;&#47; They secret path must also be scoped to the correct environment.</span>
<span class="term-fg32">+func SecretID(secretIDTemplate, owner string) (string, error) {</span>
<span class="term-fg32">+	if !strings.Contains(secretIDTemplate, RolePlaceHolder) {</span>
<span class="term-fg32">+		return &quot;&quot;, fmt.Errorf(&quot;secret ID template must contain the placeholder %s&quot;, RolePlaceHolder)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return strings.Replace(secretIDTemplate, RolePlaceHolder, owner, 1), nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Store is used to retrieve and store private keys</span>
<span class="term-fg32">+type Store interface {</span>
<span class="term-fg32">+	PutSecretString(key, content string) error</span>
<span class="term-fg32">+	GetSecret(ctx context.Context, id string) (string, error)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Render will retrieve or create a private key for a node.</span>
<span class="term-fg32">+&#47;&#47; The address pertaining to the key will be logged.</span>
<span class="term-fg32">+func Render(</span>
<span class="term-fg32">+	ctx context.Context,</span>
<span class="term-fg32">+	store Store,</span>
<span class="term-fg32">+	secretID string,</span>
<span class="term-fg32">+) (*ecdsa.PrivateKey, error) {</span>
<span class="term-fg32">+	&#47;&#47; Try and pull existing private key</span>
<span class="term-fg32">+	existingKeyHex, err := store.GetSecret(ctx, secretID)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		if aws.IsNotFound(err) {</span>
<span class="term-fg32">+			return nil, errors.Join(ErrPrivateKeyNotFound, err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Key content indicates it has not been initialized</span>
<span class="term-fg32">+	if existingKeyHex == EmptyPrivateKeySecretValue {</span>
<span class="term-fg32">+		log.Info(&quot;private key is empty, creating new key secret&quot;)</span>
<span class="term-fg32">+		newKey, err := crypto.GenerateKey()</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return nil, fmt.Errorf(&quot;failed to generate random private key: %w&quot;, err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		newKeyHex := hex.EncodeToString(crypto.FromECDSA(newKey))</span>
<span class="term-fg32">+		&#47;&#47; Push the key to the store</span>
<span class="term-fg32">+		if err := store.PutSecretString(secretID, newKeyHex); err != nil {</span>
<span class="term-fg32">+			return nil, fmt.Errorf(&quot;failed to push private key to secrets manager: %w&quot;, err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		logPublicKey(&amp;newKey.PublicKey)</span>
<span class="term-fg32">+		return newKey, nil</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Decode existing private key</span>
<span class="term-fg32">+	log.Info(&quot;decoding existing private key&quot;)</span>
<span class="term-fg32">+	existingKey, err := crypto.HexToECDSA(existingKeyHex)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, errors.Join(ErrPrivateKeyInvalid, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	logPublicKey(&amp;existingKey.PublicKey)</span>
<span class="term-fg32">+	return existingKey, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func logPublicKey(pubKey *ecdsa.PublicKey) {</span>
<span class="term-fg32">+	log.Info(&quot;key&quot;, &quot;public&quot;, hex.EncodeToString(crypto.FromECDSAPub(pubKey)), &quot;address&quot;, crypto.PubkeyToAddress(*pubKey).Hex())</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Retrieve will retrieve a private key from the store.</span>
<span class="term-fg32">+func Retrieve(</span>
<span class="term-fg32">+	ctx context.Context,</span>
<span class="term-fg32">+	store Store,</span>
<span class="term-fg32">+	secretID string,</span>
<span class="term-fg32">+) (*ecdsa.PrivateKey, error) {</span>
<span class="term-fg32">+	keyHex, err := store.GetSecret(ctx, secretID)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;failed to retrieve private key for: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	privKey, err := crypto.HexToECDSA(keyHex)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, errors.Join(ErrPrivateKeyInvalid, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return privKey, nil</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-53b683452c765c2f4400f4ee" role="button"
                       aria-expanded="false" aria-controls="id-53b683452c765c2f4400f4ee">
                        <code>cmd/geth/immutable/node/node.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/geth/immutable/node/node.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+245</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-53b683452c765c2f4400f4ee"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;node&#47;node.go immutable-geth&#47;cmd&#47;geth&#47;immutable&#47;node&#47;node.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..c8949d59fa38c4887d032cd6b05a640734b42d97</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;geth&#47;immutable&#47;node&#47;node.go</span>
<span class="term-fg36">@@ -0,0 +1,245 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package node</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;fmt&quot;</span>
<span class="term-fg32">+	&quot;net&#47;url&quot;</span>
<span class="term-fg32">+	&quot;os&quot;</span>
<span class="term-fg32">+	&quot;os&#47;exec&quot;</span>
<span class="term-fg32">+	&quot;path&#47;filepath&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&#47;keystore&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;role&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;settings&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+const (</span>
<span class="term-fg32">+	PortP2P     = 30300</span>
<span class="term-fg32">+	PortRPC     = 8545</span>
<span class="term-fg32">+	PortWS      = 8535</span>
<span class="term-fg32">+	PortMetrics = 6060</span>
<span class="term-fg32">+	PortAuthRPC = 8550</span>
<span class="term-fg32">+	PortPprof   = 7070</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Options are node-specific values</span>
<span class="term-fg32">+type Options struct {</span>
<span class="term-fg32">+	Role         role.Role</span>
<span class="term-fg32">+	Ordinal      int</span>
<span class="term-fg32">+	Password     string</span>
<span class="term-fg32">+	URL          *url.URL</span>
<span class="term-fg32">+	ChainDirpath string</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Config contains the configuration relevant for all nodes</span>
<span class="term-fg32">+type Config struct {</span>
<span class="term-fg32">+	Network                 settings.Network</span>
<span class="term-fg32">+	ConfigFilepath          string</span>
<span class="term-fg32">+	BlockListFilepath       string</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Node is a runnable geth node that is produced by the LocalBootstrapper.</span>
<span class="term-fg32">+&#47;&#47; It depends on files rendered by the bootstrap process.</span>
<span class="term-fg32">+type Node struct {</span>
<span class="term-fg32">+	account  accounts.Account</span>
<span class="term-fg32">+	dirpath  string</span>
<span class="term-fg32">+	password string</span>
<span class="term-fg32">+	u        *url.URL</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	args    []string</span>
<span class="term-fg32">+	environ []string</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; New creates a new node</span>
<span class="term-fg32">+func New(opts Options, conf Config) (*Node, error) {</span>
<span class="term-fg32">+	&#47;&#47; Create indexed node directory</span>
<span class="term-fg32">+	nodeDirpath := filepath.Join(opts.ChainDirpath, CanonicalNodeName(opts.Role, opts.Ordinal))</span>
<span class="term-fg32">+	if err := os.MkdirAll(nodeDirpath, os.ModePerm); err != nil {</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;failed to create node directory: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Store the encrypted key file to disk</span>
<span class="term-fg32">+	account, err := keystore.StoreKey(</span>
<span class="term-fg32">+		keystoreDirpath(nodeDirpath),</span>
<span class="term-fg32">+		opts.Password,</span>
<span class="term-fg32">+		keystore.StandardScryptN,</span>
<span class="term-fg32">+		keystore.StandardScryptP,</span>
<span class="term-fg32">+	)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;failed to create key: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Store the account address to disk</span>
<span class="term-fg32">+	if err := os.WriteFile(filepath.Join(nodeDirpath, &quot;address&quot;), []byte(account.Address.Hex()), 0644); err != nil {</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;failed to write address to file: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	passwordFilepath := filepath.Join(nodeDirpath, opts.Password)</span>
<span class="term-fg32">+	environ := []string{</span>
<span class="term-fg32">+		&quot;GETH_FLAG_PASSWORD_FILEPATH&quot;,</span>
<span class="term-fg32">+		passwordFilepath,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	args := []string{}</span>
<span class="term-fg32">+	switch opts.Role {</span>
<span class="term-fg32">+	case role.Boot:</span>
<span class="term-fg32">+		args = []string{</span>
<span class="term-fg32">+			&quot;.&#47;build&#47;bin&#47;geth&quot;,</span>
<span class="term-fg32">+			&quot;immutable&quot;,</span>
<span class="term-fg32">+			&quot;run&quot;,</span>
<span class="term-fg32">+			&quot;boot&quot;,</span>
<span class="term-fg32">+			&quot;--keystore&quot;, filepath.Join(nodeDirpath, &quot;keystore&quot;),</span>
<span class="term-fg32">+			&quot;--port&quot;, opts.URL.Port(),</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	case role.Validator:</span>
<span class="term-fg32">+		args = []string{</span>
<span class="term-fg32">+			&quot;.&#47;build&#47;bin&#47;geth&quot;,</span>
<span class="term-fg32">+			&quot;--datadir&quot;, nodeDirpath,</span>
<span class="term-fg32">+			&quot;--log.debug&quot;,</span>
<span class="term-fg32">+			&quot;--networkid&quot;, fmt.Sprint(conf.Network.ID()),</span>
<span class="term-fg32">+			&quot;--metrics&quot;,</span>
<span class="term-fg32">+			&quot;--metrics.addr&quot;, &quot;127.0.0.1&quot;,</span>
<span class="term-fg32">+			&quot;--metrics.port&quot;, fmt.Sprint(PortMetrics + opts.Ordinal),</span>
<span class="term-fg32">+			&quot;--authrpc.port&quot;, fmt.Sprint(PortAuthRPC + opts.Ordinal),</span>
<span class="term-fg32">+			&quot;--verbosity&quot;, &quot;4&quot;,</span>
<span class="term-fg32">+			&quot;--port&quot;, opts.URL.Port(),</span>
<span class="term-fg32">+			&quot;--password&quot;, passwordFilepath,</span>
<span class="term-fg32">+			&quot;--rpc.debugdisable&quot;,</span>
<span class="term-fg32">+			&quot;--rpc.txpooldisable&quot;,</span>
<span class="term-fg32">+			&quot;--config&quot;, conf.ConfigFilepath,</span>
<span class="term-fg32">+			&quot;--pprof&quot;,</span>
<span class="term-fg32">+			&quot;--pprof.port&quot;, fmt.Sprint(PortPprof + opts.Ordinal),</span>
<span class="term-fg32">+			&quot;--miner.etherbase&quot;, account.Address.Hex(),</span>
<span class="term-fg32">+			&quot;--mine&quot;,</span>
<span class="term-fg32">+			&#47;&#47; NOTE: Add these flags to enable RPC on validator</span>
<span class="term-fg32">+			&quot;--http&quot;,</span>
<span class="term-fg32">+			&quot;--http.port&quot;, fmt.Sprint(PortRPC + opts.Ordinal),</span>
<span class="term-fg32">+			&quot;--cache&quot;, &quot;128&quot;,</span>
<span class="term-fg32">+			&quot;--cache.database&quot;, &quot;35&quot;,</span>
<span class="term-fg32">+			&quot;--cache.trie&quot;, &quot;35&quot;,</span>
<span class="term-fg32">+			&quot;--cache.gc&quot;, &quot;10&quot;,</span>
<span class="term-fg32">+			&quot;--cache.snapshot&quot;, &quot;20&quot;,</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	case role.RPC:</span>
<span class="term-fg32">+		&#47;&#47; TODO: This assumes 1 validator, better to parameterize</span>
<span class="term-fg32">+		rpcPortOffset := opts.Ordinal + 1 &#47;&#47; Avoid port collisions on same host</span>
<span class="term-fg32">+		args = []string{</span>
<span class="term-fg32">+			&quot;.&#47;build&#47;bin&#47;geth&quot;,</span>
<span class="term-fg32">+			&quot;--datadir&quot;, nodeDirpath,</span>
<span class="term-fg32">+			&quot;--log.debug&quot;,</span>
<span class="term-fg32">+			&quot;--networkid&quot;, fmt.Sprint(conf.Network.ID()),</span>
<span class="term-fg32">+			&quot;--metrics&quot;,</span>
<span class="term-fg32">+			&quot;--metrics.addr&quot;, &quot;127.0.0.1&quot;,</span>
<span class="term-fg32">+			&quot;--metrics.port&quot;, fmt.Sprint(PortMetrics + rpcPortOffset),</span>
<span class="term-fg32">+			&quot;--authrpc.port&quot;, fmt.Sprint(PortAuthRPC + rpcPortOffset),</span>
<span class="term-fg32">+			&quot;--http&quot;,</span>
<span class="term-fg32">+			&quot;--http.port&quot;, fmt.Sprint(PortRPC + rpcPortOffset),</span>
<span class="term-fg32">+			&quot;--ws.port&quot;, fmt.Sprint(PortWS + rpcPortOffset),</span>
<span class="term-fg32">+			&quot;--txpool.blocklistfilepaths&quot;, conf.BlockListFilepath,</span>
<span class="term-fg32">+			&quot;--rpc.debugdisable&quot;,</span>
<span class="term-fg32">+			&quot;--rpc.txpooldisable&quot;,</span>
<span class="term-fg32">+			&quot;--rpc.cliquedisable&quot;,</span>
<span class="term-fg32">+			&quot;--rpc.minerdisable&quot;,</span>
<span class="term-fg32">+			&quot;--rpc.personaldisable&quot;,</span>
<span class="term-fg32">+			&quot;--verbosity&quot;, &quot;4&quot;,</span>
<span class="term-fg32">+			&quot;--port&quot;, opts.URL.Port(),</span>
<span class="term-fg32">+			&quot;--config&quot;, conf.ConfigFilepath,</span>
<span class="term-fg32">+			&quot;--pprof&quot;,</span>
<span class="term-fg32">+			&quot;--pprof.port&quot;, fmt.Sprint(PortPprof + rpcPortOffset),</span>
<span class="term-fg32">+			&quot;--cache&quot;, &quot;128&quot;,</span>
<span class="term-fg32">+			&quot;--cache.database&quot;, &quot;40&quot;,</span>
<span class="term-fg32">+			&quot;--cache.trie&quot;, &quot;40&quot;,</span>
<span class="term-fg32">+			&quot;--cache.gc&quot;, &quot;0&quot;,</span>
<span class="term-fg32">+			&quot;--cache.snapshot&quot;, &quot;20&quot;,</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return &amp;Node{</span>
<span class="term-fg32">+		account:  account,</span>
<span class="term-fg32">+		dirpath:  nodeDirpath,</span>
<span class="term-fg32">+		password: opts.Password,</span>
<span class="term-fg32">+		u:        opts.URL,</span>
<span class="term-fg32">+		args:     args,</span>
<span class="term-fg32">+		environ:  environ,</span>
<span class="term-fg32">+	}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; URL returns the enode URL of the node</span>
<span class="term-fg32">+func (n Node) URL() *url.URL {</span>
<span class="term-fg32">+	return n.u</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Dirpath returns the directory path of the node&#39;s files</span>
<span class="term-fg32">+func (n Node) Dirpath() string {</span>
<span class="term-fg32">+	return n.dirpath</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Account returns the account of the node</span>
<span class="term-fg32">+func (n Node) Account() accounts.Account {</span>
<span class="term-fg32">+	return n.account</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Password returns the password of the node</span>
<span class="term-fg32">+func (n Node) Password() string {</span>
<span class="term-fg32">+	return n.password</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Run runs the node as a sub-process</span>
<span class="term-fg32">+func (n Node) Run(optionalArgs []string) error {</span>
<span class="term-fg32">+	args := append(n.args, optionalArgs...)</span>
<span class="term-fg32">+	cmd, err := prepareCmd(n.environ, args...)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return cmd.Run()</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func keystoreDirpath(baseDirpath string) string {</span>
<span class="term-fg32">+	return filepath.Join(baseDirpath, &quot;keystore&quot;)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; CanonicalNodeName returns the canonical name of a node based on role and ordinal</span>
<span class="term-fg32">+func CanonicalNodeName(role role.Role, ordinal int) string {</span>
<span class="term-fg32">+	return role.String() + &quot;-&quot; + fmt.Sprint(ordinal)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func prepareCmd(environ []string, args ...string) (*exec.Cmd, error) {</span>
<span class="term-fg32">+	if len(args) &lt; 2 {</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;not enough args&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	cmd := exec.Command(args[0], args[1:]...)</span>
<span class="term-fg32">+	cmd.Stderr = os.Stderr</span>
<span class="term-fg32">+	cmd.Stdout = os.Stdout</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	environLog := &quot;&quot;</span>
<span class="term-fg32">+	if len(environ)%2 != 0 {</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;environ must be key-value pairs&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if len(environ) &gt; 0 {</span>
<span class="term-fg32">+		environLog = &quot;export&quot;</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	cmd.Env = os.Environ()</span>
<span class="term-fg32">+	for i := 0; i &lt; len(environ); i += 2 {</span>
<span class="term-fg32">+		environStr := fmt.Sprintf(&quot;%s=%s&quot;, environ[i], environ[i+1])</span>
<span class="term-fg32">+		cmd.Env = append(cmd.Env, environStr)</span>
<span class="term-fg32">+		environLog = fmt.Sprintf(&quot;%s %s&quot;, environLog, environStr)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	fmt.Printf(&quot;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n%s; %s\n&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;\n&quot;, environLog, cmd.String())</span>
<span class="term-fg32">+	return cmd, nil</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-a99684611049088ac942d64d" role="button"
                       aria-expanded="false" aria-controls="id-a99684611049088ac942d64d">
                        <code>cmd/geth/immutable/rewind/rewind.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/geth/immutable/rewind/rewind.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+79</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-a99684611049088ac942d64d"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;rewind&#47;rewind.go immutable-geth&#47;cmd&#47;geth&#47;immutable&#47;rewind&#47;rewind.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..39df0849feb23fe13b978b19cf6b478231cd7699</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;geth&#47;immutable&#47;rewind&#47;rewind.go</span>
<span class="term-fg36">@@ -0,0 +1,79 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package rewind</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;errors&quot;</span>
<span class="term-fg32">+	&quot;fmt&quot;</span>
<span class="term-fg32">+	&quot;io&#47;fs&quot;</span>
<span class="term-fg32">+	&quot;os&quot;</span>
<span class="term-fg32">+	&quot;time&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;log&quot;</span>
<span class="term-fg32">+	&quot;gopkg.in&#47;yaml.v2&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Record is a single entry in the rewind history.</span>
<span class="term-fg32">+type Record struct {</span>
<span class="term-fg32">+	BlockNumber uint64</span>
<span class="term-fg32">+	BlockHash   common.Hash</span>
<span class="term-fg32">+	Timestamp   time.Time</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; History is a list of all records in the rewind history.</span>
<span class="term-fg32">+type History []Record</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Contains checks if a block is in the rewind history.</span>
<span class="term-fg32">+func (h History) Contains(hash common.Hash) bool {</span>
<span class="term-fg32">+	for _, r := range h {</span>
<span class="term-fg32">+		if r.BlockHash == hash {</span>
<span class="term-fg32">+			return true</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return false</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ReadRewindHistory reads the rewind history from the expected YAML file.</span>
<span class="term-fg32">+func ReadRewindHistory(filepath string) (history History, err error) {</span>
<span class="term-fg32">+	fileData, err := os.ReadFile(filepath)</span>
<span class="term-fg32">+	if err != nil &amp;&amp; !errors.Is(err, fs.ErrNotExist) {</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;error reading rewind history file: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if errors.Is(err, fs.ErrNotExist) {</span>
<span class="term-fg32">+		log.Info(&quot;No rewind history file found, creating a new one.&quot;)</span>
<span class="term-fg32">+	} else {</span>
<span class="term-fg32">+		log.Info(&quot;Reading existing rewind history file.&quot;)</span>
<span class="term-fg32">+		if err := yaml.Unmarshal(fileData, &amp;history); err != nil {</span>
<span class="term-fg32">+			return nil, fmt.Errorf(&quot;error unmarshalling rewind history YAML: %v&quot;, err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		return history, nil</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return []Record{}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; WriteRewindHistory writes the rewind history to the expected YAML file.</span>
<span class="term-fg32">+func WriteRewindHistory(history History, filepath string) error {</span>
<span class="term-fg32">+	yamlData, err := yaml.Marshal(&amp;history)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;error marshalling rewind history YAML: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if err := os.WriteFile(filepath, yamlData, 0644); err != nil {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;error writing rewind history file: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return nil</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-5db4366217bdc49ba95db42e" role="button"
                       aria-expanded="false" aria-controls="id-5db4366217bdc49ba95db42e">
                        <code>cmd/geth/immutable/role/role.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/geth/immutable/role/role.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+77</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-5db4366217bdc49ba95db42e"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;role&#47;role.go immutable-geth&#47;cmd&#47;geth&#47;immutable&#47;role&#47;role.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..b87bce136cd58877cf0fea7841b7a282e6d62105</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;geth&#47;immutable&#47;role&#47;role.go</span>
<span class="term-fg36">@@ -0,0 +1,77 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package role</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import &quot;fmt&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+var (</span>
<span class="term-fg32">+	Validator     = Role{&quot;validator&quot;}</span>
<span class="term-fg32">+	Boot          = Role{&quot;boot&quot;}</span>
<span class="term-fg32">+	RPC           = Role{&quot;rpc&quot;}</span>
<span class="term-fg32">+	Partner       = Role{&quot;partner&quot;}</span>
<span class="term-fg32">+	PartnerPublic = Role{&quot;partner-public&quot;}</span>
<span class="term-fg32">+	AllRoles      = []Role{Validator, Boot, RPC, Partner, PartnerPublic}</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Count returns the number of supported roles</span>
<span class="term-fg32">+func Count() int {</span>
<span class="term-fg32">+	return len(AllRoles)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Role is the role of a node in the network</span>
<span class="term-fg32">+type Role struct {</span>
<span class="term-fg32">+	string</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; String returns the string representation of the role</span>
<span class="term-fg32">+func (r Role) String() string {</span>
<span class="term-fg32">+	return r.string</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Labels returns the key&#47;value labels for the role</span>
<span class="term-fg32">+&#47;&#47; which is assigned to k8s resources</span>
<span class="term-fg32">+func (r Role) Labels() map[string]string {</span>
<span class="term-fg32">+	return map[string]string{</span>
<span class="term-fg32">+		&quot;app&quot;:   &quot;zkevm-geth&quot;,</span>
<span class="term-fg32">+		&quot;zkevm&quot;: fmt.Sprintf(&quot;geth-%s&quot;, r.String()),</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ExternalSecretName returns the name of the k8s external secret</span>
<span class="term-fg32">+&#47;&#47; used for the role</span>
<span class="term-fg32">+func (r Role) ExternalSecretName() string {</span>
<span class="term-fg32">+	return fmt.Sprintf(&quot;zkevm-geth-%s-chain&quot;, r.String())</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewFromString returns the role from a string</span>
<span class="term-fg32">+&#47;&#47; which must be one of the predefined Role* values</span>
<span class="term-fg32">+func NewFromString(name string) (Role, error) {</span>
<span class="term-fg32">+	switch name {</span>
<span class="term-fg32">+	case Validator.String():</span>
<span class="term-fg32">+		return Validator, nil</span>
<span class="term-fg32">+	case Boot.String():</span>
<span class="term-fg32">+		return Boot, nil</span>
<span class="term-fg32">+	case RPC.String():</span>
<span class="term-fg32">+		return RPC, nil</span>
<span class="term-fg32">+	case Partner.String():</span>
<span class="term-fg32">+		return Partner, nil</span>
<span class="term-fg32">+	case PartnerPublic.String():</span>
<span class="term-fg32">+		return PartnerPublic, nil</span>
<span class="term-fg32">+	default:</span>
<span class="term-fg32">+		return Role{}, fmt.Errorf(&quot;no such role for: %s&quot;, name)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-7c5099326e2460bc33b78f4d" role="button"
                       aria-expanded="false" aria-controls="id-7c5099326e2460bc33b78f4d">
                        <code>cmd/geth/immutable/settings/forks.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/geth/immutable/settings/forks.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+55</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-7c5099326e2460bc33b78f4d"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;settings&#47;forks.go immutable-geth&#47;cmd&#47;geth&#47;immutable&#47;settings&#47;forks.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..a67f07e039489bc88945288f4f0ea08c43e72aae</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;geth&#47;immutable&#47;settings&#47;forks.go</span>
<span class="term-fg36">@@ -0,0 +1,55 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package settings</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;fmt&quot;</span>
<span class="term-fg32">+	&quot;time&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Fork represents a human-readable date&#47;time for a specific network fork.</span>
<span class="term-fg32">+&#47;&#47; It can be used to validate unix timestamps (e.g. in genesis.json) so that</span>
<span class="term-fg32">+&#47;&#47; it is easier to validate the correctness of the fork timestamps.</span>
<span class="term-fg32">+type Fork struct {</span>
<span class="term-fg32">+	time.Time</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func newFork(timestamp string) Fork {</span>
<span class="term-fg32">+	const (</span>
<span class="term-fg32">+		forkTimestampLocation = &quot;UTC&quot;</span>
<span class="term-fg32">+		forkTimestampLayout   = time.UnixDate</span>
<span class="term-fg32">+	)</span>
<span class="term-fg32">+	loc, err := time.LoadLocation(forkTimestampLocation)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		panic(err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	t, err := time.ParseInLocation(forkTimestampLayout, timestamp, loc)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		panic(err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if t.UTC().Format(forkTimestampLayout) != timestamp {</span>
<span class="term-fg32">+		panic(fmt.Sprintf(&quot;fork time %s does not match supplied %s&quot;, t.UTC().Format(forkTimestampLayout), timestamp))</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return Fork{t}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; IsEnabledAt returns true if the given unix timestamp is past the fork timestamp</span>
<span class="term-fg32">+func (fork Fork) IsEnabledAt(time int64) bool {</span>
<span class="term-fg32">+	return time &gt;= fork.Unix()</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-c5fd7c8e497d00b1c0dd4e83" role="button"
                       aria-expanded="false" aria-controls="id-c5fd7c8e497d00b1c0dd4e83">
                        <code>cmd/geth/immutable/settings/network.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/geth/immutable/settings/network.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+104</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-c5fd7c8e497d00b1c0dd4e83"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;settings&#47;network.go immutable-geth&#47;cmd&#47;geth&#47;immutable&#47;settings&#47;network.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..43434a051990d68bd4f49cdeb5b8cc83c91119f1</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;geth&#47;immutable&#47;settings&#47;network.go</span>
<span class="term-fg36">@@ -0,0 +1,104 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package settings</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;fmt&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	_ &quot;embed&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+var (</span>
<span class="term-fg32">+	&#47;&#47;go:embed genesis&#47;mainnet.json</span>
<span class="term-fg32">+	immutableGenesisMainnetJSON string</span>
<span class="term-fg32">+	&#47;&#47;go:embed genesis&#47;testnet.json</span>
<span class="term-fg32">+	immutableGenesisTestnetJSON string</span>
<span class="term-fg32">+	&#47;&#47;go:embed genesis&#47;devnet.json</span>
<span class="term-fg32">+	immutableGenesisDevnetJSON string</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Network is the name of an Immutable zkEVM network</span>
<span class="term-fg32">+type Network struct {</span>
<span class="term-fg32">+	string</span>
<span class="term-fg32">+	genesisJSON string</span>
<span class="term-fg32">+	id          int</span>
<span class="term-fg32">+	cancun      Fork</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; String returns the string representation of the network</span>
<span class="term-fg32">+func (n Network) String() string {</span>
<span class="term-fg32">+	return n.string</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; GenesisJSON returns the JSON string for the genesis block of the network</span>
<span class="term-fg32">+func (n Network) GenesisJSON() string {</span>
<span class="term-fg32">+	return n.genesisJSON</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ID returns the network ID of the chain</span>
<span class="term-fg32">+func (n Network) ID() int {</span>
<span class="term-fg32">+	return n.id</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Cancun returns the Cancun fork for the network.</span>
<span class="term-fg32">+func (n Network) Cancun() Fork {</span>
<span class="term-fg32">+	return n.cancun</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; RPC returns the RPC endpoint for the network.</span>
<span class="term-fg32">+func (n Network) RPC() (string, error) {</span>
<span class="term-fg32">+	switch n.id {</span>
<span class="term-fg32">+	case MainnetNetworkID:</span>
<span class="term-fg32">+		return MainnetRPC, nil</span>
<span class="term-fg32">+	case TestnetNetworkID:</span>
<span class="term-fg32">+		return TestnetRPC, nil</span>
<span class="term-fg32">+	case DevnetNetworkID:</span>
<span class="term-fg32">+		return DevnetRPC, nil</span>
<span class="term-fg32">+	default:</span>
<span class="term-fg32">+		return &quot;&quot;, fmt.Errorf(&quot;unsupported RPC for network: %s&quot;, n.string)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewNetwork returns a new Immutable zkEVM network with the specified name</span>
<span class="term-fg32">+&#47;&#47; which must be one of &quot;mainnet&quot;, &quot;testnet&quot;, or &quot;devnet&quot;</span>
<span class="term-fg32">+func NewNetwork(name string) (*Network, error) {</span>
<span class="term-fg32">+	switch name {</span>
<span class="term-fg32">+	case &quot;devnet&quot;:</span>
<span class="term-fg32">+		return &amp;Network{</span>
<span class="term-fg32">+			string:      name,</span>
<span class="term-fg32">+			genesisJSON: immutableGenesisDevnetJSON,</span>
<span class="term-fg32">+			id:          DevnetNetworkID,</span>
<span class="term-fg32">+			cancun:      DevnetCancunFork,</span>
<span class="term-fg32">+		}, nil</span>
<span class="term-fg32">+	case &quot;testnet&quot;:</span>
<span class="term-fg32">+		return &amp;Network{</span>
<span class="term-fg32">+			string:      name,</span>
<span class="term-fg32">+			genesisJSON: immutableGenesisTestnetJSON,</span>
<span class="term-fg32">+			id:          TestnetNetworkID,</span>
<span class="term-fg32">+			cancun:      TestnetCancunFork,</span>
<span class="term-fg32">+		}, nil</span>
<span class="term-fg32">+	case &quot;mainnet&quot;:</span>
<span class="term-fg32">+		return &amp;Network{</span>
<span class="term-fg32">+			string:      name,</span>
<span class="term-fg32">+			genesisJSON: immutableGenesisMainnetJSON,</span>
<span class="term-fg32">+			id:          MainnetNetworkID,</span>
<span class="term-fg32">+			cancun:      MainnetCancunFork,</span>
<span class="term-fg32">+		}, nil</span>
<span class="term-fg32">+	default:</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;unsupported network: %s&quot;, name)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-eb8145dc534c648773ebc74f" role="button"
                       aria-expanded="false" aria-controls="id-eb8145dc534c648773ebc74f">
                        <code>cmd/geth/immutable/settings/settings.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/geth/immutable/settings/settings.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+71</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-eb8145dc534c648773ebc74f"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;settings&#47;settings.go immutable-geth&#47;cmd&#47;geth&#47;immutable&#47;settings&#47;settings.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..d6fbf7db767afdd6738bb46656647a95bf925cb4</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;geth&#47;immutable&#47;settings&#47;settings.go</span>
<span class="term-fg36">@@ -0,0 +1,71 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package settings</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+const (</span>
<span class="term-fg32">+	&#47;&#47; PriceLimit is the minimum gas price that RPC nodes will accept for transactions.</span>
<span class="term-fg32">+	PriceLimit = 10 * 1e9</span>
<span class="term-fg32">+	&#47;&#47; SecondsPerBlock is the amount of time between blocks.</span>
<span class="term-fg32">+	SecondsPerBlock = 2</span>
<span class="term-fg32">+	&#47;&#47; BaseFeeChangeDenominator is set to a value which leads to a smaller</span>
<span class="term-fg32">+	&#47;&#47; max base fee rate of change (12.5% -&gt; 2%). This accounts for our short block time</span>
<span class="term-fg32">+	&#47;&#47; of 2 seconds, preventing large price fluctuations. At 50, we match Ethereum in that</span>
<span class="term-fg32">+	&#47;&#47; it would take 72 seconds for the baseFee to double.</span>
<span class="term-fg32">+	BaseFeeChangeDenominator = 50</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; MainnetNetworkID is the network ID for the mainnet.</span>
<span class="term-fg32">+	MainnetNetworkID = 13371</span>
<span class="term-fg32">+	&#47;&#47; TestnetNetworkID is the network ID for the testnet.</span>
<span class="term-fg32">+	TestnetNetworkID = 13473</span>
<span class="term-fg32">+	&#47;&#47; DevnetNetworkID is the network ID for the devnet.</span>
<span class="term-fg32">+	DevnetNetworkID = 15003</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; MainnetRPC is the mainnet RPC endpoint.</span>
<span class="term-fg32">+	MainnetRPC = &quot;https:&#47;&#47;rpc.immutable.com&quot;</span>
<span class="term-fg32">+	&#47;&#47; TestnetRPC is the testnet RPC endpoint.</span>
<span class="term-fg32">+	TestnetRPC = &quot;https:&#47;&#47;rpc.testnet.immutable.com&quot;</span>
<span class="term-fg32">+	&#47;&#47; DevnetRPC is the devnet RPC endpoint.</span>
<span class="term-fg32">+	DevnetRPC = &quot;https:&#47;&#47;rpc.dev.immutable.com&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+var (</span>
<span class="term-fg32">+	&#47;&#47; DevnetShanghaiFork is the timestamp of the Shanghai devnet fork.</span>
<span class="term-fg32">+	DevnetShanghaiFork = newFork(&quot;Tue Feb 27 21:00:00 UTC 2024&quot;)</span>
<span class="term-fg32">+	&#47;&#47; TestnetShanghaiFork is the timestamp of the Shanghai testnet fork.</span>
<span class="term-fg32">+	TestnetShanghaiFork = newFork(&quot;Tue Mar 12 22:00:00 UTC 2024&quot;)</span>
<span class="term-fg32">+	&#47;&#47; MainnetShanghaiFork is the timestamp of the Shanghai mainnet fork.</span>
<span class="term-fg32">+	MainnetShanghaiFork = newFork(&quot;Tue Mar 26 22:00:00 UTC 2024&quot;)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; DevnetPrevrandaoFork is the timestamp of the Prevrandao devnet fork.</span>
<span class="term-fg32">+	DevnetPrevrandaoFork = DevnetShanghaiFork</span>
<span class="term-fg32">+	&#47;&#47; TestnetPrevrandaoFork is the timestamp of the Prevrandao testnet fork.</span>
<span class="term-fg32">+	TestnetPrevrandaoFork = TestnetShanghaiFork</span>
<span class="term-fg32">+	&#47;&#47; MainnetPrevrandaoFork is the timestamp of the Prevrandao mainnet fork.</span>
<span class="term-fg32">+	&#47;&#47; Only mainnet has a Prevrandao fork separate from the Shanghai fork.</span>
<span class="term-fg32">+	&#47;&#47; Block 0x41DDE4.</span>
<span class="term-fg32">+	&#47;&#47; TZ=UTC gdate --date @1710899402</span>
<span class="term-fg32">+	MainnetPrevrandaoFork = newFork(&quot;Wed Mar 20 01:50:02 UTC 2024&quot;)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; DevnetCancunFork is the timestamp of the Cancun devnet fork.</span>
<span class="term-fg32">+	DevnetCancunFork = newFork(&quot;Tue Aug 27 22:00:00 UTC 2024&quot;)</span>
<span class="term-fg32">+	&#47;&#47; TestnetCancunFork is the timestamp of the Cancun testnet fork.</span>
<span class="term-fg32">+	TestnetCancunFork = newFork(&quot;Mon Sep 23 22:00:00 UTC 2024&quot;)</span>
<span class="term-fg32">+	&#47;&#47; MainnetCancunFork is the timestamp of the Cancun mainnet fork.</span>
<span class="term-fg32">+	&#47;&#47; Unixdate format expects an extra whitespace if the day is a single digit.</span>
<span class="term-fg32">+	&#47;&#47; e.g. Mon Jan _2 15:04:05 MST 2006</span>
<span class="term-fg32">+	MainnetCancunFork = newFork(&quot;Mon Oct  7 22:00:00 UTC 2024&quot;)</span>
<span class="term-fg32">+)</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-54b0d7d75c66574341d0afa3" role="button"
                       aria-expanded="false" aria-controls="id-54b0d7d75c66574341d0afa3">
                        <code>cmd/geth/immutable/store/localstore/localstore.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/geth/immutable/store/localstore/localstore.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+43</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-54b0d7d75c66574341d0afa3"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;store&#47;localstore&#47;localstore.go immutable-geth&#47;cmd&#47;geth&#47;immutable&#47;store&#47;localstore&#47;localstore.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..f784e1e8200b79ed4a91e64b8cdb764d85711b2c</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;geth&#47;immutable&#47;store&#47;localstore&#47;localstore.go</span>
<span class="term-fg36">@@ -0,0 +1,43 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package localstore</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;fmt&quot;</span>
<span class="term-fg32">+	&quot;os&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;log&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Store is used to push configuration artefacts to local files</span>
<span class="term-fg32">+type Store struct {</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; New returns a new store</span>
<span class="term-fg32">+func New() *Store {</span>
<span class="term-fg32">+	return &amp;Store{}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; StoreConfigFile writes a configuration file to disk. We use this to</span>
<span class="term-fg32">+&#47;&#47; update k8s configmaps.</span>
<span class="term-fg32">+func (s *Store) StoreConfigFile(filepath string, content []byte) error {</span>
<span class="term-fg32">+	log.Info(&quot;Writing config file&quot;, &quot;filepath&quot;, filepath)</span>
<span class="term-fg32">+	if err := os.WriteFile(filepath, content, 0644); err != nil {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;failed to write config file: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return nil</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-cbae5efde8d6a04c0415c529" role="button"
                       aria-expanded="false" aria-controls="id-cbae5efde8d6a04c0415c529">
                        <code>cmd/geth/immutable/store/store.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/geth/immutable/store/store.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+36</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-cbae5efde8d6a04c0415c529"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;store&#47;store.go immutable-geth&#47;cmd&#47;geth&#47;immutable&#47;store&#47;store.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..b5139aba55d2fa11ad73a1527bf0a998dda19df4</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;geth&#47;immutable&#47;store&#47;store.go</span>
<span class="term-fg36">@@ -0,0 +1,36 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package store</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;store&#47;localstore&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;immutable&#47;remote&#47;aws&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Store is used to push configuration artefacts to</span>
<span class="term-fg32">+&#47;&#47; local files and remote resources</span>
<span class="term-fg32">+type Store struct {</span>
<span class="term-fg32">+	localstore.Store</span>
<span class="term-fg32">+	*aws.SecretsManager</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; New returns a new store</span>
<span class="term-fg32">+func New(sm *aws.SecretsManager) *Store {</span>
<span class="term-fg32">+	return &amp;Store{</span>
<span class="term-fg32">+		SecretsManager: sm,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-157e9c24983665cb24fc43ed" role="button"
                       aria-expanded="false" aria-controls="id-157e9c24983665cb24fc43ed">
                        <code>cmd/geth/immutable_artefact_store_mock.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/geth/immutable_artefact_store_mock.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+67</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-157e9c24983665cb24fc43ed"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;immutable_artefact_store_mock.go immutable-geth&#47;cmd&#47;geth&#47;immutable_artefact_store_mock.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..b00649322dfa1a61c8678a27460ac90b93eba59a</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;geth&#47;immutable_artefact_store_mock.go</span>
<span class="term-fg36">@@ -0,0 +1,67 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package main</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;context&quot;</span>
<span class="term-fg32">+	&quot;sync&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;aws&#47;aws-sdk-go&#47;aws&#47;awserr&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;aws&#47;aws-sdk-go&#47;service&#47;secretsmanager&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+type mockArtefactStore struct {</span>
<span class="term-fg32">+	secretFiles   *sync.Map</span>
<span class="term-fg32">+	configFiles   *sync.Map</span>
<span class="term-fg32">+	secretStrings *sync.Map</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (mas *mockArtefactStore) PushSecretFile(key string, content []byte) error {</span>
<span class="term-fg32">+	if mas.secretFiles == nil {</span>
<span class="term-fg32">+		mas.secretFiles = new(sync.Map)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	mas.secretFiles.Store(key, content)</span>
<span class="term-fg32">+	return nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (mas *mockArtefactStore) PutSecretString(key string, content string) error {</span>
<span class="term-fg32">+	return mas.PushSecretString(key, content)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (mas *mockArtefactStore) StoreConfigFile(filepath string, content []byte) error {</span>
<span class="term-fg32">+	if mas.configFiles == nil {</span>
<span class="term-fg32">+		mas.configFiles = new(sync.Map)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	mas.configFiles.Store(filepath, content)</span>
<span class="term-fg32">+	return nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+func (mas *mockArtefactStore) PushSecretString(key, content string) error {</span>
<span class="term-fg32">+	if mas.secretStrings == nil {</span>
<span class="term-fg32">+		mas.secretStrings = new(sync.Map)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	mas.secretStrings.Store(key, content)</span>
<span class="term-fg32">+	return nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+func (mas *mockArtefactStore) GetSecret(ctx context.Context, key string) (string, error) {</span>
<span class="term-fg32">+	if mas.secretStrings == nil {</span>
<span class="term-fg32">+		mas.secretStrings = new(sync.Map)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if secret, exists := mas.secretStrings.Load(key); exists {</span>
<span class="term-fg32">+		return secret.(string), nil</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &quot;&quot;, awserr.New(secretsmanager.ErrCodeResourceNotFoundException, &quot;not found&quot;, nil)</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-210f32e17690ef66b04ce66e" role="button"
                       aria-expanded="false" aria-controls="id-210f32e17690ef66b04ce66e">
                        <code>cmd/geth/immutable_bootstrap.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/geth/immutable_bootstrap.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+181</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-210f32e17690ef66b04ce66e"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;immutable_bootstrap.go immutable-geth&#47;cmd&#47;geth&#47;immutable_bootstrap.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..a4614dc04765a80bf1795f726d805ff8e77b0f8e</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;geth&#47;immutable_bootstrap.go</span>
<span class="term-fg36">@@ -0,0 +1,181 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package main</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;context&quot;</span>
<span class="term-fg32">+	&quot;crypto&#47;ecdsa&quot;</span>
<span class="term-fg32">+	&quot;errors&quot;</span>
<span class="term-fg32">+	&quot;fmt&quot;</span>
<span class="term-fg32">+	&quot;io&quot;</span>
<span class="term-fg32">+	&quot;os&quot;</span>
<span class="term-fg32">+	&quot;path&#47;filepath&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;env&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;keys&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;role&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;utils&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;crypto&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;log&quot;</span>
<span class="term-fg32">+	ethnode &quot;github.com&#47;ethereum&#47;go-ethereum&#47;node&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;urfave&#47;cli&#47;v2&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; renderValidatorKey will create the validator&#39;s private key if it doesn&#39;t exist in the store.</span>
<span class="term-fg32">+&#47;&#47; It will write the address corresponding to the key to a file at the provided dir path.</span>
<span class="term-fg32">+func renderValidatorKey(</span>
<span class="term-fg32">+	ctx context.Context,</span>
<span class="term-fg32">+	store keys.Store,</span>
<span class="term-fg32">+	dataDirpath string,</span>
<span class="term-fg32">+	secretID string,</span>
<span class="term-fg32">+) error {</span>
<span class="term-fg32">+	&#47;&#47; Get or generate priv key</span>
<span class="term-fg32">+	privKey, err := keys.Render(</span>
<span class="term-fg32">+		ctx,</span>
<span class="term-fg32">+		store,</span>
<span class="term-fg32">+		secretID,</span>
<span class="term-fg32">+	)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Store address on file at root data directory</span>
<span class="term-fg32">+	return storeAddr(privKey, filepath.Join(dataDirpath, &quot;address&quot;))</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; renderP2PKey will create a new P2P key if it doesn&#39;t exist in the store.</span>
<span class="term-fg32">+&#47;&#47; This is only required for boot node b&#47;c the other nodes rely on its public key.</span>
<span class="term-fg32">+func renderP2PKey(</span>
<span class="term-fg32">+	ctx context.Context,</span>
<span class="term-fg32">+	store keys.Store,</span>
<span class="term-fg32">+	r role.Role,</span>
<span class="term-fg32">+	secretID string,</span>
<span class="term-fg32">+) error {</span>
<span class="term-fg32">+	if r != role.Boot {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;only boot node can render P2P key, got %s&quot;, r.String())</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Get or generate priv key</span>
<span class="term-fg32">+	_, err := keys.Render(</span>
<span class="term-fg32">+		ctx,</span>
<span class="term-fg32">+		store,</span>
<span class="term-fg32">+		secretID,</span>
<span class="term-fg32">+	)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return err</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; storeAddr will derive address from key and write it to a file at the provided filepath.</span>
<span class="term-fg32">+&#47;&#47; This is required to have per-pod address allocation without running geth containers with a script.</span>
<span class="term-fg32">+func storeAddr(key *ecdsa.PrivateKey, filepath string) error {</span>
<span class="term-fg32">+	if key == nil {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;priv key is nil&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	addr := crypto.PubkeyToAddress(key.PublicKey)</span>
<span class="term-fg32">+	if err := os.WriteFile(filepath, []byte(addr.Hex()), 0644); err != nil {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;failed to write address to file: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; renderChainState will initialize the chain and lightchain dbs with the genesis block.</span>
<span class="term-fg32">+&#47;&#47; It will write files and directories to the provided root dir path.</span>
<span class="term-fg32">+func renderChainState(destDirpath string, genesis *core.Genesis) error {</span>
<span class="term-fg32">+	&#47;&#47; Do not re-initialize, assume already initialized</span>
<span class="term-fg32">+	gethDirpath := filepath.Join(destDirpath, &quot;geth&quot;)</span>
<span class="term-fg32">+	empty, err := isEmptyOrDoesNotExist(gethDirpath)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if !empty {</span>
<span class="term-fg32">+		log.Info(&quot;geth dir is not empty, skipping bootstrap&quot;, &quot;gethDirpath&quot;, gethDirpath)</span>
<span class="term-fg32">+		return nil</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Instantiate node based on config and dir</span>
<span class="term-fg32">+	c := &amp;cli.Context{} &#47;&#47; NOTE: This context is empty so it can only provide default&#47;nil values</span>
<span class="term-fg32">+	cfg := loadBaseConfig(c)</span>
<span class="term-fg32">+	cfg.Node.DataDir = destDirpath</span>
<span class="term-fg32">+	stack, err := ethnode.New(&amp;cfg.Node)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;failed to create node: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	defer stack.Close()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Init genesis for chain and lightchain dbs of node</span>
<span class="term-fg32">+	for _, name := range []string{&quot;chaindata&quot;, &quot;lightchaindata&quot;} {</span>
<span class="term-fg32">+		&#47;&#47; Create and open leveldb</span>
<span class="term-fg32">+		chaindb, err := stack.OpenDatabaseWithFreezer(name, 0, 0, &quot;&quot;, &quot;&quot;, false)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return fmt.Errorf(&quot;failed to open db: %w&quot;, err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		defer chaindb.Close()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		&#47;&#47; Create and open trie db</span>
<span class="term-fg32">+		triedb := utils.MakeTrieDatabaseNoContext(cfg.Eth.StateScheme, chaindb, false, false, false)</span>
<span class="term-fg32">+		defer triedb.Close()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		&#47;&#47; Write genesis block to trie and save to leveldb</span>
<span class="term-fg32">+		if _, _, err := core.SetupGenesisBlock(chaindb, triedb, genesis); err != nil {</span>
<span class="term-fg32">+			return fmt.Errorf(&quot;failed to write genesis block to db: %w&quot;, err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	log.Info(&quot;rendered chain state&quot;)</span>
<span class="term-fg32">+	return nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ordinalFromPodName will extract the last element of the POD_NAME</span>
<span class="term-fg32">+&#47;&#47; env var delimited by &#39;-&#39; and return it as an ordinal.</span>
<span class="term-fg32">+func ordinalFromPodNameEnvVar() (int, error) {</span>
<span class="term-fg32">+	&#47;&#47; Read pod name for validator ordinal</span>
<span class="term-fg32">+	podName := os.Getenv(&quot;POD_NAME&quot;)</span>
<span class="term-fg32">+	if podName == &quot;&quot; {</span>
<span class="term-fg32">+		return 0, fmt.Errorf(&quot;POD_NAME must be set&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return ordinalFromPod(podName)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; envFromPodNamespaceEnvVar will extract the environment from the POD_NAMESPACE</span>
<span class="term-fg32">+&#47;&#47; env var.</span>
<span class="term-fg32">+func envFromPodNamespaceEnvVar() (env.Environment, error) {</span>
<span class="term-fg32">+	&#47;&#47; Read pod namespace for the environment</span>
<span class="term-fg32">+	ns := os.Getenv(&quot;POD_NAMESPACE&quot;)</span>
<span class="term-fg32">+	if ns == &quot;&quot; {</span>
<span class="term-fg32">+		return env.Environment{}, fmt.Errorf(&quot;POD_NAMESPACE must be set&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return env.NewFromString(ns)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; isEmptyOrDoesNotExist returns true if the directory is empty or does not exist</span>
<span class="term-fg32">+func isEmptyOrDoesNotExist(dirpath string) (bool, error) {</span>
<span class="term-fg32">+	f, err := os.Open(dirpath)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		if os.IsNotExist(err) {</span>
<span class="term-fg32">+			return true, nil</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		return false, fmt.Errorf(&quot;failed to open directory: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	defer f.Close()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if _, err := f.Readdirnames(1); err != nil {</span>
<span class="term-fg32">+		if errors.Is(err, io.EOF) {</span>
<span class="term-fg32">+			return true, nil</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		return false, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return false, nil</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-7c1f61ec30ebeb3fb7f152c0" role="button"
                       aria-expanded="false" aria-controls="id-7c1f61ec30ebeb3fb7f152c0">
                        <code>cmd/geth/immutable_bootstrap_command.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/geth/immutable_bootstrap_command.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+143</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-7c1f61ec30ebeb3fb7f152c0"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;immutable_bootstrap_command.go immutable-geth&#47;cmd&#47;geth&#47;immutable_bootstrap_command.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..322e4ca01d90be88800e0a0eb8346116aa566405</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;geth&#47;immutable_bootstrap_command.go</span>
<span class="term-fg36">@@ -0,0 +1,143 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package main</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;fmt&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;keys&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;node&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;role&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;immutable&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;immutable&#47;remote&#47;aws&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;utils&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;urfave&#47;cli&#47;v2&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; getSecretID will return the secret ID for the node.</span>
<span class="term-fg32">+&#47;&#47; The secret ID will be based on the role and ordinal of the node.</span>
<span class="term-fg32">+func getSecretID(role role.Role) (string, error) {</span>
<span class="term-fg32">+	&#47;&#47; Ordinal.</span>
<span class="term-fg32">+	ordinal, err := ordinalFromPodNameEnvVar()</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return &quot;&quot;, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Secret ID template.</span>
<span class="term-fg32">+	secretIDTemplate, err := keys.SecretIDTemplate()</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return &quot;&quot;, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Secret ID.</span>
<span class="term-fg32">+	secretID, err := keys.SecretID(secretIDTemplate, node.CanonicalNodeName(role, ordinal))</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return &quot;&quot;, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return secretID, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func bootstrapK8sNodeCommand(c *cli.Context) error {</span>
<span class="term-fg32">+	&#47;&#47; Role</span>
<span class="term-fg32">+	r, err := role.NewFromString(c.String(immutable.Role.Name))</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Setup store</span>
<span class="term-fg32">+	store, err := aws.NewSecretsManager(c.String(immutable.Region.Name))</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Only retrieve secret IDs for boot and validator nodes. Other nodes do not store secret material.</span>
<span class="term-fg32">+	var secretID string</span>
<span class="term-fg32">+	switch r {</span>
<span class="term-fg32">+	case role.Boot, role.Validator:</span>
<span class="term-fg32">+		secretID, err = getSecretID(r)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return err</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	default:</span>
<span class="term-fg32">+		secretID = &quot;&quot;</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Get bootstrapper and run it</span>
<span class="term-fg32">+	b, err := bootstrapFactory(</span>
<span class="term-fg32">+		r,</span>
<span class="term-fg32">+		store,</span>
<span class="term-fg32">+		c.String(immutable.Region.Name),</span>
<span class="term-fg32">+		c.String(immutable.DataDirpath.Name),</span>
<span class="term-fg32">+		secretID,</span>
<span class="term-fg32">+		core.ImmutableGenesisBlock(c.String(utils.ImmutableNetworkFlag.Name)),</span>
<span class="term-fg32">+	)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return b.Bootstrap(c.Context)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func bootstrapExternalNodeCommand(c *cli.Context) error {</span>
<span class="term-fg32">+	&#47;&#47; Get bootstrapper and run it</span>
<span class="term-fg32">+	b, err := bootstrapFactory(</span>
<span class="term-fg32">+		role.RPC,</span>
<span class="term-fg32">+		nil,</span>
<span class="term-fg32">+		&quot;&quot;,</span>
<span class="term-fg32">+		c.String(immutable.DataDirpath.Name),</span>
<span class="term-fg32">+		&quot;&quot;,</span>
<span class="term-fg32">+		core.ImmutableGenesisBlock(c.String(utils.ImmutableNetworkFlag.Name)),</span>
<span class="term-fg32">+	)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return b.Bootstrap(c.Context)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; bootstrapFactory will create a bootstrapper based on the role</span>
<span class="term-fg32">+&#47;&#47; of the relevant node. Each node has different bootstrap requirements.</span>
<span class="term-fg32">+func bootstrapFactory(</span>
<span class="term-fg32">+	r role.Role,</span>
<span class="term-fg32">+	store keys.Store,</span>
<span class="term-fg32">+	region string,</span>
<span class="term-fg32">+	dataDirpath string,</span>
<span class="term-fg32">+	secretID string,</span>
<span class="term-fg32">+	genesis *core.Genesis,</span>
<span class="term-fg32">+) (Bootstrapper, error) {</span>
<span class="term-fg32">+	switch r {</span>
<span class="term-fg32">+	case role.Boot:</span>
<span class="term-fg32">+		return &amp;BootBootstrapper{</span>
<span class="term-fg32">+			store:       store,</span>
<span class="term-fg32">+			region:      region,</span>
<span class="term-fg32">+			dataDirpath: dataDirpath,</span>
<span class="term-fg32">+			secretID:    secretID,</span>
<span class="term-fg32">+		}, nil</span>
<span class="term-fg32">+	case role.Validator:</span>
<span class="term-fg32">+		return &amp;ValidatorBootstrapper{</span>
<span class="term-fg32">+			store:       store,</span>
<span class="term-fg32">+			region:      region,</span>
<span class="term-fg32">+			dataDirpath: dataDirpath,</span>
<span class="term-fg32">+			genesis:     genesis,</span>
<span class="term-fg32">+			secretID:    secretID,</span>
<span class="term-fg32">+		}, nil</span>
<span class="term-fg32">+	case role.Partner, role.RPC, role.PartnerPublic:</span>
<span class="term-fg32">+		return &amp;RPCBootstrapper{</span>
<span class="term-fg32">+			dataDirpath: dataDirpath,</span>
<span class="term-fg32">+			genesis:     genesis,</span>
<span class="term-fg32">+		}, nil</span>
<span class="term-fg32">+	default:</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;unsupported role %s&quot;, r.String())</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-cb1174ca73949d61dc1d13e7" role="button"
                       aria-expanded="false" aria-controls="id-cb1174ca73949d61dc1d13e7">
                        <code>cmd/geth/immutable_bootstrapper.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/geth/immutable_bootstrapper.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+82</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-cb1174ca73949d61dc1d13e7"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;immutable_bootstrapper.go immutable-geth&#47;cmd&#47;geth&#47;immutable_bootstrapper.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..626e58dc8f0f6384a8acaac78ba1a29901982673</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;geth&#47;immutable_bootstrapper.go</span>
<span class="term-fg36">@@ -0,0 +1,82 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package main</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;context&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;keys&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;role&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Bootstrapper is the interface for bootstrapping a node in a k8s pod</span>
<span class="term-fg32">+type Bootstrapper interface {</span>
<span class="term-fg32">+	Bootstrap(ctx context.Context) error</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; BootBootstrapper is the bootstrapper for boot nodes</span>
<span class="term-fg32">+type BootBootstrapper struct {</span>
<span class="term-fg32">+	store       keys.Store</span>
<span class="term-fg32">+	region      string</span>
<span class="term-fg32">+	dataDirpath string &#47;&#47; TODO: remove field when boot migration done</span>
<span class="term-fg32">+	secretID    string</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Bootstrap bootstraps a boot node</span>
<span class="term-fg32">+func (bb *BootBootstrapper) Bootstrap(ctx context.Context) error {</span>
<span class="term-fg32">+	return renderP2PKey(</span>
<span class="term-fg32">+		ctx,</span>
<span class="term-fg32">+		bb.store,</span>
<span class="term-fg32">+		role.Boot,</span>
<span class="term-fg32">+		bb.secretID,</span>
<span class="term-fg32">+	)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ValidatorBootstrapper is the bootstrapper for validator nodes</span>
<span class="term-fg32">+type ValidatorBootstrapper struct {</span>
<span class="term-fg32">+	store       keys.Store</span>
<span class="term-fg32">+	region      string</span>
<span class="term-fg32">+	dataDirpath string</span>
<span class="term-fg32">+	genesis     *core.Genesis</span>
<span class="term-fg32">+	secretID    string</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Bootstrap bootstraps a validator node</span>
<span class="term-fg32">+func (vb *ValidatorBootstrapper) Bootstrap(ctx context.Context) error {</span>
<span class="term-fg32">+	if err := renderValidatorKey(</span>
<span class="term-fg32">+		ctx,</span>
<span class="term-fg32">+		vb.store,</span>
<span class="term-fg32">+		vb.dataDirpath,</span>
<span class="term-fg32">+		vb.secretID,</span>
<span class="term-fg32">+	); err != nil {</span>
<span class="term-fg32">+		return err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return renderChainState(vb.dataDirpath, vb.genesis)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; RPCBootstrapper is the bootstrapper for RPC and Partner nodes</span>
<span class="term-fg32">+type RPCBootstrapper struct {</span>
<span class="term-fg32">+	dataDirpath string</span>
<span class="term-fg32">+	genesis     *core.Genesis</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Bootstrap bootstraps an RPC or Partner node</span>
<span class="term-fg32">+func (rb *RPCBootstrapper) Bootstrap(ctx context.Context) error {</span>
<span class="term-fg32">+	return renderChainState(rb.dataDirpath, rb.genesis)</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-ad4b38e234c9cd89af0ea3d2" role="button"
                       aria-expanded="false" aria-controls="id-ad4b38e234c9cd89af0ea3d2">
                        <code>cmd/geth/immutable_configure.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/geth/immutable_configure.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+139</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-ad4b38e234c9cd89af0ea3d2"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;immutable_configure.go immutable-geth&#47;cmd&#47;geth&#47;immutable_configure.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..2ef730ab65eb14d75b6ec2535f40ee29fe7cf8d8</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;geth&#47;immutable_configure.go</span>
<span class="term-fg36">@@ -0,0 +1,139 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package main</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;bufio&quot;</span>
<span class="term-fg32">+	_ &quot;embed&quot;</span>
<span class="term-fg32">+	&quot;fmt&quot;</span>
<span class="term-fg32">+	&quot;os&quot;</span>
<span class="term-fg32">+	&quot;strconv&quot;</span>
<span class="term-fg32">+	&quot;strings&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;role&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;immutable&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;log&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;urfave&#47;cli&#47;v2&quot;</span>
<span class="term-fg32">+	&quot;golang.org&#47;x&#47;exp&#47;slices&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+var (</span>
<span class="term-fg32">+	&#47;&#47; ErrOrdinalInvariant is returned when a node&#39;s ordinal is not 0 when only a single node is supported</span>
<span class="term-fg32">+	ErrOrdinalInvariant = fmt.Errorf(&quot;node ordinal must be 0&quot;)</span>
<span class="term-fg32">+	&#47;&#47; ErrConfigRecommitInvariant is returned when config.toml has an invalid recommit value</span>
<span class="term-fg32">+	ErrConfigRecommitInvariant = fmt.Errorf(&quot;config.toml has invalid recommit value&quot;)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; supportedRoles are the roles that are supported by configure command</span>
<span class="term-fg32">+	supportedRoles = role.AllRoles</span>
<span class="term-fg32">+	&#47;&#47; singletonRoles are the roles that are only allowed to run with 1 instance</span>
<span class="term-fg32">+	singletonRoles = []role.Role{role.Boot, role.Validator}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; In the case of a rotation of the single validator key, we need to remove the singleton</span>
<span class="term-fg32">+	&#47;&#47; invariant for the validator role, as we need to increase the replica count</span>
<span class="term-fg32">+	&#47;&#47; singletonRoles = []role.Role{role.Boot}</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; configureNodePaths are all the filepaths that must be provided</span>
<span class="term-fg32">+&#47;&#47; to the configuration of a geth node in a k8s pod</span>
<span class="term-fg32">+type configureNodePaths struct {</span>
<span class="term-fg32">+	&#47;&#47; ConfigFilepath is the path to the node&#39;s config.toml</span>
<span class="term-fg32">+	ConfigFilepath string</span>
<span class="term-fg32">+	&#47;&#47; DataDirpath is the path to the node&#39;s data directory</span>
<span class="term-fg32">+	DataDirpath string</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func configureNodeInPodCommand(c *cli.Context) error {</span>
<span class="term-fg32">+	&#47;&#47; Role</span>
<span class="term-fg32">+	r, err := role.NewFromString(c.String(immutable.Role.Name))</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Filepaths</span>
<span class="term-fg32">+	filepaths := configureNodePaths{</span>
<span class="term-fg32">+		ConfigFilepath: c.String(immutable.ConfigFilepath.Name),</span>
<span class="term-fg32">+		DataDirpath:    c.String(immutable.DataDirpath.Name),</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Env vars</span>
<span class="term-fg32">+	pod := os.Getenv(&quot;POD_NAME&quot;)</span>
<span class="term-fg32">+	if pod == &quot;&quot; {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;POD_NAME env var must be set&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return configureNodeInPod(r, pod, filepaths)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; configureNodeInPod will configure a geth node in a k8s (statefulset) pod based on its ordinal</span>
<span class="term-fg32">+func configureNodeInPod(r role.Role, pod string, filepaths configureNodePaths) error {</span>
<span class="term-fg32">+	&#47;&#47; Verify that the role is supported</span>
<span class="term-fg32">+	if !slices.Contains(supportedRoles, r) {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;unsupported role: %s&quot;, r.String())</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Node ordinal</span>
<span class="term-fg32">+	ordinal, err := ordinalFromPod(pod)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Verify single instances</span>
<span class="term-fg32">+	if slices.Contains(singletonRoles, r) {</span>
<span class="term-fg32">+		if ordinal != 0 {</span>
<span class="term-fg32">+			return ErrOrdinalInvariant</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Check config.toml</span>
<span class="term-fg32">+	return validateConfigTOML(filepaths.ConfigFilepath)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; validatorConfigTOML will read the node&#39;s config.toml and check invariants</span>
<span class="term-fg32">+func validateConfigTOML(configFilepath string) error {</span>
<span class="term-fg32">+	&#47;&#47; Open the file</span>
<span class="term-fg32">+	f, err := os.Open(configFilepath)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;failed to open toml file (%s): %w&quot;, configFilepath, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	defer f.Close()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Decode the TOML</span>
<span class="term-fg32">+	cfg := &amp;gethConfig{}</span>
<span class="term-fg32">+	if err := tomlSettings.NewDecoder(bufio.NewReader(f)).Decode(cfg); err != nil {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;failed to decode toml file (%s): %w&quot;, configFilepath, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Validate invariants</span>
<span class="term-fg32">+	if cfg.Eth.Miner.Recommit != ImmutableEthConfig(0).Miner.Recommit {</span>
<span class="term-fg32">+		return ErrConfigRecommitInvariant</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; TODO: add more invariant checks here</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	log.Info(&quot;validated config&quot;, &quot;filepath&quot;, configFilepath)</span>
<span class="term-fg32">+	return nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ordinalFromPod extracts the ordinal (suffix) from pod name string</span>
<span class="term-fg32">+func ordinalFromPod(pod string) (int, error) {</span>
<span class="term-fg32">+	podElems := strings.Split(pod, &quot;-&quot;)</span>
<span class="term-fg32">+	if len(podElems) &lt; 2 {</span>
<span class="term-fg32">+		return 0, fmt.Errorf(&quot;pod name (%s) is not in the expected format&quot;, pod)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	ordinal, err := strconv.Atoi(podElems[len(podElems)-1])</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return 0, fmt.Errorf(&quot;pod name (%s) suffix is not a number&quot;, pod)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return ordinal, nil</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-6d2caa29028a109f73ecffc0" role="button"
                       aria-expanded="false" aria-controls="id-6d2caa29028a109f73ecffc0">
                        <code>cmd/geth/immutable_decode_command.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/geth/immutable_decode_command.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+43</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-6d2caa29028a109f73ecffc0"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;immutable_decode_command.go immutable-geth&#47;cmd&#47;geth&#47;immutable_decode_command.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..f7a62370fd9d237f410c0a4f1b844bdaa7ca05d8</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;geth&#47;immutable_decode_command.go</span>
<span class="term-fg36">@@ -0,0 +1,43 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package main</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;fmt&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;immutable&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;log&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;p2p&#47;enode&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;urfave&#47;cli&#47;v2&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func runDecodeCommand(c *cli.Context) error {</span>
<span class="term-fg32">+	&#47;&#47; Read encoded inputs</span>
<span class="term-fg32">+	pubKeyHex := c.String(immutable.PublicKey.Name)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Perform decode</span>
<span class="term-fg32">+	enodeURL := fmt.Sprintf(&quot;enode:&#47;&#47;%s@%s:%s&quot;, pubKeyHex, &quot;127.0.0.1&quot;, &quot;30300&quot;)</span>
<span class="term-fg32">+	enode, err := enode.Parse(enode.ValidSchemes, enodeURL)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;failed to parse enode URL: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Log the decoded info</span>
<span class="term-fg32">+	log.Info(&quot;success&quot;, &quot;id&quot;, enode.ID())</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return nil</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-8b20257c749cdcb4b6ab54bc" role="button"
                       aria-expanded="false" aria-controls="id-8b20257c749cdcb4b6ab54bc">
                        <code>cmd/geth/immutable_eth_config.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/geth/immutable_eth_config.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+140</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-8b20257c749cdcb4b6ab54bc"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;immutable_eth_config.go immutable-geth&#47;cmd&#47;geth&#47;immutable_eth_config.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..50c3d29a2f71e73a8142812a44114629d0974f7d</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;geth&#47;immutable_eth_config.go</span>
<span class="term-fg36">@@ -0,0 +1,140 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package main</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+	&quot;time&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;settings&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;utils&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;rawdb&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;txpool&#47;blobpool&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;txpool&#47;legacypool&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;eth&#47;downloader&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;eth&#47;ethconfig&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;miner&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;node&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;p2p&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;p2p&#47;enode&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;urfave&#47;cli&#47;v2&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func immutableOverrides(ctx *cli.Context, cfg *gethConfig) {</span>
<span class="term-fg32">+	&#47;&#47; Cannot set these flags at the same time</span>
<span class="term-fg32">+	utils.CheckExclusive(</span>
<span class="term-fg32">+		ctx,</span>
<span class="term-fg32">+		utils.ImmutableNetworkFlag,</span>
<span class="term-fg32">+		utils.OverrideShanghai,</span>
<span class="term-fg32">+	)</span>
<span class="term-fg32">+	utils.CheckExclusive(</span>
<span class="term-fg32">+		ctx,</span>
<span class="term-fg32">+		utils.ImmutableNetworkFlag,</span>
<span class="term-fg32">+		utils.OverridePrevrandao,</span>
<span class="term-fg32">+	)</span>
<span class="term-fg32">+	utils.CheckExclusive(</span>
<span class="term-fg32">+		ctx,</span>
<span class="term-fg32">+		utils.ImmutableNetworkFlag,</span>
<span class="term-fg32">+		utils.OverrideCancun,</span>
<span class="term-fg32">+	)</span>
<span class="term-fg32">+	&#47;&#47; Set overrides based on network flag.</span>
<span class="term-fg32">+	if ctx.IsSet(utils.ImmutableNetworkFlag.Name) {</span>
<span class="term-fg32">+		genesis := core.ImmutableGenesisBlock(ctx.String(utils.ImmutableNetworkFlag.Name))</span>
<span class="term-fg32">+		cfg.Eth.OverrideShanghai = genesis.Config.ShanghaiTime</span>
<span class="term-fg32">+		cfg.Eth.OverridePrevrandao = genesis.Config.PrevrandaoTime</span>
<span class="term-fg32">+		cfg.Eth.OverrideCancun = genesis.Config.CancunTime</span>
<span class="term-fg32">+		&#47;&#47; All overrides are handled in the genesis block, so we can terminate here</span>
<span class="term-fg32">+		return</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; zkEVM flag was not set so lets check individual override flags for testing</span>
<span class="term-fg32">+	if ctx.IsSet(utils.OverridePrevrandao.Name) {</span>
<span class="term-fg32">+		val := ctx.Uint64(utils.OverridePrevrandao.Name)</span>
<span class="term-fg32">+		cfg.Eth.OverridePrevrandao = &amp;val</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if ctx.IsSet(utils.OverrideShanghai.Name) {</span>
<span class="term-fg32">+		val := ctx.Uint64(utils.OverrideShanghai.Name)</span>
<span class="term-fg32">+		cfg.Eth.OverrideShanghai = &amp;val</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if ctx.IsSet(utils.OverrideCancun.Name) {</span>
<span class="term-fg32">+		val := ctx.Uint64(utils.OverrideCancun.Name)</span>
<span class="term-fg32">+		cfg.Eth.OverrideCancun = &amp;val</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ImmutableEthConfig is the default content of config.toml that</span>
<span class="term-fg32">+&#47;&#47; all zkEVM geth nodes should be configured to use.</span>
<span class="term-fg32">+func ImmutableEthConfig(chainID int) ethconfig.Config {</span>
<span class="term-fg32">+	return ethconfig.Config{</span>
<span class="term-fg32">+		SyncMode:           downloader.FullSync,</span>
<span class="term-fg32">+		NoPruning:          true, &#47;&#47; See cmd&#47;utils&#47;flags.go:1727</span>
<span class="term-fg32">+		NoPrefetch:         false,</span>
<span class="term-fg32">+		NetworkId:          uint64(chainID),</span>
<span class="term-fg32">+		TxLookupLimit:      2350000,</span>
<span class="term-fg32">+		TransactionHistory: 2350000,</span>
<span class="term-fg32">+		StateScheme:        rawdb.HashScheme,</span>
<span class="term-fg32">+		LightPeers:         0,</span>
<span class="term-fg32">+		DatabaseCache:      512,</span>
<span class="term-fg32">+		SnapshotCache:      0,         &#47;&#47; Not snapshot, full sync</span>
<span class="term-fg32">+		TrieCleanCache:     154 + 102, &#47;&#47; See cmd&#47;utils&#47;flags.go:1786</span>
<span class="term-fg32">+		TrieDirtyCache:     256,</span>
<span class="term-fg32">+		TrieTimeout:        60 * time.Minute,</span>
<span class="term-fg32">+		FilterLogCacheSize: 32,</span>
<span class="term-fg32">+		Miner: miner.Config{</span>
<span class="term-fg32">+			GasCeil:           30000000,</span>
<span class="term-fg32">+			NewPayloadTimeout: 2 * time.Second,</span>
<span class="term-fg32">+			Recommit:          999999999 * time.Second,</span>
<span class="term-fg32">+			&#47;&#47; GasPrice must be &gt;= price limit for eth_maxPriorityFeePerGas</span>
<span class="term-fg32">+			GasPrice: big.NewInt(settings.PriceLimit),</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		TxPool: legacypool.Config{</span>
<span class="term-fg32">+			&#47;&#47; PriceLimit enforces mimimum tip cap and&#47;or tx gas price</span>
<span class="term-fg32">+			PriceLimit:   settings.PriceLimit,</span>
<span class="term-fg32">+			NoLocals:     true,</span>
<span class="term-fg32">+			Journal:      &quot;transactions.rlp&quot;,</span>
<span class="term-fg32">+			Rejournal:    time.Hour,</span>
<span class="term-fg32">+			PriceBump:    10,</span>
<span class="term-fg32">+			AccountSlots: 16,</span>
<span class="term-fg32">+			GlobalSlots:  4096 + 1024, &#47;&#47; urgent + floating queue capacity with 4:1 ratio</span>
<span class="term-fg32">+			AccountQueue: 64,</span>
<span class="term-fg32">+			GlobalQueue:  1024,</span>
<span class="term-fg32">+			Lifetime:     1 * time.Hour,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		BlobPool: blobpool.Config{</span>
<span class="term-fg32">+			Datadir:   &quot;blobpool&quot;,</span>
<span class="term-fg32">+			Datacap:   1, &#47;&#47; If this is below 1, it will be set to a default of a few GB</span>
<span class="term-fg32">+			PriceBump: 100,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		RPCGasCap:     300000000,</span>
<span class="term-fg32">+		RPCEVMTimeout: 5 * time.Second,</span>
<span class="term-fg32">+		GPO:           ethconfig.FullNodeGPO,</span>
<span class="term-fg32">+		RPCTxFeeCap:   0,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func nodeConfig(enodes []*enode.Node) node.Config {</span>
<span class="term-fg32">+	return node.Config{</span>
<span class="term-fg32">+		AllowUnprotectedTxs:   true,</span>
<span class="term-fg32">+		InsecureUnlockAllowed: false,</span>
<span class="term-fg32">+		IPCPath:               &quot;geth.ipc&quot;,</span>
<span class="term-fg32">+		P2P: p2p.Config{</span>
<span class="term-fg32">+			BootstrapNodes: enodes,</span>
<span class="term-fg32">+			MaxPeers:       100, &#47;&#47; TODO: peer limit can be inferred from node count, but we need to understand surging behaviour of p2p&#47;discovery</span>
<span class="term-fg32">+			NAT:            nil,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-3c89c3bc63a635d393a0e07b" role="button"
                       aria-expanded="false" aria-controls="id-3c89c3bc63a635d393a0e07b">
                        <code>cmd/geth/immutable_local.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/geth/immutable_local.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+131</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-3c89c3bc63a635d393a0e07b"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;immutable_local.go immutable-geth&#47;cmd&#47;geth&#47;immutable_local.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..9305072074423315900ec50d6c872df2e709fba8</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;geth&#47;immutable_local.go</span>
<span class="term-fg36">@@ -0,0 +1,131 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package main</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;fmt&quot;</span>
<span class="term-fg32">+	&quot;os&quot;</span>
<span class="term-fg32">+	&quot;time&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;immutable&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;utils&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;urfave&#47;cli&#47;v2&quot;</span>
<span class="term-fg32">+	&quot;golang.org&#47;x&#47;sync&#47;errgroup&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+const (</span>
<span class="term-fg32">+	&#47;&#47; nodePassword is used by every node to encrypt their keystore</span>
<span class="term-fg32">+	nodePassword = &quot;password&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func bootstrapLocalCommand(c *cli.Context) error {</span>
<span class="term-fg32">+	&#47;&#47; Bootstrap flags</span>
<span class="term-fg32">+	gasLimit := c.Uint64(immutable.GasLimit.Name)</span>
<span class="term-fg32">+	bootCount := c.Int(immutable.BootCount.Name)</span>
<span class="term-fg32">+	validatorCount := c.Int(immutable.ValidatorCount.Name)</span>
<span class="term-fg32">+	rpcCount := c.Int(immutable.RPCCount.Name)</span>
<span class="term-fg32">+	blockListFilepath := c.String(immutable.BlockListFilepath.Name)</span>
<span class="term-fg32">+	externalConfigFilepath := c.String(configFileFlag.Name)</span>
<span class="term-fg32">+	remoteNetwork := c.String(immutable.Env.Name)</span>
<span class="term-fg32">+	rootDirpath := c.String(immutable.DataDirpath.Name)</span>
<span class="term-fg32">+	if rootDirpath == &quot;&quot; {</span>
<span class="term-fg32">+		rootDirpath = os.TempDir()</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Flags fed directly into geth client</span>
<span class="term-fg32">+	gethFlags := []string{}</span>
<span class="term-fg32">+	if remoteNetwork != &quot;&quot; {</span>
<span class="term-fg32">+		gethFlags = append(gethFlags, &quot;--zkevm&quot;, remoteNetwork)</span>
<span class="term-fg32">+		if validatorCount &gt; 0 {</span>
<span class="term-fg32">+			return fmt.Errorf(&quot;cannot have validators in %s&quot;, remoteNetwork)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if c.IsSet(utils.GCModeFlag.Name) {</span>
<span class="term-fg32">+		gethFlags = append(gethFlags, &quot;--gcmode&quot;, c.String(utils.GCModeFlag.Name))</span>
<span class="term-fg32">+	} else {</span>
<span class="term-fg32">+		gethFlags = append(gethFlags, &quot;--gcmode&quot;, &quot;archive&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if c.IsSet(utils.OverrideShanghai.Name) {</span>
<span class="term-fg32">+		shanghaiTimestamp := c.Uint64(utils.OverrideShanghai.Name)</span>
<span class="term-fg32">+		gethFlags = append(gethFlags, &quot;--override.shanghai&quot;, fmt.Sprint(shanghaiTimestamp))</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if c.IsSet(utils.OverridePrevrandao.Name) {</span>
<span class="term-fg32">+		prevrandaoTimestamp := c.Uint64(utils.OverridePrevrandao.Name)</span>
<span class="term-fg32">+		gethFlags = append(gethFlags, &quot;--override.prevrandao&quot;, fmt.Sprint(prevrandaoTimestamp))</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if c.IsSet(utils.OverrideCancun.Name) {</span>
<span class="term-fg32">+		cancunTimestamp := c.Uint64(utils.OverrideCancun.Name)</span>
<span class="term-fg32">+		gethFlags = append(gethFlags, &quot;--override.cancun&quot;, fmt.Sprint(cancunTimestamp))</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if c.IsSet(utils.SyncModeFlag.Name) {</span>
<span class="term-fg32">+		syncMode := c.String(utils.SyncModeFlag.Name)</span>
<span class="term-fg32">+		gethFlags = append(gethFlags, &quot;--syncmode&quot;, syncMode)</span>
<span class="term-fg32">+	} else {</span>
<span class="term-fg32">+		gethFlags = append(gethFlags, &quot;--syncmode&quot;, &quot;full&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if validatorCount+rpcCount &gt; 9 {</span>
<span class="term-fg32">+		&#47;&#47; The 8545&#47;8535 ports will clash if node count is high enough.</span>
<span class="term-fg32">+		&#47;&#47; This is an easy limitation to avoid, but there is no need for now.</span>
<span class="term-fg32">+		&#47;&#47; Local bootstrap is only used for testing.</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;cannot have more than 9 nodes&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Construct the bootstrapper and run the nodes</span>
<span class="term-fg32">+	opts := bootstrapOptions{</span>
<span class="term-fg32">+		rootDirpath:             rootDirpath,</span>
<span class="term-fg32">+		validatorCount:          validatorCount,</span>
<span class="term-fg32">+		bootCount:               bootCount,</span>
<span class="term-fg32">+		rpcCount:                rpcCount,</span>
<span class="term-fg32">+		gasLimit:                gasLimit,</span>
<span class="term-fg32">+		blockListFilepath:       blockListFilepath,</span>
<span class="term-fg32">+		remoteNetwork:           remoteNetwork,</span>
<span class="term-fg32">+		remoteConfigFilepath:    externalConfigFilepath,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	bootstrapper, err := NewLocalBootstrapper(&amp;opts)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	defer bootstrapper.Clean()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	g, _ := errgroup.WithContext(c.Context)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	boots, validators, rpcs := bootstrapper.boots, bootstrapper.validators, bootstrapper.rpcs</span>
<span class="term-fg32">+	for i := range boots {</span>
<span class="term-fg32">+		i := i &#47;&#47; NOTE: https:&#47;&#47;golang.org&#47;doc&#47;faq#closures_and_goroutines</span>
<span class="term-fg32">+		g.Go(func() error {</span>
<span class="term-fg32">+			return boots[i].Run([]string{})</span>
<span class="term-fg32">+		})</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Wait for bootnodes</span>
<span class="term-fg32">+	time.Sleep(3 * time.Second) &#47;&#47; TODO: feed an io.Writer into stdout&#47;stderr of bootnode exes and check ready output before proceeding</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	for i := range validators {</span>
<span class="term-fg32">+		i := i &#47;&#47; NOTE: https:&#47;&#47;golang.org&#47;doc&#47;faq#closures_and_goroutines</span>
<span class="term-fg32">+		g.Go(func() error {</span>
<span class="term-fg32">+			return validators[i].Run(gethFlags)</span>
<span class="term-fg32">+		})</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	for i := range rpcs {</span>
<span class="term-fg32">+		i := i &#47;&#47; NOTE: https:&#47;&#47;golang.org&#47;doc&#47;faq#closures_and_goroutines</span>
<span class="term-fg32">+		g.Go(func() error {</span>
<span class="term-fg32">+			return rpcs[i].Run(gethFlags)</span>
<span class="term-fg32">+		})</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return g.Wait()</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-85a3cd2a17540ca1f389e24e" role="button"
                       aria-expanded="false" aria-controls="id-85a3cd2a17540ca1f389e24e">
                        <code>cmd/geth/immutable_local_bootstrapper.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/geth/immutable_local_bootstrapper.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+439</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-85a3cd2a17540ca1f389e24e"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;immutable_local_bootstrapper.go immutable-geth&#47;cmd&#47;geth&#47;immutable_local_bootstrapper.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..0724bd0c7774176b47e83539c6e980ed23311ea1</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;geth&#47;immutable_local_bootstrapper.go</span>
<span class="term-fg36">@@ -0,0 +1,439 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package main</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;encoding&#47;json&quot;</span>
<span class="term-fg32">+	&quot;fmt&quot;</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+	&quot;net&#47;url&quot;</span>
<span class="term-fg32">+	&quot;os&quot;</span>
<span class="term-fg32">+	&quot;path&#47;filepath&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;env&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;node&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;role&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;settings&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;utils&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;crypto&quot;</span>
<span class="term-fg32">+	ethnode &quot;github.com&#47;ethereum&#47;go-ethereum&#47;node&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;p2p&#47;enode&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;params&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;urfave&#47;cli&#47;v2&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Premine contains addresses and amounts of premined balances</span>
<span class="term-fg32">+&#47;&#47; in the genesis block</span>
<span class="term-fg32">+type Premine struct {</span>
<span class="term-fg32">+	Address common.Address</span>
<span class="term-fg32">+	Wei     *big.Int</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ChainOptions contains all the options for generating a genesis</span>
<span class="term-fg32">+type ChainOptions struct {</span>
<span class="term-fg32">+	GasLimit        uint64</span>
<span class="term-fg32">+	SecondsPerBlock uint64</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	Validators []common.Address</span>
<span class="term-fg32">+	Premines   []Premine</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	ChainID int</span>
<span class="term-fg32">+	Dirpath string</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Genesis contains the genesis and bootstrap information about it</span>
<span class="term-fg32">+type Genesis struct {</span>
<span class="term-fg32">+	&#47;&#47; Genesis is the content of the genesis</span>
<span class="term-fg32">+	Genesis *core.Genesis</span>
<span class="term-fg32">+	&#47;&#47; Filepath is the path to the genesis file</span>
<span class="term-fg32">+	Filepath string</span>
<span class="term-fg32">+	&#47;&#47; JSON is a convenience field to avoid having to re-marshal the genesis</span>
<span class="term-fg32">+	JSON []byte</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; LocalBootstrapper is used to generate genesis files and validator credentials</span>
<span class="term-fg32">+type LocalBootstrapper struct {</span>
<span class="term-fg32">+	rootEnvDirpath string</span>
<span class="term-fg32">+	boots          []node.Node</span>
<span class="term-fg32">+	validators     []node.Node</span>
<span class="term-fg32">+	rpcs           []node.Node</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+type bootstrapOptions struct {</span>
<span class="term-fg32">+	rootDirpath    string</span>
<span class="term-fg32">+	validatorCount int</span>
<span class="term-fg32">+	bootCount      int</span>
<span class="term-fg32">+	rpcCount       int</span>
<span class="term-fg32">+	gasLimit       uint64</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	blockListFilepath string</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Set these if you want to bootstrap against a remote network only.</span>
<span class="term-fg32">+	remoteNetwork        string</span>
<span class="term-fg32">+	remoteConfigFilepath string</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; NOTE: This type should not be used here (compartmentalization bad).</span>
<span class="term-fg32">+	&#47;&#47; We have not refactored geth to improve the bootstrapper in this regard.</span>
<span class="term-fg32">+	ctx *cli.Context</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewLocalBootstrapper will bootstrap a set of nodes to be run locally.</span>
<span class="term-fg32">+&#47;&#47; It may be used to start a new network or start a node pointing to an existing, remote network.</span>
<span class="term-fg32">+func NewLocalBootstrapper(opts *bootstrapOptions) (*LocalBootstrapper, error) {</span>
<span class="term-fg32">+	&#47;&#47; Default to devnet configuration</span>
<span class="term-fg32">+	networkName := &quot;devnet&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; If a remote network is specified, use that network&#39;s configuration</span>
<span class="term-fg32">+	if opts.remoteNetwork != &quot;&quot; {</span>
<span class="term-fg32">+		networkName = opts.remoteNetwork</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	network, err := settings.NewNetwork(networkName)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Set up the paths we will bootstrap files to</span>
<span class="term-fg32">+	rootEnvDirpath := filepath.Join(opts.rootDirpath, network.String())</span>
<span class="term-fg32">+	chainSubdir := fmt.Sprint(&quot;chain&quot;, &quot;-&quot;, network.ID())</span>
<span class="term-fg32">+	chainDirpath := filepath.Join(rootEnvDirpath, chainSubdir)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Config TOMLs are either created in this process or derived from an existing file</span>
<span class="term-fg32">+	configFilepath := opts.remoteConfigFilepath</span>
<span class="term-fg32">+	if configFilepath == &quot;&quot; {</span>
<span class="term-fg32">+		configFilepath = filepath.Join(chainDirpath, &quot;config.toml&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Clear chaindir</span>
<span class="term-fg32">+	if err := os.RemoveAll(chainDirpath); err != nil {</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;failed to clear netdir: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Create dir</span>
<span class="term-fg32">+	if err := os.MkdirAll(chainDirpath, os.ModePerm); err != nil {</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;failed to create datadir: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Create the nodes</span>
<span class="term-fg32">+	nodeOpts := make([]node.Options, opts.bootCount+opts.validatorCount+opts.rpcCount)</span>
<span class="term-fg32">+	for i := range nodeOpts {</span>
<span class="term-fg32">+		u, err := url.Parse(fmt.Sprintf(&quot;http:&#47;&#47;127.0.0.1:%d&quot;, node.PortP2P+i))</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return nil, fmt.Errorf(&quot;failed to parse url: %w&quot;, err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		role, ordinal := genesisNodeRoleAndOrdinal(opts.bootCount, opts.validatorCount, opts.rpcCount, i)</span>
<span class="term-fg32">+		nodeOpts[i] = node.Options{</span>
<span class="term-fg32">+			Role:         role,</span>
<span class="term-fg32">+			Ordinal:      ordinal,</span>
<span class="term-fg32">+			Password:     nodePassword,</span>
<span class="term-fg32">+			URL:          u,</span>
<span class="term-fg32">+			ChainDirpath: chainDirpath,</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	nodeConf := node.Config{</span>
<span class="term-fg32">+		Network:           *network,</span>
<span class="term-fg32">+		ConfigFilepath:    configFilepath,</span>
<span class="term-fg32">+		BlockListFilepath: opts.blockListFilepath,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	nodes, err := createNodes(nodeOpts, nodeConf)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Store the node passwords to files</span>
<span class="term-fg32">+	for i := range nodes {</span>
<span class="term-fg32">+		if err := os.WriteFile(localPasswordFilepath(nodes[i]), []byte(nodes[i].Password()), os.ModePerm); err != nil {</span>
<span class="term-fg32">+			return nil, fmt.Errorf(&quot;failed to create local pw file: %w&quot;, err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Create the remaining chain artifacts</span>
<span class="term-fg32">+	boots, validators, rpcs := splitGenesisNodes(nodes, opts.bootCount, opts.validatorCount)</span>
<span class="term-fg32">+	var gen *Genesis</span>
<span class="term-fg32">+	if opts.remoteNetwork == &quot;&quot; {</span>
<span class="term-fg32">+		bridgeEOAAddress := &quot;0x02F0d131F1f97aef08aEc6E3291B957d9Efe7105&quot; &#47;&#47; Also in cmd&#47;geth&#47;testdata&#47;key.addr</span>
<span class="term-fg32">+		chainOpts := ChainOptions{</span>
<span class="term-fg32">+			GasLimit:        opts.gasLimit,</span>
<span class="term-fg32">+			SecondsPerBlock: settings.SecondsPerBlock,</span>
<span class="term-fg32">+			Validators:      nodesToAddresses(validators),</span>
<span class="term-fg32">+			Premines:        immutablePremines(env.Devnet, common.HexToAddress(bridgeEOAAddress)),</span>
<span class="term-fg32">+			Dirpath:         chainDirpath,</span>
<span class="term-fg32">+			ChainID:         network.ID(),</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		&#47;&#47; Generate a clique genesis</span>
<span class="term-fg32">+		var err error</span>
<span class="term-fg32">+		gen, err = Clique(chainOpts)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return nil, err</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	} else {</span>
<span class="term-fg32">+		&#47;&#47; Derive a genesis from the remote network</span>
<span class="term-fg32">+		network, err := settings.NewNetwork(opts.remoteNetwork)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return nil, err</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		gen = &amp;Genesis{</span>
<span class="term-fg32">+			Filepath: fmt.Sprintf(&quot;.&#47;cmd&#47;geth&#47;immutable&#47;genesis&#47;%s.json&quot;, network.String()),</span>
<span class="term-fg32">+			Genesis:  core.ImmutableGenesisBlock(network.String()),</span>
<span class="term-fg32">+			JSON:     []byte(network.GenesisJSON()),</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Make sure we run an immutable network</span>
<span class="term-fg32">+	if !gen.Genesis.Config.IsValidImmutableZKEVM() {</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;invalid genesis config: %+v&quot;, *gen.Genesis.Config)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Init the geth nodes with genesis</span>
<span class="term-fg32">+	if err := renderLocalChainState(opts.ctx, gen, nodes); err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Render the config if we are not connecting to an existing network</span>
<span class="term-fg32">+	if opts.remoteNetwork == &quot;&quot; {</span>
<span class="term-fg32">+		if err := renderLocalConfig(boots, configFilepath, network.ID()); err != nil {</span>
<span class="term-fg32">+			return nil, err</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return &amp;LocalBootstrapper{</span>
<span class="term-fg32">+		rootEnvDirpath: rootEnvDirpath,</span>
<span class="term-fg32">+		boots:          boots,</span>
<span class="term-fg32">+		validators:     validators,</span>
<span class="term-fg32">+		rpcs:           rpcs,</span>
<span class="term-fg32">+	}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (b *LocalBootstrapper) Clean() {</span>
<span class="term-fg32">+	os.RemoveAll(b.rootEnvDirpath)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; createNodes will generate EOA credentials and store them in encrypted keystore files</span>
<span class="term-fg32">+func createNodes(opts []node.Options, conf node.Config) ([]node.Node, error) {</span>
<span class="term-fg32">+	&#47;&#47; Generate validator accounts</span>
<span class="term-fg32">+	nodeCount := len(opts)</span>
<span class="term-fg32">+	nodes := make([]node.Node, 0, nodeCount)</span>
<span class="term-fg32">+	for i := 0; i &lt; nodeCount; i++ {</span>
<span class="term-fg32">+		&#47;&#47; Construct the node</span>
<span class="term-fg32">+		node, err := node.New(opts[i], conf)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return nil, err</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		nodes = append(nodes, *node)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return nodes, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Clique will generate a genesis for a clique chain and store it to file</span>
<span class="term-fg32">+func Clique(opts ChainOptions) (*Genesis, error) {</span>
<span class="term-fg32">+	gen, err := clique(opts)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if err := os.WriteFile(gen.Filepath, gen.JSON, os.ModePerm); err != nil {</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;failed to write genesis file: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return gen, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func clique(opts ChainOptions) (*Genesis, error) {</span>
<span class="term-fg32">+	&#47;&#47; To encode the signer addresses in extradata,</span>
<span class="term-fg32">+	&#47;&#47; concatenate 32 zero bytes, all signer addresses and 65 further zero bytes.</span>
<span class="term-fg32">+	&#47;&#47; This is based on the clique spec: https:&#47;&#47;eips.ethereum.org&#47;EIPS&#47;eip-225</span>
<span class="term-fg32">+	extraDataLength := crypto.DigestLength + common.AddressLength*len(opts.Validators) + crypto.SignatureLength</span>
<span class="term-fg32">+	extraData := make([]byte, extraDataLength)</span>
<span class="term-fg32">+	for i := range opts.Validators {</span>
<span class="term-fg32">+		from := crypto.DigestLength + common.AddressLength*i</span>
<span class="term-fg32">+		to := from + common.AddressLength</span>
<span class="term-fg32">+		copy(extraData[from:to], opts.Validators[i].Bytes())</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Premine</span>
<span class="term-fg32">+	alloc := types.GenesisAlloc{}</span>
<span class="term-fg32">+	for i := range opts.Premines {</span>
<span class="term-fg32">+		alloc[opts.Premines[i].Address] = types.Account{</span>
<span class="term-fg32">+			Balance: opts.Premines[i].Wei,</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Marshal the genesis</span>
<span class="term-fg32">+	gen := core.Genesis{</span>
<span class="term-fg32">+		Config: &amp;params.ChainConfig{</span>
<span class="term-fg32">+			ChainID:             new(big.Int).SetUint64(uint64(opts.ChainID)),</span>
<span class="term-fg32">+			HomesteadBlock:      common.Big0,</span>
<span class="term-fg32">+			EIP150Block:         common.Big0,</span>
<span class="term-fg32">+			EIP155Block:         common.Big0,</span>
<span class="term-fg32">+			EIP158Block:         common.Big0,</span>
<span class="term-fg32">+			ByzantiumBlock:      common.Big0,</span>
<span class="term-fg32">+			ConstantinopleBlock: common.Big0,</span>
<span class="term-fg32">+			PetersburgBlock:     common.Big0,</span>
<span class="term-fg32">+			IstanbulBlock:       common.Big0,</span>
<span class="term-fg32">+			MuirGlacierBlock:    common.Big0,</span>
<span class="term-fg32">+			BerlinBlock:         common.Big0,</span>
<span class="term-fg32">+			LondonBlock:         common.Big0,</span>
<span class="term-fg32">+			ArrowGlacierBlock:   common.Big0,</span>
<span class="term-fg32">+			GrayGlacierBlock:    common.Big0,</span>
<span class="term-fg32">+			MergeNetsplitBlock:  common.Big0,</span>
<span class="term-fg32">+			Clique: &amp;params.CliqueConfig{</span>
<span class="term-fg32">+				Period: opts.SecondsPerBlock,</span>
<span class="term-fg32">+				Epoch:  30000,</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			IsReorgBlocked: true,</span>
<span class="term-fg32">+			&#47;&#47; So as to reflect devnet, testnet, and mainnet, these forks should not be enabled in genesis.</span>
<span class="term-fg32">+			ShanghaiTime:   nil,</span>
<span class="term-fg32">+			PrevrandaoTime: nil,</span>
<span class="term-fg32">+			CancunTime:     nil, &#47;&#47; If genesis block has Cancun enabled, you must set the blob-related headers too.</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		Difficulty: big.NewInt(1),</span>
<span class="term-fg32">+		GasLimit:   opts.GasLimit,</span>
<span class="term-fg32">+		Mixhash:    common.Hash{},</span>
<span class="term-fg32">+		ExtraData:  extraData,</span>
<span class="term-fg32">+		Alloc:      alloc,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	json, err := json.MarshalIndent(gen, &quot;&quot;, &quot;    &quot;)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;failed to marshal genesis: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Write genesis file</span>
<span class="term-fg32">+	path := filepath.Join(opts.Dirpath, &quot;genesis.json&quot;)</span>
<span class="term-fg32">+	return &amp;Genesis{</span>
<span class="term-fg32">+		Genesis:  &amp;gen,</span>
<span class="term-fg32">+		Filepath: path,</span>
<span class="term-fg32">+		JSON:     json,</span>
<span class="term-fg32">+	}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; renderLocalChainState will initialize the chaindata and lightchaindata dbs</span>
<span class="term-fg32">+func renderLocalChainState(c *cli.Context, gen *Genesis, nodes []node.Node) error {</span>
<span class="term-fg32">+	&#47;&#47; Init node dbs and write genesis to dbs</span>
<span class="term-fg32">+	for i := range nodes {</span>
<span class="term-fg32">+		&#47;&#47; Instantiate node based on config and dir</span>
<span class="term-fg32">+		cfg := loadBaseConfig(c)</span>
<span class="term-fg32">+		cfg.Node.DataDir = nodes[i].Dirpath()</span>
<span class="term-fg32">+		stack, err := ethnode.New(&amp;cfg.Node)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return fmt.Errorf(&quot;failed to create node: %w&quot;, err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		defer stack.Close()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		&#47;&#47; Init genesis for chain and lightchain dbs of node</span>
<span class="term-fg32">+		for _, name := range []string{&quot;chaindata&quot;, &quot;lightchaindata&quot;} {</span>
<span class="term-fg32">+			&#47;&#47; Create and open leveldb</span>
<span class="term-fg32">+			chaindb, err := stack.OpenDatabaseWithFreezer(name, 0, 0, &quot;&quot;, &quot;&quot;, false)</span>
<span class="term-fg32">+			if err != nil {</span>
<span class="term-fg32">+				return fmt.Errorf(&quot;failed to open db: %w&quot;, err)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			defer chaindb.Close()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+			&#47;&#47; Create and open trie db</span>
<span class="term-fg32">+			triedb := utils.MakeTrieDatabaseNoContext(cfg.Eth.StateScheme, chaindb, false, false, false)</span>
<span class="term-fg32">+			defer triedb.Close()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+			&#47;&#47; Write genesis block to trie and save to leveldb</span>
<span class="term-fg32">+			if _, _, err := core.SetupGenesisBlock(chaindb, triedb, gen.Genesis); err != nil {</span>
<span class="term-fg32">+				return fmt.Errorf(&quot;failed to write genesis block to db: %w&quot;, err)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; renderLocalConfig will write the config file for each node.</span>
<span class="term-fg32">+&#47;&#47; This needs to be run after nodekeys are generated by renderLocalChainState.</span>
<span class="term-fg32">+func renderLocalConfig(boots []node.Node, configFilepath string, chainID int) (err error) {</span>
<span class="term-fg32">+	enodes := make([]*enode.Node, len(boots))</span>
<span class="term-fg32">+	for i := range enodes {</span>
<span class="term-fg32">+		en, err := enodeFromNodeKey(boots[i])</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return err</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		enodes[i] = en</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	f, err := os.OpenFile(configFilepath, os.O_RDWR|os.O_CREATE, 0755)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;failed to open config file: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	defer f.Close()</span>
<span class="term-fg32">+	conf := &amp;gethConfig{</span>
<span class="term-fg32">+		Eth:  ImmutableEthConfig(chainID),</span>
<span class="term-fg32">+		Node: nodeConfig(enodes),</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if err := tomlSettings.NewEncoder(f).Encode(conf); err != nil {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;failed to encode config: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; enodeFromNodeKey reads the nodekey file and parses the enode.</span>
<span class="term-fg32">+&#47;&#47; The nodekey files are available after chain state has been rendered.</span>
<span class="term-fg32">+func enodeFromNodeKey(node node.Node) (*enode.Node, error) {</span>
<span class="term-fg32">+	&#47;&#47; Derive the public key</span>
<span class="term-fg32">+	nodeKeyFilepath := filepath.Join(node.Dirpath(), &quot;geth&quot;, &quot;nodekey&quot;)</span>
<span class="term-fg32">+	nodeKey, err := crypto.LoadECDSA(nodeKeyFilepath)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;failed to read nodekey file: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Parse the enode</span>
<span class="term-fg32">+	enodeURL := fmt.Sprintf(&quot;enode:&#47;&#47;%x@%s:%s&quot;, crypto.FromECDSAPub(&amp;nodeKey.PublicKey)[1:], node.URL().Hostname(), node.URL().Port())</span>
<span class="term-fg32">+	enode, err := enode.Parse(enode.ValidSchemes, enodeURL)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;failed to parse enode: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return enode, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func nodesToAddresses(nodes []node.Node) []common.Address {</span>
<span class="term-fg32">+	addrs := make([]common.Address, len(nodes))</span>
<span class="term-fg32">+	for i := range nodes {</span>
<span class="term-fg32">+		addrs[i] = nodes[i].Account().Address</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return addrs</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func genesisNodeRoleAndOrdinal(bootCount, validatorCount, rpcCount, index int) (role.Role, int) {</span>
<span class="term-fg32">+	&#47;&#47; Boots</span>
<span class="term-fg32">+	if index &lt; bootCount {</span>
<span class="term-fg32">+		return role.Boot, index</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Validators</span>
<span class="term-fg32">+	if index &lt; bootCount+validatorCount {</span>
<span class="term-fg32">+		return role.Validator, index - bootCount</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; RPCs</span>
<span class="term-fg32">+	if index &lt; bootCount+validatorCount+rpcCount {</span>
<span class="term-fg32">+		return role.RPC, index - bootCount - validatorCount</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Partner</span>
<span class="term-fg32">+	return role.Partner, index - bootCount - validatorCount - rpcCount</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func splitGenesisNodes(nodes []node.Node, bootCount, validatorCount int) (boots, validators, rpcs []node.Node) {</span>
<span class="term-fg32">+	return nodes[:bootCount], nodes[bootCount : bootCount+validatorCount], nodes[bootCount+validatorCount:]</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func localPasswordFilepath(node node.Node) string {</span>
<span class="term-fg32">+	return filepath.Join(node.Dirpath(), node.Password())</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-cd41e5c1c2e7cb4110c0c544" role="button"
                       aria-expanded="false" aria-controls="id-cd41e5c1c2e7cb4110c0c544">
                        <code>cmd/geth/immutable_premine.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/geth/immutable_premine.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+88</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-cd41e5c1c2e7cb4110c0c544"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;immutable_premine.go immutable-geth&#47;cmd&#47;geth&#47;immutable_premine.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..c3deb74bc0797c00adbe7ef925bb7ae236986ded</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;geth&#47;immutable_premine.go</span>
<span class="term-fg36">@@ -0,0 +1,88 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package main</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;env&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+var (</span>
<span class="term-fg32">+	&#47;&#47; totalSupplyWei is the amount of IMX that is pre-funded to the bridge EOA</span>
<span class="term-fg32">+	totalSupplyWei = new(big.Int).Mul(big.NewInt(1e18), big.NewInt(2e9))</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; immutableDevPremines is a list of EOAs that are pre-funded with a large amount of ETH</span>
<span class="term-fg32">+	&#47;&#47; on dev networks. This is used to allow developers to deploy contracts without having</span>
<span class="term-fg32">+	&#47;&#47; to request funds from a faucet.</span>
<span class="term-fg32">+	immutableDevPremineAddresses = []string{</span>
<span class="term-fg32">+		&quot;0x340bC2c77514ede2a23Fd4F42F411A8e351d8eE6&quot;,</span>
<span class="term-fg32">+		&quot;0xebbf4C07a63986204C37cc5A188AaBF53564C583&quot;,</span>
<span class="term-fg32">+		&quot;0xdEAdC0de8a3B037925a895843f96b0c525FBC31f&quot;,</span>
<span class="term-fg32">+		&quot;0xeFE12952541356Ffc969A343A81D1cE7D2806179&quot;,</span>
<span class="term-fg32">+		&quot;0x4AEdf28A437b94749037cC39f83F4422469CF2F7&quot;,</span>
<span class="term-fg32">+		&quot;0x8318a871CC140d9f77a1999f84875AC36EeCC04E&quot;,</span>
<span class="term-fg32">+		&quot;0xCc5C8CEa877f2F351F38c190867BbD31FaFadD22&quot;,</span>
<span class="term-fg32">+		&quot;0x000000000013B7b1B08B3c8EFE02E866F746bD38&quot;,</span>
<span class="term-fg32">+		&quot;0xa6C368164Eb270C31592c1830Ed25c2bf5D34BAE&quot;,</span>
<span class="term-fg32">+		&quot;0xC606830D8341bc9F5F5Dd7615E9313d2655B505D&quot;,</span>
<span class="term-fg32">+		&quot;0x784578949A4A50DeA641Fb15dd2B11C72E76919a&quot;,</span>
<span class="term-fg32">+		&quot;0xEac347177DbA4a190B632C7d9b8da2AbfF57c772&quot;,</span>
<span class="term-fg32">+		&quot;0xD509997AB62fDA51c32E64E69Fb090DF8894105e&quot;,</span>
<span class="term-fg32">+		&quot;0xF6372939CE2d14A68A629B8E4785E9dCB4EdA0cf&quot;,</span>
<span class="term-fg32">+		&quot;0x9C1634bebC88653D2Aebf4c14a3031f62092b1D9&quot;,</span>
<span class="term-fg32">+		&quot;0xb3343666188A694120C18c4985C57e4C0913A6F0&quot;,</span>
<span class="term-fg32">+		&quot;0x2E969d22e6654e064F461cf8B1314Cc0864a4914&quot;,</span>
<span class="term-fg32">+		&quot;0xd9275Eb8276E14b9e28d5f9B12e90dDAAF3586Ef&quot;,</span>
<span class="term-fg32">+		&quot;0x3e290FE8F2A5dB60A81cb47EA296e0299048Dd71&quot;,</span>
<span class="term-fg32">+		&quot;0x4A73506a31DB769AC442b17ca9A1679f44757Bbf&quot;,</span>
<span class="term-fg32">+		&quot;0x7C3E6CE6fd293Fc66d9d73d49fd546CCE1e19F0e&quot;,</span>
<span class="term-fg32">+		&quot;0xEB7FFb9fb0c80437120f6F97EdE60aB59055EAE0&quot;,</span>
<span class="term-fg32">+		&quot;0xe567Ea84e1eB3fFdc8F5aA420BF14A16eeE6A809&quot;,</span>
<span class="term-fg32">+		&quot;0xC8714F989cE817e5d21349888077Aa5Db4A9BCf6&quot;,</span>
<span class="term-fg32">+		&quot;0x0CCB0a3fc5Ca38fcd9FfD8a667Cb83e3194250d7&quot;,</span>
<span class="term-fg32">+		&quot;0x5ABFc3E307b037325BFC6988Ae265dcB211Ec533&quot;,</span>
<span class="term-fg32">+		&quot;0x7442eD1e3c9FD421F47d12A2742AfF5DaFBf43f8&quot;,</span>
<span class="term-fg32">+		&quot;0x4A73506a31DB769AC442b17ca9A1679f44757Bbf&quot;,</span>
<span class="term-fg32">+		&quot;0x7C3E6CE6fd293Fc66d9d73d49fd546CCE1e19F0e&quot;,</span>
<span class="term-fg32">+		&quot;0xEB7FFb9fb0c80437120f6F97EdE60aB59055EAE0&quot;,</span>
<span class="term-fg32">+		&quot;0xed557863FFD4C87537BA8264098B22483c6145f2&quot;,</span>
<span class="term-fg32">+		&quot;0x7924BF4cBb25f7bA2aB1335e293afe6a7E78235a&quot;,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func immutablePremines(envr env.Environment, bridgeEOA common.Address) []Premine {</span>
<span class="term-fg32">+	&#47;&#47; Always premine bridge EOA</span>
<span class="term-fg32">+	premines := []Premine{</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			Address: bridgeEOA,</span>
<span class="term-fg32">+			Wei:     totalSupplyWei,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Only premine devnet</span>
<span class="term-fg32">+	if envr != env.Devnet {</span>
<span class="term-fg32">+		return premines</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	for _, address := range immutableDevPremineAddresses {</span>
<span class="term-fg32">+		premines = append(premines, Premine{</span>
<span class="term-fg32">+			Address: common.HexToAddress(address),</span>
<span class="term-fg32">+			Wei:     totalSupplyWei,</span>
<span class="term-fg32">+		})</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return premines</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-2e955150294268dcf5b26fc4" role="button"
                       aria-expanded="false" aria-controls="id-2e955150294268dcf5b26fc4">
                        <code>cmd/geth/immutable_remote_store.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/geth/immutable_remote_store.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+32</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-2e955150294268dcf5b26fc4"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;immutable_remote_store.go immutable-geth&#47;cmd&#47;geth&#47;immutable_remote_store.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..077390a5900495b6d873f87afdeffc400ceaa63f</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;geth&#47;immutable_remote_store.go</span>
<span class="term-fg36">@@ -0,0 +1,32 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package main</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;context&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ArtefactStore handles configuration artefacts created by the</span>
<span class="term-fg32">+&#47;&#47; bootstrap process.</span>
<span class="term-fg32">+type ArtefactStore interface {</span>
<span class="term-fg32">+	PushSecretFile(key string, content []byte) error</span>
<span class="term-fg32">+	StoreConfigFile(filepath string, content []byte) error</span>
<span class="term-fg32">+	PushSecretString(key, content string) error</span>
<span class="term-fg32">+	PutSecretString(key, content string) error</span>
<span class="term-fg32">+	GeneratePassword() (string, error)</span>
<span class="term-fg32">+	GetSecret(ctx context.Context, id string) (string, error)</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-addddf7ed2a848d50e464e1f" role="button"
                       aria-expanded="false" aria-controls="id-addddf7ed2a848d50e464e1f">
                        <code>cmd/geth/immutable_rewind_command.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/geth/immutable_rewind_command.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+108</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-addddf7ed2a848d50e464e1f"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;immutable_rewind_command.go immutable-geth&#47;cmd&#47;geth&#47;immutable_rewind_command.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..63f1f0959be4bf49a79acef42d5f74119f6ce73d</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;geth&#47;immutable_rewind_command.go</span>
<span class="term-fg36">@@ -0,0 +1,108 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package main</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;fmt&quot;</span>
<span class="term-fg32">+	&quot;path&#47;filepath&quot;</span>
<span class="term-fg32">+	&quot;strconv&quot;</span>
<span class="term-fg32">+	&quot;time&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;rewind&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;utils&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;rawdb&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;ethdb&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;log&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;urfave&#47;cli&#47;v2&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+const (</span>
<span class="term-fg32">+	rewindHistoryFilename = &quot;rewind_history.yaml&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; rewindChainCommand is the command to rewind the chain to a specific block.</span>
<span class="term-fg32">+&#47;&#47; If this is run on the validator node, it will proceed to create new blocks from</span>
<span class="term-fg32">+&#47;&#47; the point of the block to which the chain is rewound.</span>
<span class="term-fg32">+func runRewindChainCommand(ctx *cli.Context) error {</span>
<span class="term-fg32">+	if ctx.Args().Len() &lt; 1 {</span>
<span class="term-fg32">+		utils.Fatalf(&quot;This command requires an argument (block number or hash).&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Set up the node handle.</span>
<span class="term-fg32">+	stack, _ := makeConfigNode(ctx)</span>
<span class="term-fg32">+	defer stack.Close()</span>
<span class="term-fg32">+	chain, db := utils.MakeChain(ctx, stack, false)</span>
<span class="term-fg32">+	defer db.Close()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Get the header to which the chain should be rewound.</span>
<span class="term-fg32">+	header, err := getRewindHeader(ctx, db)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; If the rewind has already occurred, do not repeat.</span>
<span class="term-fg32">+	historyFilepath := filepath.Join(stack.DataDir(), rewindHistoryFilename)</span>
<span class="term-fg32">+	history, err := rewind.ReadRewindHistory(historyFilepath)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	log.Info(&quot;Rewind history&quot;, &quot;history&quot;, history)</span>
<span class="term-fg32">+	if history.Contains(header.Hash()) {</span>
<span class="term-fg32">+		log.Info(&quot;Chain has already been rewound to this block (%s).&quot;, header.Hash().Hex())</span>
<span class="term-fg32">+		return nil</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Perform the rewind.</span>
<span class="term-fg32">+	log.Info(&quot;Rewinding chain to block&quot;, &quot;block&quot;, header.Number)</span>
<span class="term-fg32">+	if err := chain.SetHead(header.Number.Uint64()); err != nil {</span>
<span class="term-fg32">+		return err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Record the fact that the chain has been rewound.</span>
<span class="term-fg32">+	history = append(history, rewind.Record{</span>
<span class="term-fg32">+		BlockNumber: header.Number.Uint64(),</span>
<span class="term-fg32">+		BlockHash:   header.Hash(),</span>
<span class="term-fg32">+		Timestamp:   time.Now(),</span>
<span class="term-fg32">+	})</span>
<span class="term-fg32">+	return rewind.WriteRewindHistory(history, historyFilepath)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; getRewindHeader returns the header to which the chain should be rewound</span>
<span class="term-fg32">+&#47;&#47; based on arguments passed to the command.</span>
<span class="term-fg32">+func getRewindHeader(ctx *cli.Context, db ethdb.Database) (*types.Header, error) {</span>
<span class="term-fg32">+	&#47;&#47; Parse the argument which may be hex or a number for a block.</span>
<span class="term-fg32">+	arg := ctx.Args().First()</span>
<span class="term-fg32">+	if hashish(arg) {</span>
<span class="term-fg32">+		&#47;&#47; Parse hex.</span>
<span class="term-fg32">+		hash := common.HexToHash(arg)</span>
<span class="term-fg32">+		if number := rawdb.ReadHeaderNumber(db, hash); number != nil {</span>
<span class="term-fg32">+			return rawdb.ReadHeader(db, hash, *number), nil</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;block %x not found&quot;, hash)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Parse number.</span>
<span class="term-fg32">+	number, err := strconv.ParseUint(arg, 10, 64)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if hash := rawdb.ReadCanonicalHash(db, number); hash != (common.Hash{}) {</span>
<span class="term-fg32">+		return rawdb.ReadHeader(db, hash, number), nil</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return nil, fmt.Errorf(&quot;header for block %d not found&quot;, number)</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-851fe9ef027eb4620bd710e5" role="button"
                       aria-expanded="false" aria-controls="id-851fe9ef027eb4620bd710e5">
                        <code>cmd/geth/immutable_run_boot_node_command.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/geth/immutable_run_boot_node_command.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+137</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-851fe9ef027eb4620bd710e5"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;immutable_run_boot_node_command.go immutable-geth&#47;cmd&#47;geth&#47;immutable_run_boot_node_command.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..ab24971c59bc5524a1cd937be37aefdfac83f129</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;geth&#47;immutable_run_boot_node_command.go</span>
<span class="term-fg36">@@ -0,0 +1,137 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package main</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;crypto&#47;ecdsa&quot;</span>
<span class="term-fg32">+	&quot;fmt&quot;</span>
<span class="term-fg32">+	&quot;net&quot;</span>
<span class="term-fg32">+	&quot;os&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&#47;immutable&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;keys&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;node&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;role&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;immutable&#47;remote&#47;aws&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;utils&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;log&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;p2p&#47;discover&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;p2p&#47;enode&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;urfave&#47;cli&#47;v2&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func runBootNodeCommand(c *cli.Context) error {</span>
<span class="term-fg32">+	&#47;&#47; Retrieve the boot node&#39;s p2p key</span>
<span class="term-fg32">+	var p2pKey *ecdsa.PrivateKey</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	pwFilepath := os.Getenv(&quot;GETH_FLAG_PASSWORD_FILEPATH&quot;)</span>
<span class="term-fg32">+	if pwFilepath != &quot;&quot; {</span>
<span class="term-fg32">+		&#47;&#47; Retrieve the key from local keystore (for local development only)</span>
<span class="term-fg32">+		log.Info(&quot;retrieving P2P key from local keystore&quot;)</span>
<span class="term-fg32">+		keyStoreDirpath := c.String(utils.KeyStoreDirFlag.Name)</span>
<span class="term-fg32">+		store, err := immutable.NewKeystore(keyStoreDirpath, pwFilepath)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return err</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		p2pKey, err = store.GetPrivateKey(c.Context)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return err</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	} else {</span>
<span class="term-fg32">+		&#47;&#47; Retrieve the key from AWS</span>
<span class="term-fg32">+		log.Info(&quot;retrieving P2P key from Secrets Manager&quot;)</span>
<span class="term-fg32">+		awsRegion := os.Getenv(&quot;GETH_FLAG_IMMUTABLE_AWS_REGION&quot;)</span>
<span class="term-fg32">+		if awsRegion == &quot;&quot; {</span>
<span class="term-fg32">+			return fmt.Errorf(&quot;GETH_FLAG_IMMUTABLE_AWS_REGION is required&quot;)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		store, err := aws.NewSecretsManager(awsRegion)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return fmt.Errorf(&quot;failed to create AWS SecretsManager Store: %v &quot;, err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		podOrdinal, err := ordinalFromPodNameEnvVar()</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return err</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		secretIDTemplate, err := keys.SecretIDTemplate()</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return err</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		secretID, err := keys.SecretID(secretIDTemplate, node.CanonicalNodeName(role.Boot, podOrdinal))</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return err</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		p2pKey, err = keys.Retrieve(</span>
<span class="term-fg32">+			c.Context,</span>
<span class="term-fg32">+			store,</span>
<span class="term-fg32">+			secretID,</span>
<span class="term-fg32">+		)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return fmt.Errorf(&quot;failed to retrieve P2P key: %v&quot;, err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Run the boot node</span>
<span class="term-fg32">+	return runBootNode(p2pKey, c.Int(utils.ListenPortFlag.Name))</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func runBootNode(p2pKey *ecdsa.PrivateKey, port int) error {</span>
<span class="term-fg32">+	&#47;&#47; Log</span>
<span class="term-fg32">+	glogger := log.NewGlogHandler(log.NewTerminalHandler(os.Stderr, false))</span>
<span class="term-fg32">+	glogger.Verbosity(4)</span>
<span class="term-fg32">+	glogger.Vmodule(&quot;&quot;)</span>
<span class="term-fg32">+	log.SetDefault(log.NewLogger(glogger))</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; UDP session</span>
<span class="term-fg32">+	listenAddr := fmt.Sprintf(&quot;:%d&quot;, port)</span>
<span class="term-fg32">+	addr, err := net.ResolveUDPAddr(&quot;udp&quot;, listenAddr)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;failed to resolve UDP address: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	conn, err := net.ListenUDP(&quot;udp&quot;, addr)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;failed to listen UDP: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	defer conn.Close()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Enode DB</span>
<span class="term-fg32">+	db, _ := enode.OpenDB(&quot;&quot;)</span>
<span class="term-fg32">+	ln := enode.NewLocalNode(db, p2pKey)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Notice</span>
<span class="term-fg32">+	listenerAddr := conn.LocalAddr().(*net.UDPAddr)</span>
<span class="term-fg32">+	printNotice(&amp;p2pKey.PublicKey, *listenerAddr)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Run</span>
<span class="term-fg32">+	cfg := discover.Config{</span>
<span class="term-fg32">+		PrivateKey:  p2pKey,</span>
<span class="term-fg32">+		NetRestrict: nil,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if _, err := discover.ListenUDP(conn, ln, cfg); err != nil {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;failed to listen UDP: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Block</span>
<span class="term-fg32">+	select {}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func printNotice(nodeKey *ecdsa.PublicKey, addr net.UDPAddr) {</span>
<span class="term-fg32">+	if addr.IP.IsUnspecified() {</span>
<span class="term-fg32">+		addr.IP = net.IP{127, 0, 0, 1}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	n := enode.NewV4(nodeKey, addr.IP, 0, addr.Port)</span>
<span class="term-fg32">+	fmt.Println(n.URLv4())</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-bdf792067fa061e86ea18505" role="button"
                       aria-expanded="false" aria-controls="id-bdf792067fa061e86ea18505">
                        <code>cmd/geth/immutable_vote.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/geth/immutable_vote.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+138</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-bdf792067fa061e86ea18505"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;immutable_vote.go immutable-geth&#47;cmd&#47;geth&#47;immutable_vote.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..7bbe77fc40f6a7bee40c80b2654cf31f3f5ff523</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;geth&#47;immutable_vote.go</span>
<span class="term-fg36">@@ -0,0 +1,138 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package main</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;context&quot;</span>
<span class="term-fg32">+	&quot;errors&quot;</span>
<span class="term-fg32">+	&quot;fmt&quot;</span>
<span class="term-fg32">+	&quot;strings&quot;</span>
<span class="term-fg32">+	&quot;time&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;immutable&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;ethclient&#47;gethclient&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;log&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;rpc&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;urfave&#47;cli&#47;v2&quot;</span>
<span class="term-fg32">+	&quot;golang.org&#47;x&#47;exp&#47;slices&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+var (</span>
<span class="term-fg32">+	VoteWaitTime = time.Second * 10</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func addValidatorCommand(c *cli.Context) error {</span>
<span class="term-fg32">+	return processValidator(c, true)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func removeValidatorCommand(c *cli.Context) error {</span>
<span class="term-fg32">+	return processValidator(c, false)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func processValidator(c *cli.Context, add bool) error {</span>
<span class="term-fg32">+	ctx := c.Context</span>
<span class="term-fg32">+	voterURLs := c.StringSlice(immutable.Voters.Name)</span>
<span class="term-fg32">+	validatorNameStr := c.String(immutable.ValidatorAddress.Name)</span>
<span class="term-fg32">+	if !common.IsHexAddress(validatorNameStr) {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;address %s is not valid&quot;, validatorNameStr)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	validator := common.HexToAddress(validatorNameStr)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if len(voterURLs) == 0 {</span>
<span class="term-fg32">+		return errors.New(&quot;no voters provided&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	voterClients, err := urlsToClients(ctx, voterURLs)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Validate the operation against validator (read only)</span>
<span class="term-fg32">+	for i := range voterClients {</span>
<span class="term-fg32">+		signers, err := voterClients[i].GetSigners(ctx, nil)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return fmt.Errorf(&quot;failed to get signers: %w&quot;, err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		&#47;&#47; if adding a validator, the validator should not be present</span>
<span class="term-fg32">+		if add &amp;&amp; slices.Contains(signers, validator) {</span>
<span class="term-fg32">+			return fmt.Errorf(&quot;validator %s is already part of validator set on validator %d&quot;, validator.String(), i)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		&#47;&#47; if removing a validator (i.e. !add), the validator should be present</span>
<span class="term-fg32">+		if !add &amp;&amp; !slices.Contains(signers, validator) {</span>
<span class="term-fg32">+			return fmt.Errorf(&quot;validator %s is not part of validator set on validator %d&quot;, validator.String(), i)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		log.Info(&quot;initial validator set&quot;, &quot;validator&quot;, i, &quot;validators&quot;, addressesToCSV(signers))</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	log.Info(&quot;Sleeping 15 seconds to give chance to interrupt&quot;)</span>
<span class="term-fg32">+	time.Sleep(time.Second * 15)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Execute votes against each existing validator</span>
<span class="term-fg32">+	for i := range voterClients {</span>
<span class="term-fg32">+		err := voterClients[i].Propose(ctx, validator, add)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return fmt.Errorf(&quot;failed to propose: %w&quot;, err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		log.Info(&quot;proposing for validator&quot;, &quot;validator&quot;, i, &quot;add&quot;, add, &quot;new&quot;, validator.String())</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	log.Info(&quot;Sleeping 10 seconds to let votes propagate and finalize&quot;)</span>
<span class="term-fg32">+	time.Sleep(VoteWaitTime)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	failed := false</span>
<span class="term-fg32">+	&#47;&#47; Compare the new validator set to what is expected</span>
<span class="term-fg32">+	for i := range voterClients {</span>
<span class="term-fg32">+		signers, err := voterClients[i].GetSigners(ctx, nil)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return err</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		&#47;&#47; if we are adding a validator, success means that the set contains the new signer</span>
<span class="term-fg32">+		&#47;&#47; if we are removing a validator, success means the set does not contain the signer</span>
<span class="term-fg32">+		success := (add &amp;&amp; slices.Contains(signers, validator)) || (!add &amp;&amp; !slices.Contains(signers, validator))</span>
<span class="term-fg32">+		if !success {</span>
<span class="term-fg32">+			failed = true</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		log.Info(&quot;final validator set&quot;, &quot;validator&quot;, i, &quot;validators&quot;, addressesToCSV(signers), &quot;success&quot;, success)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if failed {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;voting failed&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; addressesToCSV converts a slice of common.Address to a string.</span>
<span class="term-fg32">+func addressesToCSV(addresses []common.Address) string {</span>
<span class="term-fg32">+	strAddresses := make([]string, 0, len(addresses))</span>
<span class="term-fg32">+	for _, addr := range addresses {</span>
<span class="term-fg32">+		strAddresses = append(strAddresses, addr.String())</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return strings.Join(strAddresses, &quot;, &quot;)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func urlsToClients(ctx context.Context, voterURLs []string) ([]*gethclient.Client, error) {</span>
<span class="term-fg32">+	voterClients := make([]*gethclient.Client, 0, len(voterURLs))</span>
<span class="term-fg32">+	for i := range voterURLs {</span>
<span class="term-fg32">+		rpcClient, err := rpc.DialContext(ctx, voterURLs[i])</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return nil, err</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		voterClients = append(voterClients, gethclient.New(rpcClient))</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return voterClients, nil</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-d800ed09f2bbcec52b425e78" role="button"
                       aria-expanded="false" aria-controls="id-d800ed09f2bbcec52b425e78">
                        <code>cmd/immutable/categories.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/immutable/categories.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+19</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-d800ed09f2bbcec52b425e78"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;immutable&#47;categories.go immutable-geth&#47;cmd&#47;immutable&#47;categories.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..8cb39c92098872e213c0a1df8b465ce2ac15a7f8</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;immutable&#47;categories.go</span>
<span class="term-fg36">@@ -0,0 +1,19 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package immutable</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+const ImmutableCategory = &quot;IMMUTABLE FORK&quot;</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-40c8c7dd09aa5184f57311ec" role="button"
                       aria-expanded="false" aria-controls="id-40c8c7dd09aa5184f57311ec">
                        <code>cmd/immutable/flags.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/immutable/flags.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+141</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-40c8c7dd09aa5184f57311ec"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;immutable&#47;flags.go immutable-geth&#47;cmd&#47;immutable&#47;flags.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..aa7dc48fafb6679e69d82dc5a390ead2477c9c14</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;immutable&#47;flags.go</span>
<span class="term-fg36">@@ -0,0 +1,141 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package immutable</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;github.com&#47;urfave&#47;cli&#47;v2&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+var (</span>
<span class="term-fg32">+	Env = &amp;cli.StringFlag{</span>
<span class="term-fg32">+		Name:     &quot;env&quot;,</span>
<span class="term-fg32">+		Usage:    &quot;Network context (dev, sandbox, prod)&quot;,</span>
<span class="term-fg32">+		Category: ImmutableCategory,</span>
<span class="term-fg32">+		Required: false,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	GasLimit = &amp;cli.Uint64Flag{</span>
<span class="term-fg32">+		Name:     &quot;gaslimit&quot;,</span>
<span class="term-fg32">+		Usage:    &quot;Gas limit of the network&quot;,</span>
<span class="term-fg32">+		Value:    100000000,</span>
<span class="term-fg32">+		Category: ImmutableCategory,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	BootCount = &amp;cli.IntFlag{</span>
<span class="term-fg32">+		Name:     &quot;boots&quot;,</span>
<span class="term-fg32">+		Usage:    &quot;Number of boot nodes to bootstrap&quot;,</span>
<span class="term-fg32">+		Category: ImmutableCategory,</span>
<span class="term-fg32">+		Value:    1,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	ValidatorCount = &amp;cli.IntFlag{</span>
<span class="term-fg32">+		Name:     &quot;validators&quot;,</span>
<span class="term-fg32">+		Usage:    &quot;Number of validators to bootstrap&quot;,</span>
<span class="term-fg32">+		Category: ImmutableCategory,</span>
<span class="term-fg32">+		Value:    1,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	RPCCount = &amp;cli.IntFlag{</span>
<span class="term-fg32">+		Name:     &quot;rpcs&quot;,</span>
<span class="term-fg32">+		Usage:    &quot;Number of RPC nodes to bootstrap&quot;,</span>
<span class="term-fg32">+		Category: ImmutableCategory,</span>
<span class="term-fg32">+		Value:    1,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	PartnerCount = &amp;cli.IntFlag{</span>
<span class="term-fg32">+		Name:     &quot;partners&quot;,</span>
<span class="term-fg32">+		Usage:    &quot;Number of partner RPC nodes to bootstrap&quot;,</span>
<span class="term-fg32">+		Category: ImmutableCategory,</span>
<span class="term-fg32">+		Value:    1,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	RPCScaleCount = &amp;cli.IntFlag{</span>
<span class="term-fg32">+		Name:     &quot;rpcs&quot;,</span>
<span class="term-fg32">+		Usage:    &quot;Number of RPC nodes to scale out by&quot;,</span>
<span class="term-fg32">+		Category: ImmutableCategory,</span>
<span class="term-fg32">+		Value:    0,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	PartnerScaleCount = &amp;cli.IntFlag{</span>
<span class="term-fg32">+		Name:     &quot;partners&quot;,</span>
<span class="term-fg32">+		Usage:    &quot;Number of partner nodes to scale out by&quot;,</span>
<span class="term-fg32">+		Category: ImmutableCategory,</span>
<span class="term-fg32">+		Value:    0,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	Region = &amp;cli.StringFlag{</span>
<span class="term-fg32">+		Name:     &quot;region&quot;,</span>
<span class="term-fg32">+		Usage:    &quot;AWS region to use for remote bootstrap&quot;,</span>
<span class="term-fg32">+		Category: ImmutableCategory,</span>
<span class="term-fg32">+		Value:    &quot;us-east-2&quot;,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	BlockListFilepath = &amp;cli.StringFlag{</span>
<span class="term-fg32">+		Name:     &quot;blocklistfilepath&quot;,</span>
<span class="term-fg32">+		Usage:    &quot;File path to blocklist file&quot;,</span>
<span class="term-fg32">+		Category: ImmutableCategory,</span>
<span class="term-fg32">+		Required: false,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	Role = &amp;cli.StringFlag{</span>
<span class="term-fg32">+		Name:     &quot;role&quot;,</span>
<span class="term-fg32">+		Usage:    &quot;Role of the node (boot, validator, rpc, partner, partner-public)&quot;,</span>
<span class="term-fg32">+		Category: ImmutableCategory,</span>
<span class="term-fg32">+		Required: true,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	DataDirpath = &amp;cli.StringFlag{</span>
<span class="term-fg32">+		Name:     &quot;datadir&quot;,</span>
<span class="term-fg32">+		Usage:    &quot;Data directory for node&quot;,</span>
<span class="term-fg32">+		Category: ImmutableCategory,</span>
<span class="term-fg32">+		Required: false,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	ConfigFilepath = &amp;cli.StringFlag{</span>
<span class="term-fg32">+		Name:     &quot;config&quot;,</span>
<span class="term-fg32">+		Usage:    &quot;Config filepath of the node&quot;,</span>
<span class="term-fg32">+		Category: ImmutableCategory,</span>
<span class="term-fg32">+		Required: true,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	ManifestFilepath = &amp;cli.StringFlag{</span>
<span class="term-fg32">+		Name:     &quot;manifest&quot;,</span>
<span class="term-fg32">+		Usage:    &quot;Manifest filepath of the node&quot;,</span>
<span class="term-fg32">+		Category: ImmutableCategory,</span>
<span class="term-fg32">+		Required: true,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	ChainDirpath = &amp;cli.StringFlag{</span>
<span class="term-fg32">+		Name:     &quot;chain&quot;,</span>
<span class="term-fg32">+		Usage:    &quot;Chain directory for node&quot;,</span>
<span class="term-fg32">+		Category: ImmutableCategory,</span>
<span class="term-fg32">+		Required: true,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	Voters = &amp;cli.StringSliceFlag{</span>
<span class="term-fg32">+		Name:     &quot;voters&quot;,</span>
<span class="term-fg32">+		Category: ImmutableCategory,</span>
<span class="term-fg32">+		Usage:    &quot;List of URLs for voting validators, e.g. http:&#47;&#47;localhost:8030&#47;&quot;,</span>
<span class="term-fg32">+		Required: true,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	ValidatorAddress = &amp;cli.StringFlag{</span>
<span class="term-fg32">+		Name:     &quot;validator&quot;,</span>
<span class="term-fg32">+		Usage:    &quot;a validator address to vote in or out&quot;,</span>
<span class="term-fg32">+		Category: ImmutableCategory,</span>
<span class="term-fg32">+		Required: true,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	PublicKey = &amp;cli.StringFlag{</span>
<span class="term-fg32">+		Name:     &quot;pubkey&quot;,</span>
<span class="term-fg32">+		Usage:    &quot;public key&quot;,</span>
<span class="term-fg32">+		Category: ImmutableCategory,</span>
<span class="term-fg32">+		Required: true,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func OverrideFlag(flag *cli.StringFlag, required bool) *cli.StringFlag {</span>
<span class="term-fg32">+	return &amp;cli.StringFlag{</span>
<span class="term-fg32">+		Name:     flag.Name,</span>
<span class="term-fg32">+		Usage:    flag.Usage,</span>
<span class="term-fg32">+		Category: flag.Category,</span>
<span class="term-fg32">+		Required: required,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-3f559b14e5e76cfa3ac1b7cc" role="button"
                       aria-expanded="false" aria-controls="id-3f559b14e5e76cfa3ac1b7cc">
                        <code>cmd/utils/immutable_flags.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/utils/immutable_flags.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+50</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-3f559b14e5e76cfa3ac1b7cc"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;utils&#47;immutable_flags.go immutable-geth&#47;cmd&#47;utils&#47;immutable_flags.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..b2538cf3e760a975c65dfdb042b06d776a9cf819</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;utils&#47;immutable_flags.go</span>
<span class="term-fg36">@@ -0,0 +1,50 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package utils</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;rawdb&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;ethdb&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;triedb&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;triedb&#47;hashdb&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;triedb&#47;pathdb&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; MakeTrieDatabaseNoContext is MakeTrieDatabase without being coupled to cli context to allow for further reuse.</span>
<span class="term-fg32">+func MakeTrieDatabaseNoContext(stateScheme string, disk ethdb.Database, preimage bool, readOnly bool, isVerkle bool) *triedb.Database {</span>
<span class="term-fg32">+	config := &amp;triedb.Config{</span>
<span class="term-fg32">+		Preimages: preimage,</span>
<span class="term-fg32">+		IsVerkle:  isVerkle,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	scheme, err := rawdb.ParseStateScheme(stateScheme, disk)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		Fatalf(&quot;%v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if scheme == rawdb.HashScheme {</span>
<span class="term-fg32">+		&#47;&#47; Read-only mode is not implemented in hash mode,</span>
<span class="term-fg32">+		&#47;&#47; ignore the parameter silently. TODO(rjl493456442)</span>
<span class="term-fg32">+		&#47;&#47; please config it if read mode is implemented.</span>
<span class="term-fg32">+		config.HashDB = hashdb.Defaults</span>
<span class="term-fg32">+		return triedb.NewDatabase(disk, config)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if readOnly {</span>
<span class="term-fg32">+		config.PathDB = pathdb.ReadOnly</span>
<span class="term-fg32">+	} else {</span>
<span class="term-fg32">+		config.PathDB = pathdb.Defaults</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return triedb.NewDatabase(disk, config)</span>
<span class="term-fg32">+}</span></div>
    </div>

            
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-ce141611e6d0b3bb94d2eed4"role="button" aria-expanded="false" aria-controls="id-ce141611e6d0b3bb94d2eed4">
        
            <div class="col-12 col-md-12 col-lg-6 col-xl-6 text-start"><h4>Sequencer</h4></div>
        

        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2">
            <div class="row line-stat">
                
                
            </div>
        </div>
        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2 ">
            <div class="row line-stat">
                
                    <div class="text-end"><span class="text-success">+247</span></div>
                    <div class="text-start"><span class="text-danger">-0</span></div>
                
                
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-ce141611e6d0b3bb94d2eed4">
        <div></div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-a78f7c46a6377a978ddbad52" role="button"
                       aria-expanded="false" aria-controls="id-a78f7c46a6377a978ddbad52">
                        <code>cmd/geth/config.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/cmd/geth/config.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/geth/config.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+62</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-a78f7c46a6377a978ddbad52"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;config.go immutable-geth&#47;cmd&#47;geth&#47;config.go</span>
<span class="term-fg1">index 5f52f1df54423289b352083d1fcd672296d79571..e45bb270d10ae817da42654c407c90f5139a53c6 100644</span>
<span class="term-fg1">--- go-ethereum&#47;cmd&#47;geth&#47;config.go</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;geth&#47;config.go</span>
<span class="term-fg36">@@ -18,19 +18,25 @@</span> package main
&nbsp;
 import (
 	&quot;bufio&quot;
<span class="term-fg32">+	&quot;context&quot;</span>
 	&quot;errors&quot;
 	&quot;fmt&quot;
 	&quot;os&quot;
 	&quot;reflect&quot;
 	&quot;runtime&quot;
 	&quot;strings&quot;
<span class="term-fg32">+	&quot;time&quot;</span>
 	&quot;unicode&quot;
&nbsp;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&#47;external&quot;
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&#47;immutable&quot;</span>
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&#47;keystore&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&#47;scwallet&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&#47;usbwallet&quot;
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;keys&quot;</span>
<span class="term-fg32">+	inode &quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;node&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;role&quot;</span>
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;utils&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&#47;hexutil&quot;
<span class="term-fg36">@@ -177,6 +183,9 @@</span> 	if ctx.IsSet(utils.OverrideVerkle.Name) {
 		v := ctx.Uint64(utils.OverrideVerkle.Name)
 		cfg.Eth.OverrideVerkle = &amp;v
 	}
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Add overrides</span>
<span class="term-fg32">+	immutableOverrides(ctx, &amp;cfg)</span>
<span class="term-fg32">+</span>
 	backend, eth := utils.RegisterEthService(stack, &amp;cfg.Eth)
&nbsp;
 	&#47;&#47; Create gauge with geth system and build information
<span class="term-fg36">@@ -325,6 +334,59 @@</span> 	scryptP := keystore.StandardScryptP
 	if conf.UseLightweightKDF {
 		scryptN = keystore.LightScryptN
 		scryptP = keystore.LightScryptP
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Add immutable backend with local keystore for testing custom backend</span>
<span class="term-fg32">+	pwFilepath := os.Getenv(&quot;GETH_FLAG_PASSWORD_FILEPATH&quot;)</span>
<span class="term-fg32">+	if len(pwFilepath) &gt; 0 {</span>
<span class="term-fg32">+		log.Info(&quot;Using immutable backend with local keystore&quot;)</span>
<span class="term-fg32">+		&#47;&#47; Initialize keystore</span>
<span class="term-fg32">+		store, err := immutable.NewKeystore(keydir, pwFilepath)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return fmt.Errorf(&quot;error creating immutable keystore: %v, dir (%s)&quot;, err, keydir)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		&#47;&#47; Initialize and register backend</span>
<span class="term-fg32">+		ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)</span>
<span class="term-fg32">+		defer cancel()</span>
<span class="term-fg32">+		backend, err := immutable.NewBackend(ctx, store)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return fmt.Errorf(&quot;error creating immutable backend: %v&quot;, err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		am.AddBackend(backend)</span>
<span class="term-fg32">+		return nil</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Add immutable backend with AWS Secrets Manager</span>
<span class="term-fg32">+	awsRegion := os.Getenv(&quot;GETH_FLAG_IMMUTABLE_AWS_REGION&quot;)</span>
<span class="term-fg32">+	if len(awsRegion) &gt; 0 {</span>
<span class="term-fg32">+		&#47;&#47; Read pod name for validator ordinal</span>
<span class="term-fg32">+		podOrdinal, err := ordinalFromPodNameEnvVar()</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return err</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		secretIDTemplate, err := keys.SecretIDTemplate()</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return err</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		validatorName := inode.CanonicalNodeName(role.Validator, podOrdinal)</span>
<span class="term-fg32">+		validatorSecretID, err := keys.SecretID(secretIDTemplate, validatorName)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return err</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		&#47;&#47; Initialize AWS Secrets Manager Store</span>
<span class="term-fg32">+		log.Info(&quot;Using immutable backend with AWS Secrets Manager&quot;, &quot;region&quot;, awsRegion, &quot;validator&quot;, validatorName)</span>
<span class="term-fg32">+		store, err := immutable.NewAWSSecretsManagerStore(awsRegion, validatorSecretID)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return fmt.Errorf(&quot;failed to create AWS SecretsManager Store: %v &quot;, err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		&#47;&#47; Initialize and register backend</span>
<span class="term-fg32">+		ctx, cancel := context.WithTimeout(context.Background(), 10*time.Second)</span>
<span class="term-fg32">+		defer cancel()</span>
<span class="term-fg32">+		backend, err := immutable.NewBackend(ctx, store)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return fmt.Errorf(&quot;error creating immutable backend: %v&quot;, err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		am.AddBackend(backend)</span>
<span class="term-fg32">+		return nil</span>
 	}
&nbsp;
 	&#47;&#47; Assemble the supported backends</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-8631a7be0d1f1f0871fc1db2" role="button"
                       aria-expanded="false" aria-controls="id-8631a7be0d1f1f0871fc1db2">
                        <code>cmd/immutable/remote/aws/s3.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/immutable/remote/aws/s3.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+52</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-8631a7be0d1f1f0871fc1db2"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;immutable&#47;remote&#47;aws&#47;s3.go immutable-geth&#47;cmd&#47;immutable&#47;remote&#47;aws&#47;s3.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..2e7dd6f5b02ee48cb1da9a11a33bff8b8532151f</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;immutable&#47;remote&#47;aws&#47;s3.go</span>
<span class="term-fg36">@@ -0,0 +1,52 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package aws</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;bytes&quot;</span>
<span class="term-fg32">+	&quot;fmt&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;aws&#47;aws-sdk-go&#47;aws&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;aws&#47;aws-sdk-go&#47;aws&#47;session&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;aws&#47;aws-sdk-go&#47;service&#47;s3&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;log&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+type ObjectStore struct {</span>
<span class="term-fg32">+	os *s3.S3</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func NewObjectStore(region string) (*ObjectStore, error) {</span>
<span class="term-fg32">+	os := s3.New(session.Must(session.NewSession()),</span>
<span class="term-fg32">+		aws.NewConfig().WithRegion(region))</span>
<span class="term-fg32">+	return &amp;ObjectStore{</span>
<span class="term-fg32">+		os: os,</span>
<span class="term-fg32">+	}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (os ObjectStore) PutObject(bucket, key string, content []byte) error {</span>
<span class="term-fg32">+	log.Info(&quot;Pushing S3 object&quot;, &quot;name&quot;, fmt.Sprintf(&quot;%s&#47;%s&quot;, bucket, key))</span>
<span class="term-fg32">+	if _, err := os.os.PutObject(&amp;s3.PutObjectInput{</span>
<span class="term-fg32">+		Bucket: &amp;bucket,</span>
<span class="term-fg32">+		Key:    &amp;key,</span>
<span class="term-fg32">+		Body:   bytes.NewReader(content),</span>
<span class="term-fg32">+		ACL:    aws.String(&quot;private&quot;),</span>
<span class="term-fg32">+	}); err != nil {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;failed to put object: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return nil</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-cb82d0ed9c03664e52f6f7fe" role="button"
                       aria-expanded="false" aria-controls="id-cb82d0ed9c03664e52f6f7fe">
                        <code>cmd/immutable/remote/aws/secretsmanager.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/immutable/remote/aws/secretsmanager.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+133</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-cb82d0ed9c03664e52f6f7fe"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;immutable&#47;remote&#47;aws&#47;secretsmanager.go immutable-geth&#47;cmd&#47;immutable&#47;remote&#47;aws&#47;secretsmanager.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..e08ec89e07ac195c3618004f81d9accef4987a80</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;immutable&#47;remote&#47;aws&#47;secretsmanager.go</span>
<span class="term-fg36">@@ -0,0 +1,133 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package aws</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;context&quot;</span>
<span class="term-fg32">+	&quot;errors&quot;</span>
<span class="term-fg32">+	&quot;fmt&quot;</span>
<span class="term-fg32">+	&quot;time&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;aws&#47;aws-sdk-go&#47;aws&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;aws&#47;aws-sdk-go&#47;aws&#47;awserr&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;aws&#47;aws-sdk-go&#47;aws&#47;session&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;aws&#47;aws-sdk-go&#47;service&#47;secretsmanager&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;log&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+type SecretsManager struct {</span>
<span class="term-fg32">+	sm *secretsmanager.SecretsManager</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func NewSecretsManager(region string) (*SecretsManager, error) {</span>
<span class="term-fg32">+	sess, err := session.NewSession()</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;secret: failed to create session: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	man := &amp;SecretsManager{</span>
<span class="term-fg32">+		sm: secretsmanager.New(sess, aws.NewConfig().WithRegion(region)),</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return man, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; GetSecret returns the secret value for the given secret id</span>
<span class="term-fg32">+func (sm SecretsManager) GetSecret(ctx context.Context, id string) (string, error) {</span>
<span class="term-fg32">+	out, err := sm.sm.GetSecretValueWithContext(</span>
<span class="term-fg32">+		ctx,</span>
<span class="term-fg32">+		&amp;secretsmanager.GetSecretValueInput{</span>
<span class="term-fg32">+			SecretId: aws.String(id),</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+	)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return &quot;&quot;, fmt.Errorf(&quot;failed to get secret (%s): %w&quot;, id, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return *out.SecretString, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; GeneratePassword generates a random password</span>
<span class="term-fg32">+func (sm SecretsManager) GeneratePassword() (string, error) {</span>
<span class="term-fg32">+	&#47;&#47; Create new</span>
<span class="term-fg32">+	pw, err := sm.sm.GetRandomPassword(&amp;secretsmanager.GetRandomPasswordInput{})</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return &quot;&quot;, fmt.Errorf(&quot;failed to generate password: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return *pw.RandomPassword, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; PushSecretFile pushes a secret to the secret store</span>
<span class="term-fg32">+func (sm SecretsManager) PushSecretFile(secretName string, content []byte) error {</span>
<span class="term-fg32">+	return sm.push(&amp;secretsmanager.CreateSecretInput{</span>
<span class="term-fg32">+		Name:                        aws.String(secretName),</span>
<span class="term-fg32">+		SecretBinary:                content,</span>
<span class="term-fg32">+		ForceOverwriteReplicaSecret: aws.Bool(true),</span>
<span class="term-fg32">+	})</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; PutSecretString updates a secret in the secret store</span>
<span class="term-fg32">+func (sm SecretsManager) PutSecretString(key string, content string) error {</span>
<span class="term-fg32">+	if _, err := sm.sm.PutSecretValue(&amp;secretsmanager.PutSecretValueInput{</span>
<span class="term-fg32">+		SecretId:     aws.String(key),</span>
<span class="term-fg32">+		SecretString: aws.String(content),</span>
<span class="term-fg32">+	}); err != nil {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;failed to update secret (%s): %w&quot;, key, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; PushSecretString pushes a secret to the secret store</span>
<span class="term-fg32">+func (sm SecretsManager) PushSecretString(secretName string, content string) error {</span>
<span class="term-fg32">+	return sm.push(&amp;secretsmanager.CreateSecretInput{</span>
<span class="term-fg32">+		Name:                        aws.String(secretName),</span>
<span class="term-fg32">+		SecretString:                aws.String(content),</span>
<span class="term-fg32">+		ForceOverwriteReplicaSecret: aws.Bool(true),</span>
<span class="term-fg32">+	})</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (sm SecretsManager) push(input *secretsmanager.CreateSecretInput) error {</span>
<span class="term-fg32">+	log.Info(&quot;Creating secret&quot;, &quot;secretName&quot;, *input.Name)</span>
<span class="term-fg32">+	if _, err := sm.sm.CreateSecret(input); err != nil {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;failed to create secret: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (sm SecretsManager) delete(secretName string) error { &#47;&#47;nolint: unused</span>
<span class="term-fg32">+	if _, err := sm.sm.DeleteSecret(&amp;secretsmanager.DeleteSecretInput{</span>
<span class="term-fg32">+		SecretId:                   aws.String(secretName),</span>
<span class="term-fg32">+		ForceDeleteWithoutRecovery: aws.Bool(true),</span>
<span class="term-fg32">+	}); err != nil &amp;&amp; !IsNotFound(err) {</span>
<span class="term-fg32">+		return fmt.Errorf(&quot;failed to delete secret: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	log.Info(&quot;Waiting for deletion of secret&quot;, &quot;secretName&quot;, secretName)</span>
<span class="term-fg32">+	for range time.NewTicker(time.Second * 5).C {</span>
<span class="term-fg32">+		if _, err := sm.sm.GetSecretValue(&amp;secretsmanager.GetSecretValueInput{</span>
<span class="term-fg32">+			SecretId: aws.String(secretName),</span>
<span class="term-fg32">+		}); err != nil &amp;&amp; IsNotFound(err) {</span>
<span class="term-fg32">+			return nil</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; IsNotFound returns true if the error is a not found error specific to AWS SDK.</span>
<span class="term-fg32">+func IsNotFound(err error) bool {</span>
<span class="term-fg32">+	var awsErr awserr.Error</span>
<span class="term-fg32">+	if !errors.As(err, &amp;awsErr) {</span>
<span class="term-fg32">+		return false</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return awsErr.Code() == secretsmanager.ErrCodeResourceNotFoundException</span>
<span class="term-fg32">+}</span></div>
    </div>

            
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-a1217743fa1bd0ff4cf7c651"role="button" aria-expanded="false" aria-controls="id-a1217743fa1bd0ff4cf7c651">
        
            <div class="col-12 col-md-12 col-lg-6 col-xl-6 text-start"><h3>accounts</h3></div>
        

        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2">
            <div class="row line-stat">
                
                
            </div>
        </div>
        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2 ">
            <div class="row line-stat">
                
                    <div class="text-end"><span class="text-success">+395</span></div>
                    <div class="text-start"><span class="text-danger">-0</span></div>
                
                
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-a1217743fa1bd0ff4cf7c651">
        <div></div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-0b8c5a005858fb64b4593d72" role="button"
                       aria-expanded="false" aria-controls="id-0b8c5a005858fb64b4593d72">
                        <code>accounts/immutable/backend.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/accounts/immutable/backend.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+55</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-0b8c5a005858fb64b4593d72"><span class="term-fg1">diff --git go-ethereum&#47;accounts&#47;immutable&#47;backend.go immutable-geth&#47;accounts&#47;immutable&#47;backend.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..75f7ce0d7862ad398f27e8fdc8e6e543c81af7a5</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;accounts&#47;immutable&#47;backend.go</span>
<span class="term-fg36">@@ -0,0 +1,55 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package immutable</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;context&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;event&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Backend implements accounts.Backend.</span>
<span class="term-fg32">+&#47;&#47; It is a simple backend that only supports one account.</span>
<span class="term-fg32">+&#47;&#47; The wallet is created on startup and never upated (Subscribe is noop).</span>
<span class="term-fg32">+type Backend struct {</span>
<span class="term-fg32">+	wallet accounts.Wallet</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewBackend constructs a backend instance using the secret store provided.</span>
<span class="term-fg32">+func NewBackend(ctx context.Context, store SecretStore) (*Backend, error) {</span>
<span class="term-fg32">+	key, err := store.GetPrivateKey(ctx)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;Backend{</span>
<span class="term-fg32">+		wallet: newWallet(key),</span>
<span class="term-fg32">+	}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Wallets returns the single wallet supported by this backend.</span>
<span class="term-fg32">+func (b *Backend) Wallets() []accounts.Wallet {</span>
<span class="term-fg32">+	return []accounts.Wallet{b.wallet}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Subscribe is noop for this backend because wallet never changes.</span>
<span class="term-fg32">+func (b *Backend) Subscribe(sink chan&lt;- accounts.WalletEvent) event.Subscription {</span>
<span class="term-fg32">+	return event.NewSubscription(func(quit &lt;-chan struct{}) error {</span>
<span class="term-fg32">+		&lt;-quit</span>
<span class="term-fg32">+		return nil</span>
<span class="term-fg32">+	})</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-b4b4eeb3b0cf010145ea7e86" role="button"
                       aria-expanded="false" aria-controls="id-b4b4eeb3b0cf010145ea7e86">
                        <code>accounts/immutable/errors.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/accounts/immutable/errors.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+24</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-b4b4eeb3b0cf010145ea7e86"><span class="term-fg1">diff --git go-ethereum&#47;accounts&#47;immutable&#47;errors.go immutable-geth&#47;accounts&#47;immutable&#47;errors.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..7a524ab4c85f0f67ea401007983d222e82a751dd</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;accounts&#47;immutable&#47;errors.go</span>
<span class="term-fg36">@@ -0,0 +1,24 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package immutable</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import &quot;errors&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+var (</span>
<span class="term-fg32">+	&#47;&#47; ErrInvalidAccount is returned when a wallet is asked to sign some data for an account it does not contain.</span>
<span class="term-fg32">+	ErrInvalidAccount = errors.New(&quot;account specified is not provided by this wallet&quot;)</span>
<span class="term-fg32">+)</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-f391e4e37b937339e04cd94b" role="button"
                       aria-expanded="false" aria-controls="id-f391e4e37b937339e04cd94b">
                        <code>accounts/immutable/keystore.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/accounts/immutable/keystore.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+91</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-f391e4e37b937339e04cd94b"><span class="term-fg1">diff --git go-ethereum&#47;accounts&#47;immutable&#47;keystore.go immutable-geth&#47;accounts&#47;immutable&#47;keystore.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..906d7577786cf023972237c8eab7cd9c72dafd9f</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;accounts&#47;immutable&#47;keystore.go</span>
<span class="term-fg36">@@ -0,0 +1,91 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package immutable</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;context&quot;</span>
<span class="term-fg32">+	&quot;crypto&#47;ecdsa&quot;</span>
<span class="term-fg32">+	&quot;fmt&quot;</span>
<span class="term-fg32">+	&quot;os&quot;</span>
<span class="term-fg32">+	&quot;path&#47;filepath&quot;</span>
<span class="term-fg32">+	&quot;strings&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&#47;keystore&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; KeyStore implements the SecretStore interface based on a keystore file on disk.</span>
<span class="term-fg32">+&#47;&#47; It is intended to be used for testing only. It replicates the existing geth keystore</span>
<span class="term-fg32">+&#47;&#47; functionality in a much simpler manner because we only ever deal with a single, static keystore file.</span>
<span class="term-fg32">+&#47;&#47; We use this type to verify our custom backend works as expected.</span>
<span class="term-fg32">+type KeyStore struct {</span>
<span class="term-fg32">+	key  *ecdsa.PrivateKey</span>
<span class="term-fg32">+	json string</span>
<span class="term-fg32">+	pw   string</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewKeystore instantiates a new KeyStore by reading the keystore file from disk and</span>
<span class="term-fg32">+&#47;&#47; decrypting it with the provided password. There must only be one keystore file in the</span>
<span class="term-fg32">+&#47;&#47; provided directory.</span>
<span class="term-fg32">+func NewKeystore(keystoreDirpath, passwordFilepath string) (*KeyStore, error) {</span>
<span class="term-fg32">+	&#47;&#47; Read keystore file</span>
<span class="term-fg32">+	files, err := os.ReadDir(keystoreDirpath)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;failed to read keystore dir: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if len(files) != 1 || files[0].IsDir() {</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;keystore dir must contain exactly one file&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Read json file</span>
<span class="term-fg32">+	keystoreJSON, err := os.ReadFile(filepath.Join(keystoreDirpath, files[0].Name()))</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;failed to read keystore file: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Read pw file</span>
<span class="term-fg32">+	content, err := os.ReadFile(passwordFilepath)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;failed to read password file: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	pw := strings.TrimRight(string(content), &quot;\r\n&quot;)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Decrypt keystore</span>
<span class="term-fg32">+	key, err := keystore.DecryptKey(keystoreJSON, pw)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;failed to decrypt keystore: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return &amp;KeyStore{</span>
<span class="term-fg32">+		key:  key.PrivateKey,</span>
<span class="term-fg32">+		json: string(keystoreJSON),</span>
<span class="term-fg32">+		pw:   pw,</span>
<span class="term-fg32">+	}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; GetPrivateKey returns the wallet&#39;s private key after retrieving its hex-encoded format from</span>
<span class="term-fg32">+&#47;&#47; keystore file on disk.</span>
<span class="term-fg32">+func (ks *KeyStore) GetPrivateKey(ctx context.Context) (*ecdsa.PrivateKey, error) {</span>
<span class="term-fg32">+	return ks.key, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; JSON returns the keystore file&#39;s content as a string.</span>
<span class="term-fg32">+func (ks *KeyStore) JSON() string {</span>
<span class="term-fg32">+	return ks.json</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Password returns the password used to decrypt the keystore file.</span>
<span class="term-fg32">+func (ks *KeyStore) Password() string {</span>
<span class="term-fg32">+	return ks.pw</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-5c9c40354373bb8bd383661e" role="button"
                       aria-expanded="false" aria-controls="id-5c9c40354373bb8bd383661e">
                        <code>accounts/immutable/secretsmanager.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/accounts/immutable/secretsmanager.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+67</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-5c9c40354373bb8bd383661e"><span class="term-fg1">diff --git go-ethereum&#47;accounts&#47;immutable&#47;secretsmanager.go immutable-geth&#47;accounts&#47;immutable&#47;secretsmanager.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..c1053e4d5e112674223f5a1830fd20abeeb3b8d5</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;accounts&#47;immutable&#47;secretsmanager.go</span>
<span class="term-fg36">@@ -0,0 +1,67 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package immutable</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;context&quot;</span>
<span class="term-fg32">+	&quot;crypto&#47;ecdsa&quot;</span>
<span class="term-fg32">+	&quot;encoding&#47;hex&quot;</span>
<span class="term-fg32">+	&quot;fmt&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;immutable&#47;remote&#47;aws&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;crypto&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; AWSSecretsManagerStore implements the SecretStore interface.</span>
<span class="term-fg32">+&#47;&#47; It uses an AWS Secrets Manager client to retrieve the private key intended</span>
<span class="term-fg32">+&#47;&#47; to be used by a wallet.</span>
<span class="term-fg32">+type AWSSecretsManagerStore struct {</span>
<span class="term-fg32">+	sm                 *aws.SecretsManager</span>
<span class="term-fg32">+	validatorSecretKey string</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewAWSSecretsManagerStore instantiates a new AWSSecretsManagerStore.</span>
<span class="term-fg32">+func NewAWSSecretsManagerStore(region, validatorSecretKey string) (*AWSSecretsManagerStore, error) {</span>
<span class="term-fg32">+	sm, err := aws.NewSecretsManager(region)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;AWSSecretsManagerStore{</span>
<span class="term-fg32">+		sm:                 sm,</span>
<span class="term-fg32">+		validatorSecretKey: validatorSecretKey,</span>
<span class="term-fg32">+	}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; GetPrivateKey returns the wallet&#39;s private key after retrieving its hex-encoded format from</span>
<span class="term-fg32">+&#47;&#47; AWS Secrets Manager.</span>
<span class="term-fg32">+func (s *AWSSecretsManagerStore) GetPrivateKey(ctx context.Context) (*ecdsa.PrivateKey, error) {</span>
<span class="term-fg32">+	&#47;&#47; Get key from AWS Secrets Manager</span>
<span class="term-fg32">+	privKeyHex, err := s.sm.GetSecret(ctx, s.validatorSecretKey)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;failed to get priv key from store: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Decode hex key</span>
<span class="term-fg32">+	privKeyRaw, err := hex.DecodeString(privKeyHex)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;failed to decode priv key hex: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	key, err := crypto.ToECDSA(privKeyRaw)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;failed to convert raw priv key to ECDSA: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return key, nil</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-e74a249d35768dc99dcf0d78" role="button"
                       aria-expanded="false" aria-controls="id-e74a249d35768dc99dcf0d78">
                        <code>accounts/immutable/store.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/accounts/immutable/store.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+28</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-e74a249d35768dc99dcf0d78"><span class="term-fg1">diff --git go-ethereum&#47;accounts&#47;immutable&#47;store.go immutable-geth&#47;accounts&#47;immutable&#47;store.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..279c53eff501eb0862e649f1cf1d7ebcbb5a3174</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;accounts&#47;immutable&#47;store.go</span>
<span class="term-fg36">@@ -0,0 +1,28 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package immutable</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;context&quot;</span>
<span class="term-fg32">+	&quot;crypto&#47;ecdsa&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SecretStore is an interface that allows the backend to retrieve data it needs</span>
<span class="term-fg32">+&#47;&#47; to instantiate wallets.</span>
<span class="term-fg32">+type SecretStore interface {</span>
<span class="term-fg32">+	GetPrivateKey(ctx context.Context) (*ecdsa.PrivateKey, error)</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-306e562957963811d73cb182" role="button"
                       aria-expanded="false" aria-controls="id-306e562957963811d73cb182">
                        <code>accounts/immutable/wallet.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/accounts/immutable/wallet.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+130</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-306e562957963811d73cb182"><span class="term-fg1">diff --git go-ethereum&#47;accounts&#47;immutable&#47;wallet.go immutable-geth&#47;accounts&#47;immutable&#47;wallet.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..135aa5a5e7689460609daee1a7af61d5b0d61d9e</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;accounts&#47;immutable&#47;wallet.go</span>
<span class="term-fg36">@@ -0,0 +1,130 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package immutable</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;crypto&#47;ecdsa&quot;</span>
<span class="term-fg32">+	&quot;errors&quot;</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;crypto&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; wallet implements accounts.Wallet</span>
<span class="term-fg32">+type wallet struct {</span>
<span class="term-fg32">+	key     *ecdsa.PrivateKey</span>
<span class="term-fg32">+	account accounts.Account</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func newWallet(key *ecdsa.PrivateKey) *wallet {</span>
<span class="term-fg32">+	return &amp;wallet{</span>
<span class="term-fg32">+		key: key,</span>
<span class="term-fg32">+		account: accounts.Account{</span>
<span class="term-fg32">+			Address: crypto.PubkeyToAddress(key.PublicKey),</span>
<span class="term-fg32">+			URL:     accounts.URL{},</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Accounts returns the single account supported by this wallet.</span>
<span class="term-fg32">+func (w *wallet) Accounts() []accounts.Account {</span>
<span class="term-fg32">+	return []accounts.Account{</span>
<span class="term-fg32">+		w.account,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Contains returns whether a particular account is or is not wrapped by this wallet instance.</span>
<span class="term-fg32">+func (w *wallet) Contains(account accounts.Account) bool {</span>
<span class="term-fg32">+	return w.account.Address == account.Address</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SignData signs keccak256(data). The mimetype parameter describes the type of data being signed.</span>
<span class="term-fg32">+func (w *wallet) SignData(account accounts.Account, mimeType string, data []byte) ([]byte, error) {</span>
<span class="term-fg32">+	if !w.Contains(account) {</span>
<span class="term-fg32">+		return nil, ErrInvalidAccount</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Sign the hash using plain ECDSA operations</span>
<span class="term-fg32">+	return crypto.Sign(crypto.Keccak256(data), w.key)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SignText signs the hash of the given text with the given account.</span>
<span class="term-fg32">+func (w *wallet) SignText(account accounts.Account, text []byte) ([]byte, error) {</span>
<span class="term-fg32">+	if !w.Contains(account) {</span>
<span class="term-fg32">+		return nil, ErrInvalidAccount</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Sign the hash using plain ECDSA operations</span>
<span class="term-fg32">+	return crypto.Sign(accounts.TextHash(text), w.key)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SignTx sends the transaction to the Immutable signer.</span>
<span class="term-fg32">+func (w *wallet) SignTx(account accounts.Account, tx *types.Transaction, chainID *big.Int) (*types.Transaction, error) {</span>
<span class="term-fg32">+	if !w.Contains(account) {</span>
<span class="term-fg32">+		return nil, ErrInvalidAccount</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	signer := types.LatestSignerForChainID(chainID)</span>
<span class="term-fg32">+	return types.SignTx(tx, signer, w.key)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SignTextWithPassphrase is not implemented for Immutable signer.</span>
<span class="term-fg32">+func (w *wallet) SignTextWithPassphrase(account accounts.Account, passphrase string, text []byte) ([]byte, error) {</span>
<span class="term-fg32">+	return []byte{}, errors.New(&quot;password-operations not supported on immutable signers&quot;)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SignTxWithPassphrase is not implemented for Immutable signer.</span>
<span class="term-fg32">+func (w *wallet) SignTxWithPassphrase(account accounts.Account, passphrase string, tx *types.Transaction, chainID *big.Int) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return nil, errors.New(&quot;password-operations not supported on immutable signers&quot;)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SignDataWithPassphrase is not implemented for Immutable signer.</span>
<span class="term-fg32">+func (w *wallet) SignDataWithPassphrase(account accounts.Account, passphrase, mimeType string, data []byte) ([]byte, error) {</span>
<span class="term-fg32">+	return nil, errors.New(&quot;password-operations not supported on immutable signers&quot;)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Open is not implemented for Immutable signer.</span>
<span class="term-fg32">+func (w *wallet) Open(passphrase string) error {</span>
<span class="term-fg32">+	return errors.New(&quot;operation not supported on immutable signers&quot;)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Closed is not implemented for Immutable signer.</span>
<span class="term-fg32">+func (w *wallet) Close() error {</span>
<span class="term-fg32">+	return errors.New(&quot;operation not supported on immutable signers&quot;)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Derive is not implemented for Immutable signer.</span>
<span class="term-fg32">+func (w *wallet) Derive(path accounts.DerivationPath, pin bool) (accounts.Account, error) {</span>
<span class="term-fg32">+	return accounts.Account{}, errors.New(&quot;operation not supported on immutable signers&quot;)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SelfDerive is noop for Immutable signer.</span>
<span class="term-fg32">+func (w *wallet) SelfDerive(bases []accounts.DerivationPath, chain ethereum.ChainStateReader) {}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Status is required by the accounts.Wallet interface but is not required by the Immutable signer</span>
<span class="term-fg32">+&#47;&#47; because it is not used by the backend.</span>
<span class="term-fg32">+func (w *wallet) Status() (string, error) {</span>
<span class="term-fg32">+	return &quot;unlocked&quot;, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; URL is required by the accounts.Wallet interface but is not required by the Immutable signer.</span>
<span class="term-fg32">+func (w *wallet) URL() accounts.URL {</span>
<span class="term-fg32">+	return accounts.URL{</span>
<span class="term-fg32">+		Scheme: &quot;immutable&quot;,</span>
<span class="term-fg32">+		Path:   &quot;&quot;,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span></div>
    </div>

            
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-5fda3ac3a51aa7a3bd21dd6d"role="button" aria-expanded="false" aria-controls="id-5fda3ac3a51aa7a3bd21dd6d">
        
            <div class="col-12 col-md-12 col-lg-6 col-xl-6 text-start"><h3>p2p</h3></div>
        

        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2">
            <div class="row line-stat">
                
                
            </div>
        </div>
        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2 ">
            <div class="row line-stat">
                
                    <div class="text-end"><span class="text-success">+27</span></div>
                    <div class="text-start"><span class="text-danger">-14</span></div>
                
                
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-5fda3ac3a51aa7a3bd21dd6d">
        <div></div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-da149439471e643034f844c3" role="button"
                       aria-expanded="false" aria-controls="id-da149439471e643034f844c3">
                        <code>p2p/discover/common.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/p2p/discover/common.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/p2p/discover/common.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+2</span></div>
                            <div class="text-start"><span class="text-danger">-1</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-da149439471e643034f844c3"><span class="term-fg1">diff --git go-ethereum&#47;p2p&#47;discover&#47;common.go immutable-geth&#47;p2p&#47;discover&#47;common.go</span>
<span class="term-fg1">index c9f0477defebc44303a279155b0005284ae66def..0f7a3a4c57f92ddc1936cd45579a3eeafcf54faf 100644</span>
<span class="term-fg1">--- go-ethereum&#47;p2p&#47;discover&#47;common.go</span>
<span class="term-fg1">+++ immutable-geth&#47;p2p&#47;discover&#47;common.go</span>
<span class="term-fg36">@@ -65,7 +65,8 @@</span> 	if cfg.PingInterval == 0 {
 		cfg.PingInterval = 10 * time.Second
 	}
 	if cfg.RefreshInterval == 0 {
<span class="term-fg31">-		cfg.RefreshInterval = 30 * time.Minute</span>
<span class="term-fg32">+		&#47;&#47; CHANGE(immutable): Reduce refresh interval.</span>
<span class="term-fg32">+		cfg.RefreshInterval = 20 * time.Second</span>
 	}
&nbsp;
 	&#47;&#47; Debug&#47;test settings:</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-4ca623c869aa2de4ac41bf8e" role="button"
                       aria-expanded="false" aria-controls="id-4ca623c869aa2de4ac41bf8e">
                        <code>p2p/discover/table.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/p2p/discover/table.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/p2p/discover/table.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+4</span></div>
                            <div class="text-start"><span class="text-danger">-10</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-4ca623c869aa2de4ac41bf8e"><span class="term-fg1">diff --git go-ethereum&#47;p2p&#47;discover&#47;table.go immutable-geth&#47;p2p&#47;discover&#47;table.go</span>
<span class="term-fg1">index 2b7a28708b8d1423d2942472ba7fd881a0a6dce0..c14da4af5175ba094dc143b47a9d490088760594 100644</span>
<span class="term-fg1">--- go-ethereum&#47;p2p&#47;discover&#47;table.go</span>
<span class="term-fg1">+++ immutable-geth&#47;p2p&#47;discover&#47;table.go</span>
<span class="term-fg36">@@ -58,7 +58,8 @@</span>
 	copyNodesInterval = 30 * time.Second
 	seedMinTableTime  = 5 * time.Minute
 	seedCount         = 30
<span class="term-fg31">-	seedMaxAge        = 5 * 24 * time.Hour</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Reduce seed max age from 120hrs</span>
<span class="term-fg32">+	seedMaxAge = 1 * time.Second</span>
 )
&nbsp;
 &#47;&#47; Table is the &#39;node table&#39;, a Kademlia-like index of neighbor nodes. The table keeps
<span class="term-fg36">@@ -315,15 +316,8 @@</span>
 	&#47;&#47; Run self lookup to discover new neighbor nodes.
 	tab.net.lookupSelf()
&nbsp;
<span class="term-fg31">-	&#47;&#47; The Kademlia paper specifies that the bucket refresh should</span>
<span class="term-fg31">-	&#47;&#47; perform a lookup in the least recently used bucket. We cannot</span>
<span class="term-fg31">-	&#47;&#47; adhere to this because the findnode target is a 512bit value</span>
<span class="term-fg31">-	&#47;&#47; (not hash-sized) and it is not easily possible to generate a</span>
<span class="term-fg31">-	&#47;&#47; sha3 preimage that falls into a chosen bucket.</span>
<span class="term-fg31">-	&#47;&#47; We perform a few lookups with a random target instead.</span>
<span class="term-fg31">-	for i := 0; i &lt; 3; i++ {</span>
<span class="term-fg31">-		tab.net.lookupRandom()</span>
<span class="term-fg31">-	}</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Remove the random lookup.</span>
<span class="term-fg32">+	&#47;&#47; Self lookup is sufficient to discover requisite nodes.</span>
 }
&nbsp;
 func (tab *Table) loadSeedNodes() {</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-4051ed368f769c65ce4e976a" role="button"
                       aria-expanded="false" aria-controls="id-4051ed368f769c65ce4e976a">
                        <code>p2p/discover/v4_udp.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/p2p/discover/v4_udp.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/p2p/discover/v4_udp.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+7</span></div>
                            <div class="text-start"><span class="text-danger">-1</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-4051ed368f769c65ce4e976a"><span class="term-fg1">diff --git go-ethereum&#47;p2p&#47;discover&#47;v4_udp.go immutable-geth&#47;p2p&#47;discover&#47;v4_udp.go</span>
<span class="term-fg1">index 988f16b01df2c11af84d52f3c77784c37c65131a..c142b906526484a1321eb83255a1031b1d728f71 100644</span>
<span class="term-fg1">--- go-ethereum&#47;p2p&#47;discover&#47;v4_udp.go</span>
<span class="term-fg1">+++ immutable-geth&#47;p2p&#47;discover&#47;v4_udp.go</span>
<span class="term-fg36">@@ -370,7 +370,13 @@</span> 	if respN.Seq() &lt; n.Seq() {
 		return n, nil &#47;&#47; response record is older
 	}
 	if err := netutil.CheckRelayIP(addr.IP, respN.IP()); err != nil {
<span class="term-fg31">-		return nil, fmt.Errorf(&quot;invalid IP in response record: %v&quot;, err)</span>
<span class="term-fg32">+		&#47;&#47; CHANGE(immutable): Log both IPs</span>
<span class="term-fg32">+		return nil, fmt.Errorf(</span>
<span class="term-fg32">+			&quot;invalid IP in response record: %v. sender (%s), addr (%s)&quot;,</span>
<span class="term-fg32">+			err,</span>
<span class="term-fg32">+			addr.IP.String(),</span>
<span class="term-fg32">+			respN.IP().String(),</span>
<span class="term-fg32">+		)</span>
 	}
 	return respN, nil
 }</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-60c55fde41691133a2007bdf" role="button"
                       aria-expanded="false" aria-controls="id-60c55fde41691133a2007bdf">
                        <code>p2p/enode/localnode.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/p2p/enode/localnode.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/p2p/enode/localnode.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+6</span></div>
                            <div class="text-start"><span class="text-danger">-1</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-60c55fde41691133a2007bdf"><span class="term-fg1">diff --git go-ethereum&#47;p2p&#47;enode&#47;localnode.go immutable-geth&#47;p2p&#47;enode&#47;localnode.go</span>
<span class="term-fg1">index a18204e752ce8d86bd9b4bb8d135218d6b47e19c..2714d2b93db00184aa779e49d296f4f7566927c1 100644</span>
<span class="term-fg1">--- go-ethereum&#47;p2p&#47;enode&#47;localnode.go</span>
<span class="term-fg1">+++ immutable-geth&#47;p2p&#47;enode&#47;localnode.go</span>
<span class="term-fg36">@@ -207,7 +207,12 @@</span> &#47;&#47; if no endpoint prediction can be made.
 func (ln *LocalNode) SetFallbackUDP(port int) {
 	ln.mu.Lock()
 	defer ln.mu.Unlock()
<span class="term-fg31">-</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): handle overflow case.</span>
<span class="term-fg32">+	&#47;&#47; Where 65535 is the maximum uint16 value (https:&#47;&#47;go.dev&#47;src&#47;builtin&#47;builtin.go).</span>
<span class="term-fg32">+	if port &gt; 65535 {</span>
<span class="term-fg32">+		log.Warn(&quot;port overflow, setting to 65535&quot;, &quot;port&quot;, port)</span>
<span class="term-fg32">+		port = 65535</span>
<span class="term-fg32">+	}</span>
 	ln.endpoint4.fallbackUDP = uint16(port)
 	ln.endpoint6.fallbackUDP = uint16(port)
 	ln.updateEndpoints()</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-fa54c2b97c55cf5b347fc80c" role="button"
                       aria-expanded="false" aria-controls="id-fa54c2b97c55cf5b347fc80c">
                        <code>p2p/server.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/p2p/server.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/p2p/server.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+8</span></div>
                            <div class="text-start"><span class="text-danger">-1</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-fa54c2b97c55cf5b347fc80c"><span class="term-fg1">diff --git go-ethereum&#47;p2p&#47;server.go immutable-geth&#47;p2p&#47;server.go</span>
<span class="term-fg1">index 975a3bb916624a229a8425465ec37c6efb855ea2..052d70d5fb544fdc7046b0acc0671717fc5a71a1 100644</span>
<span class="term-fg1">--- go-ethereum&#47;p2p&#47;server.go</span>
<span class="term-fg1">+++ immutable-geth&#47;p2p&#47;server.go</span>
<span class="term-fg36">@@ -766,7 +766,8 @@</span> 			if err == nil {
 				&#47;&#47; The handshakes are done and it passed all checks.
 				p := srv.launchPeer(c)
 				peers[c.node.ID()] = p
<span class="term-fg31">-				srv.log.Debug(&quot;Adding p2p peer&quot;, &quot;peercount&quot;, len(peers), &quot;id&quot;, p.ID(), &quot;conn&quot;, c.flags, &quot;addr&quot;, p.RemoteAddr(), &quot;name&quot;, p.Name())</span>
<span class="term-fg32">+				&#47;&#47; CHANGE(immutable): log fullname</span>
<span class="term-fg32">+				srv.log.Debug(&quot;Adding p2p peer&quot;, &quot;peercount&quot;, len(peers), &quot;id&quot;, p.ID(), &quot;conn&quot;, c.flags, &quot;addr&quot;, p.RemoteAddr(), &quot;name&quot;, p.Fullname())</span>
 				srv.dialsched.peerAdded(c)
 				if p.Inbound() {
 					inboundCount++
<span class="term-fg36">@@ -916,6 +917,12 @@</span> 	&#47;&#47; Reject connections that do not match NetRestrict.
 	if srv.NetRestrict != nil &amp;&amp; !srv.NetRestrict.Contains(remoteIP) {
 		return errors.New(&quot;not in netrestrict list&quot;)
 	}
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Do not rate limit connections that match on NetRestrict</span>
<span class="term-fg32">+	if srv.NetRestrict != nil &amp;&amp; srv.NetRestrict.Contains(remoteIP) {</span>
<span class="term-fg32">+		return nil</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 	&#47;&#47; Reject Internet peers that try too often.
 	now := srv.clock.Now()
 	srv.inboundHistory.expire(now, nil)</div>
    </div>

            
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-07ffc77808fd46efcabe9801"role="button" aria-expanded="false" aria-controls="id-07ffc77808fd46efcabe9801">
        
            <div class="col-12 col-md-12 col-lg-6 col-xl-6 text-start"><h3>eth</h3></div>
        

        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2">
            <div class="row line-stat">
                
                
            </div>
        </div>
        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2 ">
            <div class="row line-stat">
                
                    <div class="text-end"><span class="text-success">+369</span></div>
                    <div class="text-start"><span class="text-danger">-54</span></div>
                
                
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-07ffc77808fd46efcabe9801">
        <div></div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-42ebe0b5bcbc0713bfa12985" role="button"
                       aria-expanded="false" aria-controls="id-42ebe0b5bcbc0713bfa12985">
                        <code>eth/api_backend.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/eth/api_backend.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/eth/api_backend.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+25</span></div>
                            <div class="text-start"><span class="text-danger">-2</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-42ebe0b5bcbc0713bfa12985"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;api_backend.go immutable-geth&#47;eth&#47;api_backend.go</span>
<span class="term-fg1">index 65adccd8518cd6faee0c0a0898d44602ba2ce8ec..99e839db85ddca297724b582b16829b4c9db9097 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;api_backend.go</span>
<span class="term-fg1">+++ immutable-geth&#47;eth&#47;api_backend.go</span>
<span class="term-fg36">@@ -19,12 +19,14 @@</span>
 import (
 	&quot;context&quot;
 	&quot;errors&quot;
<span class="term-fg32">+	&quot;fmt&quot;</span>
 	&quot;math&#47;big&quot;
 	&quot;time&quot;
&nbsp;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&#47;hexutil&quot;</span>
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;consensus&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;bloombits&quot;
<span class="term-fg36">@@ -37,9 +39,15 @@</span> 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;eth&#47;gasprice&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;eth&#47;tracers&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;ethdb&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;event&quot;
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;metrics&quot;</span>
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;miner&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;params&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;rpc&quot;
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+var (</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Add metric for tipcap</span>
<span class="term-fg32">+	suggestTipCapGauge = metrics.NewRegisteredGauge(&quot;api&#47;tipcap&quot;, nil)</span>
 )
&nbsp;
 &#47;&#47; EthAPIBackend implements ethapi.Backend and tracers.Backend for full nodes
<span class="term-fg36">@@ -258,7 +266,7 @@</span> 	var context vm.BlockContext
 	if blockCtx != nil {
 		context = *blockCtx
 	} else {
<span class="term-fg31">-		context = core.NewEVMBlockContext(header, b.eth.BlockChain(), nil)</span>
<span class="term-fg32">+		context = core.NewEVMBlockContext(header, b.eth.BlockChain(), nil, b.ChainConfig())</span>
 	}
 	return vm.NewEVM(context, txContext, state, b.ChainConfig(), *vmConfig)
 }
<span class="term-fg36">@@ -288,6 +296,15 @@</span> 	return b.eth.BlockChain().SubscribeLogsEvent(ch)
 }
&nbsp;
 func (b *EthAPIBackend) SendTx(ctx context.Context, signedTx *types.Transaction) error {
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Handle RPC forwarding.</span>
<span class="term-fg32">+	if b.eth.rpcProxyClient != nil {</span>
<span class="term-fg32">+		data, err := signedTx.MarshalBinary()</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return fmt.Errorf(&quot;failed to marshall binary for rpc proxy forwarding: %s&quot;, err.Error())</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		return b.eth.rpcProxyClient.CallContext(ctx, nil, &quot;eth_sendRawTransaction&quot;, hexutil.Encode(data))</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 	return b.eth.txPool.Add([]*types.Transaction{signedTx}, true, false)[0]
 }
&nbsp;
<span class="term-fg36">@@ -363,7 +380,13 @@</span> 	return prog
 }
&nbsp;
 func (b *EthAPIBackend) SuggestGasTipCap(ctx context.Context) (*big.Int, error) {
<span class="term-fg31">-	return b.gpo.SuggestTipCap(ctx)</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Record metric for tipcap</span>
<span class="term-fg32">+	tipcap, err := b.gpo.SuggestTipCap(ctx)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	suggestTipCapGauge.Update(tipcap.Int64())</span>
<span class="term-fg32">+	return tipcap, nil</span>
 }
&nbsp;
 func (b *EthAPIBackend) FeeHistory(ctx context.Context, blockCount uint64, lastBlock rpc.BlockNumber, rewardPercentiles []float64) (firstBlock *big.Int, reward [][]*big.Int, baseFee []*big.Int, gasUsedRatio []float64, err error) {</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-1ecbc8331457159ef640298d" role="button"
                       aria-expanded="false" aria-controls="id-1ecbc8331457159ef640298d">
                        <code>eth/backend.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/eth/backend.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/eth/backend.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+33</span></div>
                            <div class="text-start"><span class="text-danger">-2</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-1ecbc8331457159ef640298d"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;backend.go immutable-geth&#47;eth&#47;backend.go</span>
<span class="term-fg1">index 0a0813aafac6a73f95cca62b8ca9f4587dae9377..54386061c60092d41786a6736cbb79a9de251d2f 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;backend.go</span>
<span class="term-fg1">+++ immutable-geth&#47;eth&#47;backend.go</span>
<span class="term-fg36">@@ -18,11 +18,13 @@</span> &#47;&#47; Package eth implements the Ethereum protocol.
 package eth
&nbsp;
 import (
<span class="term-fg32">+	&quot;context&quot;</span>
 	&quot;errors&quot;
 	&quot;fmt&quot;
 	&quot;math&#47;big&quot;
 	&quot;runtime&quot;
 	&quot;sync&quot;
<span class="term-fg32">+	&quot;time&quot;</span>
&nbsp;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;
<span class="term-fg36">@@ -101,6 +103,9 @@</span>
 	lock sync.RWMutex &#47;&#47; Protects the variadic fields (e.g. gas price and etherbase)
&nbsp;
 	shutdownTracker *shutdowncheck.ShutdownTracker &#47;&#47; Tracks if and when the node has shutdown ungracefully
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Add RPC client for forwarding to Immutable RPC.</span>
<span class="term-fg32">+	rpcProxyClient *rpc.Client</span>
 }
&nbsp;
 &#47;&#47; New creates a new Ethereum object (including the
<span class="term-fg36">@@ -213,6 +218,13 @@</span> 	}
 	if config.OverrideVerkle != nil {
 		overrides.OverrideVerkle = config.OverrideVerkle
 	}
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Add Prevrandao and Shanghai overrides</span>
<span class="term-fg32">+	if config.OverridePrevrandao != nil {</span>
<span class="term-fg32">+		overrides.OverridePrevrandao = config.OverridePrevrandao</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if config.OverrideShanghai != nil {</span>
<span class="term-fg32">+		overrides.OverrideShanghai = config.OverrideShanghai</span>
<span class="term-fg32">+	}</span>
 	eth.blockchain, err = core.NewBlockChain(chainDb, cacheConfig, config.Genesis, &amp;overrides, eth.engine, vmConfig, eth.shouldPreserve, &amp;config.TransactionHistory)
 	if err != nil {
 		return nil, err
<span class="term-fg36">@@ -245,6 +257,10 @@</span> 		Sync:           config.SyncMode,
 		BloomCache:     uint64(cacheLimit),
 		EventMux:       eth.eventMux,
 		RequiredBlocks: config.RequiredBlocks,
<span class="term-fg32">+		&#47;&#47; CHANGE(immutable): gossip configuration</span>
<span class="term-fg32">+		GossipDefault: config.GossipDefault,</span>
<span class="term-fg32">+		&#47;&#47; CHANGE(immutable): disable txpool gossip configuration</span>
<span class="term-fg32">+		DisableTxPoolGossip: config.DisableTxPoolGossip,</span>
 	}); err != nil {
 		return nil, err
 	}
<span class="term-fg36">@@ -273,6 +289,17 @@</span> 	if err != nil {
 		return nil, err
 	}
&nbsp;
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Handle immutable RPC client.</span>
<span class="term-fg32">+	if config.RPCProxyURL != &quot;&quot; {</span>
<span class="term-fg32">+		ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)</span>
<span class="term-fg32">+		defer cancel()</span>
<span class="term-fg32">+		client, err := rpc.DialContext(ctx, config.RPCProxyURL)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return nil, err</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		eth.rpcProxyClient = client</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 	&#47;&#47; Start the RPC service
 	eth.netRPCService = ethapi.NewNetAPI(eth.p2pServer, networkID)
&nbsp;
<span class="term-fg36">@@ -332,8 +359,7 @@</span> 			Service:   NewDebugAPI(s),
 		}, {
 			Namespace: &quot;net&quot;,
 			Service:   s.netRPCService,
<span class="term-fg31">-		},</span>
<span class="term-fg31">-	}...)</span>
<span class="term-fg32">+		}}...)</span>
 }
&nbsp;
 func (s *Ethereum) ResetWithGenesisBlock(gb *types.Block) {
<span class="term-fg36">@@ -547,6 +573,11 @@</span> 	s.shutdownTracker.Stop()
&nbsp;
 	s.chainDb.Close()
 	s.eventMux.Stop()
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Handle shutdown of client.</span>
<span class="term-fg32">+	if s.rpcProxyClient != nil {</span>
<span class="term-fg32">+		s.rpcProxyClient.Close()</span>
<span class="term-fg32">+	}</span>
&nbsp;
 	return nil
 }</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-9cb9b74613108536d6e37a11" role="button"
                       aria-expanded="false" aria-controls="id-9cb9b74613108536d6e37a11">
                        <code>eth/downloader/downloader.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/eth/downloader/downloader.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/eth/downloader/downloader.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+6</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-9cb9b74613108536d6e37a11"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;downloader&#47;downloader.go immutable-geth&#47;eth&#47;downloader&#47;downloader.go</span>
<span class="term-fg1">index 6e7c5dcf02c8ee82e8dec503bebbcb0a259ce195..78a0967a5e41871145b27feb8f745867dad46f94 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;downloader&#47;downloader.go</span>
<span class="term-fg1">+++ immutable-geth&#47;eth&#47;downloader&#47;downloader.go</span>
<span class="term-fg36">@@ -34,6 +34,7 @@</span> 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;eth&#47;protocols&#47;snap&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;ethdb&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;event&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;log&quot;
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;metrics&quot;</span>
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;params&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;triedb&quot;
 )
<span class="term-fg36">@@ -56,6 +57,9 @@</span>
 	fsHeaderSafetyNet = 2048            &#47;&#47; Number of headers to discard in case a chain violation is detected
 	fsHeaderContCheck = 3 * time.Second &#47;&#47; Time interval to check for header continuations during state download
 	fsMinFullBlocks   = 64              &#47;&#47; Number of blocks to retrieve fully even in snap sync
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Add metrics</span>
<span class="term-fg32">+	syncDurationTimer = metrics.NewRegisteredTimer(&quot;downloader&#47;sync&quot;, nil)</span>
 )
&nbsp;
 var (
<span class="term-fg36">@@ -472,6 +476,8 @@</span> 		log.Debug(&quot;Backfilling with the network&quot;, &quot;mode&quot;, mode)
 	}
 	defer func(start time.Time) {
 		log.Debug(&quot;Synchronisation terminated&quot;, &quot;elapsed&quot;, common.PrettyDuration(time.Since(start)))
<span class="term-fg32">+		&#47;&#47; CHANGE(immutable): Record sync duration metric</span>
<span class="term-fg32">+		syncDurationTimer.Update(time.Since(start))</span>
 	}(time.Now())
&nbsp;
 	&#47;&#47; Look up the sync boundaries: the common ancestor and the target block</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-360a811f7c62822641e81ef0" role="button"
                       aria-expanded="false" aria-controls="id-360a811f7c62822641e81ef0">
                        <code>eth/ethconfig/config.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/eth/ethconfig/config.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/eth/ethconfig/config.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+13</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-360a811f7c62822641e81ef0"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;ethconfig&#47;config.go immutable-geth&#47;eth&#47;ethconfig&#47;config.go</span>
<span class="term-fg1">index ad664afb5bd1fa68165f23bfd30ef5c82eb0a7e0..1ff6951a7172034a8ba3f0fb3d7f017e49626839 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;ethconfig&#47;config.go</span>
<span class="term-fg1">+++ immutable-geth&#47;eth&#47;ethconfig&#47;config.go</span>
<span class="term-fg36">@@ -159,6 +159,19 @@</span> 	OverrideCancun *uint64 `toml:&quot;,omitempty&quot;`
&nbsp;
 	&#47;&#47; OverrideVerkle (TODO: remove after the fork)
 	OverrideVerkle *uint64 `toml:&quot;,omitempty&quot;`
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Add Prevrandao and Shanghai overrides.</span>
<span class="term-fg32">+	OverridePrevrandao *uint64 `toml:&quot;,omitempty&quot;`</span>
<span class="term-fg32">+	OverrideShanghai   *uint64 `toml:&quot;,omitempty&quot;`</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Add gossip configuration.</span>
<span class="term-fg32">+	GossipDefault bool `toml:&quot;,omitempty&quot;`</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Disable txpool gossip configuration.</span>
<span class="term-fg32">+	DisableTxPoolGossip bool `toml:&quot;,omitempty&quot;`</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Proxy to Immutable RPC configuration.</span>
<span class="term-fg32">+	RPCProxyURL string `toml:&quot;,omitempty&quot;`</span>
 }
&nbsp;
 &#47;&#47; CreateConsensusEngine creates a consensus engine for the given chain config.</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-352a39836352aa43e30cf7cc" role="button"
                       aria-expanded="false" aria-controls="id-352a39836352aa43e30cf7cc">
                        <code>eth/fetcher/block_fetcher.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/eth/fetcher/block_fetcher.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/eth/fetcher/block_fetcher.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+64</span></div>
                            <div class="text-start"><span class="text-danger">-21</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-352a39836352aa43e30cf7cc"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;fetcher&#47;block_fetcher.go immutable-geth&#47;eth&#47;fetcher&#47;block_fetcher.go</span>
<span class="term-fg1">index 126eaaea7fad244d0257c2a8b5f4f5b63ac52406..f4eda6e66adfd0e8d60618642cff2de40546dfd8 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;fetcher&#47;block_fetcher.go</span>
<span class="term-fg1">+++ immutable-geth&#47;eth&#47;fetcher&#47;block_fetcher.go</span>
<span class="term-fg36">@@ -26,6 +26,7 @@</span> 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&#47;prque&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;consensus&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;eth&#47;fetcher&#47;long&quot;</span>
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;eth&#47;protocols&#47;eth&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;log&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;metrics&quot;
<span class="term-fg36">@@ -40,13 +41,18 @@</span> 	fetchTimeout  = 5 * time.Second        &#47;&#47; Maximum allotted time to return an explicitly requested block&#47;transaction
 )
&nbsp;
 const (
<span class="term-fg31">-	maxUncleDist = 7   &#47;&#47; Maximum allowed backward distance from the chain head</span>
<span class="term-fg31">-	maxQueueDist = 32  &#47;&#47; Maximum allowed distance from the chain head to queue</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Set maxUncleDist to 0 to prevent chains from acceptable blocks older</span>
<span class="term-fg32">+	&#47;&#47; than the current head, resulting in reorgs</span>
<span class="term-fg32">+	maxUncleDist = 0   &#47;&#47; Maximum allowed backward distance from the chain head</span>
 	hashLimit    = 256 &#47;&#47; Maximum number of unique blocks or headers a peer may have announced
<span class="term-fg31">-	blockLimit   = 64  &#47;&#47; Maximum number of unique blocks a peer may have delivered</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Set blockLimit to 256 as all blocks are coming from a handful of peers</span>
<span class="term-fg32">+	blockLimit = 256 &#47;&#47; Maximum number of unique blocks a peer may have delivered</span>
 )
&nbsp;
 var (
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Set maxQueueDist to a large number if env var is set</span>
<span class="term-fg32">+	maxQueueDist = long.BlockFetchDistance() &#47;&#47; Maximum allowed distance from the chain head to queue</span>
<span class="term-fg32">+</span>
 	blockAnnounceInMeter   = metrics.NewRegisteredMeter(&quot;eth&#47;fetcher&#47;block&#47;announces&#47;in&quot;, nil)
 	blockAnnounceOutTimer  = metrics.NewRegisteredTimer(&quot;eth&#47;fetcher&#47;block&#47;announces&#47;out&quot;, nil)
 	blockAnnounceDropMeter = metrics.NewRegisteredMeter(&quot;eth&#47;fetcher&#47;block&#47;announces&#47;drop&quot;, nil)
<span class="term-fg36">@@ -125,7 +131,9 @@</span> type bodyFilterTask struct {
 	peer         string                 &#47;&#47; The source peer of block bodies
 	transactions [][]*types.Transaction &#47;&#47; Collection of transactions per block bodies
 	uncles       [][]*types.Header      &#47;&#47; Collection of uncles per block bodies
<span class="term-fg31">-	time         time.Time              &#47;&#47; Arrival time of the blocks&#39; contents</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Block Fetcher tasks can have withdrawals</span>
<span class="term-fg32">+	withdrawals [][]*types.Withdrawal &#47;&#47; Collection of withdrawals per block bodies</span>
<span class="term-fg32">+	time        time.Time             &#47;&#47; Arrival time of the blocks&#39; contents</span>
 }
&nbsp;
 &#47;&#47; blockOrHeaderInject represents a schedules import operation.
<span class="term-fg36">@@ -302,7 +310,7 @@</span> }
&nbsp;
 &#47;&#47; FilterBodies extracts all the block bodies that were explicitly requested by
 &#47;&#47; the fetcher, returning those that should be handled differently.
<span class="term-fg31">-func (f *BlockFetcher) FilterBodies(peer string, transactions [][]*types.Transaction, uncles [][]*types.Header, time time.Time) ([][]*types.Transaction, [][]*types.Header) {</span>
<span class="term-fg32">+func (f *BlockFetcher) FilterBodies(peer string, transactions [][]*types.Transaction, uncles [][]*types.Header, withdrawals [][]*types.Withdrawal, time time.Time) ([][]*types.Transaction, [][]*types.Header, [][]*types.Withdrawal) {</span>
 	log.Trace(&quot;Filtering bodies&quot;, &quot;peer&quot;, peer, &quot;txs&quot;, len(transactions), &quot;uncles&quot;, len(uncles))
&nbsp;
 	&#47;&#47; Send the filter channel to the fetcher
<span class="term-fg36">@@ -311,20 +319,20 @@</span>
 	select {
 	case f.bodyFilter &lt;- filter:
 	case &lt;-f.quit:
<span class="term-fg31">-		return nil, nil</span>
<span class="term-fg32">+		return nil, nil, nil</span>
 	}
 	&#47;&#47; Request the filtering of the body list
 	select {
<span class="term-fg31">-	case filter &lt;- &amp;bodyFilterTask{peer: peer, transactions: transactions, uncles: uncles, time: time}:</span>
<span class="term-fg32">+	case filter &lt;- &amp;bodyFilterTask{peer: peer, transactions: transactions, uncles: uncles, withdrawals: withdrawals, time: time}:</span>
 	case &lt;-f.quit:
<span class="term-fg31">-		return nil, nil</span>
<span class="term-fg32">+		return nil, nil, nil</span>
 	}
 	&#47;&#47; Retrieve the bodies remaining after filtering
 	select {
 	case task := &lt;-filter:
<span class="term-fg31">-		return task.transactions, task.uncles</span>
<span class="term-fg32">+		return task.transactions, task.uncles, task.withdrawals</span>
 	case &lt;-f.quit:
<span class="term-fg31">-		return nil, nil</span>
<span class="term-fg32">+		return nil, nil, nil</span>
 	}
 }
&nbsp;
<span class="term-fg36">@@ -396,7 +404,7 @@</span> 			if notification.number == 0 {
 				break
 			}
 			&#47;&#47; If we have a valid block number, check that it&#39;s potentially useful
<span class="term-fg31">-			if dist := int64(notification.number) - int64(f.chainHeight()); dist &lt; -maxUncleDist || dist &gt; maxQueueDist {</span>
<span class="term-fg32">+			if dist := int64(notification.number) - int64(f.chainHeight()); dist &lt; -maxUncleDist || dist &gt; int64(maxQueueDist) {</span>
 				log.Debug(&quot;Peer discarded announcement&quot;, &quot;peer&quot;, notification.origin, &quot;number&quot;, notification.number, &quot;hash&quot;, notification.hash, &quot;distance&quot;, dist)
 				blockAnnounceDropMeter.Mark(1)
 				break
<span class="term-fg36">@@ -541,8 +549,9 @@</span> 					select {
 					case res := &lt;-resCh:
 						res.Done &lt;- nil
 						&#47;&#47; Ignoring withdrawals here, since the block fetcher is not used post-merge.
<span class="term-fg31">-						txs, uncles, _ := res.Res.(*eth.BlockBodiesResponse).Unpack()</span>
<span class="term-fg31">-						f.FilterBodies(peer, txs, uncles, time.Now())</span>
<span class="term-fg32">+						&#47;&#47; CHANGE(immutable): We continue to use block fetcher in a pre-merge network with withdrawals</span>
<span class="term-fg32">+						txs, uncles, withdrawals := res.Res.(*eth.BlockBodiesResponse).Unpack()</span>
<span class="term-fg32">+						f.FilterBodies(peer, txs, uncles, withdrawals, time.Now())</span>
&nbsp;
 					case &lt;-timeout.C:
 						&#47;&#47; The peer didn&#39;t respond in time. The request
<span class="term-fg36">@@ -660,12 +669,16 @@</span> 			bodyFilterInMeter.Mark(int64(len(task.transactions)))
 			blocks := []*types.Block{}
 			&#47;&#47; abort early if there&#39;s nothing explicitly requested
 			if len(f.completing) &gt; 0 {
<span class="term-fg31">-				for i := 0; i &lt; len(task.transactions) &amp;&amp; i &lt; len(task.uncles); i++ {</span>
<span class="term-fg32">+				&#47;&#47; CHANGE(immutable): `i` should also consider the length of withdrawals. However, transactions, uncles,</span>
<span class="term-fg32">+				&#47;&#47; and withdrawals should be the same length given that they are set in BlockBodiesResponse.Unpack().</span>
<span class="term-fg32">+				&#47;&#47; By adding it here, we enforce this assumption</span>
<span class="term-fg32">+				for i := 0; i &lt; len(task.transactions) &amp;&amp; i &lt; len(task.uncles) &amp;&amp; i &lt; len(task.withdrawals); i++ {</span>
 					&#47;&#47; Match up a body to any possible completion request
 					var (
<span class="term-fg31">-						matched   = false</span>
<span class="term-fg31">-						uncleHash common.Hash &#47;&#47; calculated lazily and reused</span>
<span class="term-fg31">-						txnHash   common.Hash &#47;&#47; calculated lazily and reused</span>
<span class="term-fg32">+						matched         = false</span>
<span class="term-fg32">+						uncleHash       common.Hash &#47;&#47; calculated lazily and reused</span>
<span class="term-fg32">+						txnHash         common.Hash &#47;&#47; calculated lazily and reused</span>
<span class="term-fg32">+						withdrawalsHash common.Hash &#47;&#47; calculated lazily and reused</span>
 					)
 					for hash, announce := range f.completing {
 						if f.queued[hash] != nil || announce.origin != task.peer {
<span class="term-fg36">@@ -683,10 +696,31 @@</span> 						}
 						if txnHash != announce.header.TxHash {
 							continue
 						}
<span class="term-fg32">+</span>
<span class="term-fg32">+						&#47;&#47; CHANGE(immutable): Just as the transactions trie hash is verified against the transactions,</span>
<span class="term-fg32">+						&#47;&#47; the same must be done with withdrawals for any given block as we cannot assume that the header hash</span>
<span class="term-fg32">+						&#47;&#47; is correctly derived from the body</span>
<span class="term-fg32">+						&#47;&#47; If the header withdrawals hash is nil, the withdrawals must be nil</span>
<span class="term-fg32">+						if announce.header.WithdrawalsHash == nil {</span>
<span class="term-fg32">+							if task.withdrawals[i] != nil {</span>
<span class="term-fg32">+								log.Warn(&quot;Discarded block due to mismatched withdrawalsHash, expected nil&quot;)</span>
<span class="term-fg32">+								continue</span>
<span class="term-fg32">+							}</span>
<span class="term-fg32">+						} else {</span>
<span class="term-fg32">+							&#47;&#47; If the withdrawals hash is not nil, the derived hash should match</span>
<span class="term-fg32">+							if withdrawalsHash == (common.Hash{}) {</span>
<span class="term-fg32">+								withdrawalsHash = types.DeriveSha(types.Withdrawals(task.withdrawals[i]), trie.NewStackTrie(nil))</span>
<span class="term-fg32">+							}</span>
<span class="term-fg32">+							if withdrawalsHash != *announce.header.WithdrawalsHash {</span>
<span class="term-fg32">+								log.Warn(&quot;Discarded block due to mismatched withdrawalsHash&quot;, &quot;expected&quot;, *announce.header.WithdrawalsHash, &quot;received&quot;, withdrawalsHash)</span>
<span class="term-fg32">+								continue</span>
<span class="term-fg32">+							}</span>
<span class="term-fg32">+						}</span>
<span class="term-fg32">+</span>
 						&#47;&#47; Mark the body matched, reassemble if still unknown
 						matched = true
 						if f.getBlock(hash) == nil {
<span class="term-fg31">-							block := types.NewBlockWithHeader(announce.header).WithBody(task.transactions[i], task.uncles[i])</span>
<span class="term-fg32">+							block := types.NewBlockWithHeader(announce.header).WithBody(task.transactions[i], task.uncles[i]).WithWithdrawals(task.withdrawals[i])</span>
 							block.ReceivedAt = task.time
 							blocks = append(blocks, block)
 						} else {
<span class="term-fg36">@@ -696,6 +730,7 @@</span> 					}
 					if matched {
 						task.transactions = append(task.transactions[:i], task.transactions[i+1:]...)
 						task.uncles = append(task.uncles[:i], task.uncles[i+1:]...)
<span class="term-fg32">+						task.withdrawals = append(task.withdrawals[:i], task.withdrawals[i+1:]...)</span>
 						i--
 						continue
 					}
<span class="term-fg36">@@ -770,14 +805,16 @@</span> 	}
 	&#47;&#47; Ensure the peer isn&#39;t DOSing us
 	count := f.queues[peer] + 1
 	if count &gt; blockLimit {
<span class="term-fg31">-		log.Debug(&quot;Discarded delivered header or block, exceeded allowance&quot;, &quot;peer&quot;, peer, &quot;number&quot;, number, &quot;hash&quot;, hash, &quot;limit&quot;, blockLimit)</span>
<span class="term-fg32">+		&#47;&#47; CHANGE(immutable): Changed to warning log as we only expect blocks from trusted peers that should be giving us valid blocks</span>
<span class="term-fg32">+		log.Warn(&quot;Discarded delivered header or block, exceeded allowance&quot;, &quot;peer&quot;, peer, &quot;number&quot;, number, &quot;hash&quot;, hash, &quot;limit&quot;, blockLimit)</span>
 		blockBroadcastDOSMeter.Mark(1)
 		f.forgetHash(hash)
 		return
 	}
 	&#47;&#47; Discard any past or too distant blocks
<span class="term-fg31">-	if dist := int64(number) - int64(f.chainHeight()); dist &lt; -maxUncleDist || dist &gt; maxQueueDist {</span>
<span class="term-fg31">-		log.Debug(&quot;Discarded delivered header or block, too far away&quot;, &quot;peer&quot;, peer, &quot;number&quot;, number, &quot;hash&quot;, hash, &quot;distance&quot;, dist)</span>
<span class="term-fg32">+	if dist := int64(number) - int64(f.chainHeight()); dist &lt; -maxUncleDist || dist &gt; int64(maxQueueDist) {</span>
<span class="term-fg32">+		&#47;&#47; CHANGE(immutable): Changed to warning log as we only expect blocks from trusted peers that should be giving us valid blocks</span>
<span class="term-fg32">+		log.Warn(&quot;Discarded delivered header or block, too far away&quot;, &quot;peer&quot;, peer, &quot;number&quot;, number, &quot;hash&quot;, hash, &quot;distance&quot;, dist)</span>
 		blockBroadcastDropMeter.Mark(1)
 		f.forgetHash(hash)
 		return
<span class="term-fg36">@@ -850,6 +887,12 @@</span> 		if parent == nil {
 			log.Debug(&quot;Unknown parent of propagated block&quot;, &quot;peer&quot;, peer, &quot;number&quot;, block.Number(), &quot;hash&quot;, hash, &quot;parent&quot;, block.ParentHash())
 			return
 		}
<span class="term-fg32">+</span>
<span class="term-fg32">+		&#47;&#47; CHANGE(immutable): Ensure empty withdrawals after cancun before broadcast</span>
<span class="term-fg32">+		if block.Header().EmptyWithdrawalsHash() {</span>
<span class="term-fg32">+			block = block.WithWithdrawals(make([]*types.Withdrawal, 0))</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+</span>
 		&#47;&#47; Quickly validate the header and propagate the block if it passes
 		switch err := f.verifyHeader(block.Header()); err {
 		case nil:</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-4c056f82a1c95c3c96db66df" role="button"
                       aria-expanded="false" aria-controls="id-4c056f82a1c95c3c96db66df">
                        <code>eth/fetcher/long/immutable_long.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/eth/fetcher/long/immutable_long.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+51</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-4c056f82a1c95c3c96db66df"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;fetcher&#47;long&#47;immutable_long.go immutable-geth&#47;eth&#47;fetcher&#47;long&#47;immutable_long.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..2127f0b2af0da7bc9e42e1fb6e36a0c834694837</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;eth&#47;fetcher&#47;long&#47;immutable_long.go</span>
<span class="term-fg36">@@ -0,0 +1,51 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package long</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;math&quot;</span>
<span class="term-fg32">+	&quot;os&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;log&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+const (</span>
<span class="term-fg32">+	longSyncEnvVar = &quot;GETH_FLAG_IMMUTABLE_LONG_RANGE_SYNC&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+var (</span>
<span class="term-fg32">+	&#47;&#47; blockFetchDistance is increased if the relevant env var is set.</span>
<span class="term-fg32">+	blockFetchDistance = 256</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func init() {</span>
<span class="term-fg32">+	&#47;&#47; Enable long fetch if env var is set.</span>
<span class="term-fg32">+	if isLongFetch := os.Getenv(longSyncEnvVar); isLongFetch != &quot;&quot; {</span>
<span class="term-fg32">+		log.Info(&quot;Long range sync enabled&quot;)</span>
<span class="term-fg32">+		blockFetchDistance = math.MaxInt32</span>
<span class="term-fg32">+	} else {</span>
<span class="term-fg32">+		log.Info(&quot;Long range sync disabled&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; BlockFetchDistance returns the maximum number of blocks that should be accepted</span>
<span class="term-fg32">+&#47;&#47; when fetching blocks from peers.</span>
<span class="term-fg32">+&#47;&#47; The value will be large enough for any range of blocks if the relevant env var is set.</span>
<span class="term-fg32">+&#47;&#47; Otherwise it will return a reasonable value for normal operation.</span>
<span class="term-fg32">+func BlockFetchDistance() int {</span>
<span class="term-fg32">+	return blockFetchDistance</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-7a6394307d929571fb52c316" role="button"
                       aria-expanded="false" aria-controls="id-7a6394307d929571fb52c316">
                        <code>eth/fetcher/tx_fetcher.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/eth/fetcher/tx_fetcher.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/eth/fetcher/tx_fetcher.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+16</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-7a6394307d929571fb52c316"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;fetcher&#47;tx_fetcher.go immutable-geth&#47;eth&#47;fetcher&#47;tx_fetcher.go</span>
<span class="term-fg1">index ea7892d8d84e562a3d82d0976cb490ccdcbfdafb..9ca0480ae97a4dd69e468dd982208cf7a2a7a6c8 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;fetcher&#47;tx_fetcher.go</span>
<span class="term-fg1">+++ immutable-geth&#47;eth&#47;fetcher&#47;tx_fetcher.go</span>
<span class="term-fg36">@@ -29,6 +29,7 @@</span> 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&#47;lru&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&#47;mclock&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;txpool&quot;
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;txpool&#47;legacypool&quot;</span>
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;log&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;metrics&quot;
<span class="term-fg36">@@ -105,6 +106,10 @@</span> 	txFetcherQueueingPeers  = metrics.NewRegisteredGauge(&quot;eth&#47;fetcher&#47;transaction&#47;queueing&#47;peers&quot;, nil)
 	txFetcherQueueingHashes = metrics.NewRegisteredGauge(&quot;eth&#47;fetcher&#47;transaction&#47;queueing&#47;hashes&quot;, nil)
 	txFetcherFetchingPeers  = metrics.NewRegisteredGauge(&quot;eth&#47;fetcher&#47;transaction&#47;fetching&#47;peers&quot;, nil)
 	txFetcherFetchingHashes = metrics.NewRegisteredGauge(&quot;eth&#47;fetcher&#47;transaction&#47;fetching&#47;hashes&quot;, nil)
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Add metric for tx pool overflow as alert condition. Metric alerting is preffered</span>
<span class="term-fg32">+	&#47;&#47; over log alerting https:&#47;&#47;immutable.atlassian.net&#47;wiki&#47;spaces&#47;SRE&#47;pages&#47;2184086495&#47;Newrelic+Data+Types+-+What+and+When+to+use</span>
<span class="term-fg32">+	txPoolOverflowCounter = metrics.NewRegisteredCounter(&quot;eth&#47;fetcher&#47;transaction&#47;txpool&#47;overflow&quot;, nil)</span>
 )
&nbsp;
 &#47;&#47; txAnnounce is the notification of the availability of a batch
<span class="term-fg36">@@ -351,6 +356,17 @@</span> 			default:
 				otherreject++
 			}
 			added = append(added, batch[j].Hash())
<span class="term-fg32">+</span>
<span class="term-fg32">+			&#47;&#47; CHANGE(immutable) add tx pool logging and metrics, this includes user errors but can also</span>
<span class="term-fg32">+			&#47;&#47; indicate other system level errors.</span>
<span class="term-fg32">+			if err != nil {</span>
<span class="term-fg32">+				if errors.Is(err, legacypool.ErrTxPoolOverflow) {</span>
<span class="term-fg32">+					log.Error(&quot;tx pool overflow&quot;, &quot;err&quot;, err, &quot;tx&quot;, batch[j].Hash().String())</span>
<span class="term-fg32">+					txPoolOverflowCounter.Inc(1)</span>
<span class="term-fg32">+				} else {</span>
<span class="term-fg32">+					log.Info(&quot;failed to add tx&quot;, &quot;err&quot;, err, &quot;tx&quot;, batch[j].Hash().String())</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+			}</span>
 			metas = append(metas, txMetadata{
 				kind: batch[j].Type(),
 				size: uint32(batch[j].Size()),</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-9a453c656a32c7c958bf0bd8" role="button"
                       aria-expanded="false" aria-controls="id-9a453c656a32c7c958bf0bd8">
                        <code>eth/filters/filter.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/eth/filters/filter.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/eth/filters/filter.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+10</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-9a453c656a32c7c958bf0bd8"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;filters&#47;filter.go immutable-geth&#47;eth&#47;filters&#47;filter.go</span>
<span class="term-fg1">index 83e3284a2b5b8465943d6f2574451f403afcb304..b2760c7bd7a36412d189d58a333551c38b59ad33 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;filters&#47;filter.go</span>
<span class="term-fg1">+++ immutable-geth&#47;eth&#47;filters&#47;filter.go</span>
<span class="term-fg36">@@ -19,6 +19,7 @@</span>
 import (
 	&quot;context&quot;
 	&quot;errors&quot;
<span class="term-fg32">+	&quot;fmt&quot;</span>
 	&quot;math&#47;big&quot;
&nbsp;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;
<span class="term-fg36">@@ -26,6 +27,9 @@</span> 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;bloombits&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;rpc&quot;
 )
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; CHANGE(immutable): Add a max filter range for logs queried using getLogs</span>
<span class="term-fg32">+const maxFilterBlockRange = 5000</span>
&nbsp;
 &#47;&#47; Filter can be used to retrieve and filter logs.
 type Filter struct {
<span class="term-fg36">@@ -155,6 +159,12 @@</span> 		return nil, err
 	}
 	if f.end, err = resolveSpecial(f.end); err != nil {
 		return nil, err
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Add a max filter block range</span>
<span class="term-fg32">+	&#47;&#47; TODO: Change this to a CLI flag</span>
<span class="term-fg32">+	if f.end-f.begin &gt; maxFilterBlockRange {</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;exceeded maximum block range: %d&quot;, maxFilterBlockRange)</span>
 	}
&nbsp;
 	logChan, errChan := f.rangeLogsAsync(ctx)</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-2cc52574d82c302430fa0adb" role="button"
                       aria-expanded="false" aria-controls="id-2cc52574d82c302430fa0adb">
                        <code>eth/gasestimator/gasestimator.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/eth/gasestimator/gasestimator.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/eth/gasestimator/gasestimator.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+1</span></div>
                            <div class="text-start"><span class="text-danger">-1</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-2cc52574d82c302430fa0adb"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;gasestimator&#47;gasestimator.go immutable-geth&#47;eth&#47;gasestimator&#47;gasestimator.go</span>
<span class="term-fg1">index f07f98956e3c8a483f14e693569f096837d899a0..6f18c1ed51fb361ce34d1aae0ff21f44ad1483d6 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;gasestimator&#47;gasestimator.go</span>
<span class="term-fg1">+++ immutable-geth&#47;eth&#47;gasestimator&#47;gasestimator.go</span>
<span class="term-fg36">@@ -208,7 +208,7 @@</span> func run(ctx context.Context, call *core.Message, opts *Options) (*core.ExecutionResult, error) {
 	&#47;&#47; Assemble the call and the call context
 	var (
 		msgContext = core.NewEVMTxContext(call)
<span class="term-fg31">-		evmContext = core.NewEVMBlockContext(opts.Header, opts.Chain, nil)</span>
<span class="term-fg32">+		evmContext = core.NewEVMBlockContext(opts.Header, opts.Chain, nil, opts.Config)</span>
&nbsp;
 		dirtyState = opts.State.Copy()
 		evm        = vm.NewEVM(evmContext, msgContext, dirtyState, opts.Config, vm.Config{NoBaseFee: true})</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-e3e1f7573e2902d22685c4e0" role="button"
                       aria-expanded="false" aria-controls="id-e3e1f7573e2902d22685c4e0">
                        <code>eth/gasprice/gasprice.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/eth/gasprice/gasprice.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/eth/gasprice/gasprice.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+14</span></div>
                            <div class="text-start"><span class="text-danger">-1</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-e3e1f7573e2902d22685c4e0"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;gasprice&#47;gasprice.go immutable-geth&#47;eth&#47;gasprice&#47;gasprice.go</span>
<span class="term-fg1">index b71964981145fa58b7894a2be4637d8a7e2a6c9a..40c33ea3738c45cd754a08d7568215b18f9daa8d 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;gasprice&#47;gasprice.go</span>
<span class="term-fg1">+++ immutable-geth&#47;eth&#47;gasprice&#47;gasprice.go</span>
<span class="term-fg36">@@ -21,6 +21,7 @@</span> 	&quot;context&quot;
 	&quot;math&#47;big&quot;
 	&quot;sync&quot;
&nbsp;
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;settings&quot;</span>
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&#47;lru&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&quot;
<span class="term-fg36">@@ -193,7 +194,12 @@</span> 		&#47;&#47; - The block is empty
 		&#47;&#47; - All the transactions included are sent by the miner itself.
 		&#47;&#47; In these cases, use the latest calculated price for sampling.
 		if len(res.values) == 0 {
<span class="term-fg31">-			res.values = []*big.Int{lastPrice}</span>
<span class="term-fg32">+			&#47;&#47; CHANGE(immutable): Handle empty blocks</span>
<span class="term-fg32">+			if oracle.backend.ChainConfig().IsImmutableZKEVM() {</span>
<span class="term-fg32">+				res.values = []*big.Int{big.NewInt(settings.PriceLimit)}</span>
<span class="term-fg32">+			} else {</span>
<span class="term-fg32">+				res.values = []*big.Int{lastPrice}</span>
<span class="term-fg32">+			}</span>
 		}
 		&#47;&#47; Besides, in order to collect enough data for sampling, if nothing
 		&#47;&#47; meaningful returned, try to query more blocks. But the maximum
<span class="term-fg36">@@ -213,6 +219,13 @@</span> 		price = results[(len(results)-1)*oracle.percentile&#47;100]
 	}
 	if price.Cmp(oracle.maxPrice) &gt; 0 {
 		price = new(big.Int).Set(oracle.maxPrice)
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Enforce the price limit</span>
<span class="term-fg32">+	if oracle.backend.ChainConfig().IsImmutableZKEVM() {</span>
<span class="term-fg32">+		limit := big.NewInt(settings.PriceLimit)</span>
<span class="term-fg32">+		if price.Cmp(limit) &lt; 0 {</span>
<span class="term-fg32">+			price = limit</span>
<span class="term-fg32">+		}</span>
 	}
 	oracle.cacheLock.Lock()
 	oracle.lastHead = headHash</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-f4747c7fd8bce1d7ee21a531" role="button"
                       aria-expanded="false" aria-controls="id-f4747c7fd8bce1d7ee21a531">
                        <code>eth/handler.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/eth/handler.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/eth/handler.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+55</span></div>
                            <div class="text-start"><span class="text-danger">-19</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-f4747c7fd8bce1d7ee21a531"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;handler.go immutable-geth&#47;eth&#47;handler.go</span>
<span class="term-fg1">index 0343a5787012498a764d8814a48a7c2488c52519..882bcd1b51ce6651987ac78d26369b045f9a3699 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;handler.go</span>
<span class="term-fg1">+++ immutable-geth&#47;eth&#47;handler.go</span>
<span class="term-fg36">@@ -52,7 +52,8 @@</span>
 	&#47;&#47; txMaxBroadcastSize is the max size of a transaction that will be broadcasted.
 	&#47;&#47; All transactions with a higher size will be announced and need to be fetched
 	&#47;&#47; by the peer.
<span class="term-fg31">-	txMaxBroadcastSize = 4096</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): unused</span>
<span class="term-fg32">+	txMaxBroadcastSize = 4096 &#47;&#47;nolint:unused</span>
 )
&nbsp;
 var syncChallengeTimeout = 15 * time.Second &#47;&#47; Time allowance for a node to reply to the sync progress challenge
<span class="term-fg36">@@ -93,6 +94,10 @@</span> 	Sync           downloader.SyncMode    &#47;&#47; Whether to snap or full sync
 	BloomCache     uint64                 &#47;&#47; Megabytes to alloc for snap sync bloom
 	EventMux       *event.TypeMux         &#47;&#47; Legacy event mux, deprecate for `feed`
 	RequiredBlocks map[uint64]common.Hash &#47;&#47; Hard coded map of required block hashes for sync challenges
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): gossip configuration</span>
<span class="term-fg32">+	GossipDefault bool &#47;&#47; Whether to use default gossip configuration</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): disable txpool gossip configuration</span>
<span class="term-fg32">+	DisableTxPoolGossip bool</span>
 }
&nbsp;
 type handler struct {
<span class="term-fg36">@@ -128,6 +133,10 @@</span> 	wg        sync.WaitGroup
&nbsp;
 	handlerStartCh chan struct{}
 	handlerDoneCh  chan struct{}
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): gossip configuration</span>
<span class="term-fg32">+	gossipDefault bool</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): disable txpool gossip configuration</span>
<span class="term-fg32">+	disableTxPoolGossip bool</span>
 }
&nbsp;
 &#47;&#47; newHandler returns a handler for all Ethereum chain management protocol.
<span class="term-fg36">@@ -149,6 +158,10 @@</span> 		requiredBlocks: config.RequiredBlocks,
 		quitSync:       make(chan struct{}),
 		handlerDoneCh:  make(chan struct{}),
 		handlerStartCh: make(chan struct{}),
<span class="term-fg32">+		&#47;&#47; CHANGE(immutable): gossip configuration</span>
<span class="term-fg32">+		gossipDefault: config.GossipDefault,</span>
<span class="term-fg32">+		&#47;&#47; CHANGE(immutable): disable txpool gossip configuration</span>
<span class="term-fg32">+		disableTxPoolGossip: config.DisableTxPoolGossip,</span>
 	}
 	if config.Sync == downloader.FullSync {
 		&#47;&#47; The database seems empty as the current block is the genesis. Yet the snap
<span class="term-fg36">@@ -368,7 +381,8 @@</span> 		if reject || h.peers.len() &gt;= h.maxPeers {
 			return p2p.DiscTooManyPeers
 		}
 	}
<span class="term-fg31">-	peer.Log().Debug(&quot;Ethereum peer connected&quot;, &quot;name&quot;, peer.Name())</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): log fullname</span>
<span class="term-fg32">+	peer.Log().Debug(&quot;Ethereum peer connected&quot;, &quot;name&quot;, peer.Fullname())</span>
&nbsp;
 	&#47;&#47; Register the peer locally
 	if err := h.peers.registerPeer(peer, snap); err != nil {
<span class="term-fg36">@@ -439,7 +453,8 @@</span> 				}
 				peer.Log().Debug(&quot;Peer required block verified&quot;, &quot;number&quot;, number, &quot;hash&quot;, hash)
 				res.Done &lt;- nil
 			case &lt;-timeout.C:
<span class="term-fg31">-				peer.Log().Warn(&quot;Required block challenge timed out, dropping&quot;, &quot;addr&quot;, peer.RemoteAddr(), &quot;type&quot;, peer.Name())</span>
<span class="term-fg32">+				&#47;&#47; CHANGE(immutable): log fullname</span>
<span class="term-fg32">+				peer.Log().Warn(&quot;Required block challenge timed out, dropping&quot;, &quot;addr&quot;, peer.RemoteAddr(), &quot;type&quot;, peer.Fullname())</span>
 				h.removePeer(peer.ID())
 			}
 		}(number, hash, req)
<span class="term-fg36">@@ -597,9 +612,11 @@</span> 	}
 }
&nbsp;
 &#47;&#47; BroadcastTransactions will propagate a batch of transactions
<span class="term-fg31">-&#47;&#47; - To a square root of all peers for non-blob transactions</span>
<span class="term-fg31">-&#47;&#47; - And, separately, as announcements to all peers which are not known to</span>
<span class="term-fg31">-&#47;&#47; already have the given transaction.</span>
<span class="term-fg32">+&#47;&#47; CHANGE(immutable):</span>
<span class="term-fg32">+&#47;&#47; - Add conditional logic to send transactions to all peers or the geth default which is a subset of them</span>
<span class="term-fg32">+&#47;&#47; - When gossipping to all peers, txs will be gossiped regardless of whether the node has received the transaction before</span>
<span class="term-fg32">+&#47;&#47; - No announcements should be sent, as all peers should receive the full tx</span>
<span class="term-fg32">+&#47;&#47; - When gossiping to a subset the gossiping will use geths default logic, where a subset of peers will receive the txs</span>
 func (h *handler) BroadcastTransactions(txs types.Transactions) {
 	var (
 		blobTxs  int &#47;&#47; Number of blob transactions to announce only
<span class="term-fg36">@@ -613,26 +630,43 @@</span>
 		txset = make(map[*ethPeer][]common.Hash) &#47;&#47; Set peer-&gt;hash to transfer directly
 		annos = make(map[*ethPeer][]common.Hash) &#47;&#47; Set peer-&gt;hash to announce
 	)
<span class="term-fg31">-	&#47;&#47; Broadcast transactions to a batch of peers not knowing about it</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Broadcast transactions to all peers, regardless of whether</span>
<span class="term-fg32">+	&#47;&#47; they are known to have previously received it. This is to prevent loss of transactions</span>
<span class="term-fg32">+	&#47;&#47; in smaller networks.</span>
 	for _, tx := range txs {
<span class="term-fg31">-		peers := h.peers.peersWithoutTransaction(tx.Hash())</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-		var numDirect int</span>
 		switch {
 		case tx.Type() == types.BlobTxType:
 			blobTxs++
 		case tx.Size() &gt; txMaxBroadcastSize:
 			largeTxs++
<span class="term-fg31">-		default:</span>
<span class="term-fg31">-			numDirect = int(math.Sqrt(float64(len(peers))))</span>
 		}
<span class="term-fg31">-		&#47;&#47; Send the tx unconditionally to a subset of our peers</span>
<span class="term-fg31">-		for _, peer := range peers[:numDirect] {</span>
<span class="term-fg31">-			txset[peer] = append(txset[peer], tx.Hash())</span>
<span class="term-fg31">-		}</span>
<span class="term-fg31">-		&#47;&#47; For the remaining peers, send announcement only</span>
<span class="term-fg31">-		for _, peer := range peers[numDirect:] {</span>
<span class="term-fg31">-			annos[peer] = append(annos[peer], tx.Hash())</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		&#47;&#47; CHANGE(immutable): conditionally send to a subset of peers (default), otherwise send to all peers</span>
<span class="term-fg32">+		if h.gossipDefault {</span>
<span class="term-fg32">+			&#47;&#47; CHANGE(immutable): Send the txs to a subset of peers. This is the default behaviour for geth.</span>
<span class="term-fg32">+			peers := h.peers.peersWithoutTransaction(tx.Hash())</span>
<span class="term-fg32">+			var numDirect int</span>
<span class="term-fg32">+			if tx.Size() &lt;= txMaxBroadcastSize {</span>
<span class="term-fg32">+				numDirect = int(math.Sqrt(float64(len(peers))))</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+			&#47;&#47; Send the tx unconditionally to a subset of our peers</span>
<span class="term-fg32">+			for _, peer := range peers[:numDirect] {</span>
<span class="term-fg32">+				txset[peer] = append(txset[peer], tx.Hash())</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+			&#47;&#47; For the remaining peers, send announcement only</span>
<span class="term-fg32">+			for _, peer := range peers[numDirect:] {</span>
<span class="term-fg32">+				annos[peer] = append(annos[peer], tx.Hash())</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		} else {</span>
<span class="term-fg32">+			&#47;&#47; CHANGE(immutable): Send the tx unconditionally to all our peers, rather than a subset.</span>
<span class="term-fg32">+			&#47;&#47; Sending transactions to a subset of peers is only applicable for large scale networks.</span>
<span class="term-fg32">+			&#47;&#47; All peers will receive the full transaction payload instead of an announcement.</span>
<span class="term-fg32">+			peers := h.peers.allPeers()</span>
<span class="term-fg32">+			for _, peer := range peers[:] {</span>
<span class="term-fg32">+				txset[peer] = append(txset[peer], tx.Hash())</span>
<span class="term-fg32">+			}</span>
 		}
 	}
 	for peer, hashes := range txset {
<span class="term-fg36">@@ -641,6 +675,8 @@</span> 		directCount += len(hashes)
 		peer.AsyncSendTransactions(hashes)
 	}
 	for peer, hashes := range annos {
<span class="term-fg32">+		&#47;&#47; CHANGE(immutable): Add warning logs for announcements as we do not expect them to occur</span>
<span class="term-fg32">+		log.Warn(&quot;Sending announcements unexpectedly&quot;, &quot;announced hashes&quot;, len(annos))</span>
 		annPeers++
 		annCount += len(hashes)
 		peer.AsyncSendPooledTransactionHashes(hashes)</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-99f05c1a08ce5eebfdad94a7" role="button"
                       aria-expanded="false" aria-controls="id-99f05c1a08ce5eebfdad94a7">
                        <code>eth/handler_eth.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/eth/handler_eth.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/eth/handler_eth.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+20</span></div>
                            <div class="text-start"><span class="text-danger">-1</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-99f05c1a08ce5eebfdad94a7"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;handler_eth.go immutable-geth&#47;eth&#47;handler_eth.go</span>
<span class="term-fg1">index f1284c10e637e5d3dd9ee47a3652aa3cfaaba60e..28f26dee3f9407e58305006df24ca507f654cb53 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;handler_eth.go</span>
<span class="term-fg1">+++ immutable-geth&#47;eth&#47;handler_eth.go</span>
<span class="term-fg36">@@ -33,8 +33,23 @@</span> &#47;&#47; ethHandler implements the eth.Backend interface to handle the various network
 &#47;&#47; packets that are sent as replies or broadcasts.
 type ethHandler handler
&nbsp;
<span class="term-fg32">+&#47;&#47; CHANGE(immutable): add nill pool for disabling tx gossping</span>
<span class="term-fg32">+&#47;&#47; NilPool implements the TxPool interface but does nothing. This is used to disable txpool gossiping</span>
<span class="term-fg32">+type NilPool struct{}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; CHANGE(immutable): add nill pool for disabling tx gossping</span>
<span class="term-fg32">+func (n NilPool) Get(hash common.Hash) *types.Transaction {</span>
<span class="term-fg32">+	return nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
 func (h *ethHandler) Chain() *core.BlockChain { return h.chain }
<span class="term-fg31">-func (h *ethHandler) TxPool() eth.TxPool      { return h.txpool }</span>
<span class="term-fg32">+func (h *ethHandler) TxPool() eth.TxPool {</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): disable tx pool gossiping</span>
<span class="term-fg32">+	if h.disableTxPoolGossip {</span>
<span class="term-fg32">+		return NilPool{}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return h.txpool</span>
<span class="term-fg32">+}</span>
&nbsp;
 &#47;&#47; RunPeer is invoked when a peer joins on the `eth` protocol.
 func (h *ethHandler) RunPeer(peer *eth.Peer, hand eth.Handler) error {
<span class="term-fg36">@@ -52,6 +67,10 @@</span>
 &#47;&#47; AcceptTxs retrieves whether transaction processing is enabled on the node
 &#47;&#47; or if inbound transactions should simply be dropped.
 func (h *ethHandler) AcceptTxs() bool {
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): disable tx pool gossiping</span>
<span class="term-fg32">+	if h.disableTxPoolGossip {</span>
<span class="term-fg32">+		return false</span>
<span class="term-fg32">+	}</span>
 	return h.synced.Load()
 }
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-ecf3df6b3f255ddd6a793c75" role="button"
                       aria-expanded="false" aria-controls="id-ecf3df6b3f255ddd6a793c75">
                        <code>eth/peerset.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/eth/peerset.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/eth/peerset.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+13</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-ecf3df6b3f255ddd6a793c75"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;peerset.go immutable-geth&#47;eth&#47;peerset.go</span>
<span class="term-fg1">index c0c11e3e85eee1120c94f40a5cae8bc59c77e612..c755be7cdcbf1ebd2a307d5b343d7df1cec36e4d 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;peerset.go</span>
<span class="term-fg1">+++ immutable-geth&#47;eth&#47;peerset.go</span>
<span class="term-fg36">@@ -222,6 +222,19 @@</span> 	}
 	return list
 }
&nbsp;
<span class="term-fg32">+&#47;&#47; CHANGE(immutable):</span>
<span class="term-fg32">+&#47;&#47; allPeers is used to return all peers, used for obtaining a list of broadcast recipients</span>
<span class="term-fg32">+func (ps *peerSet) allPeers() []*ethPeer {</span>
<span class="term-fg32">+	ps.lock.RLock()</span>
<span class="term-fg32">+	defer ps.lock.RUnlock()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	list := make([]*ethPeer, 0, len(ps.peers))</span>
<span class="term-fg32">+	for _, p := range ps.peers {</span>
<span class="term-fg32">+		list = append(list, p)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return list</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
 &#47;&#47; len returns if the current number of `eth` peers in the set. Since the `snap`
 &#47;&#47; peers are tied to the existence of an `eth` connection, that will always be a
 &#47;&#47; subset of `eth`.</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-0f894964c0f146087960e7a1" role="button"
                       aria-expanded="false" aria-controls="id-0f894964c0f146087960e7a1">
                        <code>eth/protocols/eth/handler.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/eth/protocols/eth/handler.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/eth/protocols/eth/handler.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+36</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-0f894964c0f146087960e7a1"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;protocols&#47;eth&#47;handler.go immutable-geth&#47;eth&#47;protocols&#47;eth&#47;handler.go</span>
<span class="term-fg1">index 2d69ecdc83665355fa3d03befa80bc9f457e1ca3..d7fc9a774fe8f037bc5fd271f177bb9fd6ef8236 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;protocols&#47;eth&#47;handler.go</span>
<span class="term-fg1">+++ immutable-geth&#47;eth&#47;protocols&#47;eth&#47;handler.go</span>
<span class="term-fg36">@@ -19,16 +19,20 @@</span>
 import (
 	&quot;fmt&quot;
 	&quot;math&#47;big&quot;
<span class="term-fg32">+	&quot;net&#47;netip&quot;</span>
<span class="term-fg32">+	&quot;os&quot;</span>
 	&quot;time&quot;
&nbsp;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;log&quot;</span>
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;metrics&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;p2p&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;p2p&#47;enode&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;p2p&#47;enr&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;params&quot;
<span class="term-fg32">+	&quot;golang.org&#47;x&#47;exp&#47;slices&quot;</span>
 )
&nbsp;
 const (
<span class="term-fg36">@@ -177,6 +181,9 @@</span> 	GetPooledTransactionsMsg:      handleGetPooledTransactions,
 	PooledTransactionsMsg:         handlePooledTransactions,
 }
&nbsp;
<span class="term-fg32">+&#47;&#47; CHANGE(immutable): Codes to filter out from public peers. These codes are for consuming state from peers.</span>
<span class="term-fg32">+var ignoredCodes = []uint64{NewBlockHashesMsg, NewBlockMsg, TransactionsMsg, NewPooledTransactionHashesMsg, PooledTransactionsMsg}</span>
<span class="term-fg32">+</span>
 &#47;&#47; handleMessage is invoked whenever an inbound message is received from a remote
 &#47;&#47; peer. The remote connection is torn down upon returning any error.
 func handleMessage(backend Backend, peer *Peer) error {
<span class="term-fg36">@@ -188,6 +195,35 @@</span> 	}
 	if msg.Size &gt; maxMessageSize {
 		return fmt.Errorf(&quot;%w: %v &gt; %v&quot;, errMsgTooLarge, msg.Size, maxMessageSize)
 	}
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Ignore messages from peers not in the private subnet if configured to do so.</span>
<span class="term-fg32">+	if subnetStr, isLocalOnly := os.LookupEnv(&quot;GETH_FLAG_P2P_SUBNET&quot;); isLocalOnly {</span>
<span class="term-fg32">+		&#47;&#47; Parse the subnet string.</span>
<span class="term-fg32">+		subnet, err := netip.ParsePrefix(subnetStr)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return fmt.Errorf(&quot;failed to parse private subnet string (%s): %v&quot;, subnetStr, err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		&#47;&#47; Convert the peer IP to an address.</span>
<span class="term-fg32">+		peerAddr, err := netip.ParseAddr(peer.Node().IP().String())</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return fmt.Errorf(&quot;failed to parse peer IP: %v&quot;, err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		&#47;&#47; Handle specific msg codes if not in the subnet.</span>
<span class="term-fg32">+		if !subnet.Contains(peerAddr) {</span>
<span class="term-fg32">+			&#47;&#47; We only want to discard messages that would be consuming state, e.g. NewBlockMsg.</span>
<span class="term-fg32">+			&#47;&#47; We don&#39;t want to discard messages that are requesting state, e.g. GetBlockHeadersMsg,</span>
<span class="term-fg32">+			&#47;&#47; as this is required for recieving state in syncing for example.</span>
<span class="term-fg32">+			if slices.Contains(ignoredCodes, msg.Code) {</span>
<span class="term-fg32">+				&#47;&#47; External peers should be configured to not send state to the public peer node.</span>
<span class="term-fg32">+				&#47;&#47; Log the peer information so that we can follow up as to why the peer is sending messages.</span>
<span class="term-fg32">+				log.Warn(&quot;ignoring message from peer outside of required subnet&quot;,</span>
<span class="term-fg32">+					&quot;subnet&quot;, subnet.String(), &quot;peerAddr&quot;, peerAddr.String(), &quot;msgCode&quot;, msg.Code,</span>
<span class="term-fg32">+					&quot;peerID&quot;, peer.ID(), &quot;peerFullname&quot;, peer.Fullname())</span>
<span class="term-fg32">+				return msg.Discard()</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
 	defer msg.Discard()
&nbsp;
 	var handlers = eth68</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-059ae9884a302d61c34a57e1" role="button"
                       aria-expanded="false" aria-controls="id-059ae9884a302d61c34a57e1">
                        <code>eth/state_accessor.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/eth/state_accessor.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/eth/state_accessor.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+1</span></div>
                            <div class="text-start"><span class="text-danger">-1</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-059ae9884a302d61c34a57e1"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;state_accessor.go immutable-geth&#47;eth&#47;state_accessor.go</span>
<span class="term-fg1">index 526361a2b8a6da8d3a5c7a0e56a37238f500cd1c..7e368592d81c39444f07d4be59589345fb89c288 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;state_accessor.go</span>
<span class="term-fg1">+++ immutable-geth&#47;eth&#47;state_accessor.go</span>
<span class="term-fg36">@@ -242,7 +242,7 @@</span> 	for idx, tx := range block.Transactions() {
 		&#47;&#47; Assemble the transaction call message and return if the requested offset
 		msg, _ := core.TransactionToMessage(tx, signer, block.BaseFee())
 		txContext := core.NewEVMTxContext(msg)
<span class="term-fg31">-		context := core.NewEVMBlockContext(block.Header(), eth.blockchain, nil)</span>
<span class="term-fg32">+		context := core.NewEVMBlockContext(block.Header(), eth.blockchain, nil, eth.blockchain.Config())</span>
 		if idx == txIndex {
 			return msg, context, statedb, release, nil
 		}</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-f296ee08456ec9773cd78f3e" role="button"
                       aria-expanded="false" aria-controls="id-f296ee08456ec9773cd78f3e">
                        <code>eth/tracers/api.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/eth/tracers/api.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/eth/tracers/api.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+11</span></div>
                            <div class="text-start"><span class="text-danger">-6</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-f296ee08456ec9773cd78f3e"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;api.go immutable-geth&#47;eth&#47;tracers&#47;api.go</span>
<span class="term-fg1">index 68331082052648ad30e8f70a20aee0488ec7b7eb..5e8db7f289f9b5630854978ffccb7fe6c1a1b323 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;tracers&#47;api.go</span>
<span class="term-fg1">+++ immutable-geth&#47;eth&#47;tracers&#47;api.go</span>
<span class="term-fg36">@@ -266,7 +266,7 @@</span> 			&#47;&#47; Fetch and execute the block trace taskCh
 			for task := range taskCh {
 				var (
 					signer   = types.MakeSigner(api.backend.ChainConfig(), task.block.Number(), task.block.Time())
<span class="term-fg31">-					blockCtx = core.NewEVMBlockContext(task.block.Header(), api.chainContext(ctx), nil)</span>
<span class="term-fg32">+					blockCtx = core.NewEVMBlockContext(task.block.Header(), api.chainContext(ctx), nil, api.backend.ChainConfig())</span>
 				)
 				&#47;&#47; Trace all the transactions contained within
 				for i, tx := range task.block.Transactions() {
<span class="term-fg36">@@ -523,7 +523,7 @@</span> 	var (
 		roots              []common.Hash
 		signer             = types.MakeSigner(api.backend.ChainConfig(), block.Number(), block.Time())
 		chainConfig        = api.backend.ChainConfig()
<span class="term-fg31">-		vmctx              = core.NewEVMBlockContext(block.Header(), api.chainContext(ctx), nil)</span>
<span class="term-fg32">+		vmctx              = core.NewEVMBlockContext(block.Header(), api.chainContext(ctx), nil, api.backend.ChainConfig())</span>
 		deleteEmptyObjects = chainConfig.IsEIP158(block.Number())
 	)
 	for i, tx := range block.Transactions() {
<span class="term-fg36">@@ -599,7 +599,7 @@</span> 	var (
 		txs       = block.Transactions()
 		blockHash = block.Hash()
 		is158     = api.backend.ChainConfig().IsEIP158(block.Number())
<span class="term-fg31">-		blockCtx  = core.NewEVMBlockContext(block.Header(), api.chainContext(ctx), nil)</span>
<span class="term-fg32">+		blockCtx  = core.NewEVMBlockContext(block.Header(), api.chainContext(ctx), nil, api.backend.ChainConfig())</span>
 		signer    = types.MakeSigner(api.backend.ChainConfig(), block.Number(), block.Time())
 		results   = make([]*txTraceResult, len(txs))
 	)
<span class="term-fg36">@@ -632,7 +632,7 @@</span> 	&#47;&#47; Execute all the transaction contained within the block concurrently
 	var (
 		txs       = block.Transactions()
 		blockHash = block.Hash()
<span class="term-fg31">-		blockCtx  = core.NewEVMBlockContext(block.Header(), api.chainContext(ctx), nil)</span>
<span class="term-fg32">+		blockCtx  = core.NewEVMBlockContext(block.Header(), api.chainContext(ctx), nil, api.backend.ChainConfig())</span>
 		signer    = types.MakeSigner(api.backend.ChainConfig(), block.Number(), block.Time())
 		results   = make([]*txTraceResult, len(txs))
 		pend      sync.WaitGroup
<span class="term-fg36">@@ -744,7 +744,7 @@</span> 	var (
 		dumps       []string
 		signer      = types.MakeSigner(api.backend.ChainConfig(), block.Number(), block.Time())
 		chainConfig = api.backend.ChainConfig()
<span class="term-fg31">-		vmctx       = core.NewEVMBlockContext(block.Header(), api.chainContext(ctx), nil)</span>
<span class="term-fg32">+		vmctx       = core.NewEVMBlockContext(block.Header(), api.chainContext(ctx), nil, api.backend.ChainConfig())</span>
 		canon       = true
 	)
 	&#47;&#47; Check if there are any overrides: the caller may wish to enable a future
<span class="term-fg36">@@ -910,7 +910,7 @@</span> 		return nil, err
 	}
 	defer release()
&nbsp;
<span class="term-fg31">-	vmctx := core.NewEVMBlockContext(block.Header(), api.chainContext(ctx), nil)</span>
<span class="term-fg32">+	vmctx := core.NewEVMBlockContext(block.Header(), api.chainContext(ctx), nil, api.backend.ChainConfig())</span>
 	&#47;&#47; Apply the customization rules if required.
 	if config != nil {
 		if err := config.StateOverrides.Apply(statedb); err != nil {
<span class="term-fg36">@@ -1017,6 +1017,11 @@</span> 		canon = false
 	}
 	if block := override.MergeNetsplitBlock; block != nil {
 		copy.MergeNetsplitBlock = block
<span class="term-fg32">+		canon = false</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Add prevrandao fork</span>
<span class="term-fg32">+	if timestamp := override.PrevrandaoTime; timestamp != nil {</span>
<span class="term-fg32">+		copy.PrevrandaoTime = timestamp</span>
 		canon = false
 	}
 	if timestamp := override.ShanghaiTime; timestamp != nil {</div>
    </div>

            
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-a817f7551c771ace9f462bfe"role="button" aria-expanded="false" aria-controls="id-a817f7551c771ace9f462bfe">
        
            <div class="col-12 col-md-12 col-lg-6 col-xl-6 text-start"><h3>params</h3></div>
        

        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2">
            <div class="row line-stat">
                
                
            </div>
        </div>
        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2 ">
            <div class="row line-stat">
                
                    <div class="text-end"><span class="text-success">+90</span></div>
                    <div class="text-start"><span class="text-danger">-7</span></div>
                
                
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-a817f7551c771ace9f462bfe">
        <div></div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-6f6bde476d91f9145d312d07" role="button"
                       aria-expanded="false" aria-controls="id-6f6bde476d91f9145d312d07">
                        <code>params/config.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/params/config.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/params/config.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+24</span></div>
                            <div class="text-start"><span class="text-danger">-2</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-6f6bde476d91f9145d312d07"><span class="term-fg1">diff --git go-ethereum&#47;params&#47;config.go immutable-geth&#47;params&#47;config.go</span>
<span class="term-fg1">index 21ede457fd6820869a935c8b195473519073a58d..a68403742ed37689ac55429a1d4f7c5ad140ba66 100644</span>
<span class="term-fg1">--- go-ethereum&#47;params&#47;config.go</span>
<span class="term-fg1">+++ immutable-geth&#47;params&#47;config.go</span>
<span class="term-fg36">@@ -20,6 +20,7 @@</span> import (
 	&quot;fmt&quot;
 	&quot;math&#47;big&quot;
&nbsp;
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;settings&quot;</span>
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;params&#47;forks&quot;
 )
<span class="term-fg36">@@ -348,6 +349,9 @@</span> 	MergeNetsplitBlock  *big.Int `json:&quot;mergeNetsplitBlock,omitempty&quot;`  &#47;&#47; Virtual fork after The Merge to use as a network splitter
&nbsp;
 	&#47;&#47; Fork scheduling was switched from blocks to timestamps here
&nbsp;
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Add PrevrandaoTime</span>
<span class="term-fg32">+	PrevrandaoTime *uint64 `json:&quot;prevrandaoTime,omitempty&quot;` &#47;&#47; Prevrandao switch time (nil = no fork, 0 = already on prevrandao)</span>
<span class="term-fg32">+</span>
 	ShanghaiTime *uint64 `json:&quot;shanghaiTime,omitempty&quot;` &#47;&#47; Shanghai switch time (nil = no fork, 0 = already on shanghai)
 	CancunTime   *uint64 `json:&quot;cancunTime,omitempty&quot;`   &#47;&#47; Cancun switch time (nil = no fork, 0 = already on cancun)
 	PragueTime   *uint64 `json:&quot;pragueTime,omitempty&quot;`   &#47;&#47; Prague switch time (nil = no fork, 0 = already on prague)
<span class="term-fg36">@@ -365,6 +369,10 @@</span>
 	&#47;&#47; Various consensus engines
 	Ethash *EthashConfig `json:&quot;ethash,omitempty&quot;`
 	Clique *CliqueConfig `json:&quot;clique,omitempty&quot;`
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Add new chain config paramaters</span>
<span class="term-fg32">+	&#47;&#47; IsReorgBlocked will cause the node to treat chain reorg scenarios as an error state</span>
<span class="term-fg32">+	IsReorgBlocked bool `json:&quot;isReorgBlocked,omitempty&quot;`</span>
 }
&nbsp;
 &#47;&#47; EthashConfig is the consensus engine configs for proof-of-work based sealing.
<span class="term-fg36">@@ -396,6 +404,9 @@</span> 	if network == &quot;&quot; {
 		network = &quot;unknown&quot;
 	}
 	banner += fmt.Sprintf(&quot;Chain ID:  %v (%s)\n&quot;, c.ChainID, network)
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Add fork invariants info to the startup banner</span>
<span class="term-fg32">+	banner += fmt.Sprintf(&quot;Reorg Invariants Enabled: %t\n&quot;, c.IsReorgBlocked)</span>
 	switch {
 	case c.Ethash != nil:
 		if c.TerminalTotalDifficulty == nil {
<span class="term-fg36">@@ -448,7 +459,8 @@</span> 	banner += &quot;\n&quot;
&nbsp;
 	&#47;&#47; Add a special section for the merge as it&#39;s non-obvious
 	if c.TerminalTotalDifficulty == nil {
<span class="term-fg31">-		banner += &quot;The Merge is not yet available for this network!\n&quot;</span>
<span class="term-fg32">+		&#47;&#47; CHANGE(immutable): Disable misleading logs. Clique uses difficulty header field for consensus. Immutable zkEVM does not use TerminalTotalDifficulty</span>
<span class="term-fg32">+		&#47;&#47;banner += &quot;The Merge is not yet available for this network!\n&quot;</span>
 		banner += &quot; - Hard-fork specification: https:&#47;&#47;github.com&#47;ethereum&#47;execution-specs&#47;blob&#47;master&#47;network-upgrades&#47;mainnet-upgrades&#47;paris.md\n&quot;
 	} else {
 		banner += &quot;Merge configured:\n&quot;
<span class="term-fg36">@@ -463,6 +475,10 @@</span> 	banner += &quot;\n&quot;
&nbsp;
 	&#47;&#47; Create a list of forks post-merge
 	banner += &quot;Post-Merge hard forks (timestamp based):\n&quot;
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Add section for Prevrandao fork</span>
<span class="term-fg32">+	if c.PrevrandaoTime != nil {</span>
<span class="term-fg32">+		banner += fmt.Sprintf(&quot; - Prevrandao:                  @%-10v\n&quot;, *c.PrevrandaoTime)</span>
<span class="term-fg32">+	}</span>
 	if c.ShanghaiTime != nil {
 		banner += fmt.Sprintf(&quot; - Shanghai:                    @%-10v (https:&#47;&#47;github.com&#47;ethereum&#47;execution-specs&#47;blob&#47;master&#47;network-upgrades&#47;mainnet-upgrades&#47;shanghai.md)\n&quot;, *c.ShanghaiTime)
 	}
<span class="term-fg36">@@ -629,6 +645,8 @@</span> 		{name: &quot;londonBlock&quot;, block: c.LondonBlock},
 		{name: &quot;arrowGlacierBlock&quot;, block: c.ArrowGlacierBlock, optional: true},
 		{name: &quot;grayGlacierBlock&quot;, block: c.GrayGlacierBlock, optional: true},
 		{name: &quot;mergeNetsplitBlock&quot;, block: c.MergeNetsplitBlock, optional: true},
<span class="term-fg32">+		&#47;&#47; CHANGE(immutable): Add prevrandao fork</span>
<span class="term-fg32">+		{name: &quot;prevrandaoTime&quot;, timestamp: c.PrevrandaoTime, optional: true},</span>
 		{name: &quot;shanghaiTime&quot;, timestamp: c.ShanghaiTime},
 		{name: &quot;cancunTime&quot;, timestamp: c.CancunTime, optional: true},
 		{name: &quot;pragueTime&quot;, timestamp: c.PragueTime, optional: true},
<span class="term-fg36">@@ -744,7 +762,11 @@</span> }
&nbsp;
 &#47;&#47; BaseFeeChangeDenominator bounds the amount the base fee can change between blocks.
 func (c *ChainConfig) BaseFeeChangeDenominator() uint64 {
<span class="term-fg31">-	return DefaultBaseFeeChangeDenominator</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): Provide base fee change denominator specific to Immutable zkEVM</span>
<span class="term-fg32">+	if c.IsImmutableZKEVM() {</span>
<span class="term-fg32">+		return settings.BaseFeeChangeDenominator</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return defaultBaseFeeChangeDenominator</span>
 }
&nbsp;
 &#47;&#47; ElasticityMultiplier bounds the maximum gas limit an EIP-1559 block may have.</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-2eb0d303518c0c245918834e" role="button"
                       aria-expanded="false" aria-controls="id-2eb0d303518c0c245918834e">
                        <code>params/immutable_config.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/params/immutable_config.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+59</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-2eb0d303518c0c245918834e"><span class="term-fg1">diff --git go-ethereum&#47;params&#47;immutable_config.go immutable-geth&#47;params&#47;immutable_config.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..2761dd2e519010ae5cb5c49f259cd4489a186419</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;params&#47;immutable_config.go</span>
<span class="term-fg36">@@ -0,0 +1,59 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package params</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;fmt&quot;</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;settings&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; IsImmutableZKEVM returns true if the configured chain ID pertains to an Immutable zkEVM network ID</span>
<span class="term-fg32">+func (c *ChainConfig) IsImmutableZKEVM() bool {</span>
<span class="term-fg32">+	return c != nil &amp;&amp; c.ChainID != nil &amp;&amp;</span>
<span class="term-fg32">+		(c.ChainID.Int64() == settings.MainnetNetworkID ||</span>
<span class="term-fg32">+			c.ChainID.Int64() == settings.TestnetNetworkID ||</span>
<span class="term-fg32">+			c.ChainID.Int64() == settings.DevnetNetworkID)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; IsImmutableZKEVMPrevrandao returns true if the chain configuration has prevrandao fork enabled</span>
<span class="term-fg32">+&#47;&#47; for the specified timestamp. Mainnet is the only network that has a separate prevrandao fork</span>
<span class="term-fg32">+&#47;&#47; to the shanghai fork.</span>
<span class="term-fg32">+func (c *ChainConfig) IsImmutableZKEVMPrevrandao(blockTime uint64) bool {</span>
<span class="term-fg32">+	if !c.IsImmutableZKEVM() {</span>
<span class="term-fg32">+		return false</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if c.PrevrandaoTime == nil {</span>
<span class="term-fg32">+		panic(fmt.Sprintf(&quot;prevrandaoTime not set for Immutable zkEVM network %d&quot;, c.ChainID.Int64()))</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return *c.PrevrandaoTime &lt;= blockTime</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; IsImmutableZKEVMShanghai returns true if the chain configuration has shanghai fork enabled</span>
<span class="term-fg32">+&#47;&#47; and the specified block number and timestamp is past the shanghai timestamp</span>
<span class="term-fg32">+func (c *ChainConfig) IsImmutableZKEVMShanghai(blockNum *big.Int, blockTime uint64) bool {</span>
<span class="term-fg32">+	return c.IsImmutableZKEVM() &amp;&amp; c.IsShanghai(blockNum, blockTime)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; IsValidImmutableZKEVM returns true if the chain configuration is valid for an Immutable zkEVM network</span>
<span class="term-fg32">+func (c *ChainConfig) IsValidImmutableZKEVM() bool {</span>
<span class="term-fg32">+	return c.IsImmutableZKEVM() &amp;&amp;</span>
<span class="term-fg32">+		c.IsReorgBlocked &amp;&amp;</span>
<span class="term-fg32">+		c.Clique != nil &amp;&amp;</span>
<span class="term-fg32">+		c.Clique.Period == settings.SecondsPerBlock</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-9907cd7dc2011240e1d6e17a" role="button"
                       aria-expanded="false" aria-controls="id-9907cd7dc2011240e1d6e17a">
                        <code>params/protocol_params.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/params/protocol_params.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/params/protocol_params.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+3</span></div>
                            <div class="text-start"><span class="text-danger">-1</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-9907cd7dc2011240e1d6e17a"><span class="term-fg1">diff --git go-ethereum&#47;params&#47;protocol_params.go immutable-geth&#47;params&#47;protocol_params.go</span>
<span class="term-fg1">index 7eb63e89ac619c28b9f96bdf7617aa0a2d0fe504..a7604b1988514bbe5fb6d8579d92da9513437c45 100644</span>
<span class="term-fg1">--- go-ethereum&#47;params&#47;protocol_params.go</span>
<span class="term-fg1">+++ immutable-geth&#47;params&#47;protocol_params.go</span>
<span class="term-fg36">@@ -124,7 +124,9 @@</span> 	&#47;&#47; not exist. This logic is similar to call.
 	&#47;&#47; Introduced in Tangerine Whistle (Eip 150)
 	CreateBySelfdestructGas uint64 = 25000
&nbsp;
<span class="term-fg31">-	DefaultBaseFeeChangeDenominator = 8          &#47;&#47; Bounds the amount the base fee can change between blocks.</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): move defaultBaseFeeChangeDenominator to private field so that we know it is not used elsewhere.</span>
<span class="term-fg32">+	&#47;&#47; The respective getter method from ChainConfig type must always be used to access this value.</span>
<span class="term-fg32">+	defaultBaseFeeChangeDenominator = 8          &#47;&#47; Bounds the amount the base fee can change between blocks.</span>
 	DefaultElasticityMultiplier     = 2          &#47;&#47; Bounds the maximum gas limit an EIP-1559 block may have.
 	InitialBaseFee                  = 1000000000 &#47;&#47; Initial base fee for EIP-1559 blocks.
</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-eadf72165977eeaddca33117" role="button"
                       aria-expanded="false" aria-controls="id-eadf72165977eeaddca33117">
                        <code>params/version.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/params/version.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/params/version.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+4</span></div>
                            <div class="text-start"><span class="text-danger">-4</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-eadf72165977eeaddca33117"><span class="term-fg1">diff --git go-ethereum&#47;params&#47;version.go immutable-geth&#47;params&#47;version.go</span>
<span class="term-fg1">index a2c258ff58cb604141f6489e5d6d7211d10763c5..5f2ea532825a9f05a6963c2f2e1cef8817319486 100644</span>
<span class="term-fg1">--- go-ethereum&#47;params&#47;version.go</span>
<span class="term-fg1">+++ immutable-geth&#47;params&#47;version.go</span>
<span class="term-fg36">@@ -21,10 +21,10 @@</span> 	&quot;fmt&quot;
 )
&nbsp;
 const (
<span class="term-fg31">-	VersionMajor = 1        &#47;&#47; Major version component of the current release</span>
<span class="term-fg31">-	VersionMinor = 13       &#47;&#47; Minor version component of the current release</span>
<span class="term-fg31">-	VersionPatch = 15       &#47;&#47; Patch version component of the current release</span>
<span class="term-fg31">-	VersionMeta  = &quot;stable&quot; &#47;&#47; Version metadata to append to the version string</span>
<span class="term-fg32">+	VersionMajor = 1         &#47;&#47; Major version component of the current release</span>
<span class="term-fg32">+	VersionMinor = 0         &#47;&#47; Minor version component of the current release</span>
<span class="term-fg32">+	VersionPatch = 0         &#47;&#47; Patch version component of the current release</span>
<span class="term-fg32">+	VersionMeta  = &quot;beta.14&quot; &#47;&#47; Version metadata to append to the version string</span>
 )
&nbsp;
 &#47;&#47; Version holds the textual version string.</div>
    </div>

            
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-d2e8debb5b219ca001087dac"role="button" aria-expanded="false" aria-controls="id-d2e8debb5b219ca001087dac">
        
            <div class="col-12 col-md-12 col-lg-6 col-xl-6 text-start"><h3>ethclient</h3></div>
        

        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2">
            <div class="row line-stat">
                
                
            </div>
        </div>
        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2 ">
            <div class="row line-stat">
                
                    <div class="text-end"><span class="text-success">+48</span></div>
                    <div class="text-start"><span class="text-danger">-0</span></div>
                
                
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-d2e8debb5b219ca001087dac">
        <div></div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-d8f55a2fd36b3c102ed5cba8" role="button"
                       aria-expanded="false" aria-controls="id-d8f55a2fd36b3c102ed5cba8">
                        <code>ethclient/gethclient/immutable_gethclient.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/ethclient/gethclient/immutable_gethclient.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+48</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-d8f55a2fd36b3c102ed5cba8"><span class="term-fg1">diff --git go-ethereum&#47;ethclient&#47;gethclient&#47;immutable_gethclient.go immutable-geth&#47;ethclient&#47;gethclient&#47;immutable_gethclient.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..197723822996bd50a035392c3a072530817fa053</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;ethclient&#47;gethclient&#47;immutable_gethclient.go</span>
<span class="term-fg36">@@ -0,0 +1,48 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package gethclient</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; This file introduces clique specific APIs to the gethclient. A separate client could have been created</span>
<span class="term-fg32">+&#47;&#47; however, many private functions would have to be duplicated and the separation effort is not justifiable</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;context&quot;</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; GetSigners Retrieves the list of authorized signers at the specified block number.</span>
<span class="term-fg32">+func (ec *Client) GetSigners(ctx context.Context, blockNumber *big.Int) ([]common.Address, error) {</span>
<span class="term-fg32">+	var signers []common.Address</span>
<span class="term-fg32">+	err := ec.c.CallContext(</span>
<span class="term-fg32">+		ctx, &amp;signers, &quot;clique_getSigners&quot;, toBlockNumArg(blockNumber),</span>
<span class="term-fg32">+	)</span>
<span class="term-fg32">+	return signers, err</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Propose Adds a new authorization proposal that the signer will attempt to push through.</span>
<span class="term-fg32">+&#47;&#47; If the auth parameter is true, the local signer votes for the given address to be included</span>
<span class="term-fg32">+&#47;&#47; in the set of authorized signers.</span>
<span class="term-fg32">+&#47;&#47; With auth set to false, the vote is against the address.</span>
<span class="term-fg32">+func (ec *Client) Propose(ctx context.Context, validator common.Address, auth bool) error {</span>
<span class="term-fg32">+	var result interface{}</span>
<span class="term-fg32">+	err := ec.c.CallContext(</span>
<span class="term-fg32">+		ctx, &amp;result, &quot;clique_propose&quot;, validator.String(), auth,</span>
<span class="term-fg32">+	)</span>
<span class="term-fg32">+	return err</span>
<span class="term-fg32">+}</span></div>
    </div>

            
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-603308142cf4b42d7e5d752b"role="button" aria-expanded="false" aria-controls="id-603308142cf4b42d7e5d752b">
        
            <div class="col-12 col-md-12 col-lg-6 col-xl-6 text-start"><h3>e2e</h3></div>
        

        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2">
            <div class="row line-stat">
                
                
            </div>
        </div>
        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2 ">
            <div class="row line-stat">
                
                    <div class="text-end"><span class="text-success">+5228</span></div>
                    <div class="text-start"><span class="text-danger">-0</span></div>
                
                
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-603308142cf4b42d7e5d752b">
        <div><p>E2E test suite for Immutable geth</p>
</div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-3876631c7094a90651383c5c" role="button"
                       aria-expanded="false" aria-controls="id-3876631c7094a90651383c5c">
                        <code>tests/immutable/README.md</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/README.md" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+25</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-3876631c7094a90651383c5c"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;README.md immutable-geth&#47;tests&#47;immutable&#47;README.md</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..8358afd3d8636b7ee03e0e363e588f1862faa27b</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;README.md</span>
<span class="term-fg36">@@ -0,0 +1,25 @@</span>
<span class="term-fg32">+# Immutable E2E Tests</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+Use this pkg to run E2E tests against local or remote deployments.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+You can use the CI scripts to spin up a local network and test:</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+```sh</span>
<span class="term-fg32">+.github&#47;scripts&#47;bootstrap_test.sh</span>
<span class="term-fg32">+```</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+If you want to run individual tests for example:</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+```sh</span>
<span class="term-fg32">+export PRIV_KEY=&quot;some throwaway key&quot;</span>
<span class="term-fg32">+.&#47;build&#47;bin&#47;geth immutable bootstrap local --override.prevrandao=$(($(date +%s) + 5)) --override.cancun=$(($(date +%s) + 5)) --override.shanghai=$(($(date +%s) + 5))</span>
<span class="term-fg32">+go test -v .&#47;tests&#47;immutable&#47;... -run TestImmutable_Cancun_4844TransactionsDisabled</span>
<span class="term-fg32">+```</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+That will run the local chain with all required forks 5 seconds after genesis. These forks must be enabled after genesis.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+You can use `-privkey` instead of an env var if you wish. For example:</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+```sh</span>
<span class="term-fg32">+go test -v .&#47;tests&#47;immutable&#47;... -privkey=&quot;&#47;path&#47;to&#47;file&quot; -run TestImmutable_Cancun_4844TransactionsDisabled</span>
<span class="term-fg32">+```</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-059c75235230633565538884" role="button"
                       aria-expanded="false" aria-controls="id-059c75235230633565538884">
                        <code>tests/immutable/cancun/blobbasefee/abi.json</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/cancun/blobbasefee/abi.json" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+14</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-059c75235230633565538884"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;cancun&#47;blobbasefee&#47;abi.json immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;blobbasefee&#47;abi.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..390ece2b2a5fa84aa463773d0fd2a3e864ef1815</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;blobbasefee&#47;abi.json</span>
<span class="term-fg36">@@ -0,0 +1,15 @@</span>
<span class="term-fg32">+[</span>
<span class="term-fg32">+	{</span>
<span class="term-fg32">+		&quot;inputs&quot;: [],</span>
<span class="term-fg32">+		&quot;name&quot;: &quot;blobBaseFee&quot;,</span>
<span class="term-fg32">+		&quot;outputs&quot;: [</span>
<span class="term-fg32">+			{</span>
<span class="term-fg32">+				&quot;internalType&quot;: &quot;uint256&quot;,</span>
<span class="term-fg32">+				&quot;name&quot;: &quot;&quot;,</span>
<span class="term-fg32">+				&quot;type&quot;: &quot;uint256&quot;</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		],</span>
<span class="term-fg32">+		&quot;stateMutability&quot;: &quot;view&quot;,</span>
<span class="term-fg32">+		&quot;type&quot;: &quot;function&quot;</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+]</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-1607992c4b7fde017baea3ab" role="button"
                       aria-expanded="false" aria-controls="id-1607992c4b7fde017baea3ab">
                        <code>tests/immutable/cancun/blobbasefee/blobbasefee.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/cancun/blobbasefee/blobbasefee.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+234</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-1607992c4b7fde017baea3ab"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;cancun&#47;blobbasefee&#47;blobbasefee.go immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;blobbasefee&#47;blobbasefee.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..718ab9cec8c8d3f3ae7c55e70494963d1805185f</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;blobbasefee&#47;blobbasefee.go</span>
<span class="term-fg36">@@ -0,0 +1,234 @@</span>
<span class="term-fg32">+&#47;&#47; Code generated - DO NOT EDIT.</span>
<span class="term-fg32">+&#47;&#47; This file is a generated binding and any manual changes will be lost.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package blobbasefee</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;errors&quot;</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+	&quot;strings&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	ethereum &quot;github.com&#47;ethereum&#47;go-ethereum&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&#47;abi&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&#47;abi&#47;bind&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;event&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Reference imports to suppress errors if they are not otherwise used.</span>
<span class="term-fg32">+var (</span>
<span class="term-fg32">+	_ = errors.New</span>
<span class="term-fg32">+	_ = big.NewInt</span>
<span class="term-fg32">+	_ = strings.NewReader</span>
<span class="term-fg32">+	_ = ethereum.NotFound</span>
<span class="term-fg32">+	_ = bind.Bind</span>
<span class="term-fg32">+	_ = common.Big1</span>
<span class="term-fg32">+	_ = types.BloomLookup</span>
<span class="term-fg32">+	_ = event.NewSubscription</span>
<span class="term-fg32">+	_ = abi.ConvertType</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; BlobBaseFeeMetaData contains all meta data concerning the BlobBaseFee contract.</span>
<span class="term-fg32">+var BlobBaseFeeMetaData = &amp;bind.MetaData{</span>
<span class="term-fg32">+	ABI: &quot;[{\&quot;inputs\&quot;:[],\&quot;name\&quot;:\&quot;blobBaseFee\&quot;,\&quot;outputs\&quot;:[{\&quot;internalType\&quot;:\&quot;uint256\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;}],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;}]&quot;,</span>
<span class="term-fg32">+	Bin: &quot;0x6080604052348015600e575f80fd5b5060ae80601a5f395ff3fe6080604052348015600e575f80fd5b50600436106026575f3560e01c8063f820614014602a575b5f80fd5b60306044565b604051603b91906061565b60405180910390f35b5f4a905090565b5f819050919050565b605b81604b565b82525050565b5f60208201905060725f8301846054565b9291505056fea2646970667358221220f36b1e170b1a918aa653ca6f6ee810faa51fe43e25828bb9b8caedb51031bee264736f6c63430008190033&quot;,</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; BlobBaseFeeABI is the input ABI used to generate the binding from.</span>
<span class="term-fg32">+&#47;&#47; Deprecated: Use BlobBaseFeeMetaData.ABI instead.</span>
<span class="term-fg32">+var BlobBaseFeeABI = BlobBaseFeeMetaData.ABI</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; BlobBaseFeeBin is the compiled bytecode used for deploying new contracts.</span>
<span class="term-fg32">+&#47;&#47; Deprecated: Use BlobBaseFeeMetaData.Bin instead.</span>
<span class="term-fg32">+var BlobBaseFeeBin = BlobBaseFeeMetaData.Bin</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; DeployBlobBaseFee deploys a new Ethereum contract, binding an instance of BlobBaseFee to it.</span>
<span class="term-fg32">+func DeployBlobBaseFee(auth *bind.TransactOpts, backend bind.ContractBackend) (common.Address, *types.Transaction, *BlobBaseFee, error) {</span>
<span class="term-fg32">+	parsed, err := BlobBaseFeeMetaData.GetAbi()</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return common.Address{}, nil, nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if parsed == nil {</span>
<span class="term-fg32">+		return common.Address{}, nil, nil, errors.New(&quot;GetABI returned nil&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	address, tx, contract, err := bind.DeployContract(auth, *parsed, common.FromHex(BlobBaseFeeBin), backend)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return common.Address{}, nil, nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return address, tx, &amp;BlobBaseFee{BlobBaseFeeCaller: BlobBaseFeeCaller{contract: contract}, BlobBaseFeeTransactor: BlobBaseFeeTransactor{contract: contract}, BlobBaseFeeFilterer: BlobBaseFeeFilterer{contract: contract}}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; BlobBaseFee is an auto generated Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type BlobBaseFee struct {</span>
<span class="term-fg32">+	BlobBaseFeeCaller     &#47;&#47; Read-only binding to the contract</span>
<span class="term-fg32">+	BlobBaseFeeTransactor &#47;&#47; Write-only binding to the contract</span>
<span class="term-fg32">+	BlobBaseFeeFilterer   &#47;&#47; Log filterer for contract events</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; BlobBaseFeeCaller is an auto generated read-only Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type BlobBaseFeeCaller struct {</span>
<span class="term-fg32">+	contract *bind.BoundContract &#47;&#47; Generic contract wrapper for the low level calls</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; BlobBaseFeeTransactor is an auto generated write-only Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type BlobBaseFeeTransactor struct {</span>
<span class="term-fg32">+	contract *bind.BoundContract &#47;&#47; Generic contract wrapper for the low level calls</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; BlobBaseFeeFilterer is an auto generated log filtering Go binding around an Ethereum contract events.</span>
<span class="term-fg32">+type BlobBaseFeeFilterer struct {</span>
<span class="term-fg32">+	contract *bind.BoundContract &#47;&#47; Generic contract wrapper for the low level calls</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; BlobBaseFeeSession is an auto generated Go binding around an Ethereum contract,</span>
<span class="term-fg32">+&#47;&#47; with pre-set call and transact options.</span>
<span class="term-fg32">+type BlobBaseFeeSession struct {</span>
<span class="term-fg32">+	Contract     *BlobBaseFee      &#47;&#47; Generic contract binding to set the session for</span>
<span class="term-fg32">+	CallOpts     bind.CallOpts     &#47;&#47; Call options to use throughout this session</span>
<span class="term-fg32">+	TransactOpts bind.TransactOpts &#47;&#47; Transaction auth options to use throughout this session</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; BlobBaseFeeCallerSession is an auto generated read-only Go binding around an Ethereum contract,</span>
<span class="term-fg32">+&#47;&#47; with pre-set call options.</span>
<span class="term-fg32">+type BlobBaseFeeCallerSession struct {</span>
<span class="term-fg32">+	Contract *BlobBaseFeeCaller &#47;&#47; Generic contract caller binding to set the session for</span>
<span class="term-fg32">+	CallOpts bind.CallOpts      &#47;&#47; Call options to use throughout this session</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; BlobBaseFeeTransactorSession is an auto generated write-only Go binding around an Ethereum contract,</span>
<span class="term-fg32">+&#47;&#47; with pre-set transact options.</span>
<span class="term-fg32">+type BlobBaseFeeTransactorSession struct {</span>
<span class="term-fg32">+	Contract     *BlobBaseFeeTransactor &#47;&#47; Generic contract transactor binding to set the session for</span>
<span class="term-fg32">+	TransactOpts bind.TransactOpts      &#47;&#47; Transaction auth options to use throughout this session</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; BlobBaseFeeRaw is an auto generated low-level Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type BlobBaseFeeRaw struct {</span>
<span class="term-fg32">+	Contract *BlobBaseFee &#47;&#47; Generic contract binding to access the raw methods on</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; BlobBaseFeeCallerRaw is an auto generated low-level read-only Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type BlobBaseFeeCallerRaw struct {</span>
<span class="term-fg32">+	Contract *BlobBaseFeeCaller &#47;&#47; Generic read-only contract binding to access the raw methods on</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; BlobBaseFeeTransactorRaw is an auto generated low-level write-only Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type BlobBaseFeeTransactorRaw struct {</span>
<span class="term-fg32">+	Contract *BlobBaseFeeTransactor &#47;&#47; Generic write-only contract binding to access the raw methods on</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewBlobBaseFee creates a new instance of BlobBaseFee, bound to a specific deployed contract.</span>
<span class="term-fg32">+func NewBlobBaseFee(address common.Address, backend bind.ContractBackend) (*BlobBaseFee, error) {</span>
<span class="term-fg32">+	contract, err := bindBlobBaseFee(address, backend, backend, backend)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;BlobBaseFee{BlobBaseFeeCaller: BlobBaseFeeCaller{contract: contract}, BlobBaseFeeTransactor: BlobBaseFeeTransactor{contract: contract}, BlobBaseFeeFilterer: BlobBaseFeeFilterer{contract: contract}}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewBlobBaseFeeCaller creates a new read-only instance of BlobBaseFee, bound to a specific deployed contract.</span>
<span class="term-fg32">+func NewBlobBaseFeeCaller(address common.Address, caller bind.ContractCaller) (*BlobBaseFeeCaller, error) {</span>
<span class="term-fg32">+	contract, err := bindBlobBaseFee(address, caller, nil, nil)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;BlobBaseFeeCaller{contract: contract}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewBlobBaseFeeTransactor creates a new write-only instance of BlobBaseFee, bound to a specific deployed contract.</span>
<span class="term-fg32">+func NewBlobBaseFeeTransactor(address common.Address, transactor bind.ContractTransactor) (*BlobBaseFeeTransactor, error) {</span>
<span class="term-fg32">+	contract, err := bindBlobBaseFee(address, nil, transactor, nil)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;BlobBaseFeeTransactor{contract: contract}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewBlobBaseFeeFilterer creates a new log filterer instance of BlobBaseFee, bound to a specific deployed contract.</span>
<span class="term-fg32">+func NewBlobBaseFeeFilterer(address common.Address, filterer bind.ContractFilterer) (*BlobBaseFeeFilterer, error) {</span>
<span class="term-fg32">+	contract, err := bindBlobBaseFee(address, nil, nil, filterer)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;BlobBaseFeeFilterer{contract: contract}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; bindBlobBaseFee binds a generic wrapper to an already deployed contract.</span>
<span class="term-fg32">+func bindBlobBaseFee(address common.Address, caller bind.ContractCaller, transactor bind.ContractTransactor, filterer bind.ContractFilterer) (*bind.BoundContract, error) {</span>
<span class="term-fg32">+	parsed, err := BlobBaseFeeMetaData.GetAbi()</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return bind.NewBoundContract(address, *parsed, caller, transactor, filterer), nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Call invokes the (constant) contract method with params as input values and</span>
<span class="term-fg32">+&#47;&#47; sets the output to result. The result type might be a single field for simple</span>
<span class="term-fg32">+&#47;&#47; returns, a slice of interfaces for anonymous returns and a struct for named</span>
<span class="term-fg32">+&#47;&#47; returns.</span>
<span class="term-fg32">+func (_BlobBaseFee *BlobBaseFeeRaw) Call(opts *bind.CallOpts, result *[]interface{}, method string, params ...interface{}) error {</span>
<span class="term-fg32">+	return _BlobBaseFee.Contract.BlobBaseFeeCaller.contract.Call(opts, result, method, params...)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Transfer initiates a plain transaction to move funds to the contract, calling</span>
<span class="term-fg32">+&#47;&#47; its default method if one is available.</span>
<span class="term-fg32">+func (_BlobBaseFee *BlobBaseFeeRaw) Transfer(opts *bind.TransactOpts) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _BlobBaseFee.Contract.BlobBaseFeeTransactor.contract.Transfer(opts)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Transact invokes the (paid) contract method with params as input values.</span>
<span class="term-fg32">+func (_BlobBaseFee *BlobBaseFeeRaw) Transact(opts *bind.TransactOpts, method string, params ...interface{}) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _BlobBaseFee.Contract.BlobBaseFeeTransactor.contract.Transact(opts, method, params...)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Call invokes the (constant) contract method with params as input values and</span>
<span class="term-fg32">+&#47;&#47; sets the output to result. The result type might be a single field for simple</span>
<span class="term-fg32">+&#47;&#47; returns, a slice of interfaces for anonymous returns and a struct for named</span>
<span class="term-fg32">+&#47;&#47; returns.</span>
<span class="term-fg32">+func (_BlobBaseFee *BlobBaseFeeCallerRaw) Call(opts *bind.CallOpts, result *[]interface{}, method string, params ...interface{}) error {</span>
<span class="term-fg32">+	return _BlobBaseFee.Contract.contract.Call(opts, result, method, params...)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Transfer initiates a plain transaction to move funds to the contract, calling</span>
<span class="term-fg32">+&#47;&#47; its default method if one is available.</span>
<span class="term-fg32">+func (_BlobBaseFee *BlobBaseFeeTransactorRaw) Transfer(opts *bind.TransactOpts) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _BlobBaseFee.Contract.contract.Transfer(opts)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Transact invokes the (paid) contract method with params as input values.</span>
<span class="term-fg32">+func (_BlobBaseFee *BlobBaseFeeTransactorRaw) Transact(opts *bind.TransactOpts, method string, params ...interface{}) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _BlobBaseFee.Contract.contract.Transact(opts, method, params...)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; BlobBaseFee is a free data retrieval call binding the contract method 0xf8206140.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function blobBaseFee() view returns(uint256)</span>
<span class="term-fg32">+func (_BlobBaseFee *BlobBaseFeeCaller) BlobBaseFee(opts *bind.CallOpts) (*big.Int, error) {</span>
<span class="term-fg32">+	var out []interface{}</span>
<span class="term-fg32">+	err := _BlobBaseFee.contract.Call(opts, &amp;out, &quot;blobBaseFee&quot;)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return *new(*big.Int), err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	out0 := *abi.ConvertType(out[0], new(*big.Int)).(**big.Int)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return out0, err</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; BlobBaseFee is a free data retrieval call binding the contract method 0xf8206140.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function blobBaseFee() view returns(uint256)</span>
<span class="term-fg32">+func (_BlobBaseFee *BlobBaseFeeSession) BlobBaseFee() (*big.Int, error) {</span>
<span class="term-fg32">+	return _BlobBaseFee.Contract.BlobBaseFee(&amp;_BlobBaseFee.CallOpts)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; BlobBaseFee is a free data retrieval call binding the contract method 0xf8206140.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function blobBaseFee() view returns(uint256)</span>
<span class="term-fg32">+func (_BlobBaseFee *BlobBaseFeeCallerSession) BlobBaseFee() (*big.Int, error) {</span>
<span class="term-fg32">+	return _BlobBaseFee.Contract.BlobBaseFee(&amp;_BlobBaseFee.CallOpts)</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-50be2f5311e3f379a825b8b9" role="button"
                       aria-expanded="false" aria-controls="id-50be2f5311e3f379a825b8b9">
                        <code>tests/immutable/cancun/blobbasefee/blobbasefee.sol</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/cancun/blobbasefee/blobbasefee.sol" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+10</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-50be2f5311e3f379a825b8b9"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;cancun&#47;blobbasefee&#47;blobbasefee.sol immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;blobbasefee&#47;blobbasefee.sol</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..df517f9e8c9b70563bee8efd3a5b602d007ab9ab</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;blobbasefee&#47;blobbasefee.sol</span>
<span class="term-fg36">@@ -0,0 +1,10 @@</span>
<span class="term-fg32">+&#47;&#47; SPDX-License-Identifier: UNLICENSED</span>
<span class="term-fg32">+pragma solidity 0.8.25;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+contract BlobBaseFee {</span>
<span class="term-fg32">+    function blobBaseFee() external view returns (uint) {</span>
<span class="term-fg32">+        return block.blobbasefee;</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; build&#47;bin&#47;abigen --abi .&#47;tests&#47;immutable&#47;cancun&#47;blobbasefee&#47;abi.json --pkg blobbasefee --type BlobBaseFee --out .&#47;tests&#47;immutable&#47;cancun&#47;blobbasefee&#47;blobbasefee.go --bin .&#47;tests&#47;immutable&#47;cancun&#47;blobbasefee&#47;bytecode.bin</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-bab90a9f99e9aa615af5474d" role="button"
                       aria-expanded="false" aria-controls="id-bab90a9f99e9aa615af5474d">
                        <code>tests/immutable/cancun/blobbasefee/bytecode.bin</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/cancun/blobbasefee/bytecode.bin" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+0</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-bab90a9f99e9aa615af5474d"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;cancun&#47;blobbasefee&#47;bytecode.bin immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;blobbasefee&#47;bytecode.bin</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..cb7ac7d191474bbeb5db280cb1bec1f469e757a5</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;blobbasefee&#47;bytecode.bin</span>
<span class="term-fg36">@@ -0,0 +1 @@</span>
<span class="term-fg32">+6080604052348015600e575f80fd5b5060ae80601a5f395ff3fe6080604052348015600e575f80fd5b50600436106026575f3560e01c8063f820614014602a575b5f80fd5b60306044565b604051603b91906061565b60405180910390f35b5f4a905090565b5f819050919050565b605b81604b565b82525050565b5f60208201905060725f8301846054565b9291505056fea2646970667358221220f36b1e170b1a918aa653ca6f6ee810faa51fe43e25828bb9b8caedb51031bee264736f6c63430008190033</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-e3d41f862f6f2f56f1163346" role="button"
                       aria-expanded="false" aria-controls="id-e3d41f862f6f2f56f1163346">
                        <code>tests/immutable/cancun/blobhash/abi.json</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/cancun/blobhash/abi.json" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+20</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-e3d41f862f6f2f56f1163346"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;cancun&#47;blobhash&#47;abi.json immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;blobhash&#47;abi.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..0f0abc753cf737f402919d29a6cbd36333dc081b</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;blobhash&#47;abi.json</span>
<span class="term-fg36">@@ -0,0 +1,21 @@</span>
<span class="term-fg32">+[</span>
<span class="term-fg32">+	{</span>
<span class="term-fg32">+		&quot;inputs&quot;: [</span>
<span class="term-fg32">+			{</span>
<span class="term-fg32">+				&quot;internalType&quot;: &quot;uint256&quot;,</span>
<span class="term-fg32">+				&quot;name&quot;: &quot;index&quot;,</span>
<span class="term-fg32">+				&quot;type&quot;: &quot;uint256&quot;</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		],</span>
<span class="term-fg32">+		&quot;name&quot;: &quot;blobHash&quot;,</span>
<span class="term-fg32">+		&quot;outputs&quot;: [</span>
<span class="term-fg32">+			{</span>
<span class="term-fg32">+				&quot;internalType&quot;: &quot;bytes32&quot;,</span>
<span class="term-fg32">+				&quot;name&quot;: &quot;&quot;,</span>
<span class="term-fg32">+				&quot;type&quot;: &quot;bytes32&quot;</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		],</span>
<span class="term-fg32">+		&quot;stateMutability&quot;: &quot;view&quot;,</span>
<span class="term-fg32">+		&quot;type&quot;: &quot;function&quot;</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+]</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-b10c4f0b42211dd0628affdb" role="button"
                       aria-expanded="false" aria-controls="id-b10c4f0b42211dd0628affdb">
                        <code>tests/immutable/cancun/blobhash/blobhash.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/cancun/blobhash/blobhash.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+234</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-b10c4f0b42211dd0628affdb"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;cancun&#47;blobhash&#47;blobhash.go immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;blobhash&#47;blobhash.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..743ad985d233b341c841247b2b366dd048a8ddff</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;blobhash&#47;blobhash.go</span>
<span class="term-fg36">@@ -0,0 +1,234 @@</span>
<span class="term-fg32">+&#47;&#47; Code generated - DO NOT EDIT.</span>
<span class="term-fg32">+&#47;&#47; This file is a generated binding and any manual changes will be lost.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package blobhash</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;errors&quot;</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+	&quot;strings&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	ethereum &quot;github.com&#47;ethereum&#47;go-ethereum&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&#47;abi&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&#47;abi&#47;bind&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;event&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Reference imports to suppress errors if they are not otherwise used.</span>
<span class="term-fg32">+var (</span>
<span class="term-fg32">+	_ = errors.New</span>
<span class="term-fg32">+	_ = big.NewInt</span>
<span class="term-fg32">+	_ = strings.NewReader</span>
<span class="term-fg32">+	_ = ethereum.NotFound</span>
<span class="term-fg32">+	_ = bind.Bind</span>
<span class="term-fg32">+	_ = common.Big1</span>
<span class="term-fg32">+	_ = types.BloomLookup</span>
<span class="term-fg32">+	_ = event.NewSubscription</span>
<span class="term-fg32">+	_ = abi.ConvertType</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; BlobhashMetaData contains all meta data concerning the Blobhash contract.</span>
<span class="term-fg32">+var BlobhashMetaData = &amp;bind.MetaData{</span>
<span class="term-fg32">+	ABI: &quot;[{\&quot;inputs\&quot;:[{\&quot;internalType\&quot;:\&quot;uint256\&quot;,\&quot;name\&quot;:\&quot;index\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;}],\&quot;name\&quot;:\&quot;blobHash\&quot;,\&quot;outputs\&quot;:[{\&quot;internalType\&quot;:\&quot;bytes32\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;bytes32\&quot;}],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;}]&quot;,</span>
<span class="term-fg32">+	Bin: &quot;0x6080604052348015600e575f80fd5b506101198061001c5f395ff3fe6080604052348015600e575f80fd5b50600436106026575f3560e01c80630ba54e3214602a575b5f80fd5b60406004803603810190603c91906090565b6054565b604051604b919060cc565b60405180910390f35b5f81499050919050565b5f80fd5b5f819050919050565b6072816062565b8114607b575f80fd5b50565b5f81359050608a81606b565b92915050565b5f6020828403121560a25760a1605e565b5b5f60ad84828501607e565b91505092915050565b5f819050919050565b60c68160b6565b82525050565b5f60208201905060dd5f83018460bf565b9291505056fea26469706673582212208da4d91290c36a37fd192cd72cc7b29ba6328b2de08606cf869614c5ddd9b37364736f6c63430008190033&quot;,</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; BlobhashABI is the input ABI used to generate the binding from.</span>
<span class="term-fg32">+&#47;&#47; Deprecated: Use BlobhashMetaData.ABI instead.</span>
<span class="term-fg32">+var BlobhashABI = BlobhashMetaData.ABI</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; BlobhashBin is the compiled bytecode used for deploying new contracts.</span>
<span class="term-fg32">+&#47;&#47; Deprecated: Use BlobhashMetaData.Bin instead.</span>
<span class="term-fg32">+var BlobhashBin = BlobhashMetaData.Bin</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; DeployBlobhash deploys a new Ethereum contract, binding an instance of Blobhash to it.</span>
<span class="term-fg32">+func DeployBlobhash(auth *bind.TransactOpts, backend bind.ContractBackend) (common.Address, *types.Transaction, *Blobhash, error) {</span>
<span class="term-fg32">+	parsed, err := BlobhashMetaData.GetAbi()</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return common.Address{}, nil, nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if parsed == nil {</span>
<span class="term-fg32">+		return common.Address{}, nil, nil, errors.New(&quot;GetABI returned nil&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	address, tx, contract, err := bind.DeployContract(auth, *parsed, common.FromHex(BlobhashBin), backend)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return common.Address{}, nil, nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return address, tx, &amp;Blobhash{BlobhashCaller: BlobhashCaller{contract: contract}, BlobhashTransactor: BlobhashTransactor{contract: contract}, BlobhashFilterer: BlobhashFilterer{contract: contract}}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Blobhash is an auto generated Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type Blobhash struct {</span>
<span class="term-fg32">+	BlobhashCaller     &#47;&#47; Read-only binding to the contract</span>
<span class="term-fg32">+	BlobhashTransactor &#47;&#47; Write-only binding to the contract</span>
<span class="term-fg32">+	BlobhashFilterer   &#47;&#47; Log filterer for contract events</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; BlobhashCaller is an auto generated read-only Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type BlobhashCaller struct {</span>
<span class="term-fg32">+	contract *bind.BoundContract &#47;&#47; Generic contract wrapper for the low level calls</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; BlobhashTransactor is an auto generated write-only Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type BlobhashTransactor struct {</span>
<span class="term-fg32">+	contract *bind.BoundContract &#47;&#47; Generic contract wrapper for the low level calls</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; BlobhashFilterer is an auto generated log filtering Go binding around an Ethereum contract events.</span>
<span class="term-fg32">+type BlobhashFilterer struct {</span>
<span class="term-fg32">+	contract *bind.BoundContract &#47;&#47; Generic contract wrapper for the low level calls</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; BlobhashSession is an auto generated Go binding around an Ethereum contract,</span>
<span class="term-fg32">+&#47;&#47; with pre-set call and transact options.</span>
<span class="term-fg32">+type BlobhashSession struct {</span>
<span class="term-fg32">+	Contract     *Blobhash         &#47;&#47; Generic contract binding to set the session for</span>
<span class="term-fg32">+	CallOpts     bind.CallOpts     &#47;&#47; Call options to use throughout this session</span>
<span class="term-fg32">+	TransactOpts bind.TransactOpts &#47;&#47; Transaction auth options to use throughout this session</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; BlobhashCallerSession is an auto generated read-only Go binding around an Ethereum contract,</span>
<span class="term-fg32">+&#47;&#47; with pre-set call options.</span>
<span class="term-fg32">+type BlobhashCallerSession struct {</span>
<span class="term-fg32">+	Contract *BlobhashCaller &#47;&#47; Generic contract caller binding to set the session for</span>
<span class="term-fg32">+	CallOpts bind.CallOpts   &#47;&#47; Call options to use throughout this session</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; BlobhashTransactorSession is an auto generated write-only Go binding around an Ethereum contract,</span>
<span class="term-fg32">+&#47;&#47; with pre-set transact options.</span>
<span class="term-fg32">+type BlobhashTransactorSession struct {</span>
<span class="term-fg32">+	Contract     *BlobhashTransactor &#47;&#47; Generic contract transactor binding to set the session for</span>
<span class="term-fg32">+	TransactOpts bind.TransactOpts   &#47;&#47; Transaction auth options to use throughout this session</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; BlobhashRaw is an auto generated low-level Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type BlobhashRaw struct {</span>
<span class="term-fg32">+	Contract *Blobhash &#47;&#47; Generic contract binding to access the raw methods on</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; BlobhashCallerRaw is an auto generated low-level read-only Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type BlobhashCallerRaw struct {</span>
<span class="term-fg32">+	Contract *BlobhashCaller &#47;&#47; Generic read-only contract binding to access the raw methods on</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; BlobhashTransactorRaw is an auto generated low-level write-only Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type BlobhashTransactorRaw struct {</span>
<span class="term-fg32">+	Contract *BlobhashTransactor &#47;&#47; Generic write-only contract binding to access the raw methods on</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewBlobhash creates a new instance of Blobhash, bound to a specific deployed contract.</span>
<span class="term-fg32">+func NewBlobhash(address common.Address, backend bind.ContractBackend) (*Blobhash, error) {</span>
<span class="term-fg32">+	contract, err := bindBlobhash(address, backend, backend, backend)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;Blobhash{BlobhashCaller: BlobhashCaller{contract: contract}, BlobhashTransactor: BlobhashTransactor{contract: contract}, BlobhashFilterer: BlobhashFilterer{contract: contract}}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewBlobhashCaller creates a new read-only instance of Blobhash, bound to a specific deployed contract.</span>
<span class="term-fg32">+func NewBlobhashCaller(address common.Address, caller bind.ContractCaller) (*BlobhashCaller, error) {</span>
<span class="term-fg32">+	contract, err := bindBlobhash(address, caller, nil, nil)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;BlobhashCaller{contract: contract}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewBlobhashTransactor creates a new write-only instance of Blobhash, bound to a specific deployed contract.</span>
<span class="term-fg32">+func NewBlobhashTransactor(address common.Address, transactor bind.ContractTransactor) (*BlobhashTransactor, error) {</span>
<span class="term-fg32">+	contract, err := bindBlobhash(address, nil, transactor, nil)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;BlobhashTransactor{contract: contract}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewBlobhashFilterer creates a new log filterer instance of Blobhash, bound to a specific deployed contract.</span>
<span class="term-fg32">+func NewBlobhashFilterer(address common.Address, filterer bind.ContractFilterer) (*BlobhashFilterer, error) {</span>
<span class="term-fg32">+	contract, err := bindBlobhash(address, nil, nil, filterer)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;BlobhashFilterer{contract: contract}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; bindBlobhash binds a generic wrapper to an already deployed contract.</span>
<span class="term-fg32">+func bindBlobhash(address common.Address, caller bind.ContractCaller, transactor bind.ContractTransactor, filterer bind.ContractFilterer) (*bind.BoundContract, error) {</span>
<span class="term-fg32">+	parsed, err := BlobhashMetaData.GetAbi()</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return bind.NewBoundContract(address, *parsed, caller, transactor, filterer), nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Call invokes the (constant) contract method with params as input values and</span>
<span class="term-fg32">+&#47;&#47; sets the output to result. The result type might be a single field for simple</span>
<span class="term-fg32">+&#47;&#47; returns, a slice of interfaces for anonymous returns and a struct for named</span>
<span class="term-fg32">+&#47;&#47; returns.</span>
<span class="term-fg32">+func (_Blobhash *BlobhashRaw) Call(opts *bind.CallOpts, result *[]interface{}, method string, params ...interface{}) error {</span>
<span class="term-fg32">+	return _Blobhash.Contract.BlobhashCaller.contract.Call(opts, result, method, params...)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Transfer initiates a plain transaction to move funds to the contract, calling</span>
<span class="term-fg32">+&#47;&#47; its default method if one is available.</span>
<span class="term-fg32">+func (_Blobhash *BlobhashRaw) Transfer(opts *bind.TransactOpts) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _Blobhash.Contract.BlobhashTransactor.contract.Transfer(opts)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Transact invokes the (paid) contract method with params as input values.</span>
<span class="term-fg32">+func (_Blobhash *BlobhashRaw) Transact(opts *bind.TransactOpts, method string, params ...interface{}) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _Blobhash.Contract.BlobhashTransactor.contract.Transact(opts, method, params...)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Call invokes the (constant) contract method with params as input values and</span>
<span class="term-fg32">+&#47;&#47; sets the output to result. The result type might be a single field for simple</span>
<span class="term-fg32">+&#47;&#47; returns, a slice of interfaces for anonymous returns and a struct for named</span>
<span class="term-fg32">+&#47;&#47; returns.</span>
<span class="term-fg32">+func (_Blobhash *BlobhashCallerRaw) Call(opts *bind.CallOpts, result *[]interface{}, method string, params ...interface{}) error {</span>
<span class="term-fg32">+	return _Blobhash.Contract.contract.Call(opts, result, method, params...)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Transfer initiates a plain transaction to move funds to the contract, calling</span>
<span class="term-fg32">+&#47;&#47; its default method if one is available.</span>
<span class="term-fg32">+func (_Blobhash *BlobhashTransactorRaw) Transfer(opts *bind.TransactOpts) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _Blobhash.Contract.contract.Transfer(opts)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Transact invokes the (paid) contract method with params as input values.</span>
<span class="term-fg32">+func (_Blobhash *BlobhashTransactorRaw) Transact(opts *bind.TransactOpts, method string, params ...interface{}) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _Blobhash.Contract.contract.Transact(opts, method, params...)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; BlobHash is a free data retrieval call binding the contract method 0x0ba54e32.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function blobHash(uint256 index) view returns(bytes32)</span>
<span class="term-fg32">+func (_Blobhash *BlobhashCaller) BlobHash(opts *bind.CallOpts, index *big.Int) ([32]byte, error) {</span>
<span class="term-fg32">+	var out []interface{}</span>
<span class="term-fg32">+	err := _Blobhash.contract.Call(opts, &amp;out, &quot;blobHash&quot;, index)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return *new([32]byte), err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	out0 := *abi.ConvertType(out[0], new([32]byte)).(*[32]byte)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return out0, err</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; BlobHash is a free data retrieval call binding the contract method 0x0ba54e32.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function blobHash(uint256 index) view returns(bytes32)</span>
<span class="term-fg32">+func (_Blobhash *BlobhashSession) BlobHash(index *big.Int) ([32]byte, error) {</span>
<span class="term-fg32">+	return _Blobhash.Contract.BlobHash(&amp;_Blobhash.CallOpts, index)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; BlobHash is a free data retrieval call binding the contract method 0x0ba54e32.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function blobHash(uint256 index) view returns(bytes32)</span>
<span class="term-fg32">+func (_Blobhash *BlobhashCallerSession) BlobHash(index *big.Int) ([32]byte, error) {</span>
<span class="term-fg32">+	return _Blobhash.Contract.BlobHash(&amp;_Blobhash.CallOpts, index)</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-bbbfa0ecbf9e7a986f9c3aee" role="button"
                       aria-expanded="false" aria-controls="id-bbbfa0ecbf9e7a986f9c3aee">
                        <code>tests/immutable/cancun/blobhash/blobhash.sol</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/cancun/blobhash/blobhash.sol" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+12</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-bbbfa0ecbf9e7a986f9c3aee"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;cancun&#47;blobhash&#47;blobhash.sol immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;blobhash&#47;blobhash.sol</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..9f55be52a890db66ec31a6b99869af0c268630ab</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;blobhash&#47;blobhash.sol</span>
<span class="term-fg36">@@ -0,0 +1,12 @@</span>
<span class="term-fg32">+&#47;&#47; SPDX-License-Identifier: UNLICENSED</span>
<span class="term-fg32">+pragma solidity 0.8.25;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+contract Blobhash {</span>
<span class="term-fg32">+    function storeBlobHash(uint256 index) external {</span>
<span class="term-fg32">+        assembly {</span>
<span class="term-fg32">+            sstore(0, blobhash(index))</span>
<span class="term-fg32">+        }</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; build&#47;bin&#47;abigen --abi .&#47;tests&#47;immutable&#47;cancun&#47;blobhash&#47;abi.json --pkg blobhash --type Blobhash --out .&#47;tests&#47;immutable&#47;cancun&#47;blobhash&#47;blobhash.go --bin .&#47;tests&#47;immutable&#47;cancun&#47;blobhash&#47;bytecode.bin</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-e68b7c69d50017db94081548" role="button"
                       aria-expanded="false" aria-controls="id-e68b7c69d50017db94081548">
                        <code>tests/immutable/cancun/blobhash/bytecode.bin</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/cancun/blobhash/bytecode.bin" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+0</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-e68b7c69d50017db94081548"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;cancun&#47;blobhash&#47;bytecode.bin immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;blobhash&#47;bytecode.bin</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..f0f91c02491c82bfa036b9f93d3840350439dd9a</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;blobhash&#47;bytecode.bin</span>
<span class="term-fg36">@@ -0,0 +1 @@</span>
<span class="term-fg32">+6080604052348015600e575f80fd5b506101198061001c5f395ff3fe6080604052348015600e575f80fd5b50600436106026575f3560e01c80630ba54e3214602a575b5f80fd5b60406004803603810190603c91906090565b6054565b604051604b919060cc565b60405180910390f35b5f81499050919050565b5f80fd5b5f819050919050565b6072816062565b8114607b575f80fd5b50565b5f81359050608a81606b565b92915050565b5f6020828403121560a25760a1605e565b5b5f60ad84828501607e565b91505092915050565b5f819050919050565b60c68160b6565b82525050565b5f60208201905060dd5f83018460bf565b9291505056fea26469706673582212208da4d91290c36a37fd192cd72cc7b29ba6328b2de08606cf869614c5ddd9b37364736f6c63430008190033</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-23fd1ce690fed02b247a5e24" role="button"
                       aria-expanded="false" aria-controls="id-23fd1ce690fed02b247a5e24">
                        <code>tests/immutable/cancun/mcopy/abi.json</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/cancun/mcopy/abi.json" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+14</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-23fd1ce690fed02b247a5e24"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;cancun&#47;mcopy&#47;abi.json immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;mcopy&#47;abi.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..c671621a8d6662ffd989a0a57b1a1bc3fcbf6b29</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;mcopy&#47;abi.json</span>
<span class="term-fg36">@@ -0,0 +1,15 @@</span>
<span class="term-fg32">+[</span>
<span class="term-fg32">+	{</span>
<span class="term-fg32">+		&quot;inputs&quot;: [],</span>
<span class="term-fg32">+		&quot;name&quot;: &quot;memoryCopy&quot;,</span>
<span class="term-fg32">+		&quot;outputs&quot;: [</span>
<span class="term-fg32">+			{</span>
<span class="term-fg32">+				&quot;internalType&quot;: &quot;bytes32&quot;,</span>
<span class="term-fg32">+				&quot;name&quot;: &quot;x&quot;,</span>
<span class="term-fg32">+				&quot;type&quot;: &quot;bytes32&quot;</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		],</span>
<span class="term-fg32">+		&quot;stateMutability&quot;: &quot;pure&quot;,</span>
<span class="term-fg32">+		&quot;type&quot;: &quot;function&quot;</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+]</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-a51f30dea329af86c3a1013c" role="button"
                       aria-expanded="false" aria-controls="id-a51f30dea329af86c3a1013c">
                        <code>tests/immutable/cancun/mcopy/bytecode.bin</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/cancun/mcopy/bytecode.bin" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+0</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-a51f30dea329af86c3a1013c"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;cancun&#47;mcopy&#47;bytecode.bin immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;mcopy&#47;bytecode.bin</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..51e09279bc4bbe0a18611580d08608481b0189e4</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;mcopy&#47;bytecode.bin</span>
<span class="term-fg36">@@ -0,0 +1 @@</span>
<span class="term-fg32">+6080604052348015600e575f80fd5b5060b980601a5f395ff3fe6080604052348015600e575f80fd5b50600436106026575f3560e01c80632dbaeee914602a575b5f80fd5b60306044565b604051603b9190606c565b60405180910390f35b5f60506020526020805f5e5f51905090565b5f819050919050565b6066816056565b82525050565b5f602082019050607d5f830184605f565b9291505056fea2646970667358221220710c9da5e12c71adc7661a10c85eaef4d3563725e2fa50835f0b6875b0c5d3cd64736f6c63430008190033</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-94a32baa66ace8e68a88a997" role="button"
                       aria-expanded="false" aria-controls="id-94a32baa66ace8e68a88a997">
                        <code>tests/immutable/cancun/mcopy/mcopy.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/cancun/mcopy/mcopy.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+234</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-94a32baa66ace8e68a88a997"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;cancun&#47;mcopy&#47;mcopy.go immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;mcopy&#47;mcopy.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..0ba249eb967311b68bd6e111eeea345c7b8d63bd</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;mcopy&#47;mcopy.go</span>
<span class="term-fg36">@@ -0,0 +1,234 @@</span>
<span class="term-fg32">+&#47;&#47; Code generated - DO NOT EDIT.</span>
<span class="term-fg32">+&#47;&#47; This file is a generated binding and any manual changes will be lost.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package mcopy</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;errors&quot;</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+	&quot;strings&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	ethereum &quot;github.com&#47;ethereum&#47;go-ethereum&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&#47;abi&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&#47;abi&#47;bind&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;event&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Reference imports to suppress errors if they are not otherwise used.</span>
<span class="term-fg32">+var (</span>
<span class="term-fg32">+	_ = errors.New</span>
<span class="term-fg32">+	_ = big.NewInt</span>
<span class="term-fg32">+	_ = strings.NewReader</span>
<span class="term-fg32">+	_ = ethereum.NotFound</span>
<span class="term-fg32">+	_ = bind.Bind</span>
<span class="term-fg32">+	_ = common.Big1</span>
<span class="term-fg32">+	_ = types.BloomLookup</span>
<span class="term-fg32">+	_ = event.NewSubscription</span>
<span class="term-fg32">+	_ = abi.ConvertType</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; McopyMetaData contains all meta data concerning the Mcopy contract.</span>
<span class="term-fg32">+var McopyMetaData = &amp;bind.MetaData{</span>
<span class="term-fg32">+	ABI: &quot;[{\&quot;inputs\&quot;:[],\&quot;name\&quot;:\&quot;memoryCopy\&quot;,\&quot;outputs\&quot;:[{\&quot;internalType\&quot;:\&quot;bytes32\&quot;,\&quot;name\&quot;:\&quot;x\&quot;,\&quot;type\&quot;:\&quot;bytes32\&quot;}],\&quot;stateMutability\&quot;:\&quot;pure\&quot;,\&quot;type\&quot;:\&quot;function\&quot;}]&quot;,</span>
<span class="term-fg32">+	Bin: &quot;0x6080604052348015600e575f80fd5b5060b980601a5f395ff3fe6080604052348015600e575f80fd5b50600436106026575f3560e01c80632dbaeee914602a575b5f80fd5b60306044565b604051603b9190606c565b60405180910390f35b5f60506020526020805f5e5f51905090565b5f819050919050565b6066816056565b82525050565b5f602082019050607d5f830184605f565b9291505056fea2646970667358221220710c9da5e12c71adc7661a10c85eaef4d3563725e2fa50835f0b6875b0c5d3cd64736f6c63430008190033&quot;,</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; McopyABI is the input ABI used to generate the binding from.</span>
<span class="term-fg32">+&#47;&#47; Deprecated: Use McopyMetaData.ABI instead.</span>
<span class="term-fg32">+var McopyABI = McopyMetaData.ABI</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; McopyBin is the compiled bytecode used for deploying new contracts.</span>
<span class="term-fg32">+&#47;&#47; Deprecated: Use McopyMetaData.Bin instead.</span>
<span class="term-fg32">+var McopyBin = McopyMetaData.Bin</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; DeployMcopy deploys a new Ethereum contract, binding an instance of Mcopy to it.</span>
<span class="term-fg32">+func DeployMcopy(auth *bind.TransactOpts, backend bind.ContractBackend) (common.Address, *types.Transaction, *Mcopy, error) {</span>
<span class="term-fg32">+	parsed, err := McopyMetaData.GetAbi()</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return common.Address{}, nil, nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if parsed == nil {</span>
<span class="term-fg32">+		return common.Address{}, nil, nil, errors.New(&quot;GetABI returned nil&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	address, tx, contract, err := bind.DeployContract(auth, *parsed, common.FromHex(McopyBin), backend)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return common.Address{}, nil, nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return address, tx, &amp;Mcopy{McopyCaller: McopyCaller{contract: contract}, McopyTransactor: McopyTransactor{contract: contract}, McopyFilterer: McopyFilterer{contract: contract}}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Mcopy is an auto generated Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type Mcopy struct {</span>
<span class="term-fg32">+	McopyCaller     &#47;&#47; Read-only binding to the contract</span>
<span class="term-fg32">+	McopyTransactor &#47;&#47; Write-only binding to the contract</span>
<span class="term-fg32">+	McopyFilterer   &#47;&#47; Log filterer for contract events</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; McopyCaller is an auto generated read-only Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type McopyCaller struct {</span>
<span class="term-fg32">+	contract *bind.BoundContract &#47;&#47; Generic contract wrapper for the low level calls</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; McopyTransactor is an auto generated write-only Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type McopyTransactor struct {</span>
<span class="term-fg32">+	contract *bind.BoundContract &#47;&#47; Generic contract wrapper for the low level calls</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; McopyFilterer is an auto generated log filtering Go binding around an Ethereum contract events.</span>
<span class="term-fg32">+type McopyFilterer struct {</span>
<span class="term-fg32">+	contract *bind.BoundContract &#47;&#47; Generic contract wrapper for the low level calls</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; McopySession is an auto generated Go binding around an Ethereum contract,</span>
<span class="term-fg32">+&#47;&#47; with pre-set call and transact options.</span>
<span class="term-fg32">+type McopySession struct {</span>
<span class="term-fg32">+	Contract     *Mcopy            &#47;&#47; Generic contract binding to set the session for</span>
<span class="term-fg32">+	CallOpts     bind.CallOpts     &#47;&#47; Call options to use throughout this session</span>
<span class="term-fg32">+	TransactOpts bind.TransactOpts &#47;&#47; Transaction auth options to use throughout this session</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; McopyCallerSession is an auto generated read-only Go binding around an Ethereum contract,</span>
<span class="term-fg32">+&#47;&#47; with pre-set call options.</span>
<span class="term-fg32">+type McopyCallerSession struct {</span>
<span class="term-fg32">+	Contract *McopyCaller  &#47;&#47; Generic contract caller binding to set the session for</span>
<span class="term-fg32">+	CallOpts bind.CallOpts &#47;&#47; Call options to use throughout this session</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; McopyTransactorSession is an auto generated write-only Go binding around an Ethereum contract,</span>
<span class="term-fg32">+&#47;&#47; with pre-set transact options.</span>
<span class="term-fg32">+type McopyTransactorSession struct {</span>
<span class="term-fg32">+	Contract     *McopyTransactor  &#47;&#47; Generic contract transactor binding to set the session for</span>
<span class="term-fg32">+	TransactOpts bind.TransactOpts &#47;&#47; Transaction auth options to use throughout this session</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; McopyRaw is an auto generated low-level Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type McopyRaw struct {</span>
<span class="term-fg32">+	Contract *Mcopy &#47;&#47; Generic contract binding to access the raw methods on</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; McopyCallerRaw is an auto generated low-level read-only Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type McopyCallerRaw struct {</span>
<span class="term-fg32">+	Contract *McopyCaller &#47;&#47; Generic read-only contract binding to access the raw methods on</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; McopyTransactorRaw is an auto generated low-level write-only Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type McopyTransactorRaw struct {</span>
<span class="term-fg32">+	Contract *McopyTransactor &#47;&#47; Generic write-only contract binding to access the raw methods on</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewMcopy creates a new instance of Mcopy, bound to a specific deployed contract.</span>
<span class="term-fg32">+func NewMcopy(address common.Address, backend bind.ContractBackend) (*Mcopy, error) {</span>
<span class="term-fg32">+	contract, err := bindMcopy(address, backend, backend, backend)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;Mcopy{McopyCaller: McopyCaller{contract: contract}, McopyTransactor: McopyTransactor{contract: contract}, McopyFilterer: McopyFilterer{contract: contract}}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewMcopyCaller creates a new read-only instance of Mcopy, bound to a specific deployed contract.</span>
<span class="term-fg32">+func NewMcopyCaller(address common.Address, caller bind.ContractCaller) (*McopyCaller, error) {</span>
<span class="term-fg32">+	contract, err := bindMcopy(address, caller, nil, nil)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;McopyCaller{contract: contract}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewMcopyTransactor creates a new write-only instance of Mcopy, bound to a specific deployed contract.</span>
<span class="term-fg32">+func NewMcopyTransactor(address common.Address, transactor bind.ContractTransactor) (*McopyTransactor, error) {</span>
<span class="term-fg32">+	contract, err := bindMcopy(address, nil, transactor, nil)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;McopyTransactor{contract: contract}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewMcopyFilterer creates a new log filterer instance of Mcopy, bound to a specific deployed contract.</span>
<span class="term-fg32">+func NewMcopyFilterer(address common.Address, filterer bind.ContractFilterer) (*McopyFilterer, error) {</span>
<span class="term-fg32">+	contract, err := bindMcopy(address, nil, nil, filterer)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;McopyFilterer{contract: contract}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; bindMcopy binds a generic wrapper to an already deployed contract.</span>
<span class="term-fg32">+func bindMcopy(address common.Address, caller bind.ContractCaller, transactor bind.ContractTransactor, filterer bind.ContractFilterer) (*bind.BoundContract, error) {</span>
<span class="term-fg32">+	parsed, err := McopyMetaData.GetAbi()</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return bind.NewBoundContract(address, *parsed, caller, transactor, filterer), nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Call invokes the (constant) contract method with params as input values and</span>
<span class="term-fg32">+&#47;&#47; sets the output to result. The result type might be a single field for simple</span>
<span class="term-fg32">+&#47;&#47; returns, a slice of interfaces for anonymous returns and a struct for named</span>
<span class="term-fg32">+&#47;&#47; returns.</span>
<span class="term-fg32">+func (_Mcopy *McopyRaw) Call(opts *bind.CallOpts, result *[]interface{}, method string, params ...interface{}) error {</span>
<span class="term-fg32">+	return _Mcopy.Contract.McopyCaller.contract.Call(opts, result, method, params...)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Transfer initiates a plain transaction to move funds to the contract, calling</span>
<span class="term-fg32">+&#47;&#47; its default method if one is available.</span>
<span class="term-fg32">+func (_Mcopy *McopyRaw) Transfer(opts *bind.TransactOpts) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _Mcopy.Contract.McopyTransactor.contract.Transfer(opts)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Transact invokes the (paid) contract method with params as input values.</span>
<span class="term-fg32">+func (_Mcopy *McopyRaw) Transact(opts *bind.TransactOpts, method string, params ...interface{}) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _Mcopy.Contract.McopyTransactor.contract.Transact(opts, method, params...)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Call invokes the (constant) contract method with params as input values and</span>
<span class="term-fg32">+&#47;&#47; sets the output to result. The result type might be a single field for simple</span>
<span class="term-fg32">+&#47;&#47; returns, a slice of interfaces for anonymous returns and a struct for named</span>
<span class="term-fg32">+&#47;&#47; returns.</span>
<span class="term-fg32">+func (_Mcopy *McopyCallerRaw) Call(opts *bind.CallOpts, result *[]interface{}, method string, params ...interface{}) error {</span>
<span class="term-fg32">+	return _Mcopy.Contract.contract.Call(opts, result, method, params...)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Transfer initiates a plain transaction to move funds to the contract, calling</span>
<span class="term-fg32">+&#47;&#47; its default method if one is available.</span>
<span class="term-fg32">+func (_Mcopy *McopyTransactorRaw) Transfer(opts *bind.TransactOpts) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _Mcopy.Contract.contract.Transfer(opts)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Transact invokes the (paid) contract method with params as input values.</span>
<span class="term-fg32">+func (_Mcopy *McopyTransactorRaw) Transact(opts *bind.TransactOpts, method string, params ...interface{}) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _Mcopy.Contract.contract.Transact(opts, method, params...)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; MemoryCopy is a free data retrieval call binding the contract method 0x2dbaeee9.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function memoryCopy() pure returns(bytes32 x)</span>
<span class="term-fg32">+func (_Mcopy *McopyCaller) MemoryCopy(opts *bind.CallOpts) ([32]byte, error) {</span>
<span class="term-fg32">+	var out []interface{}</span>
<span class="term-fg32">+	err := _Mcopy.contract.Call(opts, &amp;out, &quot;memoryCopy&quot;)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return *new([32]byte), err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	out0 := *abi.ConvertType(out[0], new([32]byte)).(*[32]byte)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return out0, err</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; MemoryCopy is a free data retrieval call binding the contract method 0x2dbaeee9.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function memoryCopy() pure returns(bytes32 x)</span>
<span class="term-fg32">+func (_Mcopy *McopySession) MemoryCopy() ([32]byte, error) {</span>
<span class="term-fg32">+	return _Mcopy.Contract.MemoryCopy(&amp;_Mcopy.CallOpts)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; MemoryCopy is a free data retrieval call binding the contract method 0x2dbaeee9.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function memoryCopy() pure returns(bytes32 x)</span>
<span class="term-fg32">+func (_Mcopy *McopyCallerSession) MemoryCopy() ([32]byte, error) {</span>
<span class="term-fg32">+	return _Mcopy.Contract.MemoryCopy(&amp;_Mcopy.CallOpts)</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-b88189c3f456cbbf2f5f953c" role="button"
                       aria-expanded="false" aria-controls="id-b88189c3f456cbbf2f5f953c">
                        <code>tests/immutable/cancun/mcopy/mcopy.sol</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/cancun/mcopy/mcopy.sol" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+14</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-b88189c3f456cbbf2f5f953c"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;cancun&#47;mcopy&#47;mcopy.sol immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;mcopy&#47;mcopy.sol</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..7f695210c4255d8d4e9409fb863174914c2b4ebc</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;mcopy&#47;mcopy.sol</span>
<span class="term-fg36">@@ -0,0 +1,14 @@</span>
<span class="term-fg32">+&#47;&#47; SPDX-License-Identifier: UNLICENSED</span>
<span class="term-fg32">+pragma solidity 0.8.25;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+contract A {</span>
<span class="term-fg32">+    function memoryCopy() external pure returns (bytes32 x) {</span>
<span class="term-fg32">+        assembly {</span>
<span class="term-fg32">+            mstore(0x20, 0x50) &#47;&#47; Store 0x50 at word 1 in memory</span>
<span class="term-fg32">+            mcopy(0, 0x20, 0x20) &#47;&#47; Copies 0x50 to word 0 in memory</span>
<span class="term-fg32">+            x := mload(0) &#47;&#47; Returns 32 bytes &quot;0x50&quot;</span>
<span class="term-fg32">+        }</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; build&#47;bin&#47;abigen --abi .&#47;tests&#47;immutable&#47;cancun&#47;mcopy&#47;abi.json --pkg mcopy --type mcopy --out .&#47;tests&#47;immutable&#47;cancun&#47;mcopy&#47;mcopy.go --bin .&#47;tests&#47;immutable&#47;cancun&#47;mcopy&#47;bytecode.bin</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-205bdbf70089af7b3e81ec85" role="button"
                       aria-expanded="false" aria-controls="id-205bdbf70089af7b3e81ec85">
                        <code>tests/immutable/cancun/selfdestruct/constructor/abi.json</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/cancun/selfdestruct/constructor/abi.json" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+7</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-205bdbf70089af7b3e81ec85"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;cancun&#47;selfdestruct&#47;constructor&#47;abi.json immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;selfdestruct&#47;constructor&#47;abi.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..f7ad70bceaf852c1074d08b6afbc95b93dd88909</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;selfdestruct&#47;constructor&#47;abi.json</span>
<span class="term-fg36">@@ -0,0 +1,7 @@</span>
<span class="term-fg32">+[</span>
<span class="term-fg32">+	{</span>
<span class="term-fg32">+		&quot;type&quot;: &quot;constructor&quot;,</span>
<span class="term-fg32">+		&quot;inputs&quot;: [{ &quot;name&quot;: &quot;recipient&quot;, &quot;type&quot;: &quot;address&quot;, &quot;internalType&quot;: &quot;address&quot; }],</span>
<span class="term-fg32">+		&quot;stateMutability&quot;: &quot;payable&quot;</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+]</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-afd0ce45c5a681646d2b89cf" role="button"
                       aria-expanded="false" aria-controls="id-afd0ce45c5a681646d2b89cf">
                        <code>tests/immutable/cancun/selfdestruct/constructor/bytecode.bin</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/cancun/selfdestruct/constructor/bytecode.bin" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+0</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-afd0ce45c5a681646d2b89cf"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;cancun&#47;selfdestruct&#47;constructor&#47;bytecode.bin immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;selfdestruct&#47;constructor&#47;bytecode.bin</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..4ee7dc85926bd7c930a35f4e98d0cf66a163b5dd</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;selfdestruct&#47;constructor&#47;bytecode.bin</span>
<span class="term-fg36">@@ -0,0 +1 @@</span>
<span class="term-fg32">+608060405260405160593803806059833981016040819052601e91602a565b806001600160a01b0316ff5b600060208284031215603b57600080fd5b81516001600160a01b0381168114605157600080fd5b939250505056fe</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-32f628def2c01ee13170b130" role="button"
                       aria-expanded="false" aria-controls="id-32f628def2c01ee13170b130">
                        <code>tests/immutable/cancun/selfdestruct/constructor/selfdestructconstructor.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/cancun/selfdestruct/constructor/selfdestructconstructor.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+203</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-32f628def2c01ee13170b130"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;cancun&#47;selfdestruct&#47;constructor&#47;selfdestructconstructor.go immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;selfdestruct&#47;constructor&#47;selfdestructconstructor.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..23b26878d65db555628aab3f9b8051cdb5997fca</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;selfdestruct&#47;constructor&#47;selfdestructconstructor.go</span>
<span class="term-fg36">@@ -0,0 +1,203 @@</span>
<span class="term-fg32">+&#47;&#47; Code generated - DO NOT EDIT.</span>
<span class="term-fg32">+&#47;&#47; This file is a generated binding and any manual changes will be lost.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package selfdestructconstructor</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;errors&quot;</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+	&quot;strings&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	ethereum &quot;github.com&#47;ethereum&#47;go-ethereum&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&#47;abi&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&#47;abi&#47;bind&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;event&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Reference imports to suppress errors if they are not otherwise used.</span>
<span class="term-fg32">+var (</span>
<span class="term-fg32">+	_ = errors.New</span>
<span class="term-fg32">+	_ = big.NewInt</span>
<span class="term-fg32">+	_ = strings.NewReader</span>
<span class="term-fg32">+	_ = ethereum.NotFound</span>
<span class="term-fg32">+	_ = bind.Bind</span>
<span class="term-fg32">+	_ = common.Big1</span>
<span class="term-fg32">+	_ = types.BloomLookup</span>
<span class="term-fg32">+	_ = event.NewSubscription</span>
<span class="term-fg32">+	_ = abi.ConvertType</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SelfDestructConstructorMetaData contains all meta data concerning the SelfDestructConstructor contract.</span>
<span class="term-fg32">+var SelfDestructConstructorMetaData = &amp;bind.MetaData{</span>
<span class="term-fg32">+	ABI: &quot;[{\&quot;type\&quot;:\&quot;constructor\&quot;,\&quot;inputs\&quot;:[{\&quot;name\&quot;:\&quot;recipient\&quot;,\&quot;type\&quot;:\&quot;address\&quot;,\&quot;internalType\&quot;:\&quot;address\&quot;}],\&quot;stateMutability\&quot;:\&quot;payable\&quot;}]&quot;,</span>
<span class="term-fg32">+	Bin: &quot;0x608060405260405160593803806059833981016040819052601e91602a565b806001600160a01b0316ff5b600060208284031215603b57600080fd5b81516001600160a01b0381168114605157600080fd5b939250505056fe&quot;,</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SelfDestructConstructorABI is the input ABI used to generate the binding from.</span>
<span class="term-fg32">+&#47;&#47; Deprecated: Use SelfDestructConstructorMetaData.ABI instead.</span>
<span class="term-fg32">+var SelfDestructConstructorABI = SelfDestructConstructorMetaData.ABI</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SelfDestructConstructorBin is the compiled bytecode used for deploying new contracts.</span>
<span class="term-fg32">+&#47;&#47; Deprecated: Use SelfDestructConstructorMetaData.Bin instead.</span>
<span class="term-fg32">+var SelfDestructConstructorBin = SelfDestructConstructorMetaData.Bin</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; DeploySelfDestructConstructor deploys a new Ethereum contract, binding an instance of SelfDestructConstructor to it.</span>
<span class="term-fg32">+func DeploySelfDestructConstructor(auth *bind.TransactOpts, backend bind.ContractBackend, recipient common.Address) (common.Address, *types.Transaction, *SelfDestructConstructor, error) {</span>
<span class="term-fg32">+	parsed, err := SelfDestructConstructorMetaData.GetAbi()</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return common.Address{}, nil, nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if parsed == nil {</span>
<span class="term-fg32">+		return common.Address{}, nil, nil, errors.New(&quot;GetABI returned nil&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	address, tx, contract, err := bind.DeployContract(auth, *parsed, common.FromHex(SelfDestructConstructorBin), backend, recipient)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return common.Address{}, nil, nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return address, tx, &amp;SelfDestructConstructor{SelfDestructConstructorCaller: SelfDestructConstructorCaller{contract: contract}, SelfDestructConstructorTransactor: SelfDestructConstructorTransactor{contract: contract}, SelfDestructConstructorFilterer: SelfDestructConstructorFilterer{contract: contract}}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SelfDestructConstructor is an auto generated Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type SelfDestructConstructor struct {</span>
<span class="term-fg32">+	SelfDestructConstructorCaller     &#47;&#47; Read-only binding to the contract</span>
<span class="term-fg32">+	SelfDestructConstructorTransactor &#47;&#47; Write-only binding to the contract</span>
<span class="term-fg32">+	SelfDestructConstructorFilterer   &#47;&#47; Log filterer for contract events</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SelfDestructConstructorCaller is an auto generated read-only Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type SelfDestructConstructorCaller struct {</span>
<span class="term-fg32">+	contract *bind.BoundContract &#47;&#47; Generic contract wrapper for the low level calls</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SelfDestructConstructorTransactor is an auto generated write-only Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type SelfDestructConstructorTransactor struct {</span>
<span class="term-fg32">+	contract *bind.BoundContract &#47;&#47; Generic contract wrapper for the low level calls</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SelfDestructConstructorFilterer is an auto generated log filtering Go binding around an Ethereum contract events.</span>
<span class="term-fg32">+type SelfDestructConstructorFilterer struct {</span>
<span class="term-fg32">+	contract *bind.BoundContract &#47;&#47; Generic contract wrapper for the low level calls</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SelfDestructConstructorSession is an auto generated Go binding around an Ethereum contract,</span>
<span class="term-fg32">+&#47;&#47; with pre-set call and transact options.</span>
<span class="term-fg32">+type SelfDestructConstructorSession struct {</span>
<span class="term-fg32">+	Contract     *SelfDestructConstructor &#47;&#47; Generic contract binding to set the session for</span>
<span class="term-fg32">+	CallOpts     bind.CallOpts            &#47;&#47; Call options to use throughout this session</span>
<span class="term-fg32">+	TransactOpts bind.TransactOpts        &#47;&#47; Transaction auth options to use throughout this session</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SelfDestructConstructorCallerSession is an auto generated read-only Go binding around an Ethereum contract,</span>
<span class="term-fg32">+&#47;&#47; with pre-set call options.</span>
<span class="term-fg32">+type SelfDestructConstructorCallerSession struct {</span>
<span class="term-fg32">+	Contract *SelfDestructConstructorCaller &#47;&#47; Generic contract caller binding to set the session for</span>
<span class="term-fg32">+	CallOpts bind.CallOpts                  &#47;&#47; Call options to use throughout this session</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SelfDestructConstructorTransactorSession is an auto generated write-only Go binding around an Ethereum contract,</span>
<span class="term-fg32">+&#47;&#47; with pre-set transact options.</span>
<span class="term-fg32">+type SelfDestructConstructorTransactorSession struct {</span>
<span class="term-fg32">+	Contract     *SelfDestructConstructorTransactor &#47;&#47; Generic contract transactor binding to set the session for</span>
<span class="term-fg32">+	TransactOpts bind.TransactOpts                  &#47;&#47; Transaction auth options to use throughout this session</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SelfDestructConstructorRaw is an auto generated low-level Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type SelfDestructConstructorRaw struct {</span>
<span class="term-fg32">+	Contract *SelfDestructConstructor &#47;&#47; Generic contract binding to access the raw methods on</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SelfDestructConstructorCallerRaw is an auto generated low-level read-only Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type SelfDestructConstructorCallerRaw struct {</span>
<span class="term-fg32">+	Contract *SelfDestructConstructorCaller &#47;&#47; Generic read-only contract binding to access the raw methods on</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SelfDestructConstructorTransactorRaw is an auto generated low-level write-only Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type SelfDestructConstructorTransactorRaw struct {</span>
<span class="term-fg32">+	Contract *SelfDestructConstructorTransactor &#47;&#47; Generic write-only contract binding to access the raw methods on</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewSelfDestructConstructor creates a new instance of SelfDestructConstructor, bound to a specific deployed contract.</span>
<span class="term-fg32">+func NewSelfDestructConstructor(address common.Address, backend bind.ContractBackend) (*SelfDestructConstructor, error) {</span>
<span class="term-fg32">+	contract, err := bindSelfDestructConstructor(address, backend, backend, backend)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;SelfDestructConstructor{SelfDestructConstructorCaller: SelfDestructConstructorCaller{contract: contract}, SelfDestructConstructorTransactor: SelfDestructConstructorTransactor{contract: contract}, SelfDestructConstructorFilterer: SelfDestructConstructorFilterer{contract: contract}}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewSelfDestructConstructorCaller creates a new read-only instance of SelfDestructConstructor, bound to a specific deployed contract.</span>
<span class="term-fg32">+func NewSelfDestructConstructorCaller(address common.Address, caller bind.ContractCaller) (*SelfDestructConstructorCaller, error) {</span>
<span class="term-fg32">+	contract, err := bindSelfDestructConstructor(address, caller, nil, nil)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;SelfDestructConstructorCaller{contract: contract}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewSelfDestructConstructorTransactor creates a new write-only instance of SelfDestructConstructor, bound to a specific deployed contract.</span>
<span class="term-fg32">+func NewSelfDestructConstructorTransactor(address common.Address, transactor bind.ContractTransactor) (*SelfDestructConstructorTransactor, error) {</span>
<span class="term-fg32">+	contract, err := bindSelfDestructConstructor(address, nil, transactor, nil)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;SelfDestructConstructorTransactor{contract: contract}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewSelfDestructConstructorFilterer creates a new log filterer instance of SelfDestructConstructor, bound to a specific deployed contract.</span>
<span class="term-fg32">+func NewSelfDestructConstructorFilterer(address common.Address, filterer bind.ContractFilterer) (*SelfDestructConstructorFilterer, error) {</span>
<span class="term-fg32">+	contract, err := bindSelfDestructConstructor(address, nil, nil, filterer)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;SelfDestructConstructorFilterer{contract: contract}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; bindSelfDestructConstructor binds a generic wrapper to an already deployed contract.</span>
<span class="term-fg32">+func bindSelfDestructConstructor(address common.Address, caller bind.ContractCaller, transactor bind.ContractTransactor, filterer bind.ContractFilterer) (*bind.BoundContract, error) {</span>
<span class="term-fg32">+	parsed, err := SelfDestructConstructorMetaData.GetAbi()</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return bind.NewBoundContract(address, *parsed, caller, transactor, filterer), nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Call invokes the (constant) contract method with params as input values and</span>
<span class="term-fg32">+&#47;&#47; sets the output to result. The result type might be a single field for simple</span>
<span class="term-fg32">+&#47;&#47; returns, a slice of interfaces for anonymous returns and a struct for named</span>
<span class="term-fg32">+&#47;&#47; returns.</span>
<span class="term-fg32">+func (_SelfDestructConstructor *SelfDestructConstructorRaw) Call(opts *bind.CallOpts, result *[]interface{}, method string, params ...interface{}) error {</span>
<span class="term-fg32">+	return _SelfDestructConstructor.Contract.SelfDestructConstructorCaller.contract.Call(opts, result, method, params...)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Transfer initiates a plain transaction to move funds to the contract, calling</span>
<span class="term-fg32">+&#47;&#47; its default method if one is available.</span>
<span class="term-fg32">+func (_SelfDestructConstructor *SelfDestructConstructorRaw) Transfer(opts *bind.TransactOpts) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _SelfDestructConstructor.Contract.SelfDestructConstructorTransactor.contract.Transfer(opts)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Transact invokes the (paid) contract method with params as input values.</span>
<span class="term-fg32">+func (_SelfDestructConstructor *SelfDestructConstructorRaw) Transact(opts *bind.TransactOpts, method string, params ...interface{}) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _SelfDestructConstructor.Contract.SelfDestructConstructorTransactor.contract.Transact(opts, method, params...)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Call invokes the (constant) contract method with params as input values and</span>
<span class="term-fg32">+&#47;&#47; sets the output to result. The result type might be a single field for simple</span>
<span class="term-fg32">+&#47;&#47; returns, a slice of interfaces for anonymous returns and a struct for named</span>
<span class="term-fg32">+&#47;&#47; returns.</span>
<span class="term-fg32">+func (_SelfDestructConstructor *SelfDestructConstructorCallerRaw) Call(opts *bind.CallOpts, result *[]interface{}, method string, params ...interface{}) error {</span>
<span class="term-fg32">+	return _SelfDestructConstructor.Contract.contract.Call(opts, result, method, params...)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Transfer initiates a plain transaction to move funds to the contract, calling</span>
<span class="term-fg32">+&#47;&#47; its default method if one is available.</span>
<span class="term-fg32">+func (_SelfDestructConstructor *SelfDestructConstructorTransactorRaw) Transfer(opts *bind.TransactOpts) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _SelfDestructConstructor.Contract.contract.Transfer(opts)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Transact invokes the (paid) contract method with params as input values.</span>
<span class="term-fg32">+func (_SelfDestructConstructor *SelfDestructConstructorTransactorRaw) Transact(opts *bind.TransactOpts, method string, params ...interface{}) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _SelfDestructConstructor.Contract.contract.Transact(opts, method, params...)</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-4f63f358271f68862cafabb8" role="button"
                       aria-expanded="false" aria-controls="id-4f63f358271f68862cafabb8">
                        <code>tests/immutable/cancun/selfdestruct/constructor/selfdestructconstructor.sol</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/cancun/selfdestruct/constructor/selfdestructconstructor.sol" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+10</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-4f63f358271f68862cafabb8"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;cancun&#47;selfdestruct&#47;constructor&#47;selfdestructconstructor.sol immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;selfdestruct&#47;constructor&#47;selfdestructconstructor.sol</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..9c46d05ac746c0ff935ea57b4d66a3c8afed9397</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;selfdestruct&#47;constructor&#47;selfdestructconstructor.sol</span>
<span class="term-fg36">@@ -0,0 +1,10 @@</span>
<span class="term-fg32">+&#47;&#47; SPDX-License-Identifier: UNLICENSED</span>
<span class="term-fg32">+pragma solidity 0.8.25;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+contract SelfDestructConstructor {</span>
<span class="term-fg32">+    constructor(address recipient) payable {</span>
<span class="term-fg32">+        selfdestruct(payable(recipient));</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; build&#47;bin&#47;abigen --abi .&#47;tests&#47;immutable&#47;cancun&#47;selfdestruct&#47;constructor&#47;abi.json --pkg selfdestructconstructor --type SelfDestructConstructor --out .&#47;tests&#47;immutable&#47;cancun&#47;selfdestruct&#47;constructor&#47;selfdestructconstructor.go --bin .&#47;tests&#47;immutable&#47;cancun&#47;selfdestruct&#47;constructor&#47;bytecode.bin</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-737859c455d9301f0bbdfd34" role="button"
                       aria-expanded="false" aria-controls="id-737859c455d9301f0bbdfd34">
                        <code>tests/immutable/cancun/selfdestruct/function/abi.json</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/cancun/selfdestruct/function/abi.json" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+9</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-737859c455d9301f0bbdfd34"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;cancun&#47;selfdestruct&#47;function&#47;abi.json immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;selfdestruct&#47;function&#47;abi.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..b2b6c45609777cdfc73260ae7f29fc73718bf054</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;selfdestruct&#47;function&#47;abi.json</span>
<span class="term-fg36">@@ -0,0 +1,9 @@</span>
<span class="term-fg32">+[</span>
<span class="term-fg32">+	{</span>
<span class="term-fg32">+		&quot;type&quot;: &quot;function&quot;,</span>
<span class="term-fg32">+		&quot;name&quot;: &quot;selfDestruct&quot;,</span>
<span class="term-fg32">+		&quot;inputs&quot;: [{ &quot;name&quot;: &quot;recipient&quot;, &quot;type&quot;: &quot;address&quot;, &quot;internalType&quot;: &quot;address&quot; }],</span>
<span class="term-fg32">+		&quot;outputs&quot;: [],</span>
<span class="term-fg32">+		&quot;stateMutability&quot;: &quot;nonpayable&quot;</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+]</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-b75303f26c045bfe9861ff8f" role="button"
                       aria-expanded="false" aria-controls="id-b75303f26c045bfe9861ff8f">
                        <code>tests/immutable/cancun/selfdestruct/function/bytecode.bin</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/cancun/selfdestruct/function/bytecode.bin" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+0</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-b75303f26c045bfe9861ff8f"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;cancun&#47;selfdestruct&#47;function&#47;bytecode.bin immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;selfdestruct&#47;function&#47;bytecode.bin</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..b836777df2f62c1b41db83c40e02e33720ab68d1</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;selfdestruct&#47;function&#47;bytecode.bin</span>
<span class="term-fg36">@@ -0,0 +1 @@</span>
<span class="term-fg32">+6080604052348015600f57600080fd5b5060b880601d6000396000f3fe60806040526004361060205760003560e01c80633f5a0bdd14602b57600080fd5b36602657005b600080fd5b348015603657600080fd5b50604660423660046054565b6048565b005b806001600160a01b0316ff5b600060208284031215606557600080fd5b81356001600160a01b0381168114607b57600080fd5b939250505056fea2646970667358221220f9c68da8ceb7e06771a69cb7acfbe7b52c3c45d91e44a58a1243d16d54606eae64736f6c63430008190033</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-5e03cfeb2bd6a3a1ca574fad" role="button"
                       aria-expanded="false" aria-controls="id-5e03cfeb2bd6a3a1ca574fad">
                        <code>tests/immutable/cancun/selfdestruct/function/selfdestructfunction.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/cancun/selfdestruct/function/selfdestructfunction.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+224</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-5e03cfeb2bd6a3a1ca574fad"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;cancun&#47;selfdestruct&#47;function&#47;selfdestructfunction.go immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;selfdestruct&#47;function&#47;selfdestructfunction.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..778df49dbb72bcf01975f7444c9646e70653ea3d</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;selfdestruct&#47;function&#47;selfdestructfunction.go</span>
<span class="term-fg36">@@ -0,0 +1,224 @@</span>
<span class="term-fg32">+&#47;&#47; Code generated - DO NOT EDIT.</span>
<span class="term-fg32">+&#47;&#47; This file is a generated binding and any manual changes will be lost.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package selfdestructfunction</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;errors&quot;</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+	&quot;strings&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	ethereum &quot;github.com&#47;ethereum&#47;go-ethereum&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&#47;abi&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&#47;abi&#47;bind&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;event&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Reference imports to suppress errors if they are not otherwise used.</span>
<span class="term-fg32">+var (</span>
<span class="term-fg32">+	_ = errors.New</span>
<span class="term-fg32">+	_ = big.NewInt</span>
<span class="term-fg32">+	_ = strings.NewReader</span>
<span class="term-fg32">+	_ = ethereum.NotFound</span>
<span class="term-fg32">+	_ = bind.Bind</span>
<span class="term-fg32">+	_ = common.Big1</span>
<span class="term-fg32">+	_ = types.BloomLookup</span>
<span class="term-fg32">+	_ = event.NewSubscription</span>
<span class="term-fg32">+	_ = abi.ConvertType</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SelfDestructFunctionMetaData contains all meta data concerning the SelfDestructFunction contract.</span>
<span class="term-fg32">+var SelfDestructFunctionMetaData = &amp;bind.MetaData{</span>
<span class="term-fg32">+	ABI: &quot;[{\&quot;type\&quot;:\&quot;function\&quot;,\&quot;name\&quot;:\&quot;selfDestruct\&quot;,\&quot;inputs\&quot;:[{\&quot;name\&quot;:\&quot;recipient\&quot;,\&quot;type\&quot;:\&quot;address\&quot;,\&quot;internalType\&quot;:\&quot;address\&quot;}],\&quot;outputs\&quot;:[],\&quot;stateMutability\&quot;:\&quot;nonpayable\&quot;}]&quot;,</span>
<span class="term-fg32">+	Bin: &quot;0x6080604052348015600f57600080fd5b5060b880601d6000396000f3fe60806040526004361060205760003560e01c80633f5a0bdd14602b57600080fd5b36602657005b600080fd5b348015603657600080fd5b50604660423660046054565b6048565b005b806001600160a01b0316ff5b600060208284031215606557600080fd5b81356001600160a01b0381168114607b57600080fd5b939250505056fea2646970667358221220f9c68da8ceb7e06771a69cb7acfbe7b52c3c45d91e44a58a1243d16d54606eae64736f6c63430008190033&quot;,</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SelfDestructFunctionABI is the input ABI used to generate the binding from.</span>
<span class="term-fg32">+&#47;&#47; Deprecated: Use SelfDestructFunctionMetaData.ABI instead.</span>
<span class="term-fg32">+var SelfDestructFunctionABI = SelfDestructFunctionMetaData.ABI</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SelfDestructFunctionBin is the compiled bytecode used for deploying new contracts.</span>
<span class="term-fg32">+&#47;&#47; Deprecated: Use SelfDestructFunctionMetaData.Bin instead.</span>
<span class="term-fg32">+var SelfDestructFunctionBin = SelfDestructFunctionMetaData.Bin</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; DeploySelfDestructFunction deploys a new Ethereum contract, binding an instance of SelfDestructFunction to it.</span>
<span class="term-fg32">+func DeploySelfDestructFunction(auth *bind.TransactOpts, backend bind.ContractBackend) (common.Address, *types.Transaction, *SelfDestructFunction, error) {</span>
<span class="term-fg32">+	parsed, err := SelfDestructFunctionMetaData.GetAbi()</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return common.Address{}, nil, nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if parsed == nil {</span>
<span class="term-fg32">+		return common.Address{}, nil, nil, errors.New(&quot;GetABI returned nil&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	address, tx, contract, err := bind.DeployContract(auth, *parsed, common.FromHex(SelfDestructFunctionBin), backend)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return common.Address{}, nil, nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return address, tx, &amp;SelfDestructFunction{SelfDestructFunctionCaller: SelfDestructFunctionCaller{contract: contract}, SelfDestructFunctionTransactor: SelfDestructFunctionTransactor{contract: contract}, SelfDestructFunctionFilterer: SelfDestructFunctionFilterer{contract: contract}}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SelfDestructFunction is an auto generated Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type SelfDestructFunction struct {</span>
<span class="term-fg32">+	SelfDestructFunctionCaller     &#47;&#47; Read-only binding to the contract</span>
<span class="term-fg32">+	SelfDestructFunctionTransactor &#47;&#47; Write-only binding to the contract</span>
<span class="term-fg32">+	SelfDestructFunctionFilterer   &#47;&#47; Log filterer for contract events</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SelfDestructFunctionCaller is an auto generated read-only Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type SelfDestructFunctionCaller struct {</span>
<span class="term-fg32">+	contract *bind.BoundContract &#47;&#47; Generic contract wrapper for the low level calls</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SelfDestructFunctionTransactor is an auto generated write-only Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type SelfDestructFunctionTransactor struct {</span>
<span class="term-fg32">+	contract *bind.BoundContract &#47;&#47; Generic contract wrapper for the low level calls</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SelfDestructFunctionFilterer is an auto generated log filtering Go binding around an Ethereum contract events.</span>
<span class="term-fg32">+type SelfDestructFunctionFilterer struct {</span>
<span class="term-fg32">+	contract *bind.BoundContract &#47;&#47; Generic contract wrapper for the low level calls</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SelfDestructFunctionSession is an auto generated Go binding around an Ethereum contract,</span>
<span class="term-fg32">+&#47;&#47; with pre-set call and transact options.</span>
<span class="term-fg32">+type SelfDestructFunctionSession struct {</span>
<span class="term-fg32">+	Contract     *SelfDestructFunction &#47;&#47; Generic contract binding to set the session for</span>
<span class="term-fg32">+	CallOpts     bind.CallOpts         &#47;&#47; Call options to use throughout this session</span>
<span class="term-fg32">+	TransactOpts bind.TransactOpts     &#47;&#47; Transaction auth options to use throughout this session</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SelfDestructFunctionCallerSession is an auto generated read-only Go binding around an Ethereum contract,</span>
<span class="term-fg32">+&#47;&#47; with pre-set call options.</span>
<span class="term-fg32">+type SelfDestructFunctionCallerSession struct {</span>
<span class="term-fg32">+	Contract *SelfDestructFunctionCaller &#47;&#47; Generic contract caller binding to set the session for</span>
<span class="term-fg32">+	CallOpts bind.CallOpts               &#47;&#47; Call options to use throughout this session</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SelfDestructFunctionTransactorSession is an auto generated write-only Go binding around an Ethereum contract,</span>
<span class="term-fg32">+&#47;&#47; with pre-set transact options.</span>
<span class="term-fg32">+type SelfDestructFunctionTransactorSession struct {</span>
<span class="term-fg32">+	Contract     *SelfDestructFunctionTransactor &#47;&#47; Generic contract transactor binding to set the session for</span>
<span class="term-fg32">+	TransactOpts bind.TransactOpts               &#47;&#47; Transaction auth options to use throughout this session</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SelfDestructFunctionRaw is an auto generated low-level Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type SelfDestructFunctionRaw struct {</span>
<span class="term-fg32">+	Contract *SelfDestructFunction &#47;&#47; Generic contract binding to access the raw methods on</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SelfDestructFunctionCallerRaw is an auto generated low-level read-only Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type SelfDestructFunctionCallerRaw struct {</span>
<span class="term-fg32">+	Contract *SelfDestructFunctionCaller &#47;&#47; Generic read-only contract binding to access the raw methods on</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SelfDestructFunctionTransactorRaw is an auto generated low-level write-only Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type SelfDestructFunctionTransactorRaw struct {</span>
<span class="term-fg32">+	Contract *SelfDestructFunctionTransactor &#47;&#47; Generic write-only contract binding to access the raw methods on</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewSelfDestructFunction creates a new instance of SelfDestructFunction, bound to a specific deployed contract.</span>
<span class="term-fg32">+func NewSelfDestructFunction(address common.Address, backend bind.ContractBackend) (*SelfDestructFunction, error) {</span>
<span class="term-fg32">+	contract, err := bindSelfDestructFunction(address, backend, backend, backend)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;SelfDestructFunction{SelfDestructFunctionCaller: SelfDestructFunctionCaller{contract: contract}, SelfDestructFunctionTransactor: SelfDestructFunctionTransactor{contract: contract}, SelfDestructFunctionFilterer: SelfDestructFunctionFilterer{contract: contract}}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewSelfDestructFunctionCaller creates a new read-only instance of SelfDestructFunction, bound to a specific deployed contract.</span>
<span class="term-fg32">+func NewSelfDestructFunctionCaller(address common.Address, caller bind.ContractCaller) (*SelfDestructFunctionCaller, error) {</span>
<span class="term-fg32">+	contract, err := bindSelfDestructFunction(address, caller, nil, nil)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;SelfDestructFunctionCaller{contract: contract}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewSelfDestructFunctionTransactor creates a new write-only instance of SelfDestructFunction, bound to a specific deployed contract.</span>
<span class="term-fg32">+func NewSelfDestructFunctionTransactor(address common.Address, transactor bind.ContractTransactor) (*SelfDestructFunctionTransactor, error) {</span>
<span class="term-fg32">+	contract, err := bindSelfDestructFunction(address, nil, transactor, nil)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;SelfDestructFunctionTransactor{contract: contract}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewSelfDestructFunctionFilterer creates a new log filterer instance of SelfDestructFunction, bound to a specific deployed contract.</span>
<span class="term-fg32">+func NewSelfDestructFunctionFilterer(address common.Address, filterer bind.ContractFilterer) (*SelfDestructFunctionFilterer, error) {</span>
<span class="term-fg32">+	contract, err := bindSelfDestructFunction(address, nil, nil, filterer)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;SelfDestructFunctionFilterer{contract: contract}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; bindSelfDestructFunction binds a generic wrapper to an already deployed contract.</span>
<span class="term-fg32">+func bindSelfDestructFunction(address common.Address, caller bind.ContractCaller, transactor bind.ContractTransactor, filterer bind.ContractFilterer) (*bind.BoundContract, error) {</span>
<span class="term-fg32">+	parsed, err := SelfDestructFunctionMetaData.GetAbi()</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return bind.NewBoundContract(address, *parsed, caller, transactor, filterer), nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Call invokes the (constant) contract method with params as input values and</span>
<span class="term-fg32">+&#47;&#47; sets the output to result. The result type might be a single field for simple</span>
<span class="term-fg32">+&#47;&#47; returns, a slice of interfaces for anonymous returns and a struct for named</span>
<span class="term-fg32">+&#47;&#47; returns.</span>
<span class="term-fg32">+func (_SelfDestructFunction *SelfDestructFunctionRaw) Call(opts *bind.CallOpts, result *[]interface{}, method string, params ...interface{}) error {</span>
<span class="term-fg32">+	return _SelfDestructFunction.Contract.SelfDestructFunctionCaller.contract.Call(opts, result, method, params...)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Transfer initiates a plain transaction to move funds to the contract, calling</span>
<span class="term-fg32">+&#47;&#47; its default method if one is available.</span>
<span class="term-fg32">+func (_SelfDestructFunction *SelfDestructFunctionRaw) Transfer(opts *bind.TransactOpts) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _SelfDestructFunction.Contract.SelfDestructFunctionTransactor.contract.Transfer(opts)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Transact invokes the (paid) contract method with params as input values.</span>
<span class="term-fg32">+func (_SelfDestructFunction *SelfDestructFunctionRaw) Transact(opts *bind.TransactOpts, method string, params ...interface{}) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _SelfDestructFunction.Contract.SelfDestructFunctionTransactor.contract.Transact(opts, method, params...)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Call invokes the (constant) contract method with params as input values and</span>
<span class="term-fg32">+&#47;&#47; sets the output to result. The result type might be a single field for simple</span>
<span class="term-fg32">+&#47;&#47; returns, a slice of interfaces for anonymous returns and a struct for named</span>
<span class="term-fg32">+&#47;&#47; returns.</span>
<span class="term-fg32">+func (_SelfDestructFunction *SelfDestructFunctionCallerRaw) Call(opts *bind.CallOpts, result *[]interface{}, method string, params ...interface{}) error {</span>
<span class="term-fg32">+	return _SelfDestructFunction.Contract.contract.Call(opts, result, method, params...)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Transfer initiates a plain transaction to move funds to the contract, calling</span>
<span class="term-fg32">+&#47;&#47; its default method if one is available.</span>
<span class="term-fg32">+func (_SelfDestructFunction *SelfDestructFunctionTransactorRaw) Transfer(opts *bind.TransactOpts) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _SelfDestructFunction.Contract.contract.Transfer(opts)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Transact invokes the (paid) contract method with params as input values.</span>
<span class="term-fg32">+func (_SelfDestructFunction *SelfDestructFunctionTransactorRaw) Transact(opts *bind.TransactOpts, method string, params ...interface{}) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _SelfDestructFunction.Contract.contract.Transact(opts, method, params...)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SelfDestruct is a paid mutator transaction binding the contract method 0x3f5a0bdd.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function selfDestruct(address recipient) returns()</span>
<span class="term-fg32">+func (_SelfDestructFunction *SelfDestructFunctionTransactor) SelfDestruct(opts *bind.TransactOpts, recipient common.Address) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _SelfDestructFunction.contract.Transact(opts, &quot;selfDestruct&quot;, recipient)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SelfDestruct is a paid mutator transaction binding the contract method 0x3f5a0bdd.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function selfDestruct(address recipient) returns()</span>
<span class="term-fg32">+func (_SelfDestructFunction *SelfDestructFunctionSession) SelfDestruct(recipient common.Address) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _SelfDestructFunction.Contract.SelfDestruct(&amp;_SelfDestructFunction.TransactOpts, recipient)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SelfDestruct is a paid mutator transaction binding the contract method 0x3f5a0bdd.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function selfDestruct(address recipient) returns()</span>
<span class="term-fg32">+func (_SelfDestructFunction *SelfDestructFunctionTransactorSession) SelfDestruct(recipient common.Address) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _SelfDestructFunction.Contract.SelfDestruct(&amp;_SelfDestructFunction.TransactOpts, recipient)</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-0335a761e78a18226b738259" role="button"
                       aria-expanded="false" aria-controls="id-0335a761e78a18226b738259">
                        <code>tests/immutable/cancun/selfdestruct/function/selfdestructfunction.sol</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/cancun/selfdestruct/function/selfdestructfunction.sol" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+12</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-0335a761e78a18226b738259"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;cancun&#47;selfdestruct&#47;function&#47;selfdestructfunction.sol immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;selfdestruct&#47;function&#47;selfdestructfunction.sol</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..0b3eb67d2057449d7eb708b193c46966e633b1fc</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;selfdestruct&#47;function&#47;selfdestructfunction.sol</span>
<span class="term-fg36">@@ -0,0 +1,12 @@</span>
<span class="term-fg32">+&#47;&#47; SPDX-License-Identifier: UNLICENSED</span>
<span class="term-fg32">+pragma solidity 0.8.25;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+contract SelfDestructFunction {</span>
<span class="term-fg32">+    function selfDestruct(address recipient) external {</span>
<span class="term-fg32">+        selfdestruct(payable(recipient));</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+    receive() external payable {}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; build&#47;bin&#47;abigen --abi .&#47;tests&#47;immutable&#47;cancun&#47;selfdestruct&#47;function&#47;abi.json --pkg selfdestructfunction --type SelfDestructFunction --out .&#47;tests&#47;immutable&#47;cancun&#47;selfdestruct&#47;function&#47;selfdestructfunction.go --bin .&#47;tests&#47;immutable&#47;cancun&#47;selfdestruct&#47;function&#47;bytecode.bin</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-323c29cc513acea77fb06800" role="button"
                       aria-expanded="false" aria-controls="id-323c29cc513acea77fb06800">
                        <code>tests/immutable/cancun/transientstorage/abi.json</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/cancun/transientstorage/abi.json" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+18</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-323c29cc513acea77fb06800"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;cancun&#47;transientstorage&#47;abi.json immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;transientstorage&#47;abi.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..5c296507483edf2e7d2b7bff27e2da5359fd4db2</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;transientstorage&#47;abi.json</span>
<span class="term-fg36">@@ -0,0 +1,18 @@</span>
<span class="term-fg32">+[</span>
<span class="term-fg32">+	{</span>
<span class="term-fg32">+		&quot;type&quot;: &quot;function&quot;,</span>
<span class="term-fg32">+		&quot;name&quot;: &quot;tStoreLoad&quot;,</span>
<span class="term-fg32">+		&quot;inputs&quot;: [</span>
<span class="term-fg32">+			{ &quot;name&quot;: &quot;key&quot;, &quot;type&quot;: &quot;uint256&quot;, &quot;internalType&quot;: &quot;uint256&quot; },</span>
<span class="term-fg32">+			{ &quot;name&quot;: &quot;value&quot;, &quot;type&quot;: &quot;uint256&quot;, &quot;internalType&quot;: &quot;uint256&quot; }</span>
<span class="term-fg32">+		],</span>
<span class="term-fg32">+		&quot;outputs&quot;: [],</span>
<span class="term-fg32">+		&quot;stateMutability&quot;: &quot;nonpayable&quot;</span>
<span class="term-fg32">+	},</span>
<span class="term-fg32">+	{</span>
<span class="term-fg32">+		&quot;type&quot;: &quot;event&quot;,</span>
<span class="term-fg32">+		&quot;name&quot;: &quot;Value&quot;,</span>
<span class="term-fg32">+		&quot;inputs&quot;: [{ &quot;name&quot;: &quot;value&quot;, &quot;type&quot;: &quot;uint256&quot;, &quot;indexed&quot;: false, &quot;internalType&quot;: &quot;uint256&quot; }],</span>
<span class="term-fg32">+		&quot;anonymous&quot;: false</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+]</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-2d7de4ac58407fee43eb2ead" role="button"
                       aria-expanded="false" aria-controls="id-2d7de4ac58407fee43eb2ead">
                        <code>tests/immutable/cancun/transientstorage/bytecode.bin</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/cancun/transientstorage/bytecode.bin" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+0</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-2d7de4ac58407fee43eb2ead"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;cancun&#47;transientstorage&#47;bytecode.bin immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;transientstorage&#47;bytecode.bin</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..fa0be7b295996a6afd408c7817c2471ba587bbae</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;transientstorage&#47;bytecode.bin</span>
<span class="term-fg36">@@ -0,0 +1 @@</span>
<span class="term-fg32">+608060405234801561001057600080fd5b5060f48061001f6000396000f3fe6080604052348015600f57600080fd5b506004361060285760003560e01c806366a82e4a14602d575b600080fd5b603c6038366004607c565b603e565b005b80825d50604051815c808252907f2a27502c345a4cd966daa061d5537f54cd60d2d20b73680b3bf195c91e806a4b9060200160405180910390a15050565b60008060408385031215608e57600080fd5b5050803592602090910135915056fea2646970667358221220632312d849916834c328572910b3d44422cfb2ab00f8a234e5eaab69d71d0b6a64736f6c637823302e382e32322d63692e323032332e392e32312b636f6d6d69742e33633536396462390054</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-1a3ad04767727a989c1b834e" role="button"
                       aria-expanded="false" aria-controls="id-1a3ad04767727a989c1b834e">
                        <code>tests/immutable/cancun/transientstorage/transientstorage.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/cancun/transientstorage/transientstorage.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+358</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-1a3ad04767727a989c1b834e"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;cancun&#47;transientstorage&#47;transientstorage.go immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;transientstorage&#47;transientstorage.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..e694b034afee5f9341198160069fd17bdb36d3c6</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;transientstorage&#47;transientstorage.go</span>
<span class="term-fg36">@@ -0,0 +1,358 @@</span>
<span class="term-fg32">+&#47;&#47; Code generated - DO NOT EDIT.</span>
<span class="term-fg32">+&#47;&#47; This file is a generated binding and any manual changes will be lost.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package transientstorage</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;errors&quot;</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+	&quot;strings&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	ethereum &quot;github.com&#47;ethereum&#47;go-ethereum&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&#47;abi&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&#47;abi&#47;bind&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;event&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Reference imports to suppress errors if they are not otherwise used.</span>
<span class="term-fg32">+var (</span>
<span class="term-fg32">+	_ = errors.New</span>
<span class="term-fg32">+	_ = big.NewInt</span>
<span class="term-fg32">+	_ = strings.NewReader</span>
<span class="term-fg32">+	_ = ethereum.NotFound</span>
<span class="term-fg32">+	_ = bind.Bind</span>
<span class="term-fg32">+	_ = common.Big1</span>
<span class="term-fg32">+	_ = types.BloomLookup</span>
<span class="term-fg32">+	_ = event.NewSubscription</span>
<span class="term-fg32">+	_ = abi.ConvertType</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; TransientStorageMetaData contains all meta data concerning the TransientStorage contract.</span>
<span class="term-fg32">+var TransientStorageMetaData = &amp;bind.MetaData{</span>
<span class="term-fg32">+	ABI: &quot;[{\&quot;type\&quot;:\&quot;function\&quot;,\&quot;name\&quot;:\&quot;tStoreLoad\&quot;,\&quot;inputs\&quot;:[{\&quot;name\&quot;:\&quot;key\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;,\&quot;internalType\&quot;:\&quot;uint256\&quot;},{\&quot;name\&quot;:\&quot;value\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;,\&quot;internalType\&quot;:\&quot;uint256\&quot;}],\&quot;outputs\&quot;:[],\&quot;stateMutability\&quot;:\&quot;nonpayable\&quot;},{\&quot;type\&quot;:\&quot;event\&quot;,\&quot;name\&quot;:\&quot;Value\&quot;,\&quot;inputs\&quot;:[{\&quot;name\&quot;:\&quot;value\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;,\&quot;indexed\&quot;:false,\&quot;internalType\&quot;:\&quot;uint256\&quot;}],\&quot;anonymous\&quot;:false}]&quot;,</span>
<span class="term-fg32">+	Bin: &quot;0x608060405234801561001057600080fd5b5060f48061001f6000396000f3fe6080604052348015600f57600080fd5b506004361060285760003560e01c806366a82e4a14602d575b600080fd5b603c6038366004607c565b603e565b005b80825d50604051815c808252907f2a27502c345a4cd966daa061d5537f54cd60d2d20b73680b3bf195c91e806a4b9060200160405180910390a15050565b60008060408385031215608e57600080fd5b5050803592602090910135915056fea2646970667358221220632312d849916834c328572910b3d44422cfb2ab00f8a234e5eaab69d71d0b6a64736f6c637823302e382e32322d63692e323032332e392e32312b636f6d6d69742e33633536396462390054&quot;,</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; TransientStorageABI is the input ABI used to generate the binding from.</span>
<span class="term-fg32">+&#47;&#47; Deprecated: Use TransientStorageMetaData.ABI instead.</span>
<span class="term-fg32">+var TransientStorageABI = TransientStorageMetaData.ABI</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; TransientStorageBin is the compiled bytecode used for deploying new contracts.</span>
<span class="term-fg32">+&#47;&#47; Deprecated: Use TransientStorageMetaData.Bin instead.</span>
<span class="term-fg32">+var TransientStorageBin = TransientStorageMetaData.Bin</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; DeployTransientStorage deploys a new Ethereum contract, binding an instance of TransientStorage to it.</span>
<span class="term-fg32">+func DeployTransientStorage(auth *bind.TransactOpts, backend bind.ContractBackend) (common.Address, *types.Transaction, *TransientStorage, error) {</span>
<span class="term-fg32">+	parsed, err := TransientStorageMetaData.GetAbi()</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return common.Address{}, nil, nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if parsed == nil {</span>
<span class="term-fg32">+		return common.Address{}, nil, nil, errors.New(&quot;GetABI returned nil&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	address, tx, contract, err := bind.DeployContract(auth, *parsed, common.FromHex(TransientStorageBin), backend)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return common.Address{}, nil, nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return address, tx, &amp;TransientStorage{TransientStorageCaller: TransientStorageCaller{contract: contract}, TransientStorageTransactor: TransientStorageTransactor{contract: contract}, TransientStorageFilterer: TransientStorageFilterer{contract: contract}}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; TransientStorage is an auto generated Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type TransientStorage struct {</span>
<span class="term-fg32">+	TransientStorageCaller     &#47;&#47; Read-only binding to the contract</span>
<span class="term-fg32">+	TransientStorageTransactor &#47;&#47; Write-only binding to the contract</span>
<span class="term-fg32">+	TransientStorageFilterer   &#47;&#47; Log filterer for contract events</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; TransientStorageCaller is an auto generated read-only Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type TransientStorageCaller struct {</span>
<span class="term-fg32">+	contract *bind.BoundContract &#47;&#47; Generic contract wrapper for the low level calls</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; TransientStorageTransactor is an auto generated write-only Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type TransientStorageTransactor struct {</span>
<span class="term-fg32">+	contract *bind.BoundContract &#47;&#47; Generic contract wrapper for the low level calls</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; TransientStorageFilterer is an auto generated log filtering Go binding around an Ethereum contract events.</span>
<span class="term-fg32">+type TransientStorageFilterer struct {</span>
<span class="term-fg32">+	contract *bind.BoundContract &#47;&#47; Generic contract wrapper for the low level calls</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; TransientStorageSession is an auto generated Go binding around an Ethereum contract,</span>
<span class="term-fg32">+&#47;&#47; with pre-set call and transact options.</span>
<span class="term-fg32">+type TransientStorageSession struct {</span>
<span class="term-fg32">+	Contract     *TransientStorage &#47;&#47; Generic contract binding to set the session for</span>
<span class="term-fg32">+	CallOpts     bind.CallOpts     &#47;&#47; Call options to use throughout this session</span>
<span class="term-fg32">+	TransactOpts bind.TransactOpts &#47;&#47; Transaction auth options to use throughout this session</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; TransientStorageCallerSession is an auto generated read-only Go binding around an Ethereum contract,</span>
<span class="term-fg32">+&#47;&#47; with pre-set call options.</span>
<span class="term-fg32">+type TransientStorageCallerSession struct {</span>
<span class="term-fg32">+	Contract *TransientStorageCaller &#47;&#47; Generic contract caller binding to set the session for</span>
<span class="term-fg32">+	CallOpts bind.CallOpts           &#47;&#47; Call options to use throughout this session</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; TransientStorageTransactorSession is an auto generated write-only Go binding around an Ethereum contract,</span>
<span class="term-fg32">+&#47;&#47; with pre-set transact options.</span>
<span class="term-fg32">+type TransientStorageTransactorSession struct {</span>
<span class="term-fg32">+	Contract     *TransientStorageTransactor &#47;&#47; Generic contract transactor binding to set the session for</span>
<span class="term-fg32">+	TransactOpts bind.TransactOpts           &#47;&#47; Transaction auth options to use throughout this session</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; TransientStorageRaw is an auto generated low-level Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type TransientStorageRaw struct {</span>
<span class="term-fg32">+	Contract *TransientStorage &#47;&#47; Generic contract binding to access the raw methods on</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; TransientStorageCallerRaw is an auto generated low-level read-only Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type TransientStorageCallerRaw struct {</span>
<span class="term-fg32">+	Contract *TransientStorageCaller &#47;&#47; Generic read-only contract binding to access the raw methods on</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; TransientStorageTransactorRaw is an auto generated low-level write-only Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type TransientStorageTransactorRaw struct {</span>
<span class="term-fg32">+	Contract *TransientStorageTransactor &#47;&#47; Generic write-only contract binding to access the raw methods on</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewTransientStorage creates a new instance of TransientStorage, bound to a specific deployed contract.</span>
<span class="term-fg32">+func NewTransientStorage(address common.Address, backend bind.ContractBackend) (*TransientStorage, error) {</span>
<span class="term-fg32">+	contract, err := bindTransientStorage(address, backend, backend, backend)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;TransientStorage{TransientStorageCaller: TransientStorageCaller{contract: contract}, TransientStorageTransactor: TransientStorageTransactor{contract: contract}, TransientStorageFilterer: TransientStorageFilterer{contract: contract}}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewTransientStorageCaller creates a new read-only instance of TransientStorage, bound to a specific deployed contract.</span>
<span class="term-fg32">+func NewTransientStorageCaller(address common.Address, caller bind.ContractCaller) (*TransientStorageCaller, error) {</span>
<span class="term-fg32">+	contract, err := bindTransientStorage(address, caller, nil, nil)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;TransientStorageCaller{contract: contract}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewTransientStorageTransactor creates a new write-only instance of TransientStorage, bound to a specific deployed contract.</span>
<span class="term-fg32">+func NewTransientStorageTransactor(address common.Address, transactor bind.ContractTransactor) (*TransientStorageTransactor, error) {</span>
<span class="term-fg32">+	contract, err := bindTransientStorage(address, nil, transactor, nil)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;TransientStorageTransactor{contract: contract}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewTransientStorageFilterer creates a new log filterer instance of TransientStorage, bound to a specific deployed contract.</span>
<span class="term-fg32">+func NewTransientStorageFilterer(address common.Address, filterer bind.ContractFilterer) (*TransientStorageFilterer, error) {</span>
<span class="term-fg32">+	contract, err := bindTransientStorage(address, nil, nil, filterer)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;TransientStorageFilterer{contract: contract}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; bindTransientStorage binds a generic wrapper to an already deployed contract.</span>
<span class="term-fg32">+func bindTransientStorage(address common.Address, caller bind.ContractCaller, transactor bind.ContractTransactor, filterer bind.ContractFilterer) (*bind.BoundContract, error) {</span>
<span class="term-fg32">+	parsed, err := TransientStorageMetaData.GetAbi()</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return bind.NewBoundContract(address, *parsed, caller, transactor, filterer), nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Call invokes the (constant) contract method with params as input values and</span>
<span class="term-fg32">+&#47;&#47; sets the output to result. The result type might be a single field for simple</span>
<span class="term-fg32">+&#47;&#47; returns, a slice of interfaces for anonymous returns and a struct for named</span>
<span class="term-fg32">+&#47;&#47; returns.</span>
<span class="term-fg32">+func (_TransientStorage *TransientStorageRaw) Call(opts *bind.CallOpts, result *[]interface{}, method string, params ...interface{}) error {</span>
<span class="term-fg32">+	return _TransientStorage.Contract.TransientStorageCaller.contract.Call(opts, result, method, params...)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Transfer initiates a plain transaction to move funds to the contract, calling</span>
<span class="term-fg32">+&#47;&#47; its default method if one is available.</span>
<span class="term-fg32">+func (_TransientStorage *TransientStorageRaw) Transfer(opts *bind.TransactOpts) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _TransientStorage.Contract.TransientStorageTransactor.contract.Transfer(opts)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Transact invokes the (paid) contract method with params as input values.</span>
<span class="term-fg32">+func (_TransientStorage *TransientStorageRaw) Transact(opts *bind.TransactOpts, method string, params ...interface{}) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _TransientStorage.Contract.TransientStorageTransactor.contract.Transact(opts, method, params...)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Call invokes the (constant) contract method with params as input values and</span>
<span class="term-fg32">+&#47;&#47; sets the output to result. The result type might be a single field for simple</span>
<span class="term-fg32">+&#47;&#47; returns, a slice of interfaces for anonymous returns and a struct for named</span>
<span class="term-fg32">+&#47;&#47; returns.</span>
<span class="term-fg32">+func (_TransientStorage *TransientStorageCallerRaw) Call(opts *bind.CallOpts, result *[]interface{}, method string, params ...interface{}) error {</span>
<span class="term-fg32">+	return _TransientStorage.Contract.contract.Call(opts, result, method, params...)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Transfer initiates a plain transaction to move funds to the contract, calling</span>
<span class="term-fg32">+&#47;&#47; its default method if one is available.</span>
<span class="term-fg32">+func (_TransientStorage *TransientStorageTransactorRaw) Transfer(opts *bind.TransactOpts) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _TransientStorage.Contract.contract.Transfer(opts)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Transact invokes the (paid) contract method with params as input values.</span>
<span class="term-fg32">+func (_TransientStorage *TransientStorageTransactorRaw) Transact(opts *bind.TransactOpts, method string, params ...interface{}) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _TransientStorage.Contract.contract.Transact(opts, method, params...)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; TStoreLoad is a paid mutator transaction binding the contract method 0x66a82e4a.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function tStoreLoad(uint256 key, uint256 value) returns()</span>
<span class="term-fg32">+func (_TransientStorage *TransientStorageTransactor) TStoreLoad(opts *bind.TransactOpts, key *big.Int, value *big.Int) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _TransientStorage.contract.Transact(opts, &quot;tStoreLoad&quot;, key, value)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; TStoreLoad is a paid mutator transaction binding the contract method 0x66a82e4a.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function tStoreLoad(uint256 key, uint256 value) returns()</span>
<span class="term-fg32">+func (_TransientStorage *TransientStorageSession) TStoreLoad(key *big.Int, value *big.Int) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _TransientStorage.Contract.TStoreLoad(&amp;_TransientStorage.TransactOpts, key, value)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; TStoreLoad is a paid mutator transaction binding the contract method 0x66a82e4a.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function tStoreLoad(uint256 key, uint256 value) returns()</span>
<span class="term-fg32">+func (_TransientStorage *TransientStorageTransactorSession) TStoreLoad(key *big.Int, value *big.Int) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _TransientStorage.Contract.TStoreLoad(&amp;_TransientStorage.TransactOpts, key, value)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; TransientStorageValueIterator is returned from FilterValue and is used to iterate over the raw logs and unpacked data for Value events raised by the TransientStorage contract.</span>
<span class="term-fg32">+type TransientStorageValueIterator struct {</span>
<span class="term-fg32">+	Event *TransientStorageValue &#47;&#47; Event containing the contract specifics and raw log</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	contract *bind.BoundContract &#47;&#47; Generic contract to use for unpacking event data</span>
<span class="term-fg32">+	event    string              &#47;&#47; Event name to use for unpacking event data</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	logs chan types.Log        &#47;&#47; Log channel receiving the found contract events</span>
<span class="term-fg32">+	sub  ethereum.Subscription &#47;&#47; Subscription for errors, completion and termination</span>
<span class="term-fg32">+	done bool                  &#47;&#47; Whether the subscription completed delivering logs</span>
<span class="term-fg32">+	fail error                 &#47;&#47; Occurred error to stop iteration</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Next advances the iterator to the subsequent event, returning whether there</span>
<span class="term-fg32">+&#47;&#47; are any more events found. In case of a retrieval or parsing error, false is</span>
<span class="term-fg32">+&#47;&#47; returned and Error() can be queried for the exact failure.</span>
<span class="term-fg32">+func (it *TransientStorageValueIterator) Next() bool {</span>
<span class="term-fg32">+	&#47;&#47; If the iterator failed, stop iterating</span>
<span class="term-fg32">+	if it.fail != nil {</span>
<span class="term-fg32">+		return false</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; If the iterator completed, deliver directly whatever&#39;s available</span>
<span class="term-fg32">+	if it.done {</span>
<span class="term-fg32">+		select {</span>
<span class="term-fg32">+		case log := &lt;-it.logs:</span>
<span class="term-fg32">+			it.Event = new(TransientStorageValue)</span>
<span class="term-fg32">+			if err := it.contract.UnpackLog(it.Event, it.event, log); err != nil {</span>
<span class="term-fg32">+				it.fail = err</span>
<span class="term-fg32">+				return false</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			it.Event.Raw = log</span>
<span class="term-fg32">+			return true</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		default:</span>
<span class="term-fg32">+			return false</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Iterator still in progress, wait for either a data or an error event</span>
<span class="term-fg32">+	select {</span>
<span class="term-fg32">+	case log := &lt;-it.logs:</span>
<span class="term-fg32">+		it.Event = new(TransientStorageValue)</span>
<span class="term-fg32">+		if err := it.contract.UnpackLog(it.Event, it.event, log); err != nil {</span>
<span class="term-fg32">+			it.fail = err</span>
<span class="term-fg32">+			return false</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		it.Event.Raw = log</span>
<span class="term-fg32">+		return true</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	case err := &lt;-it.sub.Err():</span>
<span class="term-fg32">+		it.done = true</span>
<span class="term-fg32">+		it.fail = err</span>
<span class="term-fg32">+		return it.Next()</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Error returns any retrieval or parsing error occurred during filtering.</span>
<span class="term-fg32">+func (it *TransientStorageValueIterator) Error() error {</span>
<span class="term-fg32">+	return it.fail</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Close terminates the iteration process, releasing any pending underlying</span>
<span class="term-fg32">+&#47;&#47; resources.</span>
<span class="term-fg32">+func (it *TransientStorageValueIterator) Close() error {</span>
<span class="term-fg32">+	it.sub.Unsubscribe()</span>
<span class="term-fg32">+	return nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; TransientStorageValue represents a Value event raised by the TransientStorage contract.</span>
<span class="term-fg32">+type TransientStorageValue struct {</span>
<span class="term-fg32">+	Value *big.Int</span>
<span class="term-fg32">+	Raw   types.Log &#47;&#47; Blockchain specific contextual infos</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; FilterValue is a free log retrieval operation binding the contract event 0x2a27502c345a4cd966daa061d5537f54cd60d2d20b73680b3bf195c91e806a4b.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: event Value(uint256 value)</span>
<span class="term-fg32">+func (_TransientStorage *TransientStorageFilterer) FilterValue(opts *bind.FilterOpts) (*TransientStorageValueIterator, error) {</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	logs, sub, err := _TransientStorage.contract.FilterLogs(opts, &quot;Value&quot;)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;TransientStorageValueIterator{contract: _TransientStorage.contract, event: &quot;Value&quot;, logs: logs, sub: sub}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; WatchValue is a free log subscription operation binding the contract event 0x2a27502c345a4cd966daa061d5537f54cd60d2d20b73680b3bf195c91e806a4b.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: event Value(uint256 value)</span>
<span class="term-fg32">+func (_TransientStorage *TransientStorageFilterer) WatchValue(opts *bind.WatchOpts, sink chan&lt;- *TransientStorageValue) (event.Subscription, error) {</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	logs, sub, err := _TransientStorage.contract.WatchLogs(opts, &quot;Value&quot;)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return event.NewSubscription(func(quit &lt;-chan struct{}) error {</span>
<span class="term-fg32">+		defer sub.Unsubscribe()</span>
<span class="term-fg32">+		for {</span>
<span class="term-fg32">+			select {</span>
<span class="term-fg32">+			case log := &lt;-logs:</span>
<span class="term-fg32">+				&#47;&#47; New log arrived, parse the event and forward to the user</span>
<span class="term-fg32">+				event := new(TransientStorageValue)</span>
<span class="term-fg32">+				if err := _TransientStorage.contract.UnpackLog(event, &quot;Value&quot;, log); err != nil {</span>
<span class="term-fg32">+					return err</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+				event.Raw = log</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+				select {</span>
<span class="term-fg32">+				case sink &lt;- event:</span>
<span class="term-fg32">+				case err := &lt;-sub.Err():</span>
<span class="term-fg32">+					return err</span>
<span class="term-fg32">+				case &lt;-quit:</span>
<span class="term-fg32">+					return nil</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+			case err := &lt;-sub.Err():</span>
<span class="term-fg32">+				return err</span>
<span class="term-fg32">+			case &lt;-quit:</span>
<span class="term-fg32">+				return nil</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}), nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ParseValue is a log parse operation binding the contract event 0x2a27502c345a4cd966daa061d5537f54cd60d2d20b73680b3bf195c91e806a4b.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: event Value(uint256 value)</span>
<span class="term-fg32">+func (_TransientStorage *TransientStorageFilterer) ParseValue(log types.Log) (*TransientStorageValue, error) {</span>
<span class="term-fg32">+	event := new(TransientStorageValue)</span>
<span class="term-fg32">+	if err := _TransientStorage.contract.UnpackLog(event, &quot;Value&quot;, log); err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	event.Raw = log</span>
<span class="term-fg32">+	return event, nil</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-fc1f049c2463c31cd3bde273" role="button"
                       aria-expanded="false" aria-controls="id-fc1f049c2463c31cd3bde273">
                        <code>tests/immutable/cancun/transientstorage/transientstorage.sol</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/cancun/transientstorage/transientstorage.sol" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+15</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-fc1f049c2463c31cd3bde273"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;cancun&#47;transientstorage&#47;transientstorage.sol immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;transientstorage&#47;transientstorage.sol</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..50e80ade48b949e576140d79fa4fbe50c0915ec4</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;cancun&#47;transientstorage&#47;transientstorage.sol</span>
<span class="term-fg36">@@ -0,0 +1,15 @@</span>
<span class="term-fg32">+&#47;&#47; SPDX-License-Identifier: Unlicense</span>
<span class="term-fg32">+pragma solidity ^0.8.20;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+contract SimpleTStore {</span>
<span class="term-fg32">+    event Value(uint value);</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+    function tStoreLoad(uint key, uint value) external returns (uint) {</span>
<span class="term-fg32">+        assembly {</span>
<span class="term-fg32">+            tstore(key, value)</span>
<span class="term-fg32">+            value := tload(key)</span>
<span class="term-fg32">+        }</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; build&#47;bin&#47;abigen --abi .&#47;tests&#47;immutable&#47;cancun&#47;transientstorage&#47;abi.json --pkg transientstorage --type TransientStorage --out .&#47;tests&#47;immutable&#47;cancun&#47;transientstorage&#47;transientstorage.go --bin .&#47;tests&#47;immutable&#47;cancun&#47;transientstorage&#47;bytecode.bin</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-43169c265c788b289c19f952" role="button"
                       aria-expanded="false" aria-controls="id-43169c265c788b289c19f952">
                        <code>tests/immutable/erc20/abi.json</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/erc20/abi.json" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+276</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-43169c265c788b289c19f952"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;erc20&#47;abi.json immutable-geth&#47;tests&#47;immutable&#47;erc20&#47;abi.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..87057e7722ad3bd0afeb284da3240be3fbfb7d94</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;erc20&#47;abi.json</span>
<span class="term-fg36">@@ -0,0 +1,277 @@</span>
<span class="term-fg32">+[</span>
<span class="term-fg32">+  {</span>
<span class="term-fg32">+    &quot;inputs&quot;: [],</span>
<span class="term-fg32">+    &quot;stateMutability&quot;: &quot;nonpayable&quot;,</span>
<span class="term-fg32">+    &quot;type&quot;: &quot;constructor&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  {</span>
<span class="term-fg32">+    &quot;anonymous&quot;: false,</span>
<span class="term-fg32">+    &quot;inputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;indexed&quot;: true,</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;address&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;owner&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;address&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;indexed&quot;: true,</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;address&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;spender&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;address&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;indexed&quot;: false,</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;uint256&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;value&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;uint256&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;name&quot;: &quot;Approval&quot;,</span>
<span class="term-fg32">+    &quot;type&quot;: &quot;event&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  {</span>
<span class="term-fg32">+    &quot;anonymous&quot;: false,</span>
<span class="term-fg32">+    &quot;inputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;indexed&quot;: true,</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;address&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;from&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;address&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;indexed&quot;: true,</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;address&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;to&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;address&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;indexed&quot;: false,</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;uint256&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;value&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;uint256&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;name&quot;: &quot;Transfer&quot;,</span>
<span class="term-fg32">+    &quot;type&quot;: &quot;event&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  {</span>
<span class="term-fg32">+    &quot;inputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;address&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;owner&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;address&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;address&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;spender&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;address&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;name&quot;: &quot;allowance&quot;,</span>
<span class="term-fg32">+    &quot;outputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;uint256&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;uint256&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;stateMutability&quot;: &quot;view&quot;,</span>
<span class="term-fg32">+    &quot;type&quot;: &quot;function&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  {</span>
<span class="term-fg32">+    &quot;inputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;address&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;spender&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;address&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;uint256&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;amount&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;uint256&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;name&quot;: &quot;approve&quot;,</span>
<span class="term-fg32">+    &quot;outputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;bool&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;bool&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;stateMutability&quot;: &quot;nonpayable&quot;,</span>
<span class="term-fg32">+    &quot;type&quot;: &quot;function&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  {</span>
<span class="term-fg32">+    &quot;inputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;address&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;account&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;address&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;name&quot;: &quot;balanceOf&quot;,</span>
<span class="term-fg32">+    &quot;outputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;uint256&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;uint256&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;stateMutability&quot;: &quot;view&quot;,</span>
<span class="term-fg32">+    &quot;type&quot;: &quot;function&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  {</span>
<span class="term-fg32">+    &quot;inputs&quot;: [],</span>
<span class="term-fg32">+    &quot;name&quot;: &quot;decimals&quot;,</span>
<span class="term-fg32">+    &quot;outputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;uint8&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;uint8&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;stateMutability&quot;: &quot;view&quot;,</span>
<span class="term-fg32">+    &quot;type&quot;: &quot;function&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  {</span>
<span class="term-fg32">+    &quot;inputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;address&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;spender&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;address&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;uint256&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;subtractedValue&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;uint256&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;name&quot;: &quot;decreaseAllowance&quot;,</span>
<span class="term-fg32">+    &quot;outputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;bool&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;bool&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;stateMutability&quot;: &quot;nonpayable&quot;,</span>
<span class="term-fg32">+    &quot;type&quot;: &quot;function&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  {</span>
<span class="term-fg32">+    &quot;inputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;address&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;spender&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;address&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;uint256&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;addedValue&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;uint256&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;name&quot;: &quot;increaseAllowance&quot;,</span>
<span class="term-fg32">+    &quot;outputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;bool&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;bool&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;stateMutability&quot;: &quot;nonpayable&quot;,</span>
<span class="term-fg32">+    &quot;type&quot;: &quot;function&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  {</span>
<span class="term-fg32">+    &quot;inputs&quot;: [],</span>
<span class="term-fg32">+    &quot;name&quot;: &quot;name&quot;,</span>
<span class="term-fg32">+    &quot;outputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;string&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;string&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;stateMutability&quot;: &quot;view&quot;,</span>
<span class="term-fg32">+    &quot;type&quot;: &quot;function&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  {</span>
<span class="term-fg32">+    &quot;inputs&quot;: [],</span>
<span class="term-fg32">+    &quot;name&quot;: &quot;symbol&quot;,</span>
<span class="term-fg32">+    &quot;outputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;string&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;string&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;stateMutability&quot;: &quot;view&quot;,</span>
<span class="term-fg32">+    &quot;type&quot;: &quot;function&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  {</span>
<span class="term-fg32">+    &quot;inputs&quot;: [],</span>
<span class="term-fg32">+    &quot;name&quot;: &quot;totalSupply&quot;,</span>
<span class="term-fg32">+    &quot;outputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;uint256&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;uint256&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;stateMutability&quot;: &quot;view&quot;,</span>
<span class="term-fg32">+    &quot;type&quot;: &quot;function&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  {</span>
<span class="term-fg32">+    &quot;inputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;address&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;to&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;address&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;uint256&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;amount&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;uint256&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;name&quot;: &quot;transfer&quot;,</span>
<span class="term-fg32">+    &quot;outputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;bool&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;bool&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;stateMutability&quot;: &quot;nonpayable&quot;,</span>
<span class="term-fg32">+    &quot;type&quot;: &quot;function&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  {</span>
<span class="term-fg32">+    &quot;inputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;address&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;from&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;address&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;address&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;to&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;address&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;uint256&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;amount&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;uint256&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;name&quot;: &quot;transferFrom&quot;,</span>
<span class="term-fg32">+    &quot;outputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;bool&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;bool&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;stateMutability&quot;: &quot;nonpayable&quot;,</span>
<span class="term-fg32">+    &quot;type&quot;: &quot;function&quot;</span>
<span class="term-fg32">+  }</span>
<span class="term-fg32">+]</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-20e4d855b697977501107298" role="button"
                       aria-expanded="false" aria-controls="id-20e4d855b697977501107298">
                        <code>tests/immutable/erc20/bytecode.bin</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/erc20/bytecode.bin" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+0</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-20e4d855b697977501107298"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;erc20&#47;bytecode.bin immutable-geth&#47;tests&#47;immutable&#47;erc20&#47;bytecode.bin</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..0aff46dca51d9c4bd6b6e1833c8217a4b19c9a0b</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;erc20&#47;bytecode.bin</span>
<span class="term-fg36">@@ -0,0 +1 @@</span>
<span class="term-fg32">+0x60806040523480156200001157600080fd5b506040518060400160405280600781526020017f426974436f696e000000000000000000000000000000000000000000000000008152506040518060400160405280600381526020017f425443000000000000000000000000000000000000000000000000000000000081525081600390816200008f9190620004b6565b508060049081620000a19190620004b6565b505050620000bf3368056bc75e2d63100000620000c560201b60201c565b620006b8565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff160362000137576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016200012e90620005fe565b60405180910390fd5b6200014b600083836200023260201b60201c565b80600260008282546200015f91906200064f565b92505081905550806000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055508173ffffffffffffffffffffffffffffffffffffffff16600073ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef836040516200021291906200069b565b60405180910390a36200022e600083836200023760201b60201c565b5050565b505050565b505050565b600081519050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b60006002820490506001821680620002be57607f821691505b602082108103620002d457620002d362000276565b5b50919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b6000600883026200033e7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82620002ff565b6200034a8683620002ff565b95508019841693508086168417925050509392505050565b6000819050919050565b6000819050919050565b600062000397620003916200038b8462000362565b6200036c565b62000362565b9050919050565b6000819050919050565b620003b38362000376565b620003cb620003c2826200039e565b8484546200030c565b825550505050565b600090565b620003e2620003d3565b620003ef818484620003a8565b505050565b5b8181101562000417576200040b600082620003d8565b600181019050620003f5565b5050565b601f82111562000466576200043081620002da565b6200043b84620002ef565b810160208510156200044b578190505b620004636200045a85620002ef565b830182620003f4565b50505b505050565b600082821c905092915050565b60006200048b600019846008026200046b565b1980831691505092915050565b6000620004a6838362000478565b9150826002028217905092915050565b620004c1826200023c565b67ffffffffffffffff811115620004dd57620004dc62000247565b5b620004e98254620002a5565b620004f68282856200041b565b600060209050601f8311600181146200052e576000841562000519578287015190505b62000525858262000498565b86555062000595565b601f1984166200053e86620002da565b60005b82811015620005685784890151825560018201915060208501945060208101905062000541565b8683101562000588578489015162000584601f89168262000478565b8355505b6001600288020188555050505b505050505050565b600082825260208201905092915050565b7f45524332303a206d696e7420746f20746865207a65726f206164647265737300600082015250565b6000620005e6601f836200059d565b9150620005f382620005ae565b602082019050919050565b600060208201905081810360008301526200061981620005d7565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b60006200065c8262000362565b9150620006698362000362565b925082820190508082111562000684576200068362000620565b5b92915050565b620006958162000362565b82525050565b6000602082019050620006b260008301846200068a565b92915050565b61122f80620006c86000396000f3fe608060405234801561001057600080fd5b50600436106100a95760003560e01c80633950935111610071578063395093511461016857806370a082311461019857806395d89b41146101c8578063a457c2d7146101e6578063a9059cbb14610216578063dd62ed3e14610246576100a9565b806306fdde03146100ae578063095ea7b3146100cc57806318160ddd146100fc57806323b872dd1461011a578063313ce5671461014a575b600080fd5b6100b6610276565b6040516100c39190610b0c565b60405180910390f35b6100e660048036038101906100e19190610bc7565b610308565b6040516100f39190610c22565b60405180910390f35b61010461032b565b6040516101119190610c4c565b60405180910390f35b610134600480360381019061012f9190610c67565b610335565b6040516101419190610c22565b60405180910390f35b610152610364565b60405161015f9190610cd6565b60405180910390f35b610182600480360381019061017d9190610bc7565b61036d565b60405161018f9190610c22565b60405180910390f35b6101b260048036038101906101ad9190610cf1565b6103a4565b6040516101bf9190610c4c565b60405180910390f35b6101d06103ec565b6040516101dd9190610b0c565b60405180910390f35b61020060048036038101906101fb9190610bc7565b61047e565b60405161020d9190610c22565b60405180910390f35b610230600480360381019061022b9190610bc7565b6104f5565b60405161023d9190610c22565b60405180910390f35b610260600480360381019061025b9190610d1e565b610518565b60405161026d9190610c4c565b60405180910390f35b60606003805461028590610d8d565b80601f01602080910402602001604051908101604052809291908181526020018280546102b190610d8d565b80156102fe5780601f106102d3576101008083540402835291602001916102fe565b820191906000526020600020905b8154815290600101906020018083116102e157829003601f168201915b5050505050905090565b60008061031361059f565b90506103208185856105a7565b600191505092915050565b6000600254905090565b60008061034061059f565b905061034d858285610770565b6103588585856107fc565b60019150509392505050565b60006012905090565b60008061037861059f565b905061039981858561038a8589610518565b6103949190610ded565b6105a7565b600191505092915050565b60008060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b6060600480546103fb90610d8d565b80601f016020809104026020016040519081016040528092919081815260200182805461042790610d8d565b80156104745780601f1061044957610100808354040283529160200191610474565b820191906000526020600020905b81548152906001019060200180831161045757829003601f168201915b5050505050905090565b60008061048961059f565b905060006104978286610518565b9050838110156104dc576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016104d390610e93565b60405180910390fd5b6104e982868684036105a7565b60019250505092915050565b60008061050061059f565b905061050d8185856107fc565b600191505092915050565b6000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905092915050565b600033905090565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603610616576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161060d90610f25565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610685576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161067c90610fb7565b60405180910390fd5b80600160008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925836040516107639190610c4c565b60405180910390a3505050565b600061077c8484610518565b90507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff81146107f657818110156107e8576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016107df90611023565b60405180910390fd5b6107f584848484036105a7565b5b50505050565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff160361086b576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610862906110b5565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036108da576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016108d190611147565b60405180910390fd5b6108e5838383610a72565b60008060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205490508181101561096b576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610962906111d9565b60405180910390fd5b8181036000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550816000808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055508273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef84604051610a599190610c4c565b60405180910390a3610a6c848484610a77565b50505050565b505050565b505050565b600081519050919050565b600082825260208201905092915050565b60005b83811015610ab6578082015181840152602081019050610a9b565b60008484015250505050565b6000601f19601f8301169050919050565b6000610ade82610a7c565b610ae88185610a87565b9350610af8818560208601610a98565b610b0181610ac2565b840191505092915050565b60006020820190508181036000830152610b268184610ad3565b905092915050565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000610b5e82610b33565b9050919050565b610b6e81610b53565b8114610b7957600080fd5b50565b600081359050610b8b81610b65565b92915050565b6000819050919050565b610ba481610b91565b8114610baf57600080fd5b50565b600081359050610bc181610b9b565b92915050565b60008060408385031215610bde57610bdd610b2e565b5b6000610bec85828601610b7c565b9250506020610bfd85828601610bb2565b9150509250929050565b60008115159050919050565b610c1c81610c07565b82525050565b6000602082019050610c376000830184610c13565b92915050565b610c4681610b91565b82525050565b6000602082019050610c616000830184610c3d565b92915050565b600080600060608486031215610c8057610c7f610b2e565b5b6000610c8e86828701610b7c565b9350506020610c9f86828701610b7c565b9250506040610cb086828701610bb2565b9150509250925092565b600060ff82169050919050565b610cd081610cba565b82525050565b6000602082019050610ceb6000830184610cc7565b92915050565b600060208284031215610d0757610d06610b2e565b5b6000610d1584828501610b7c565b91505092915050565b60008060408385031215610d3557610d34610b2e565b5b6000610d4385828601610b7c565b9250506020610d5485828601610b7c565b9150509250929050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b60006002820490506001821680610da557607f821691505b602082108103610db857610db7610d5e565b5b50919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6000610df882610b91565b9150610e0383610b91565b9250828201905080821115610e1b57610e1a610dbe565b5b92915050565b7f45524332303a2064656372656173656420616c6c6f77616e63652062656c6f7760008201527f207a65726f000000000000000000000000000000000000000000000000000000602082015250565b6000610e7d602583610a87565b9150610e8882610e21565b604082019050919050565b60006020820190508181036000830152610eac81610e70565b9050919050565b7f45524332303a20617070726f76652066726f6d20746865207a65726f2061646460008201527f7265737300000000000000000000000000000000000000000000000000000000602082015250565b6000610f0f602483610a87565b9150610f1a82610eb3565b604082019050919050565b60006020820190508181036000830152610f3e81610f02565b9050919050565b7f45524332303a20617070726f766520746f20746865207a65726f20616464726560008201527f7373000000000000000000000000000000000000000000000000000000000000602082015250565b6000610fa1602283610a87565b9150610fac82610f45565b604082019050919050565b60006020820190508181036000830152610fd081610f94565b9050919050565b7f45524332303a20696e73756666696369656e7420616c6c6f77616e6365000000600082015250565b600061100d601d83610a87565b915061101882610fd7565b602082019050919050565b6000602082019050818103600083015261103c81611000565b9050919050565b7f45524332303a207472616e736665722066726f6d20746865207a65726f20616460008201527f6472657373000000000000000000000000000000000000000000000000000000602082015250565b600061109f602583610a87565b91506110aa82611043565b604082019050919050565b600060208201905081810360008301526110ce81611092565b9050919050565b7f45524332303a207472616e7366657220746f20746865207a65726f206164647260008201527f6573730000000000000000000000000000000000000000000000000000000000602082015250565b6000611131602383610a87565b915061113c826110d5565b604082019050919050565b6000602082019050818103600083015261116081611124565b9050919050565b7f45524332303a207472616e7366657220616d6f756e742065786365656473206260008201527f616c616e63650000000000000000000000000000000000000000000000000000602082015250565b60006111c3602683610a87565b91506111ce82611167565b604082019050919050565b600060208201905081810360008301526111f2816111b6565b905091905056fea2646970667358221220d1d2931276936d87e4800092e4cc8234ae552eca686bf3dde9b3c7d892d3cc3564736f6c63430008110033</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-e30152c0003c0f08188c3429" role="button"
                       aria-expanded="false" aria-controls="id-e30152c0003c0f08188c3429">
                        <code>tests/immutable/erc20/erc20.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/erc20/erc20.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+801</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-e30152c0003c0f08188c3429"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;erc20&#47;erc20.go immutable-geth&#47;tests&#47;immutable&#47;erc20&#47;erc20.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..9c5fcdc29bdba113d05040ad5e65f32814fb0a13</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;erc20&#47;erc20.go</span>
<span class="term-fg36">@@ -0,0 +1,801 @@</span>
<span class="term-fg32">+&#47;&#47; Code generated - DO NOT EDIT.</span>
<span class="term-fg32">+&#47;&#47; This file is a generated binding and any manual changes will be lost.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package erc20</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;errors&quot;</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+	&quot;strings&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	ethereum &quot;github.com&#47;ethereum&#47;go-ethereum&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&#47;abi&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&#47;abi&#47;bind&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;event&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Reference imports to suppress errors if they are not otherwise used.</span>
<span class="term-fg32">+var (</span>
<span class="term-fg32">+	_ = errors.New</span>
<span class="term-fg32">+	_ = big.NewInt</span>
<span class="term-fg32">+	_ = strings.NewReader</span>
<span class="term-fg32">+	_ = ethereum.NotFound</span>
<span class="term-fg32">+	_ = bind.Bind</span>
<span class="term-fg32">+	_ = common.Big1</span>
<span class="term-fg32">+	_ = types.BloomLookup</span>
<span class="term-fg32">+	_ = event.NewSubscription</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ERC20MetaData contains all meta data concerning the ERC20 contract.</span>
<span class="term-fg32">+var ERC20MetaData = &amp;bind.MetaData{</span>
<span class="term-fg32">+	ABI: &quot;[{\&quot;inputs\&quot;:[],\&quot;stateMutability\&quot;:\&quot;nonpayable\&quot;,\&quot;type\&quot;:\&quot;constructor\&quot;},{\&quot;anonymous\&quot;:false,\&quot;inputs\&quot;:[{\&quot;indexed\&quot;:true,\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;owner\&quot;,\&quot;type\&quot;:\&quot;address\&quot;},{\&quot;indexed\&quot;:true,\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;spender\&quot;,\&quot;type\&quot;:\&quot;address\&quot;},{\&quot;indexed\&quot;:false,\&quot;internalType\&quot;:\&quot;uint256\&quot;,\&quot;name\&quot;:\&quot;value\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;}],\&quot;name\&quot;:\&quot;Approval\&quot;,\&quot;type\&quot;:\&quot;event\&quot;},{\&quot;anonymous\&quot;:false,\&quot;inputs\&quot;:[{\&quot;indexed\&quot;:true,\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;from\&quot;,\&quot;type\&quot;:\&quot;address\&quot;},{\&quot;indexed\&quot;:true,\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;to\&quot;,\&quot;type\&quot;:\&quot;address\&quot;},{\&quot;indexed\&quot;:false,\&quot;internalType\&quot;:\&quot;uint256\&quot;,\&quot;name\&quot;:\&quot;value\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;}],\&quot;name\&quot;:\&quot;Transfer\&quot;,\&quot;type\&quot;:\&quot;event\&quot;},{\&quot;inputs\&quot;:[{\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;owner\&quot;,\&quot;type\&quot;:\&quot;address\&quot;},{\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;spender\&quot;,\&quot;type\&quot;:\&quot;address\&quot;}],\&quot;name\&quot;:\&quot;allowance\&quot;,\&quot;outputs\&quot;:[{\&quot;internalType\&quot;:\&quot;uint256\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;}],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;},{\&quot;inputs\&quot;:[{\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;spender\&quot;,\&quot;type\&quot;:\&quot;address\&quot;},{\&quot;internalType\&quot;:\&quot;uint256\&quot;,\&quot;name\&quot;:\&quot;amount\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;}],\&quot;name\&quot;:\&quot;approve\&quot;,\&quot;outputs\&quot;:[{\&quot;internalType\&quot;:\&quot;bool\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;bool\&quot;}],\&quot;stateMutability\&quot;:\&quot;nonpayable\&quot;,\&quot;type\&quot;:\&quot;function\&quot;},{\&quot;inputs\&quot;:[{\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;account\&quot;,\&quot;type\&quot;:\&quot;address\&quot;}],\&quot;name\&quot;:\&quot;balanceOf\&quot;,\&quot;outputs\&quot;:[{\&quot;internalType\&quot;:\&quot;uint256\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;}],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;},{\&quot;inputs\&quot;:[],\&quot;name\&quot;:\&quot;decimals\&quot;,\&quot;outputs\&quot;:[{\&quot;internalType\&quot;:\&quot;uint8\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;uint8\&quot;}],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;},{\&quot;inputs\&quot;:[{\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;spender\&quot;,\&quot;type\&quot;:\&quot;address\&quot;},{\&quot;internalType\&quot;:\&quot;uint256\&quot;,\&quot;name\&quot;:\&quot;subtractedValue\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;}],\&quot;name\&quot;:\&quot;decreaseAllowance\&quot;,\&quot;outputs\&quot;:[{\&quot;internalType\&quot;:\&quot;bool\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;bool\&quot;}],\&quot;stateMutability\&quot;:\&quot;nonpayable\&quot;,\&quot;type\&quot;:\&quot;function\&quot;},{\&quot;inputs\&quot;:[{\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;spender\&quot;,\&quot;type\&quot;:\&quot;address\&quot;},{\&quot;internalType\&quot;:\&quot;uint256\&quot;,\&quot;name\&quot;:\&quot;addedValue\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;}],\&quot;name\&quot;:\&quot;increaseAllowance\&quot;,\&quot;outputs\&quot;:[{\&quot;internalType\&quot;:\&quot;bool\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;bool\&quot;}],\&quot;stateMutability\&quot;:\&quot;nonpayable\&quot;,\&quot;type\&quot;:\&quot;function\&quot;},{\&quot;inputs\&quot;:[],\&quot;name\&quot;:\&quot;name\&quot;,\&quot;outputs\&quot;:[{\&quot;internalType\&quot;:\&quot;string\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;string\&quot;}],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;},{\&quot;inputs\&quot;:[],\&quot;name\&quot;:\&quot;symbol\&quot;,\&quot;outputs\&quot;:[{\&quot;internalType\&quot;:\&quot;string\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;string\&quot;}],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;},{\&quot;inputs\&quot;:[],\&quot;name\&quot;:\&quot;totalSupply\&quot;,\&quot;outputs\&quot;:[{\&quot;internalType\&quot;:\&quot;uint256\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;}],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;},{\&quot;inputs\&quot;:[{\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;to\&quot;,\&quot;type\&quot;:\&quot;address\&quot;},{\&quot;internalType\&quot;:\&quot;uint256\&quot;,\&quot;name\&quot;:\&quot;amount\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;}],\&quot;name\&quot;:\&quot;transfer\&quot;,\&quot;outputs\&quot;:[{\&quot;internalType\&quot;:\&quot;bool\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;bool\&quot;}],\&quot;stateMutability\&quot;:\&quot;nonpayable\&quot;,\&quot;type\&quot;:\&quot;function\&quot;},{\&quot;inputs\&quot;:[{\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;from\&quot;,\&quot;type\&quot;:\&quot;address\&quot;},{\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;to\&quot;,\&quot;type\&quot;:\&quot;address\&quot;},{\&quot;internalType\&quot;:\&quot;uint256\&quot;,\&quot;name\&quot;:\&quot;amount\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;}],\&quot;name\&quot;:\&quot;transferFrom\&quot;,\&quot;outputs\&quot;:[{\&quot;internalType\&quot;:\&quot;bool\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;bool\&quot;}],\&quot;stateMutability\&quot;:\&quot;nonpayable\&quot;,\&quot;type\&quot;:\&quot;function\&quot;}]&quot;,</span>
<span class="term-fg32">+	Bin: &quot;0x60806040523480156200001157600080fd5b506040518060400160405280600781526020017f426974436f696e000000000000000000000000000000000000000000000000008152506040518060400160405280600381526020017f425443000000000000000000000000000000000000000000000000000000000081525081600390816200008f9190620004b6565b508060049081620000a19190620004b6565b505050620000bf3368056bc75e2d63100000620000c560201b60201c565b620006b8565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff160362000137576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016200012e90620005fe565b60405180910390fd5b6200014b600083836200023260201b60201c565b80600260008282546200015f91906200064f565b92505081905550806000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055508173ffffffffffffffffffffffffffffffffffffffff16600073ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef836040516200021291906200069b565b60405180910390a36200022e600083836200023760201b60201c565b5050565b505050565b505050565b600081519050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b60006002820490506001821680620002be57607f821691505b602082108103620002d457620002d362000276565b5b50919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b6000600883026200033e7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82620002ff565b6200034a8683620002ff565b95508019841693508086168417925050509392505050565b6000819050919050565b6000819050919050565b600062000397620003916200038b8462000362565b6200036c565b62000362565b9050919050565b6000819050919050565b620003b38362000376565b620003cb620003c2826200039e565b8484546200030c565b825550505050565b600090565b620003e2620003d3565b620003ef818484620003a8565b505050565b5b8181101562000417576200040b600082620003d8565b600181019050620003f5565b5050565b601f82111562000466576200043081620002da565b6200043b84620002ef565b810160208510156200044b578190505b620004636200045a85620002ef565b830182620003f4565b50505b505050565b600082821c905092915050565b60006200048b600019846008026200046b565b1980831691505092915050565b6000620004a6838362000478565b9150826002028217905092915050565b620004c1826200023c565b67ffffffffffffffff811115620004dd57620004dc62000247565b5b620004e98254620002a5565b620004f68282856200041b565b600060209050601f8311600181146200052e576000841562000519578287015190505b62000525858262000498565b86555062000595565b601f1984166200053e86620002da565b60005b82811015620005685784890151825560018201915060208501945060208101905062000541565b8683101562000588578489015162000584601f89168262000478565b8355505b6001600288020188555050505b505050505050565b600082825260208201905092915050565b7f45524332303a206d696e7420746f20746865207a65726f206164647265737300600082015250565b6000620005e6601f836200059d565b9150620005f382620005ae565b602082019050919050565b600060208201905081810360008301526200061981620005d7565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b60006200065c8262000362565b9150620006698362000362565b925082820190508082111562000684576200068362000620565b5b92915050565b620006958162000362565b82525050565b6000602082019050620006b260008301846200068a565b92915050565b61122f80620006c86000396000f3fe608060405234801561001057600080fd5b50600436106100a95760003560e01c80633950935111610071578063395093511461016857806370a082311461019857806395d89b41146101c8578063a457c2d7146101e6578063a9059cbb14610216578063dd62ed3e14610246576100a9565b806306fdde03146100ae578063095ea7b3146100cc57806318160ddd146100fc57806323b872dd1461011a578063313ce5671461014a575b600080fd5b6100b6610276565b6040516100c39190610b0c565b60405180910390f35b6100e660048036038101906100e19190610bc7565b610308565b6040516100f39190610c22565b60405180910390f35b61010461032b565b6040516101119190610c4c565b60405180910390f35b610134600480360381019061012f9190610c67565b610335565b6040516101419190610c22565b60405180910390f35b610152610364565b60405161015f9190610cd6565b60405180910390f35b610182600480360381019061017d9190610bc7565b61036d565b60405161018f9190610c22565b60405180910390f35b6101b260048036038101906101ad9190610cf1565b6103a4565b6040516101bf9190610c4c565b60405180910390f35b6101d06103ec565b6040516101dd9190610b0c565b60405180910390f35b61020060048036038101906101fb9190610bc7565b61047e565b60405161020d9190610c22565b60405180910390f35b610230600480360381019061022b9190610bc7565b6104f5565b60405161023d9190610c22565b60405180910390f35b610260600480360381019061025b9190610d1e565b610518565b60405161026d9190610c4c565b60405180910390f35b60606003805461028590610d8d565b80601f01602080910402602001604051908101604052809291908181526020018280546102b190610d8d565b80156102fe5780601f106102d3576101008083540402835291602001916102fe565b820191906000526020600020905b8154815290600101906020018083116102e157829003601f168201915b5050505050905090565b60008061031361059f565b90506103208185856105a7565b600191505092915050565b6000600254905090565b60008061034061059f565b905061034d858285610770565b6103588585856107fc565b60019150509392505050565b60006012905090565b60008061037861059f565b905061039981858561038a8589610518565b6103949190610ded565b6105a7565b600191505092915050565b60008060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b6060600480546103fb90610d8d565b80601f016020809104026020016040519081016040528092919081815260200182805461042790610d8d565b80156104745780601f1061044957610100808354040283529160200191610474565b820191906000526020600020905b81548152906001019060200180831161045757829003601f168201915b5050505050905090565b60008061048961059f565b905060006104978286610518565b9050838110156104dc576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016104d390610e93565b60405180910390fd5b6104e982868684036105a7565b60019250505092915050565b60008061050061059f565b905061050d8185856107fc565b600191505092915050565b6000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905092915050565b600033905090565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603610616576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161060d90610f25565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff1603610685576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161067c90610fb7565b60405180910390fd5b80600160008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925836040516107639190610c4c565b60405180910390a3505050565b600061077c8484610518565b90507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff81146107f657818110156107e8576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016107df90611023565b60405180910390fd5b6107f584848484036105a7565b5b50505050565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff160361086b576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610862906110b5565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036108da576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016108d190611147565b60405180910390fd5b6108e5838383610a72565b60008060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205490508181101561096b576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610962906111d9565b60405180910390fd5b8181036000808673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550816000808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055508273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef84604051610a599190610c4c565b60405180910390a3610a6c848484610a77565b50505050565b505050565b505050565b600081519050919050565b600082825260208201905092915050565b60005b83811015610ab6578082015181840152602081019050610a9b565b60008484015250505050565b6000601f19601f8301169050919050565b6000610ade82610a7c565b610ae88185610a87565b9350610af8818560208601610a98565b610b0181610ac2565b840191505092915050565b60006020820190508181036000830152610b268184610ad3565b905092915050565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000610b5e82610b33565b9050919050565b610b6e81610b53565b8114610b7957600080fd5b50565b600081359050610b8b81610b65565b92915050565b6000819050919050565b610ba481610b91565b8114610baf57600080fd5b50565b600081359050610bc181610b9b565b92915050565b60008060408385031215610bde57610bdd610b2e565b5b6000610bec85828601610b7c565b9250506020610bfd85828601610bb2565b9150509250929050565b60008115159050919050565b610c1c81610c07565b82525050565b6000602082019050610c376000830184610c13565b92915050565b610c4681610b91565b82525050565b6000602082019050610c616000830184610c3d565b92915050565b600080600060608486031215610c8057610c7f610b2e565b5b6000610c8e86828701610b7c565b9350506020610c9f86828701610b7c565b9250506040610cb086828701610bb2565b9150509250925092565b600060ff82169050919050565b610cd081610cba565b82525050565b6000602082019050610ceb6000830184610cc7565b92915050565b600060208284031215610d0757610d06610b2e565b5b6000610d1584828501610b7c565b91505092915050565b60008060408385031215610d3557610d34610b2e565b5b6000610d4385828601610b7c565b9250506020610d5485828601610b7c565b9150509250929050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b60006002820490506001821680610da557607f821691505b602082108103610db857610db7610d5e565b5b50919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6000610df882610b91565b9150610e0383610b91565b9250828201905080821115610e1b57610e1a610dbe565b5b92915050565b7f45524332303a2064656372656173656420616c6c6f77616e63652062656c6f7760008201527f207a65726f000000000000000000000000000000000000000000000000000000602082015250565b6000610e7d602583610a87565b9150610e8882610e21565b604082019050919050565b60006020820190508181036000830152610eac81610e70565b9050919050565b7f45524332303a20617070726f76652066726f6d20746865207a65726f2061646460008201527f7265737300000000000000000000000000000000000000000000000000000000602082015250565b6000610f0f602483610a87565b9150610f1a82610eb3565b604082019050919050565b60006020820190508181036000830152610f3e81610f02565b9050919050565b7f45524332303a20617070726f766520746f20746865207a65726f20616464726560008201527f7373000000000000000000000000000000000000000000000000000000000000602082015250565b6000610fa1602283610a87565b9150610fac82610f45565b604082019050919050565b60006020820190508181036000830152610fd081610f94565b9050919050565b7f45524332303a20696e73756666696369656e7420616c6c6f77616e6365000000600082015250565b600061100d601d83610a87565b915061101882610fd7565b602082019050919050565b6000602082019050818103600083015261103c81611000565b9050919050565b7f45524332303a207472616e736665722066726f6d20746865207a65726f20616460008201527f6472657373000000000000000000000000000000000000000000000000000000602082015250565b600061109f602583610a87565b91506110aa82611043565b604082019050919050565b600060208201905081810360008301526110ce81611092565b9050919050565b7f45524332303a207472616e7366657220746f20746865207a65726f206164647260008201527f6573730000000000000000000000000000000000000000000000000000000000602082015250565b6000611131602383610a87565b915061113c826110d5565b604082019050919050565b6000602082019050818103600083015261116081611124565b9050919050565b7f45524332303a207472616e7366657220616d6f756e742065786365656473206260008201527f616c616e63650000000000000000000000000000000000000000000000000000602082015250565b60006111c3602683610a87565b91506111ce82611167565b604082019050919050565b600060208201905081810360008301526111f2816111b6565b905091905056fea2646970667358221220d1d2931276936d87e4800092e4cc8234ae552eca686bf3dde9b3c7d892d3cc3564736f6c63430008110033&quot;,</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ERC20ABI is the input ABI used to generate the binding from.</span>
<span class="term-fg32">+&#47;&#47; Deprecated: Use ERC20MetaData.ABI instead.</span>
<span class="term-fg32">+var ERC20ABI = ERC20MetaData.ABI</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ERC20Bin is the compiled bytecode used for deploying new contracts.</span>
<span class="term-fg32">+&#47;&#47; Deprecated: Use ERC20MetaData.Bin instead.</span>
<span class="term-fg32">+var ERC20Bin = ERC20MetaData.Bin</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; DeployERC20 deploys a new Ethereum contract, binding an instance of ERC20 to it.</span>
<span class="term-fg32">+func DeployERC20(auth *bind.TransactOpts, backend bind.ContractBackend) (common.Address, *types.Transaction, *ERC20, error) {</span>
<span class="term-fg32">+	parsed, err := ERC20MetaData.GetAbi()</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return common.Address{}, nil, nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if parsed == nil {</span>
<span class="term-fg32">+		return common.Address{}, nil, nil, errors.New(&quot;GetABI returned nil&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	address, tx, contract, err := bind.DeployContract(auth, *parsed, common.FromHex(ERC20Bin), backend)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return common.Address{}, nil, nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return address, tx, &amp;ERC20{ERC20Caller: ERC20Caller{contract: contract}, ERC20Transactor: ERC20Transactor{contract: contract}, ERC20Filterer: ERC20Filterer{contract: contract}}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ERC20 is an auto generated Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type ERC20 struct {</span>
<span class="term-fg32">+	ERC20Caller     &#47;&#47; Read-only binding to the contract</span>
<span class="term-fg32">+	ERC20Transactor &#47;&#47; Write-only binding to the contract</span>
<span class="term-fg32">+	ERC20Filterer   &#47;&#47; Log filterer for contract events</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ERC20Caller is an auto generated read-only Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type ERC20Caller struct {</span>
<span class="term-fg32">+	contract *bind.BoundContract &#47;&#47; Generic contract wrapper for the low level calls</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ERC20Transactor is an auto generated write-only Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type ERC20Transactor struct {</span>
<span class="term-fg32">+	contract *bind.BoundContract &#47;&#47; Generic contract wrapper for the low level calls</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ERC20Filterer is an auto generated log filtering Go binding around an Ethereum contract events.</span>
<span class="term-fg32">+type ERC20Filterer struct {</span>
<span class="term-fg32">+	contract *bind.BoundContract &#47;&#47; Generic contract wrapper for the low level calls</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ERC20Session is an auto generated Go binding around an Ethereum contract,</span>
<span class="term-fg32">+&#47;&#47; with pre-set call and transact options.</span>
<span class="term-fg32">+type ERC20Session struct {</span>
<span class="term-fg32">+	Contract     *ERC20            &#47;&#47; Generic contract binding to set the session for</span>
<span class="term-fg32">+	CallOpts     bind.CallOpts     &#47;&#47; Call options to use throughout this session</span>
<span class="term-fg32">+	TransactOpts bind.TransactOpts &#47;&#47; Transaction auth options to use throughout this session</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ERC20CallerSession is an auto generated read-only Go binding around an Ethereum contract,</span>
<span class="term-fg32">+&#47;&#47; with pre-set call options.</span>
<span class="term-fg32">+type ERC20CallerSession struct {</span>
<span class="term-fg32">+	Contract *ERC20Caller  &#47;&#47; Generic contract caller binding to set the session for</span>
<span class="term-fg32">+	CallOpts bind.CallOpts &#47;&#47; Call options to use throughout this session</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ERC20TransactorSession is an auto generated write-only Go binding around an Ethereum contract,</span>
<span class="term-fg32">+&#47;&#47; with pre-set transact options.</span>
<span class="term-fg32">+type ERC20TransactorSession struct {</span>
<span class="term-fg32">+	Contract     *ERC20Transactor  &#47;&#47; Generic contract transactor binding to set the session for</span>
<span class="term-fg32">+	TransactOpts bind.TransactOpts &#47;&#47; Transaction auth options to use throughout this session</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ERC20Raw is an auto generated low-level Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type ERC20Raw struct {</span>
<span class="term-fg32">+	Contract *ERC20 &#47;&#47; Generic contract binding to access the raw methods on</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ERC20CallerRaw is an auto generated low-level read-only Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type ERC20CallerRaw struct {</span>
<span class="term-fg32">+	Contract *ERC20Caller &#47;&#47; Generic read-only contract binding to access the raw methods on</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ERC20TransactorRaw is an auto generated low-level write-only Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type ERC20TransactorRaw struct {</span>
<span class="term-fg32">+	Contract *ERC20Transactor &#47;&#47; Generic write-only contract binding to access the raw methods on</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewERC20 creates a new instance of ERC20, bound to a specific deployed contract.</span>
<span class="term-fg32">+func NewERC20(address common.Address, backend bind.ContractBackend) (*ERC20, error) {</span>
<span class="term-fg32">+	contract, err := bindERC20(address, backend, backend, backend)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;ERC20{ERC20Caller: ERC20Caller{contract: contract}, ERC20Transactor: ERC20Transactor{contract: contract}, ERC20Filterer: ERC20Filterer{contract: contract}}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewERC20Caller creates a new read-only instance of ERC20, bound to a specific deployed contract.</span>
<span class="term-fg32">+func NewERC20Caller(address common.Address, caller bind.ContractCaller) (*ERC20Caller, error) {</span>
<span class="term-fg32">+	contract, err := bindERC20(address, caller, nil, nil)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;ERC20Caller{contract: contract}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewERC20Transactor creates a new write-only instance of ERC20, bound to a specific deployed contract.</span>
<span class="term-fg32">+func NewERC20Transactor(address common.Address, transactor bind.ContractTransactor) (*ERC20Transactor, error) {</span>
<span class="term-fg32">+	contract, err := bindERC20(address, nil, transactor, nil)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;ERC20Transactor{contract: contract}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewERC20Filterer creates a new log filterer instance of ERC20, bound to a specific deployed contract.</span>
<span class="term-fg32">+func NewERC20Filterer(address common.Address, filterer bind.ContractFilterer) (*ERC20Filterer, error) {</span>
<span class="term-fg32">+	contract, err := bindERC20(address, nil, nil, filterer)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;ERC20Filterer{contract: contract}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; bindERC20 binds a generic wrapper to an already deployed contract.</span>
<span class="term-fg32">+func bindERC20(address common.Address, caller bind.ContractCaller, transactor bind.ContractTransactor, filterer bind.ContractFilterer) (*bind.BoundContract, error) {</span>
<span class="term-fg32">+	parsed, err := abi.JSON(strings.NewReader(ERC20ABI))</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return bind.NewBoundContract(address, parsed, caller, transactor, filterer), nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Call invokes the (constant) contract method with params as input values and</span>
<span class="term-fg32">+&#47;&#47; sets the output to result. The result type might be a single field for simple</span>
<span class="term-fg32">+&#47;&#47; returns, a slice of interfaces for anonymous returns and a struct for named</span>
<span class="term-fg32">+&#47;&#47; returns.</span>
<span class="term-fg32">+func (_ERC20 *ERC20Raw) Call(opts *bind.CallOpts, result *[]interface{}, method string, params ...interface{}) error {</span>
<span class="term-fg32">+	return _ERC20.Contract.ERC20Caller.contract.Call(opts, result, method, params...)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Transfer initiates a plain transaction to move funds to the contract, calling</span>
<span class="term-fg32">+&#47;&#47; its default method if one is available.</span>
<span class="term-fg32">+func (_ERC20 *ERC20Raw) Transfer(opts *bind.TransactOpts) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _ERC20.Contract.ERC20Transactor.contract.Transfer(opts)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Transact invokes the (paid) contract method with params as input values.</span>
<span class="term-fg32">+func (_ERC20 *ERC20Raw) Transact(opts *bind.TransactOpts, method string, params ...interface{}) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _ERC20.Contract.ERC20Transactor.contract.Transact(opts, method, params...)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Call invokes the (constant) contract method with params as input values and</span>
<span class="term-fg32">+&#47;&#47; sets the output to result. The result type might be a single field for simple</span>
<span class="term-fg32">+&#47;&#47; returns, a slice of interfaces for anonymous returns and a struct for named</span>
<span class="term-fg32">+&#47;&#47; returns.</span>
<span class="term-fg32">+func (_ERC20 *ERC20CallerRaw) Call(opts *bind.CallOpts, result *[]interface{}, method string, params ...interface{}) error {</span>
<span class="term-fg32">+	return _ERC20.Contract.contract.Call(opts, result, method, params...)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Transfer initiates a plain transaction to move funds to the contract, calling</span>
<span class="term-fg32">+&#47;&#47; its default method if one is available.</span>
<span class="term-fg32">+func (_ERC20 *ERC20TransactorRaw) Transfer(opts *bind.TransactOpts) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _ERC20.Contract.contract.Transfer(opts)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Transact invokes the (paid) contract method with params as input values.</span>
<span class="term-fg32">+func (_ERC20 *ERC20TransactorRaw) Transact(opts *bind.TransactOpts, method string, params ...interface{}) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _ERC20.Contract.contract.Transact(opts, method, params...)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Allowance is a free data retrieval call binding the contract method 0xdd62ed3e.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function allowance(address owner, address spender) view returns(uint256)</span>
<span class="term-fg32">+func (_ERC20 *ERC20Caller) Allowance(opts *bind.CallOpts, owner common.Address, spender common.Address) (*big.Int, error) {</span>
<span class="term-fg32">+	var out []interface{}</span>
<span class="term-fg32">+	err := _ERC20.contract.Call(opts, &amp;out, &quot;allowance&quot;, owner, spender)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return *new(*big.Int), err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	out0 := *abi.ConvertType(out[0], new(*big.Int)).(**big.Int)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return out0, err</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Allowance is a free data retrieval call binding the contract method 0xdd62ed3e.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function allowance(address owner, address spender) view returns(uint256)</span>
<span class="term-fg32">+func (_ERC20 *ERC20Session) Allowance(owner common.Address, spender common.Address) (*big.Int, error) {</span>
<span class="term-fg32">+	return _ERC20.Contract.Allowance(&amp;_ERC20.CallOpts, owner, spender)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Allowance is a free data retrieval call binding the contract method 0xdd62ed3e.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function allowance(address owner, address spender) view returns(uint256)</span>
<span class="term-fg32">+func (_ERC20 *ERC20CallerSession) Allowance(owner common.Address, spender common.Address) (*big.Int, error) {</span>
<span class="term-fg32">+	return _ERC20.Contract.Allowance(&amp;_ERC20.CallOpts, owner, spender)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; BalanceOf is a free data retrieval call binding the contract method 0x70a08231.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function balanceOf(address account) view returns(uint256)</span>
<span class="term-fg32">+func (_ERC20 *ERC20Caller) BalanceOf(opts *bind.CallOpts, account common.Address) (*big.Int, error) {</span>
<span class="term-fg32">+	var out []interface{}</span>
<span class="term-fg32">+	err := _ERC20.contract.Call(opts, &amp;out, &quot;balanceOf&quot;, account)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return *new(*big.Int), err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	out0 := *abi.ConvertType(out[0], new(*big.Int)).(**big.Int)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return out0, err</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; BalanceOf is a free data retrieval call binding the contract method 0x70a08231.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function balanceOf(address account) view returns(uint256)</span>
<span class="term-fg32">+func (_ERC20 *ERC20Session) BalanceOf(account common.Address) (*big.Int, error) {</span>
<span class="term-fg32">+	return _ERC20.Contract.BalanceOf(&amp;_ERC20.CallOpts, account)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; BalanceOf is a free data retrieval call binding the contract method 0x70a08231.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function balanceOf(address account) view returns(uint256)</span>
<span class="term-fg32">+func (_ERC20 *ERC20CallerSession) BalanceOf(account common.Address) (*big.Int, error) {</span>
<span class="term-fg32">+	return _ERC20.Contract.BalanceOf(&amp;_ERC20.CallOpts, account)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Decimals is a free data retrieval call binding the contract method 0x313ce567.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function decimals() view returns(uint8)</span>
<span class="term-fg32">+func (_ERC20 *ERC20Caller) Decimals(opts *bind.CallOpts) (uint8, error) {</span>
<span class="term-fg32">+	var out []interface{}</span>
<span class="term-fg32">+	err := _ERC20.contract.Call(opts, &amp;out, &quot;decimals&quot;)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return *new(uint8), err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	out0 := *abi.ConvertType(out[0], new(uint8)).(*uint8)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return out0, err</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Decimals is a free data retrieval call binding the contract method 0x313ce567.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function decimals() view returns(uint8)</span>
<span class="term-fg32">+func (_ERC20 *ERC20Session) Decimals() (uint8, error) {</span>
<span class="term-fg32">+	return _ERC20.Contract.Decimals(&amp;_ERC20.CallOpts)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Decimals is a free data retrieval call binding the contract method 0x313ce567.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function decimals() view returns(uint8)</span>
<span class="term-fg32">+func (_ERC20 *ERC20CallerSession) Decimals() (uint8, error) {</span>
<span class="term-fg32">+	return _ERC20.Contract.Decimals(&amp;_ERC20.CallOpts)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Name is a free data retrieval call binding the contract method 0x06fdde03.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function name() view returns(string)</span>
<span class="term-fg32">+func (_ERC20 *ERC20Caller) Name(opts *bind.CallOpts) (string, error) {</span>
<span class="term-fg32">+	var out []interface{}</span>
<span class="term-fg32">+	err := _ERC20.contract.Call(opts, &amp;out, &quot;name&quot;)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return *new(string), err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	out0 := *abi.ConvertType(out[0], new(string)).(*string)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return out0, err</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Name is a free data retrieval call binding the contract method 0x06fdde03.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function name() view returns(string)</span>
<span class="term-fg32">+func (_ERC20 *ERC20Session) Name() (string, error) {</span>
<span class="term-fg32">+	return _ERC20.Contract.Name(&amp;_ERC20.CallOpts)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Name is a free data retrieval call binding the contract method 0x06fdde03.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function name() view returns(string)</span>
<span class="term-fg32">+func (_ERC20 *ERC20CallerSession) Name() (string, error) {</span>
<span class="term-fg32">+	return _ERC20.Contract.Name(&amp;_ERC20.CallOpts)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Symbol is a free data retrieval call binding the contract method 0x95d89b41.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function symbol() view returns(string)</span>
<span class="term-fg32">+func (_ERC20 *ERC20Caller) Symbol(opts *bind.CallOpts) (string, error) {</span>
<span class="term-fg32">+	var out []interface{}</span>
<span class="term-fg32">+	err := _ERC20.contract.Call(opts, &amp;out, &quot;symbol&quot;)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return *new(string), err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	out0 := *abi.ConvertType(out[0], new(string)).(*string)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return out0, err</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Symbol is a free data retrieval call binding the contract method 0x95d89b41.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function symbol() view returns(string)</span>
<span class="term-fg32">+func (_ERC20 *ERC20Session) Symbol() (string, error) {</span>
<span class="term-fg32">+	return _ERC20.Contract.Symbol(&amp;_ERC20.CallOpts)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Symbol is a free data retrieval call binding the contract method 0x95d89b41.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function symbol() view returns(string)</span>
<span class="term-fg32">+func (_ERC20 *ERC20CallerSession) Symbol() (string, error) {</span>
<span class="term-fg32">+	return _ERC20.Contract.Symbol(&amp;_ERC20.CallOpts)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; TotalSupply is a free data retrieval call binding the contract method 0x18160ddd.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function totalSupply() view returns(uint256)</span>
<span class="term-fg32">+func (_ERC20 *ERC20Caller) TotalSupply(opts *bind.CallOpts) (*big.Int, error) {</span>
<span class="term-fg32">+	var out []interface{}</span>
<span class="term-fg32">+	err := _ERC20.contract.Call(opts, &amp;out, &quot;totalSupply&quot;)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return *new(*big.Int), err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	out0 := *abi.ConvertType(out[0], new(*big.Int)).(**big.Int)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return out0, err</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; TotalSupply is a free data retrieval call binding the contract method 0x18160ddd.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function totalSupply() view returns(uint256)</span>
<span class="term-fg32">+func (_ERC20 *ERC20Session) TotalSupply() (*big.Int, error) {</span>
<span class="term-fg32">+	return _ERC20.Contract.TotalSupply(&amp;_ERC20.CallOpts)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; TotalSupply is a free data retrieval call binding the contract method 0x18160ddd.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function totalSupply() view returns(uint256)</span>
<span class="term-fg32">+func (_ERC20 *ERC20CallerSession) TotalSupply() (*big.Int, error) {</span>
<span class="term-fg32">+	return _ERC20.Contract.TotalSupply(&amp;_ERC20.CallOpts)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Approve is a paid mutator transaction binding the contract method 0x095ea7b3.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function approve(address spender, uint256 amount) returns(bool)</span>
<span class="term-fg32">+func (_ERC20 *ERC20Transactor) Approve(opts *bind.TransactOpts, spender common.Address, amount *big.Int) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _ERC20.contract.Transact(opts, &quot;approve&quot;, spender, amount)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Approve is a paid mutator transaction binding the contract method 0x095ea7b3.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function approve(address spender, uint256 amount) returns(bool)</span>
<span class="term-fg32">+func (_ERC20 *ERC20Session) Approve(spender common.Address, amount *big.Int) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _ERC20.Contract.Approve(&amp;_ERC20.TransactOpts, spender, amount)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Approve is a paid mutator transaction binding the contract method 0x095ea7b3.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function approve(address spender, uint256 amount) returns(bool)</span>
<span class="term-fg32">+func (_ERC20 *ERC20TransactorSession) Approve(spender common.Address, amount *big.Int) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _ERC20.Contract.Approve(&amp;_ERC20.TransactOpts, spender, amount)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; DecreaseAllowance is a paid mutator transaction binding the contract method 0xa457c2d7.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function decreaseAllowance(address spender, uint256 subtractedValue) returns(bool)</span>
<span class="term-fg32">+func (_ERC20 *ERC20Transactor) DecreaseAllowance(opts *bind.TransactOpts, spender common.Address, subtractedValue *big.Int) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _ERC20.contract.Transact(opts, &quot;decreaseAllowance&quot;, spender, subtractedValue)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; DecreaseAllowance is a paid mutator transaction binding the contract method 0xa457c2d7.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function decreaseAllowance(address spender, uint256 subtractedValue) returns(bool)</span>
<span class="term-fg32">+func (_ERC20 *ERC20Session) DecreaseAllowance(spender common.Address, subtractedValue *big.Int) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _ERC20.Contract.DecreaseAllowance(&amp;_ERC20.TransactOpts, spender, subtractedValue)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; DecreaseAllowance is a paid mutator transaction binding the contract method 0xa457c2d7.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function decreaseAllowance(address spender, uint256 subtractedValue) returns(bool)</span>
<span class="term-fg32">+func (_ERC20 *ERC20TransactorSession) DecreaseAllowance(spender common.Address, subtractedValue *big.Int) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _ERC20.Contract.DecreaseAllowance(&amp;_ERC20.TransactOpts, spender, subtractedValue)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; IncreaseAllowance is a paid mutator transaction binding the contract method 0x39509351.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function increaseAllowance(address spender, uint256 addedValue) returns(bool)</span>
<span class="term-fg32">+func (_ERC20 *ERC20Transactor) IncreaseAllowance(opts *bind.TransactOpts, spender common.Address, addedValue *big.Int) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _ERC20.contract.Transact(opts, &quot;increaseAllowance&quot;, spender, addedValue)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; IncreaseAllowance is a paid mutator transaction binding the contract method 0x39509351.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function increaseAllowance(address spender, uint256 addedValue) returns(bool)</span>
<span class="term-fg32">+func (_ERC20 *ERC20Session) IncreaseAllowance(spender common.Address, addedValue *big.Int) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _ERC20.Contract.IncreaseAllowance(&amp;_ERC20.TransactOpts, spender, addedValue)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; IncreaseAllowance is a paid mutator transaction binding the contract method 0x39509351.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function increaseAllowance(address spender, uint256 addedValue) returns(bool)</span>
<span class="term-fg32">+func (_ERC20 *ERC20TransactorSession) IncreaseAllowance(spender common.Address, addedValue *big.Int) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _ERC20.Contract.IncreaseAllowance(&amp;_ERC20.TransactOpts, spender, addedValue)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Transfer is a paid mutator transaction binding the contract method 0xa9059cbb.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function transfer(address to, uint256 amount) returns(bool)</span>
<span class="term-fg32">+func (_ERC20 *ERC20Transactor) Transfer(opts *bind.TransactOpts, to common.Address, amount *big.Int) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _ERC20.contract.Transact(opts, &quot;transfer&quot;, to, amount)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Transfer is a paid mutator transaction binding the contract method 0xa9059cbb.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function transfer(address to, uint256 amount) returns(bool)</span>
<span class="term-fg32">+func (_ERC20 *ERC20Session) Transfer(to common.Address, amount *big.Int) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _ERC20.Contract.Transfer(&amp;_ERC20.TransactOpts, to, amount)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Transfer is a paid mutator transaction binding the contract method 0xa9059cbb.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function transfer(address to, uint256 amount) returns(bool)</span>
<span class="term-fg32">+func (_ERC20 *ERC20TransactorSession) Transfer(to common.Address, amount *big.Int) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _ERC20.Contract.Transfer(&amp;_ERC20.TransactOpts, to, amount)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; TransferFrom is a paid mutator transaction binding the contract method 0x23b872dd.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function transferFrom(address from, address to, uint256 amount) returns(bool)</span>
<span class="term-fg32">+func (_ERC20 *ERC20Transactor) TransferFrom(opts *bind.TransactOpts, from common.Address, to common.Address, amount *big.Int) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _ERC20.contract.Transact(opts, &quot;transferFrom&quot;, from, to, amount)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; TransferFrom is a paid mutator transaction binding the contract method 0x23b872dd.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function transferFrom(address from, address to, uint256 amount) returns(bool)</span>
<span class="term-fg32">+func (_ERC20 *ERC20Session) TransferFrom(from common.Address, to common.Address, amount *big.Int) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _ERC20.Contract.TransferFrom(&amp;_ERC20.TransactOpts, from, to, amount)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; TransferFrom is a paid mutator transaction binding the contract method 0x23b872dd.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function transferFrom(address from, address to, uint256 amount) returns(bool)</span>
<span class="term-fg32">+func (_ERC20 *ERC20TransactorSession) TransferFrom(from common.Address, to common.Address, amount *big.Int) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _ERC20.Contract.TransferFrom(&amp;_ERC20.TransactOpts, from, to, amount)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ERC20ApprovalIterator is returned from FilterApproval and is used to iterate over the raw logs and unpacked data for Approval events raised by the ERC20 contract.</span>
<span class="term-fg32">+type ERC20ApprovalIterator struct {</span>
<span class="term-fg32">+	Event *ERC20Approval &#47;&#47; Event containing the contract specifics and raw log</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	contract *bind.BoundContract &#47;&#47; Generic contract to use for unpacking event data</span>
<span class="term-fg32">+	event    string              &#47;&#47; Event name to use for unpacking event data</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	logs chan types.Log        &#47;&#47; Log channel receiving the found contract events</span>
<span class="term-fg32">+	sub  ethereum.Subscription &#47;&#47; Subscription for errors, completion and termination</span>
<span class="term-fg32">+	done bool                  &#47;&#47; Whether the subscription completed delivering logs</span>
<span class="term-fg32">+	fail error                 &#47;&#47; Occurred error to stop iteration</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Next advances the iterator to the subsequent event, returning whether there</span>
<span class="term-fg32">+&#47;&#47; are any more events found. In case of a retrieval or parsing error, false is</span>
<span class="term-fg32">+&#47;&#47; returned and Error() can be queried for the exact failure.</span>
<span class="term-fg32">+func (it *ERC20ApprovalIterator) Next() bool {</span>
<span class="term-fg32">+	&#47;&#47; If the iterator failed, stop iterating</span>
<span class="term-fg32">+	if it.fail != nil {</span>
<span class="term-fg32">+		return false</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; If the iterator completed, deliver directly whatever&#39;s available</span>
<span class="term-fg32">+	if it.done {</span>
<span class="term-fg32">+		select {</span>
<span class="term-fg32">+		case log := &lt;-it.logs:</span>
<span class="term-fg32">+			it.Event = new(ERC20Approval)</span>
<span class="term-fg32">+			if err := it.contract.UnpackLog(it.Event, it.event, log); err != nil {</span>
<span class="term-fg32">+				it.fail = err</span>
<span class="term-fg32">+				return false</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			it.Event.Raw = log</span>
<span class="term-fg32">+			return true</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		default:</span>
<span class="term-fg32">+			return false</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Iterator still in progress, wait for either a data or an error event</span>
<span class="term-fg32">+	select {</span>
<span class="term-fg32">+	case log := &lt;-it.logs:</span>
<span class="term-fg32">+		it.Event = new(ERC20Approval)</span>
<span class="term-fg32">+		if err := it.contract.UnpackLog(it.Event, it.event, log); err != nil {</span>
<span class="term-fg32">+			it.fail = err</span>
<span class="term-fg32">+			return false</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		it.Event.Raw = log</span>
<span class="term-fg32">+		return true</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	case err := &lt;-it.sub.Err():</span>
<span class="term-fg32">+		it.done = true</span>
<span class="term-fg32">+		it.fail = err</span>
<span class="term-fg32">+		return it.Next()</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Error returns any retrieval or parsing error occurred during filtering.</span>
<span class="term-fg32">+func (it *ERC20ApprovalIterator) Error() error {</span>
<span class="term-fg32">+	return it.fail</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Close terminates the iteration process, releasing any pending underlying</span>
<span class="term-fg32">+&#47;&#47; resources.</span>
<span class="term-fg32">+func (it *ERC20ApprovalIterator) Close() error {</span>
<span class="term-fg32">+	it.sub.Unsubscribe()</span>
<span class="term-fg32">+	return nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ERC20Approval represents a Approval event raised by the ERC20 contract.</span>
<span class="term-fg32">+type ERC20Approval struct {</span>
<span class="term-fg32">+	Owner   common.Address</span>
<span class="term-fg32">+	Spender common.Address</span>
<span class="term-fg32">+	Value   *big.Int</span>
<span class="term-fg32">+	Raw     types.Log &#47;&#47; Blockchain specific contextual infos</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; FilterApproval is a free log retrieval operation binding the contract event 0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: event Approval(address indexed owner, address indexed spender, uint256 value)</span>
<span class="term-fg32">+func (_ERC20 *ERC20Filterer) FilterApproval(opts *bind.FilterOpts, owner []common.Address, spender []common.Address) (*ERC20ApprovalIterator, error) {</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	var ownerRule []interface{}</span>
<span class="term-fg32">+	for _, ownerItem := range owner {</span>
<span class="term-fg32">+		ownerRule = append(ownerRule, ownerItem)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	var spenderRule []interface{}</span>
<span class="term-fg32">+	for _, spenderItem := range spender {</span>
<span class="term-fg32">+		spenderRule = append(spenderRule, spenderItem)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	logs, sub, err := _ERC20.contract.FilterLogs(opts, &quot;Approval&quot;, ownerRule, spenderRule)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;ERC20ApprovalIterator{contract: _ERC20.contract, event: &quot;Approval&quot;, logs: logs, sub: sub}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; WatchApproval is a free log subscription operation binding the contract event 0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: event Approval(address indexed owner, address indexed spender, uint256 value)</span>
<span class="term-fg32">+func (_ERC20 *ERC20Filterer) WatchApproval(opts *bind.WatchOpts, sink chan&lt;- *ERC20Approval, owner []common.Address, spender []common.Address) (event.Subscription, error) {</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	var ownerRule []interface{}</span>
<span class="term-fg32">+	for _, ownerItem := range owner {</span>
<span class="term-fg32">+		ownerRule = append(ownerRule, ownerItem)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	var spenderRule []interface{}</span>
<span class="term-fg32">+	for _, spenderItem := range spender {</span>
<span class="term-fg32">+		spenderRule = append(spenderRule, spenderItem)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	logs, sub, err := _ERC20.contract.WatchLogs(opts, &quot;Approval&quot;, ownerRule, spenderRule)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return event.NewSubscription(func(quit &lt;-chan struct{}) error {</span>
<span class="term-fg32">+		defer sub.Unsubscribe()</span>
<span class="term-fg32">+		for {</span>
<span class="term-fg32">+			select {</span>
<span class="term-fg32">+			case log := &lt;-logs:</span>
<span class="term-fg32">+				&#47;&#47; New log arrived, parse the event and forward to the user</span>
<span class="term-fg32">+				event := new(ERC20Approval)</span>
<span class="term-fg32">+				if err := _ERC20.contract.UnpackLog(event, &quot;Approval&quot;, log); err != nil {</span>
<span class="term-fg32">+					return err</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+				event.Raw = log</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+				select {</span>
<span class="term-fg32">+				case sink &lt;- event:</span>
<span class="term-fg32">+				case err := &lt;-sub.Err():</span>
<span class="term-fg32">+					return err</span>
<span class="term-fg32">+				case &lt;-quit:</span>
<span class="term-fg32">+					return nil</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+			case err := &lt;-sub.Err():</span>
<span class="term-fg32">+				return err</span>
<span class="term-fg32">+			case &lt;-quit:</span>
<span class="term-fg32">+				return nil</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}), nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ParseApproval is a log parse operation binding the contract event 0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: event Approval(address indexed owner, address indexed spender, uint256 value)</span>
<span class="term-fg32">+func (_ERC20 *ERC20Filterer) ParseApproval(log types.Log) (*ERC20Approval, error) {</span>
<span class="term-fg32">+	event := new(ERC20Approval)</span>
<span class="term-fg32">+	if err := _ERC20.contract.UnpackLog(event, &quot;Approval&quot;, log); err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	event.Raw = log</span>
<span class="term-fg32">+	return event, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ERC20TransferIterator is returned from FilterTransfer and is used to iterate over the raw logs and unpacked data for Transfer events raised by the ERC20 contract.</span>
<span class="term-fg32">+type ERC20TransferIterator struct {</span>
<span class="term-fg32">+	Event *ERC20Transfer &#47;&#47; Event containing the contract specifics and raw log</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	contract *bind.BoundContract &#47;&#47; Generic contract to use for unpacking event data</span>
<span class="term-fg32">+	event    string              &#47;&#47; Event name to use for unpacking event data</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	logs chan types.Log        &#47;&#47; Log channel receiving the found contract events</span>
<span class="term-fg32">+	sub  ethereum.Subscription &#47;&#47; Subscription for errors, completion and termination</span>
<span class="term-fg32">+	done bool                  &#47;&#47; Whether the subscription completed delivering logs</span>
<span class="term-fg32">+	fail error                 &#47;&#47; Occurred error to stop iteration</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Next advances the iterator to the subsequent event, returning whether there</span>
<span class="term-fg32">+&#47;&#47; are any more events found. In case of a retrieval or parsing error, false is</span>
<span class="term-fg32">+&#47;&#47; returned and Error() can be queried for the exact failure.</span>
<span class="term-fg32">+func (it *ERC20TransferIterator) Next() bool {</span>
<span class="term-fg32">+	&#47;&#47; If the iterator failed, stop iterating</span>
<span class="term-fg32">+	if it.fail != nil {</span>
<span class="term-fg32">+		return false</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; If the iterator completed, deliver directly whatever&#39;s available</span>
<span class="term-fg32">+	if it.done {</span>
<span class="term-fg32">+		select {</span>
<span class="term-fg32">+		case log := &lt;-it.logs:</span>
<span class="term-fg32">+			it.Event = new(ERC20Transfer)</span>
<span class="term-fg32">+			if err := it.contract.UnpackLog(it.Event, it.event, log); err != nil {</span>
<span class="term-fg32">+				it.fail = err</span>
<span class="term-fg32">+				return false</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			it.Event.Raw = log</span>
<span class="term-fg32">+			return true</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		default:</span>
<span class="term-fg32">+			return false</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Iterator still in progress, wait for either a data or an error event</span>
<span class="term-fg32">+	select {</span>
<span class="term-fg32">+	case log := &lt;-it.logs:</span>
<span class="term-fg32">+		it.Event = new(ERC20Transfer)</span>
<span class="term-fg32">+		if err := it.contract.UnpackLog(it.Event, it.event, log); err != nil {</span>
<span class="term-fg32">+			it.fail = err</span>
<span class="term-fg32">+			return false</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		it.Event.Raw = log</span>
<span class="term-fg32">+		return true</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	case err := &lt;-it.sub.Err():</span>
<span class="term-fg32">+		it.done = true</span>
<span class="term-fg32">+		it.fail = err</span>
<span class="term-fg32">+		return it.Next()</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Error returns any retrieval or parsing error occurred during filtering.</span>
<span class="term-fg32">+func (it *ERC20TransferIterator) Error() error {</span>
<span class="term-fg32">+	return it.fail</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Close terminates the iteration process, releasing any pending underlying</span>
<span class="term-fg32">+&#47;&#47; resources.</span>
<span class="term-fg32">+func (it *ERC20TransferIterator) Close() error {</span>
<span class="term-fg32">+	it.sub.Unsubscribe()</span>
<span class="term-fg32">+	return nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ERC20Transfer represents a Transfer event raised by the ERC20 contract.</span>
<span class="term-fg32">+type ERC20Transfer struct {</span>
<span class="term-fg32">+	From  common.Address</span>
<span class="term-fg32">+	To    common.Address</span>
<span class="term-fg32">+	Value *big.Int</span>
<span class="term-fg32">+	Raw   types.Log &#47;&#47; Blockchain specific contextual infos</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; FilterTransfer is a free log retrieval operation binding the contract event 0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: event Transfer(address indexed from, address indexed to, uint256 value)</span>
<span class="term-fg32">+func (_ERC20 *ERC20Filterer) FilterTransfer(opts *bind.FilterOpts, from []common.Address, to []common.Address) (*ERC20TransferIterator, error) {</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	var fromRule []interface{}</span>
<span class="term-fg32">+	for _, fromItem := range from {</span>
<span class="term-fg32">+		fromRule = append(fromRule, fromItem)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	var toRule []interface{}</span>
<span class="term-fg32">+	for _, toItem := range to {</span>
<span class="term-fg32">+		toRule = append(toRule, toItem)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	logs, sub, err := _ERC20.contract.FilterLogs(opts, &quot;Transfer&quot;, fromRule, toRule)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;ERC20TransferIterator{contract: _ERC20.contract, event: &quot;Transfer&quot;, logs: logs, sub: sub}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; WatchTransfer is a free log subscription operation binding the contract event 0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: event Transfer(address indexed from, address indexed to, uint256 value)</span>
<span class="term-fg32">+func (_ERC20 *ERC20Filterer) WatchTransfer(opts *bind.WatchOpts, sink chan&lt;- *ERC20Transfer, from []common.Address, to []common.Address) (event.Subscription, error) {</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	var fromRule []interface{}</span>
<span class="term-fg32">+	for _, fromItem := range from {</span>
<span class="term-fg32">+		fromRule = append(fromRule, fromItem)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	var toRule []interface{}</span>
<span class="term-fg32">+	for _, toItem := range to {</span>
<span class="term-fg32">+		toRule = append(toRule, toItem)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	logs, sub, err := _ERC20.contract.WatchLogs(opts, &quot;Transfer&quot;, fromRule, toRule)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return event.NewSubscription(func(quit &lt;-chan struct{}) error {</span>
<span class="term-fg32">+		defer sub.Unsubscribe()</span>
<span class="term-fg32">+		for {</span>
<span class="term-fg32">+			select {</span>
<span class="term-fg32">+			case log := &lt;-logs:</span>
<span class="term-fg32">+				&#47;&#47; New log arrived, parse the event and forward to the user</span>
<span class="term-fg32">+				event := new(ERC20Transfer)</span>
<span class="term-fg32">+				if err := _ERC20.contract.UnpackLog(event, &quot;Transfer&quot;, log); err != nil {</span>
<span class="term-fg32">+					return err</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+				event.Raw = log</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+				select {</span>
<span class="term-fg32">+				case sink &lt;- event:</span>
<span class="term-fg32">+				case err := &lt;-sub.Err():</span>
<span class="term-fg32">+					return err</span>
<span class="term-fg32">+				case &lt;-quit:</span>
<span class="term-fg32">+					return nil</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+			case err := &lt;-sub.Err():</span>
<span class="term-fg32">+				return err</span>
<span class="term-fg32">+			case &lt;-quit:</span>
<span class="term-fg32">+				return nil</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}), nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ParseTransfer is a log parse operation binding the contract event 0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: event Transfer(address indexed from, address indexed to, uint256 value)</span>
<span class="term-fg32">+func (_ERC20 *ERC20Filterer) ParseTransfer(log types.Log) (*ERC20Transfer, error) {</span>
<span class="term-fg32">+	event := new(ERC20Transfer)</span>
<span class="term-fg32">+	if err := _ERC20.contract.UnpackLog(event, &quot;Transfer&quot;, log); err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	event.Raw = log</span>
<span class="term-fg32">+	return event, nil</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-6daac538255e02899a48320b" role="button"
                       aria-expanded="false" aria-controls="id-6daac538255e02899a48320b">
                        <code>tests/immutable/erc721/abi.json</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/erc721/abi.json" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+365</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-6daac538255e02899a48320b"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;erc721&#47;abi.json immutable-geth&#47;tests&#47;immutable&#47;erc721&#47;abi.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..29aebeeda6a0afe4e62ce3f665c247bd4ebbe5e4</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;erc721&#47;abi.json</span>
<span class="term-fg36">@@ -0,0 +1,366 @@</span>
<span class="term-fg32">+[</span>
<span class="term-fg32">+  {</span>
<span class="term-fg32">+    &quot;inputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;string&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;name&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;string&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;string&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;symbol&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;string&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;stateMutability&quot;: &quot;nonpayable&quot;,</span>
<span class="term-fg32">+    &quot;type&quot;: &quot;constructor&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  {</span>
<span class="term-fg32">+    &quot;anonymous&quot;: false,</span>
<span class="term-fg32">+    &quot;inputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;indexed&quot;: true,</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;address&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;owner&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;address&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;indexed&quot;: true,</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;address&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;approved&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;address&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;indexed&quot;: true,</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;uint256&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;tokenId&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;uint256&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;name&quot;: &quot;Approval&quot;,</span>
<span class="term-fg32">+    &quot;type&quot;: &quot;event&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  {</span>
<span class="term-fg32">+    &quot;anonymous&quot;: false,</span>
<span class="term-fg32">+    &quot;inputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;indexed&quot;: true,</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;address&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;owner&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;address&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;indexed&quot;: true,</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;address&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;operator&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;address&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;indexed&quot;: false,</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;bool&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;approved&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;bool&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;name&quot;: &quot;ApprovalForAll&quot;,</span>
<span class="term-fg32">+    &quot;type&quot;: &quot;event&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  {</span>
<span class="term-fg32">+    &quot;anonymous&quot;: false,</span>
<span class="term-fg32">+    &quot;inputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;indexed&quot;: true,</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;address&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;from&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;address&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;indexed&quot;: true,</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;address&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;to&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;address&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;indexed&quot;: true,</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;uint256&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;tokenId&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;uint256&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;name&quot;: &quot;Transfer&quot;,</span>
<span class="term-fg32">+    &quot;type&quot;: &quot;event&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  {</span>
<span class="term-fg32">+    &quot;inputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;address&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;to&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;address&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;uint256&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;tokenId&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;uint256&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;name&quot;: &quot;approve&quot;,</span>
<span class="term-fg32">+    &quot;outputs&quot;: [],</span>
<span class="term-fg32">+    &quot;stateMutability&quot;: &quot;nonpayable&quot;,</span>
<span class="term-fg32">+    &quot;type&quot;: &quot;function&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  {</span>
<span class="term-fg32">+    &quot;inputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;address&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;owner&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;address&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;name&quot;: &quot;balanceOf&quot;,</span>
<span class="term-fg32">+    &quot;outputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;uint256&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;uint256&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;stateMutability&quot;: &quot;view&quot;,</span>
<span class="term-fg32">+    &quot;type&quot;: &quot;function&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  {</span>
<span class="term-fg32">+    &quot;inputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;uint256&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;tokenId&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;uint256&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;name&quot;: &quot;getApproved&quot;,</span>
<span class="term-fg32">+    &quot;outputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;address&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;address&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;stateMutability&quot;: &quot;view&quot;,</span>
<span class="term-fg32">+    &quot;type&quot;: &quot;function&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  {</span>
<span class="term-fg32">+    &quot;inputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;address&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;owner&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;address&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;address&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;operator&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;address&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;name&quot;: &quot;isApprovedForAll&quot;,</span>
<span class="term-fg32">+    &quot;outputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;bool&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;bool&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;stateMutability&quot;: &quot;view&quot;,</span>
<span class="term-fg32">+    &quot;type&quot;: &quot;function&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  {</span>
<span class="term-fg32">+    &quot;inputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;address&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;collector&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;address&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;uint256&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;tokenId&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;uint256&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;name&quot;: &quot;mintNFT&quot;,</span>
<span class="term-fg32">+    &quot;outputs&quot;: [],</span>
<span class="term-fg32">+    &quot;stateMutability&quot;: &quot;nonpayable&quot;,</span>
<span class="term-fg32">+    &quot;type&quot;: &quot;function&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  {</span>
<span class="term-fg32">+    &quot;inputs&quot;: [],</span>
<span class="term-fg32">+    &quot;name&quot;: &quot;name&quot;,</span>
<span class="term-fg32">+    &quot;outputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;string&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;string&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;stateMutability&quot;: &quot;view&quot;,</span>
<span class="term-fg32">+    &quot;type&quot;: &quot;function&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  {</span>
<span class="term-fg32">+    &quot;inputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;uint256&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;tokenId&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;uint256&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;name&quot;: &quot;ownerOf&quot;,</span>
<span class="term-fg32">+    &quot;outputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;address&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;address&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;stateMutability&quot;: &quot;view&quot;,</span>
<span class="term-fg32">+    &quot;type&quot;: &quot;function&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  {</span>
<span class="term-fg32">+    &quot;inputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;address&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;from&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;address&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;address&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;to&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;address&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;uint256&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;tokenId&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;uint256&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;name&quot;: &quot;safeTransferFrom&quot;,</span>
<span class="term-fg32">+    &quot;outputs&quot;: [],</span>
<span class="term-fg32">+    &quot;stateMutability&quot;: &quot;nonpayable&quot;,</span>
<span class="term-fg32">+    &quot;type&quot;: &quot;function&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  {</span>
<span class="term-fg32">+    &quot;inputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;address&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;from&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;address&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;address&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;to&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;address&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;uint256&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;tokenId&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;uint256&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;bytes&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;data&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;bytes&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;name&quot;: &quot;safeTransferFrom&quot;,</span>
<span class="term-fg32">+    &quot;outputs&quot;: [],</span>
<span class="term-fg32">+    &quot;stateMutability&quot;: &quot;nonpayable&quot;,</span>
<span class="term-fg32">+    &quot;type&quot;: &quot;function&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  {</span>
<span class="term-fg32">+    &quot;inputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;address&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;operator&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;address&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;bool&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;approved&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;bool&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;name&quot;: &quot;setApprovalForAll&quot;,</span>
<span class="term-fg32">+    &quot;outputs&quot;: [],</span>
<span class="term-fg32">+    &quot;stateMutability&quot;: &quot;nonpayable&quot;,</span>
<span class="term-fg32">+    &quot;type&quot;: &quot;function&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  {</span>
<span class="term-fg32">+    &quot;inputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;bytes4&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;interfaceId&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;bytes4&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;name&quot;: &quot;supportsInterface&quot;,</span>
<span class="term-fg32">+    &quot;outputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;bool&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;bool&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;stateMutability&quot;: &quot;view&quot;,</span>
<span class="term-fg32">+    &quot;type&quot;: &quot;function&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  {</span>
<span class="term-fg32">+    &quot;inputs&quot;: [],</span>
<span class="term-fg32">+    &quot;name&quot;: &quot;symbol&quot;,</span>
<span class="term-fg32">+    &quot;outputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;string&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;string&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;stateMutability&quot;: &quot;view&quot;,</span>
<span class="term-fg32">+    &quot;type&quot;: &quot;function&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  {</span>
<span class="term-fg32">+    &quot;inputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;uint256&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;tokenId&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;uint256&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;name&quot;: &quot;tokenURI&quot;,</span>
<span class="term-fg32">+    &quot;outputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;string&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;string&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;stateMutability&quot;: &quot;view&quot;,</span>
<span class="term-fg32">+    &quot;type&quot;: &quot;function&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  {</span>
<span class="term-fg32">+    &quot;inputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;address&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;from&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;address&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;address&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;to&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;address&quot;</span>
<span class="term-fg32">+      },</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;uint256&quot;,</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;tokenId&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;uint256&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;name&quot;: &quot;transferFrom&quot;,</span>
<span class="term-fg32">+    &quot;outputs&quot;: [],</span>
<span class="term-fg32">+    &quot;stateMutability&quot;: &quot;nonpayable&quot;,</span>
<span class="term-fg32">+    &quot;type&quot;: &quot;function&quot;</span>
<span class="term-fg32">+  }</span>
<span class="term-fg32">+]</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-e2457f4f14108aa101326364" role="button"
                       aria-expanded="false" aria-controls="id-e2457f4f14108aa101326364">
                        <code>tests/immutable/erc721/bytecode.bin</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/erc721/bytecode.bin" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+0</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-e2457f4f14108aa101326364"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;erc721&#47;bytecode.bin immutable-geth&#47;tests&#47;immutable&#47;erc721&#47;bytecode.bin</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..3718c5edc4a1698f996cea41861bcf44a165e5c6</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;erc721&#47;bytecode.bin</span>
<span class="term-fg36">@@ -0,0 +1 @@</span>
<span class="term-fg32">+0x60806040523480156200001157600080fd5b5060405162002aa438038062002aa4833981810160405281019062000037919062000197565b818181600090805190602001906200005192919062000075565b5080600190805190602001906200006a92919062000075565b50505050506200037a565b82805462000083906200029f565b90600052602060002090601f016020900481019282620000a75760008555620000f3565b82601f10620000c257805160ff1916838001178555620000f3565b82800160010185558215620000f3579182015b82811115620000f2578251825591602001919060010190620000d5565b5b50905062000102919062000106565b5090565b5b808211156200012157600081600090555060010162000107565b5090565b60006200013c620001368462000233565b6200020a565b9050828152602081018484840111156200015557600080fd5b6200016284828562000269565b509392505050565b600082601f8301126200017c57600080fd5b81516200018e84826020860162000125565b91505092915050565b60008060408385031215620001ab57600080fd5b600083015167ffffffffffffffff811115620001c657600080fd5b620001d4858286016200016a565b925050602083015167ffffffffffffffff811115620001f257600080fd5b62000200858286016200016a565b9150509250929050565b60006200021662000229565b9050620002248282620002d5565b919050565b6000604051905090565b600067ffffffffffffffff8211156200025157620002506200033a565b5b6200025c8262000369565b9050602081019050919050565b60005b83811015620002895780820151818401526020810190506200026c565b8381111562000299576000848401525b50505050565b60006002820490506001821680620002b857607f821691505b60208210811415620002cf57620002ce6200030b565b5b50919050565b620002e08262000369565b810181811067ffffffffffffffff821117156200030257620003016200033a565b5b80604052505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6000601f19601f8301169050919050565b61271a806200038a6000396000f3fe608060405234801561001057600080fd5b50600436106100ea5760003560e01c80636352211e1161008c578063a22cb46511610066578063a22cb4651461025b578063b88d4fde14610277578063c87b56dd14610293578063e985e9c5146102c3576100ea565b80636352211e146101dd57806370a082311461020d57806395d89b411461023d576100ea565b8063095ea7b3116100c8578063095ea7b31461016d57806323b872dd146101895780633c168eab146101a557806342842e0e146101c1576100ea565b806301ffc9a7146100ef57806306fdde031461011f578063081812fc1461013d575b600080fd5b61010960048036038101906101049190611bd2565b6102f3565b6040516101169190611f29565b60405180910390f35b6101276103d5565b6040516101349190611f44565b60405180910390f35b61015760048036038101906101529190611c24565b610467565b6040516101649190611ec2565b60405180910390f35b61018760048036038101906101829190611b96565b6104ad565b005b6101a3600480360381019061019e9190611a90565b6105c5565b005b6101bf60048036038101906101ba9190611b96565b610625565b005b6101db60048036038101906101d69190611a90565b610633565b005b6101f760048036038101906101f29190611c24565b610653565b6040516102049190611ec2565b60405180910390f35b61022760048036038101906102229190611a2b565b6106da565b60405161023491906120c6565b60405180910390f35b610245610792565b6040516102529190611f44565b60405180910390f35b61027560048036038101906102709190611b5a565b610824565b005b610291600480360381019061028c9190611adf565b61083a565b005b6102ad60048036038101906102a89190611c24565b61089c565b6040516102ba9190611f44565b60405180910390f35b6102dd60048036038101906102d89190611a54565b610904565b6040516102ea9190611f29565b60405180910390f35b60007f80ac58cd000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff191614806103be57507f5b5e139f000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916145b806103ce57506103cd82610998565b5b9050919050565b6060600080546103e4906122ba565b80601f0160208091040260200160405190810160405280929190818152602001828054610410906122ba565b801561045d5780601f106104325761010080835404028352916020019161045d565b820191906000526020600020905b81548152906001019060200180831161044057829003601f168201915b5050505050905090565b600061047282610a02565b6004600083815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050919050565b60006104b882610653565b90508073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff161415610529576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161052090612086565b60405180910390fd5b8073ffffffffffffffffffffffffffffffffffffffff16610548610a4d565b73ffffffffffffffffffffffffffffffffffffffff161480610577575061057681610571610a4d565b610904565b5b6105b6576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105ad906120a6565b60405180910390fd5b6105c08383610a55565b505050565b6105d66105d0610a4d565b82610b0e565b610615576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161060c90611f66565b60405180910390fd5b610620838383610ba3565b505050565b61062f8282610e9d565b5050565b61064e8383836040518060200160405280600081525061083a565b505050565b60008061065f836110bb565b9050600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614156106d1576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c890612066565b60405180910390fd5b80915050919050565b60008073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16141561074b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161074290612026565b60405180910390fd5b600360008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b6060600180546107a1906122ba565b80601f01602080910402602001604051908101604052809291908181526020018280546107cd906122ba565b801561081a5780601f106107ef5761010080835404028352916020019161081a565b820191906000526020600020905b8154815290600101906020018083116107fd57829003601f168201915b5050505050905090565b61083661082f610a4d565b83836110f8565b5050565b61084b610845610a4d565b83610b0e565b61088a576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161088190611f66565b60405180910390fd5b61089684848484611265565b50505050565b60606108a782610a02565b60006108b16112c1565b905060008151116108d157604051806020016040528060008152506108fc565b806108db846112d8565b6040516020016108ec929190611e9e565b6040516020818303038152906040525b915050919050565b6000600560008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16905092915050565b60007f01ffc9a7000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916149050919050565b610a0b816113fc565b610a4a576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a4190612066565b60405180910390fd5b50565b600033905090565b816004600083815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550808273ffffffffffffffffffffffffffffffffffffffff16610ac883610653565b73ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92560405160405180910390a45050565b600080610b1a83610653565b90508073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff161480610b5c5750610b5b8185610904565b5b80610b9a57508373ffffffffffffffffffffffffffffffffffffffff16610b8284610467565b73ffffffffffffffffffffffffffffffffffffffff16145b91505092915050565b8273ffffffffffffffffffffffffffffffffffffffff16610bc382610653565b73ffffffffffffffffffffffffffffffffffffffff1614610c19576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610c1090611fa6565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff161415610c89576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610c8090611fe6565b60405180910390fd5b610c96838383600161143d565b8273ffffffffffffffffffffffffffffffffffffffff16610cb682610653565b73ffffffffffffffffffffffffffffffffffffffff1614610d0c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d0390611fa6565b60405180910390fd5b6004600082815260200190815260200160002060006101000a81549073ffffffffffffffffffffffffffffffffffffffff02191690556001600360008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825403925050819055506001600360008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282540192505081905550816002600083815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550808273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60405160405180910390a4610e988383836001611563565b505050565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff161415610f0d576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610f0490612046565b60405180910390fd5b610f16816113fc565b15610f56576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610f4d90611fc6565b60405180910390fd5b610f6460008383600161143d565b610f6d816113fc565b15610fad576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610fa490611fc6565b60405180910390fd5b6001600360008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282540192505081905550816002600083815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550808273ffffffffffffffffffffffffffffffffffffffff16600073ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60405160405180910390a46110b7600083836001611563565b5050565b60006002600083815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050919050565b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff161415611167576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161115e90612006565b60405180910390fd5b80600560008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055508173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c31836040516112589190611f29565b60405180910390a3505050565b611270848484610ba3565b61127c84848484611569565b6112bb576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016112b290611f86565b60405180910390fd5b50505050565b606060405180602001604052806000815250905090565b6060600060016112e784611700565b01905060008167ffffffffffffffff81111561132c577f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6040519080825280601f01601f19166020018201604052801561135e5781602001600182028036833780820191505090505b509050600082602001820190505b6001156113f1578080600190039150507f3031323334353637383961626364656600000000000000000000000000000000600a86061a8153600a85816113db577f4e487b7100000000000000000000000000000000000000000000000000000000600052601260045260246000fd5b04945060008514156113ec576113f1565b61136c565b819350505050919050565b60008073ffffffffffffffffffffffffffffffffffffffff1661141e836110bb565b73ffffffffffffffffffffffffffffffffffffffff1614159050919050565b600181111561155d57600073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff16146114d15780600360008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282546114c991906121d0565b925050819055505b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff161461155c5780600360008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254611554919061217a565b925050819055505b5b50505050565b50505050565b600061158a8473ffffffffffffffffffffffffffffffffffffffff16611937565b156116f3578373ffffffffffffffffffffffffffffffffffffffff1663150b7a026115b3610a4d565b8786866040518563ffffffff1660e01b81526004016115d59493929190611edd565b602060405180830381600087803b1580156115ef57600080fd5b505af192505050801561162057506040513d601f19601f8201168201806040525081019061161d9190611bfb565b60015b6116a3573d8060008114611650576040519150601f19603f3d011682016040523d82523d6000602084013e611655565b606091505b5060008151141561169b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161169290611f86565b60405180910390fd5b805181602001fd5b63150b7a0260e01b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916817bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916149150506116f8565b600190505b949350505050565b600080600090507a184f03e93ff9f4daa797ed6e38ed64bf6a1f0100000000000000008310611784577a184f03e93ff9f4daa797ed6e38ed64bf6a1f010000000000000000838161177a577f4e487b7100000000000000000000000000000000000000000000000000000000600052601260045260246000fd5b0492506040810190505b6d04ee2d6d415b85acef810000000083106117e7576d04ee2d6d415b85acef810000000083816117dd577f4e487b7100000000000000000000000000000000000000000000000000000000600052601260045260246000fd5b0492506020810190505b662386f26fc10000831061183c57662386f26fc100008381611832577f4e487b7100000000000000000000000000000000000000000000000000000000600052601260045260246000fd5b0492506010810190505b6305f5e100831061188b576305f5e1008381611881577f4e487b7100000000000000000000000000000000000000000000000000000000600052601260045260246000fd5b0492506008810190505b61271083106118d65761271083816118cc577f4e487b7100000000000000000000000000000000000000000000000000000000600052601260045260246000fd5b0492506004810190505b6064831061191f5760648381611915577f4e487b7100000000000000000000000000000000000000000000000000000000600052601260045260246000fd5b0492506002810190505b600a831061192e576001810190505b80915050919050565b6000808273ffffffffffffffffffffffffffffffffffffffff163b119050919050565b600061196d61196884612106565b6120e1565b90508281526020810184848401111561198557600080fd5b611990848285612278565b509392505050565b6000813590506119a781612688565b92915050565b6000813590506119bc8161269f565b92915050565b6000813590506119d1816126b6565b92915050565b6000815190506119e6816126b6565b92915050565b600082601f8301126119fd57600080fd5b8135611a0d84826020860161195a565b91505092915050565b600081359050611a25816126cd565b92915050565b600060208284031215611a3d57600080fd5b6000611a4b84828501611998565b91505092915050565b60008060408385031215611a6757600080fd5b6000611a7585828601611998565b9250506020611a8685828601611998565b9150509250929050565b600080600060608486031215611aa557600080fd5b6000611ab386828701611998565b9350506020611ac486828701611998565b9250506040611ad586828701611a16565b9150509250925092565b60008060008060808587031215611af557600080fd5b6000611b0387828801611998565b9450506020611b1487828801611998565b9350506040611b2587828801611a16565b925050606085013567ffffffffffffffff811115611b4257600080fd5b611b4e878288016119ec565b91505092959194509250565b60008060408385031215611b6d57600080fd5b6000611b7b85828601611998565b9250506020611b8c858286016119ad565b9150509250929050565b60008060408385031215611ba957600080fd5b6000611bb785828601611998565b9250506020611bc885828601611a16565b9150509250929050565b600060208284031215611be457600080fd5b6000611bf2848285016119c2565b91505092915050565b600060208284031215611c0d57600080fd5b6000611c1b848285016119d7565b91505092915050565b600060208284031215611c3657600080fd5b6000611c4484828501611a16565b91505092915050565b611c5681612204565b82525050565b611c6581612216565b82525050565b6000611c7682612137565b611c80818561214d565b9350611c90818560208601612287565b611c99816123aa565b840191505092915050565b6000611caf82612142565b611cb9818561215e565b9350611cc9818560208601612287565b611cd2816123aa565b840191505092915050565b6000611ce882612142565b611cf2818561216f565b9350611d02818560208601612287565b80840191505092915050565b6000611d1b602d8361215e565b9150611d26826123bb565b604082019050919050565b6000611d3e60328361215e565b9150611d498261240a565b604082019050919050565b6000611d6160258361215e565b9150611d6c82612459565b604082019050919050565b6000611d84601c8361215e565b9150611d8f826124a8565b602082019050919050565b6000611da760248361215e565b9150611db2826124d1565b604082019050919050565b6000611dca60198361215e565b9150611dd582612520565b602082019050919050565b6000611ded60298361215e565b9150611df882612549565b604082019050919050565b6000611e1060208361215e565b9150611e1b82612598565b602082019050919050565b6000611e3360188361215e565b9150611e3e826125c1565b602082019050919050565b6000611e5660218361215e565b9150611e61826125ea565b604082019050919050565b6000611e79603d8361215e565b9150611e8482612639565b604082019050919050565b611e988161226e565b82525050565b6000611eaa8285611cdd565b9150611eb68284611cdd565b91508190509392505050565b6000602082019050611ed76000830184611c4d565b92915050565b6000608082019050611ef26000830187611c4d565b611eff6020830186611c4d565b611f0c6040830185611e8f565b8181036060830152611f1e8184611c6b565b905095945050505050565b6000602082019050611f3e6000830184611c5c565b92915050565b60006020820190508181036000830152611f5e8184611ca4565b905092915050565b60006020820190508181036000830152611f7f81611d0e565b9050919050565b60006020820190508181036000830152611f9f81611d31565b9050919050565b60006020820190508181036000830152611fbf81611d54565b9050919050565b60006020820190508181036000830152611fdf81611d77565b9050919050565b60006020820190508181036000830152611fff81611d9a565b9050919050565b6000602082019050818103600083015261201f81611dbd565b9050919050565b6000602082019050818103600083015261203f81611de0565b9050919050565b6000602082019050818103600083015261205f81611e03565b9050919050565b6000602082019050818103600083015261207f81611e26565b9050919050565b6000602082019050818103600083015261209f81611e49565b9050919050565b600060208201905081810360008301526120bf81611e6c565b9050919050565b60006020820190506120db6000830184611e8f565b92915050565b60006120eb6120fc565b90506120f782826122ec565b919050565b6000604051905090565b600067ffffffffffffffff8211156121215761212061237b565b5b61212a826123aa565b9050602081019050919050565b600081519050919050565b600081519050919050565b600082825260208201905092915050565b600082825260208201905092915050565b600081905092915050565b60006121858261226e565b91506121908361226e565b9250827fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff038211156121c5576121c461231d565b5b828201905092915050565b60006121db8261226e565b91506121e68361226e565b9250828210156121f9576121f861231d565b5b828203905092915050565b600061220f8261224e565b9050919050565b60008115159050919050565b60007fffffffff0000000000000000000000000000000000000000000000000000000082169050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b82818337600083830152505050565b60005b838110156122a557808201518184015260208101905061228a565b838111156122b4576000848401525b50505050565b600060028204905060018216806122d257607f821691505b602082108114156122e6576122e561234c565b5b50919050565b6122f5826123aa565b810181811067ffffffffffffffff821117156123145761231361237b565b5b80604052505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6000601f19601f8301169050919050565b7f4552433732313a2063616c6c6572206973206e6f7420746f6b656e206f776e6560008201527f72206f7220617070726f76656400000000000000000000000000000000000000602082015250565b7f4552433732313a207472616e7366657220746f206e6f6e20455243373231526560008201527f63656976657220696d706c656d656e7465720000000000000000000000000000602082015250565b7f4552433732313a207472616e736665722066726f6d20696e636f72726563742060008201527f6f776e6572000000000000000000000000000000000000000000000000000000602082015250565b7f4552433732313a20746f6b656e20616c7265616479206d696e74656400000000600082015250565b7f4552433732313a207472616e7366657220746f20746865207a65726f2061646460008201527f7265737300000000000000000000000000000000000000000000000000000000602082015250565b7f4552433732313a20617070726f766520746f2063616c6c657200000000000000600082015250565b7f4552433732313a2061646472657373207a65726f206973206e6f74206120766160008201527f6c6964206f776e65720000000000000000000000000000000000000000000000602082015250565b7f4552433732313a206d696e7420746f20746865207a65726f2061646472657373600082015250565b7f4552433732313a20696e76616c696420746f6b656e2049440000000000000000600082015250565b7f4552433732313a20617070726f76616c20746f2063757272656e74206f776e6560008201527f7200000000000000000000000000000000000000000000000000000000000000602082015250565b7f4552433732313a20617070726f76652063616c6c6572206973206e6f7420746f60008201527f6b656e206f776e6572206f7220617070726f76656420666f7220616c6c000000602082015250565b61269181612204565b811461269c57600080fd5b50565b6126a881612216565b81146126b357600080fd5b50565b6126bf81612222565b81146126ca57600080fd5b50565b6126d68161226e565b81146126e157600080fd5b5056fea2646970667358221220471c9b7b7857e2dd612257c8e7e0f6ab9f6e99964e596f33dcb4b622892b3d7e64736f6c63430008040033</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-4ffd4c15f733abd8cfa64ca5" role="button"
                       aria-expanded="false" aria-controls="id-4ffd4c15f733abd8cfa64ca5">
                        <code>tests/immutable/erc721/erc721.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/erc721/erc721.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+1055</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-4ffd4c15f733abd8cfa64ca5"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;erc721&#47;erc721.go immutable-geth&#47;tests&#47;immutable&#47;erc721&#47;erc721.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..264d24dd83d7807d3fc1c5d84e88ac9ca8756b85</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;erc721&#47;erc721.go</span>
<span class="term-fg36">@@ -0,0 +1,1055 @@</span>
<span class="term-fg32">+&#47;&#47; Code generated - DO NOT EDIT.</span>
<span class="term-fg32">+&#47;&#47; This file is a generated binding and any manual changes will be lost.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package erc721</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;errors&quot;</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+	&quot;strings&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	ethereum &quot;github.com&#47;ethereum&#47;go-ethereum&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&#47;abi&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&#47;abi&#47;bind&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;event&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Reference imports to suppress errors if they are not otherwise used.</span>
<span class="term-fg32">+var (</span>
<span class="term-fg32">+	_ = errors.New</span>
<span class="term-fg32">+	_ = big.NewInt</span>
<span class="term-fg32">+	_ = strings.NewReader</span>
<span class="term-fg32">+	_ = ethereum.NotFound</span>
<span class="term-fg32">+	_ = bind.Bind</span>
<span class="term-fg32">+	_ = common.Big1</span>
<span class="term-fg32">+	_ = types.BloomLookup</span>
<span class="term-fg32">+	_ = event.NewSubscription</span>
<span class="term-fg32">+	_ = abi.ConvertType</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ERC721MetaData contains all meta data concerning the ERC721 contract.</span>
<span class="term-fg32">+var ERC721MetaData = &amp;bind.MetaData{</span>
<span class="term-fg32">+	ABI: &quot;[{\&quot;inputs\&quot;:[{\&quot;internalType\&quot;:\&quot;string\&quot;,\&quot;name\&quot;:\&quot;name\&quot;,\&quot;type\&quot;:\&quot;string\&quot;},{\&quot;internalType\&quot;:\&quot;string\&quot;,\&quot;name\&quot;:\&quot;symbol\&quot;,\&quot;type\&quot;:\&quot;string\&quot;}],\&quot;stateMutability\&quot;:\&quot;nonpayable\&quot;,\&quot;type\&quot;:\&quot;constructor\&quot;},{\&quot;anonymous\&quot;:false,\&quot;inputs\&quot;:[{\&quot;indexed\&quot;:true,\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;owner\&quot;,\&quot;type\&quot;:\&quot;address\&quot;},{\&quot;indexed\&quot;:true,\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;approved\&quot;,\&quot;type\&quot;:\&quot;address\&quot;},{\&quot;indexed\&quot;:true,\&quot;internalType\&quot;:\&quot;uint256\&quot;,\&quot;name\&quot;:\&quot;tokenId\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;}],\&quot;name\&quot;:\&quot;Approval\&quot;,\&quot;type\&quot;:\&quot;event\&quot;},{\&quot;anonymous\&quot;:false,\&quot;inputs\&quot;:[{\&quot;indexed\&quot;:true,\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;owner\&quot;,\&quot;type\&quot;:\&quot;address\&quot;},{\&quot;indexed\&quot;:true,\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;operator\&quot;,\&quot;type\&quot;:\&quot;address\&quot;},{\&quot;indexed\&quot;:false,\&quot;internalType\&quot;:\&quot;bool\&quot;,\&quot;name\&quot;:\&quot;approved\&quot;,\&quot;type\&quot;:\&quot;bool\&quot;}],\&quot;name\&quot;:\&quot;ApprovalForAll\&quot;,\&quot;type\&quot;:\&quot;event\&quot;},{\&quot;anonymous\&quot;:false,\&quot;inputs\&quot;:[{\&quot;indexed\&quot;:true,\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;from\&quot;,\&quot;type\&quot;:\&quot;address\&quot;},{\&quot;indexed\&quot;:true,\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;to\&quot;,\&quot;type\&quot;:\&quot;address\&quot;},{\&quot;indexed\&quot;:true,\&quot;internalType\&quot;:\&quot;uint256\&quot;,\&quot;name\&quot;:\&quot;tokenId\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;}],\&quot;name\&quot;:\&quot;Transfer\&quot;,\&quot;type\&quot;:\&quot;event\&quot;},{\&quot;inputs\&quot;:[{\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;to\&quot;,\&quot;type\&quot;:\&quot;address\&quot;},{\&quot;internalType\&quot;:\&quot;uint256\&quot;,\&quot;name\&quot;:\&quot;tokenId\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;}],\&quot;name\&quot;:\&quot;approve\&quot;,\&quot;outputs\&quot;:[],\&quot;stateMutability\&quot;:\&quot;nonpayable\&quot;,\&quot;type\&quot;:\&quot;function\&quot;},{\&quot;inputs\&quot;:[{\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;owner\&quot;,\&quot;type\&quot;:\&quot;address\&quot;}],\&quot;name\&quot;:\&quot;balanceOf\&quot;,\&quot;outputs\&quot;:[{\&quot;internalType\&quot;:\&quot;uint256\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;}],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;},{\&quot;inputs\&quot;:[{\&quot;internalType\&quot;:\&quot;uint256\&quot;,\&quot;name\&quot;:\&quot;tokenId\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;}],\&quot;name\&quot;:\&quot;getApproved\&quot;,\&quot;outputs\&quot;:[{\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;address\&quot;}],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;},{\&quot;inputs\&quot;:[{\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;owner\&quot;,\&quot;type\&quot;:\&quot;address\&quot;},{\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;operator\&quot;,\&quot;type\&quot;:\&quot;address\&quot;}],\&quot;name\&quot;:\&quot;isApprovedForAll\&quot;,\&quot;outputs\&quot;:[{\&quot;internalType\&quot;:\&quot;bool\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;bool\&quot;}],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;},{\&quot;inputs\&quot;:[{\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;collector\&quot;,\&quot;type\&quot;:\&quot;address\&quot;},{\&quot;internalType\&quot;:\&quot;uint256\&quot;,\&quot;name\&quot;:\&quot;tokenId\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;}],\&quot;name\&quot;:\&quot;mintNFT\&quot;,\&quot;outputs\&quot;:[],\&quot;stateMutability\&quot;:\&quot;nonpayable\&quot;,\&quot;type\&quot;:\&quot;function\&quot;},{\&quot;inputs\&quot;:[],\&quot;name\&quot;:\&quot;name\&quot;,\&quot;outputs\&quot;:[{\&quot;internalType\&quot;:\&quot;string\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;string\&quot;}],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;},{\&quot;inputs\&quot;:[{\&quot;internalType\&quot;:\&quot;uint256\&quot;,\&quot;name\&quot;:\&quot;tokenId\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;}],\&quot;name\&quot;:\&quot;ownerOf\&quot;,\&quot;outputs\&quot;:[{\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;address\&quot;}],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;},{\&quot;inputs\&quot;:[{\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;from\&quot;,\&quot;type\&quot;:\&quot;address\&quot;},{\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;to\&quot;,\&quot;type\&quot;:\&quot;address\&quot;},{\&quot;internalType\&quot;:\&quot;uint256\&quot;,\&quot;name\&quot;:\&quot;tokenId\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;}],\&quot;name\&quot;:\&quot;safeTransferFrom\&quot;,\&quot;outputs\&quot;:[],\&quot;stateMutability\&quot;:\&quot;nonpayable\&quot;,\&quot;type\&quot;:\&quot;function\&quot;},{\&quot;inputs\&quot;:[{\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;from\&quot;,\&quot;type\&quot;:\&quot;address\&quot;},{\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;to\&quot;,\&quot;type\&quot;:\&quot;address\&quot;},{\&quot;internalType\&quot;:\&quot;uint256\&quot;,\&quot;name\&quot;:\&quot;tokenId\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;},{\&quot;internalType\&quot;:\&quot;bytes\&quot;,\&quot;name\&quot;:\&quot;data\&quot;,\&quot;type\&quot;:\&quot;bytes\&quot;}],\&quot;name\&quot;:\&quot;safeTransferFrom\&quot;,\&quot;outputs\&quot;:[],\&quot;stateMutability\&quot;:\&quot;nonpayable\&quot;,\&quot;type\&quot;:\&quot;function\&quot;},{\&quot;inputs\&quot;:[{\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;operator\&quot;,\&quot;type\&quot;:\&quot;address\&quot;},{\&quot;internalType\&quot;:\&quot;bool\&quot;,\&quot;name\&quot;:\&quot;approved\&quot;,\&quot;type\&quot;:\&quot;bool\&quot;}],\&quot;name\&quot;:\&quot;setApprovalForAll\&quot;,\&quot;outputs\&quot;:[],\&quot;stateMutability\&quot;:\&quot;nonpayable\&quot;,\&quot;type\&quot;:\&quot;function\&quot;},{\&quot;inputs\&quot;:[{\&quot;internalType\&quot;:\&quot;bytes4\&quot;,\&quot;name\&quot;:\&quot;interfaceId\&quot;,\&quot;type\&quot;:\&quot;bytes4\&quot;}],\&quot;name\&quot;:\&quot;supportsInterface\&quot;,\&quot;outputs\&quot;:[{\&quot;internalType\&quot;:\&quot;bool\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;bool\&quot;}],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;},{\&quot;inputs\&quot;:[],\&quot;name\&quot;:\&quot;symbol\&quot;,\&quot;outputs\&quot;:[{\&quot;internalType\&quot;:\&quot;string\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;string\&quot;}],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;},{\&quot;inputs\&quot;:[{\&quot;internalType\&quot;:\&quot;uint256\&quot;,\&quot;name\&quot;:\&quot;tokenId\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;}],\&quot;name\&quot;:\&quot;tokenURI\&quot;,\&quot;outputs\&quot;:[{\&quot;internalType\&quot;:\&quot;string\&quot;,\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;string\&quot;}],\&quot;stateMutability\&quot;:\&quot;view\&quot;,\&quot;type\&quot;:\&quot;function\&quot;},{\&quot;inputs\&quot;:[{\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;from\&quot;,\&quot;type\&quot;:\&quot;address\&quot;},{\&quot;internalType\&quot;:\&quot;address\&quot;,\&quot;name\&quot;:\&quot;to\&quot;,\&quot;type\&quot;:\&quot;address\&quot;},{\&quot;internalType\&quot;:\&quot;uint256\&quot;,\&quot;name\&quot;:\&quot;tokenId\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;}],\&quot;name\&quot;:\&quot;transferFrom\&quot;,\&quot;outputs\&quot;:[],\&quot;stateMutability\&quot;:\&quot;nonpayable\&quot;,\&quot;type\&quot;:\&quot;function\&quot;}]&quot;,</span>
<span class="term-fg32">+	Bin: &quot;0x60806040523480156200001157600080fd5b5060405162002aa438038062002aa4833981810160405281019062000037919062000197565b818181600090805190602001906200005192919062000075565b5080600190805190602001906200006a92919062000075565b50505050506200037a565b82805462000083906200029f565b90600052602060002090601f016020900481019282620000a75760008555620000f3565b82601f10620000c257805160ff1916838001178555620000f3565b82800160010185558215620000f3579182015b82811115620000f2578251825591602001919060010190620000d5565b5b50905062000102919062000106565b5090565b5b808211156200012157600081600090555060010162000107565b5090565b60006200013c620001368462000233565b6200020a565b9050828152602081018484840111156200015557600080fd5b6200016284828562000269565b509392505050565b600082601f8301126200017c57600080fd5b81516200018e84826020860162000125565b91505092915050565b60008060408385031215620001ab57600080fd5b600083015167ffffffffffffffff811115620001c657600080fd5b620001d4858286016200016a565b925050602083015167ffffffffffffffff811115620001f257600080fd5b62000200858286016200016a565b9150509250929050565b60006200021662000229565b9050620002248282620002d5565b919050565b6000604051905090565b600067ffffffffffffffff8211156200025157620002506200033a565b5b6200025c8262000369565b9050602081019050919050565b60005b83811015620002895780820151818401526020810190506200026c565b8381111562000299576000848401525b50505050565b60006002820490506001821680620002b857607f821691505b60208210811415620002cf57620002ce6200030b565b5b50919050565b620002e08262000369565b810181811067ffffffffffffffff821117156200030257620003016200033a565b5b80604052505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6000601f19601f8301169050919050565b61271a806200038a6000396000f3fe608060405234801561001057600080fd5b50600436106100ea5760003560e01c80636352211e1161008c578063a22cb46511610066578063a22cb4651461025b578063b88d4fde14610277578063c87b56dd14610293578063e985e9c5146102c3576100ea565b80636352211e146101dd57806370a082311461020d57806395d89b411461023d576100ea565b8063095ea7b3116100c8578063095ea7b31461016d57806323b872dd146101895780633c168eab146101a557806342842e0e146101c1576100ea565b806301ffc9a7146100ef57806306fdde031461011f578063081812fc1461013d575b600080fd5b61010960048036038101906101049190611bd2565b6102f3565b6040516101169190611f29565b60405180910390f35b6101276103d5565b6040516101349190611f44565b60405180910390f35b61015760048036038101906101529190611c24565b610467565b6040516101649190611ec2565b60405180910390f35b61018760048036038101906101829190611b96565b6104ad565b005b6101a3600480360381019061019e9190611a90565b6105c5565b005b6101bf60048036038101906101ba9190611b96565b610625565b005b6101db60048036038101906101d69190611a90565b610633565b005b6101f760048036038101906101f29190611c24565b610653565b6040516102049190611ec2565b60405180910390f35b61022760048036038101906102229190611a2b565b6106da565b60405161023491906120c6565b60405180910390f35b610245610792565b6040516102529190611f44565b60405180910390f35b61027560048036038101906102709190611b5a565b610824565b005b610291600480360381019061028c9190611adf565b61083a565b005b6102ad60048036038101906102a89190611c24565b61089c565b6040516102ba9190611f44565b60405180910390f35b6102dd60048036038101906102d89190611a54565b610904565b6040516102ea9190611f29565b60405180910390f35b60007f80ac58cd000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff191614806103be57507f5b5e139f000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916145b806103ce57506103cd82610998565b5b9050919050565b6060600080546103e4906122ba565b80601f0160208091040260200160405190810160405280929190818152602001828054610410906122ba565b801561045d5780601f106104325761010080835404028352916020019161045d565b820191906000526020600020905b81548152906001019060200180831161044057829003601f168201915b5050505050905090565b600061047282610a02565b6004600083815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050919050565b60006104b882610653565b90508073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff161415610529576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161052090612086565b60405180910390fd5b8073ffffffffffffffffffffffffffffffffffffffff16610548610a4d565b73ffffffffffffffffffffffffffffffffffffffff161480610577575061057681610571610a4d565b610904565b5b6105b6576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105ad906120a6565b60405180910390fd5b6105c08383610a55565b505050565b6105d66105d0610a4d565b82610b0e565b610615576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161060c90611f66565b60405180910390fd5b610620838383610ba3565b505050565b61062f8282610e9d565b5050565b61064e8383836040518060200160405280600081525061083a565b505050565b60008061065f836110bb565b9050600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614156106d1576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106c890612066565b60405180910390fd5b80915050919050565b60008073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16141561074b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161074290612026565b60405180910390fd5b600360008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b6060600180546107a1906122ba565b80601f01602080910402602001604051908101604052809291908181526020018280546107cd906122ba565b801561081a5780601f106107ef5761010080835404028352916020019161081a565b820191906000526020600020905b8154815290600101906020018083116107fd57829003601f168201915b5050505050905090565b61083661082f610a4d565b83836110f8565b5050565b61084b610845610a4d565b83610b0e565b61088a576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161088190611f66565b60405180910390fd5b61089684848484611265565b50505050565b60606108a782610a02565b60006108b16112c1565b905060008151116108d157604051806020016040528060008152506108fc565b806108db846112d8565b6040516020016108ec929190611e9e565b6040516020818303038152906040525b915050919050565b6000600560008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16905092915050565b60007f01ffc9a7000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916149050919050565b610a0b816113fc565b610a4a576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a4190612066565b60405180910390fd5b50565b600033905090565b816004600083815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550808273ffffffffffffffffffffffffffffffffffffffff16610ac883610653565b73ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92560405160405180910390a45050565b600080610b1a83610653565b90508073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff161480610b5c5750610b5b8185610904565b5b80610b9a57508373ffffffffffffffffffffffffffffffffffffffff16610b8284610467565b73ffffffffffffffffffffffffffffffffffffffff16145b91505092915050565b8273ffffffffffffffffffffffffffffffffffffffff16610bc382610653565b73ffffffffffffffffffffffffffffffffffffffff1614610c19576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610c1090611fa6565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff161415610c89576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610c8090611fe6565b60405180910390fd5b610c96838383600161143d565b8273ffffffffffffffffffffffffffffffffffffffff16610cb682610653565b73ffffffffffffffffffffffffffffffffffffffff1614610d0c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d0390611fa6565b60405180910390fd5b6004600082815260200190815260200160002060006101000a81549073ffffffffffffffffffffffffffffffffffffffff02191690556001600360008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825403925050819055506001600360008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282540192505081905550816002600083815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550808273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60405160405180910390a4610e988383836001611563565b505050565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff161415610f0d576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610f0490612046565b60405180910390fd5b610f16816113fc565b15610f56576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610f4d90611fc6565b60405180910390fd5b610f6460008383600161143d565b610f6d816113fc565b15610fad576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610fa490611fc6565b60405180910390fd5b6001600360008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282540192505081905550816002600083815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550808273ffffffffffffffffffffffffffffffffffffffff16600073ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60405160405180910390a46110b7600083836001611563565b5050565b60006002600083815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050919050565b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff161415611167576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161115e90612006565b60405180910390fd5b80600560008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055508173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c31836040516112589190611f29565b60405180910390a3505050565b611270848484610ba3565b61127c84848484611569565b6112bb576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016112b290611f86565b60405180910390fd5b50505050565b606060405180602001604052806000815250905090565b6060600060016112e784611700565b01905060008167ffffffffffffffff81111561132c577f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6040519080825280601f01601f19166020018201604052801561135e5781602001600182028036833780820191505090505b509050600082602001820190505b6001156113f1578080600190039150507f3031323334353637383961626364656600000000000000000000000000000000600a86061a8153600a85816113db577f4e487b7100000000000000000000000000000000000000000000000000000000600052601260045260246000fd5b04945060008514156113ec576113f1565b61136c565b819350505050919050565b60008073ffffffffffffffffffffffffffffffffffffffff1661141e836110bb565b73ffffffffffffffffffffffffffffffffffffffff1614159050919050565b600181111561155d57600073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff16146114d15780600360008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282546114c991906121d0565b925050819055505b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff161461155c5780600360008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254611554919061217a565b925050819055505b5b50505050565b50505050565b600061158a8473ffffffffffffffffffffffffffffffffffffffff16611937565b156116f3578373ffffffffffffffffffffffffffffffffffffffff1663150b7a026115b3610a4d565b8786866040518563ffffffff1660e01b81526004016115d59493929190611edd565b602060405180830381600087803b1580156115ef57600080fd5b505af192505050801561162057506040513d601f19601f8201168201806040525081019061161d9190611bfb565b60015b6116a3573d8060008114611650576040519150601f19603f3d011682016040523d82523d6000602084013e611655565b606091505b5060008151141561169b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161169290611f86565b60405180910390fd5b805181602001fd5b63150b7a0260e01b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916817bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916149150506116f8565b600190505b949350505050565b600080600090507a184f03e93ff9f4daa797ed6e38ed64bf6a1f0100000000000000008310611784577a184f03e93ff9f4daa797ed6e38ed64bf6a1f010000000000000000838161177a577f4e487b7100000000000000000000000000000000000000000000000000000000600052601260045260246000fd5b0492506040810190505b6d04ee2d6d415b85acef810000000083106117e7576d04ee2d6d415b85acef810000000083816117dd577f4e487b7100000000000000000000000000000000000000000000000000000000600052601260045260246000fd5b0492506020810190505b662386f26fc10000831061183c57662386f26fc100008381611832577f4e487b7100000000000000000000000000000000000000000000000000000000600052601260045260246000fd5b0492506010810190505b6305f5e100831061188b576305f5e1008381611881577f4e487b7100000000000000000000000000000000000000000000000000000000600052601260045260246000fd5b0492506008810190505b61271083106118d65761271083816118cc577f4e487b7100000000000000000000000000000000000000000000000000000000600052601260045260246000fd5b0492506004810190505b6064831061191f5760648381611915577f4e487b7100000000000000000000000000000000000000000000000000000000600052601260045260246000fd5b0492506002810190505b600a831061192e576001810190505b80915050919050565b6000808273ffffffffffffffffffffffffffffffffffffffff163b119050919050565b600061196d61196884612106565b6120e1565b90508281526020810184848401111561198557600080fd5b611990848285612278565b509392505050565b6000813590506119a781612688565b92915050565b6000813590506119bc8161269f565b92915050565b6000813590506119d1816126b6565b92915050565b6000815190506119e6816126b6565b92915050565b600082601f8301126119fd57600080fd5b8135611a0d84826020860161195a565b91505092915050565b600081359050611a25816126cd565b92915050565b600060208284031215611a3d57600080fd5b6000611a4b84828501611998565b91505092915050565b60008060408385031215611a6757600080fd5b6000611a7585828601611998565b9250506020611a8685828601611998565b9150509250929050565b600080600060608486031215611aa557600080fd5b6000611ab386828701611998565b9350506020611ac486828701611998565b9250506040611ad586828701611a16565b9150509250925092565b60008060008060808587031215611af557600080fd5b6000611b0387828801611998565b9450506020611b1487828801611998565b9350506040611b2587828801611a16565b925050606085013567ffffffffffffffff811115611b4257600080fd5b611b4e878288016119ec565b91505092959194509250565b60008060408385031215611b6d57600080fd5b6000611b7b85828601611998565b9250506020611b8c858286016119ad565b9150509250929050565b60008060408385031215611ba957600080fd5b6000611bb785828601611998565b9250506020611bc885828601611a16565b9150509250929050565b600060208284031215611be457600080fd5b6000611bf2848285016119c2565b91505092915050565b600060208284031215611c0d57600080fd5b6000611c1b848285016119d7565b91505092915050565b600060208284031215611c3657600080fd5b6000611c4484828501611a16565b91505092915050565b611c5681612204565b82525050565b611c6581612216565b82525050565b6000611c7682612137565b611c80818561214d565b9350611c90818560208601612287565b611c99816123aa565b840191505092915050565b6000611caf82612142565b611cb9818561215e565b9350611cc9818560208601612287565b611cd2816123aa565b840191505092915050565b6000611ce882612142565b611cf2818561216f565b9350611d02818560208601612287565b80840191505092915050565b6000611d1b602d8361215e565b9150611d26826123bb565b604082019050919050565b6000611d3e60328361215e565b9150611d498261240a565b604082019050919050565b6000611d6160258361215e565b9150611d6c82612459565b604082019050919050565b6000611d84601c8361215e565b9150611d8f826124a8565b602082019050919050565b6000611da760248361215e565b9150611db2826124d1565b604082019050919050565b6000611dca60198361215e565b9150611dd582612520565b602082019050919050565b6000611ded60298361215e565b9150611df882612549565b604082019050919050565b6000611e1060208361215e565b9150611e1b82612598565b602082019050919050565b6000611e3360188361215e565b9150611e3e826125c1565b602082019050919050565b6000611e5660218361215e565b9150611e61826125ea565b604082019050919050565b6000611e79603d8361215e565b9150611e8482612639565b604082019050919050565b611e988161226e565b82525050565b6000611eaa8285611cdd565b9150611eb68284611cdd565b91508190509392505050565b6000602082019050611ed76000830184611c4d565b92915050565b6000608082019050611ef26000830187611c4d565b611eff6020830186611c4d565b611f0c6040830185611e8f565b8181036060830152611f1e8184611c6b565b905095945050505050565b6000602082019050611f3e6000830184611c5c565b92915050565b60006020820190508181036000830152611f5e8184611ca4565b905092915050565b60006020820190508181036000830152611f7f81611d0e565b9050919050565b60006020820190508181036000830152611f9f81611d31565b9050919050565b60006020820190508181036000830152611fbf81611d54565b9050919050565b60006020820190508181036000830152611fdf81611d77565b9050919050565b60006020820190508181036000830152611fff81611d9a565b9050919050565b6000602082019050818103600083015261201f81611dbd565b9050919050565b6000602082019050818103600083015261203f81611de0565b9050919050565b6000602082019050818103600083015261205f81611e03565b9050919050565b6000602082019050818103600083015261207f81611e26565b9050919050565b6000602082019050818103600083015261209f81611e49565b9050919050565b600060208201905081810360008301526120bf81611e6c565b9050919050565b60006020820190506120db6000830184611e8f565b92915050565b60006120eb6120fc565b90506120f782826122ec565b919050565b6000604051905090565b600067ffffffffffffffff8211156121215761212061237b565b5b61212a826123aa565b9050602081019050919050565b600081519050919050565b600081519050919050565b600082825260208201905092915050565b600082825260208201905092915050565b600081905092915050565b60006121858261226e565b91506121908361226e565b9250827fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff038211156121c5576121c461231d565b5b828201905092915050565b60006121db8261226e565b91506121e68361226e565b9250828210156121f9576121f861231d565b5b828203905092915050565b600061220f8261224e565b9050919050565b60008115159050919050565b60007fffffffff0000000000000000000000000000000000000000000000000000000082169050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b82818337600083830152505050565b60005b838110156122a557808201518184015260208101905061228a565b838111156122b4576000848401525b50505050565b600060028204905060018216806122d257607f821691505b602082108114156122e6576122e561234c565b5b50919050565b6122f5826123aa565b810181811067ffffffffffffffff821117156123145761231361237b565b5b80604052505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6000601f19601f8301169050919050565b7f4552433732313a2063616c6c6572206973206e6f7420746f6b656e206f776e6560008201527f72206f7220617070726f76656400000000000000000000000000000000000000602082015250565b7f4552433732313a207472616e7366657220746f206e6f6e20455243373231526560008201527f63656976657220696d706c656d656e7465720000000000000000000000000000602082015250565b7f4552433732313a207472616e736665722066726f6d20696e636f72726563742060008201527f6f776e6572000000000000000000000000000000000000000000000000000000602082015250565b7f4552433732313a20746f6b656e20616c7265616479206d696e74656400000000600082015250565b7f4552433732313a207472616e7366657220746f20746865207a65726f2061646460008201527f7265737300000000000000000000000000000000000000000000000000000000602082015250565b7f4552433732313a20617070726f766520746f2063616c6c657200000000000000600082015250565b7f4552433732313a2061646472657373207a65726f206973206e6f74206120766160008201527f6c6964206f776e65720000000000000000000000000000000000000000000000602082015250565b7f4552433732313a206d696e7420746f20746865207a65726f2061646472657373600082015250565b7f4552433732313a20696e76616c696420746f6b656e2049440000000000000000600082015250565b7f4552433732313a20617070726f76616c20746f2063757272656e74206f776e6560008201527f7200000000000000000000000000000000000000000000000000000000000000602082015250565b7f4552433732313a20617070726f76652063616c6c6572206973206e6f7420746f60008201527f6b656e206f776e6572206f7220617070726f76656420666f7220616c6c000000602082015250565b61269181612204565b811461269c57600080fd5b50565b6126a881612216565b81146126b357600080fd5b50565b6126bf81612222565b81146126ca57600080fd5b50565b6126d68161226e565b81146126e157600080fd5b5056fea2646970667358221220471c9b7b7857e2dd612257c8e7e0f6ab9f6e99964e596f33dcb4b622892b3d7e64736f6c63430008040033&quot;,</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ERC721ABI is the input ABI used to generate the binding from.</span>
<span class="term-fg32">+&#47;&#47; Deprecated: Use ERC721MetaData.ABI instead.</span>
<span class="term-fg32">+var ERC721ABI = ERC721MetaData.ABI</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ERC721Bin is the compiled bytecode used for deploying new contracts.</span>
<span class="term-fg32">+&#47;&#47; Deprecated: Use ERC721MetaData.Bin instead.</span>
<span class="term-fg32">+var ERC721Bin = ERC721MetaData.Bin</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; DeployERC721 deploys a new Ethereum contract, binding an instance of ERC721 to it.</span>
<span class="term-fg32">+func DeployERC721(auth *bind.TransactOpts, backend bind.ContractBackend, name string, symbol string) (common.Address, *types.Transaction, *ERC721, error) {</span>
<span class="term-fg32">+	parsed, err := ERC721MetaData.GetAbi()</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return common.Address{}, nil, nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if parsed == nil {</span>
<span class="term-fg32">+		return common.Address{}, nil, nil, errors.New(&quot;GetABI returned nil&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	address, tx, contract, err := bind.DeployContract(auth, *parsed, common.FromHex(ERC721Bin), backend, name, symbol)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return common.Address{}, nil, nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return address, tx, &amp;ERC721{ERC721Caller: ERC721Caller{contract: contract}, ERC721Transactor: ERC721Transactor{contract: contract}, ERC721Filterer: ERC721Filterer{contract: contract}}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ERC721 is an auto generated Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type ERC721 struct {</span>
<span class="term-fg32">+	ERC721Caller     &#47;&#47; Read-only binding to the contract</span>
<span class="term-fg32">+	ERC721Transactor &#47;&#47; Write-only binding to the contract</span>
<span class="term-fg32">+	ERC721Filterer   &#47;&#47; Log filterer for contract events</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ERC721Caller is an auto generated read-only Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type ERC721Caller struct {</span>
<span class="term-fg32">+	contract *bind.BoundContract &#47;&#47; Generic contract wrapper for the low level calls</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ERC721Transactor is an auto generated write-only Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type ERC721Transactor struct {</span>
<span class="term-fg32">+	contract *bind.BoundContract &#47;&#47; Generic contract wrapper for the low level calls</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ERC721Filterer is an auto generated log filtering Go binding around an Ethereum contract events.</span>
<span class="term-fg32">+type ERC721Filterer struct {</span>
<span class="term-fg32">+	contract *bind.BoundContract &#47;&#47; Generic contract wrapper for the low level calls</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ERC721Session is an auto generated Go binding around an Ethereum contract,</span>
<span class="term-fg32">+&#47;&#47; with pre-set call and transact options.</span>
<span class="term-fg32">+type ERC721Session struct {</span>
<span class="term-fg32">+	Contract     *ERC721           &#47;&#47; Generic contract binding to set the session for</span>
<span class="term-fg32">+	CallOpts     bind.CallOpts     &#47;&#47; Call options to use throughout this session</span>
<span class="term-fg32">+	TransactOpts bind.TransactOpts &#47;&#47; Transaction auth options to use throughout this session</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ERC721CallerSession is an auto generated read-only Go binding around an Ethereum contract,</span>
<span class="term-fg32">+&#47;&#47; with pre-set call options.</span>
<span class="term-fg32">+type ERC721CallerSession struct {</span>
<span class="term-fg32">+	Contract *ERC721Caller &#47;&#47; Generic contract caller binding to set the session for</span>
<span class="term-fg32">+	CallOpts bind.CallOpts &#47;&#47; Call options to use throughout this session</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ERC721TransactorSession is an auto generated write-only Go binding around an Ethereum contract,</span>
<span class="term-fg32">+&#47;&#47; with pre-set transact options.</span>
<span class="term-fg32">+type ERC721TransactorSession struct {</span>
<span class="term-fg32">+	Contract     *ERC721Transactor &#47;&#47; Generic contract transactor binding to set the session for</span>
<span class="term-fg32">+	TransactOpts bind.TransactOpts &#47;&#47; Transaction auth options to use throughout this session</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ERC721Raw is an auto generated low-level Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type ERC721Raw struct {</span>
<span class="term-fg32">+	Contract *ERC721 &#47;&#47; Generic contract binding to access the raw methods on</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ERC721CallerRaw is an auto generated low-level read-only Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type ERC721CallerRaw struct {</span>
<span class="term-fg32">+	Contract *ERC721Caller &#47;&#47; Generic read-only contract binding to access the raw methods on</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ERC721TransactorRaw is an auto generated low-level write-only Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type ERC721TransactorRaw struct {</span>
<span class="term-fg32">+	Contract *ERC721Transactor &#47;&#47; Generic write-only contract binding to access the raw methods on</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewERC721 creates a new instance of ERC721, bound to a specific deployed contract.</span>
<span class="term-fg32">+func NewERC721(address common.Address, backend bind.ContractBackend) (*ERC721, error) {</span>
<span class="term-fg32">+	contract, err := bindERC721(address, backend, backend, backend)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;ERC721{ERC721Caller: ERC721Caller{contract: contract}, ERC721Transactor: ERC721Transactor{contract: contract}, ERC721Filterer: ERC721Filterer{contract: contract}}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewERC721Caller creates a new read-only instance of ERC721, bound to a specific deployed contract.</span>
<span class="term-fg32">+func NewERC721Caller(address common.Address, caller bind.ContractCaller) (*ERC721Caller, error) {</span>
<span class="term-fg32">+	contract, err := bindERC721(address, caller, nil, nil)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;ERC721Caller{contract: contract}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewERC721Transactor creates a new write-only instance of ERC721, bound to a specific deployed contract.</span>
<span class="term-fg32">+func NewERC721Transactor(address common.Address, transactor bind.ContractTransactor) (*ERC721Transactor, error) {</span>
<span class="term-fg32">+	contract, err := bindERC721(address, nil, transactor, nil)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;ERC721Transactor{contract: contract}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewERC721Filterer creates a new log filterer instance of ERC721, bound to a specific deployed contract.</span>
<span class="term-fg32">+func NewERC721Filterer(address common.Address, filterer bind.ContractFilterer) (*ERC721Filterer, error) {</span>
<span class="term-fg32">+	contract, err := bindERC721(address, nil, nil, filterer)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;ERC721Filterer{contract: contract}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; bindERC721 binds a generic wrapper to an already deployed contract.</span>
<span class="term-fg32">+func bindERC721(address common.Address, caller bind.ContractCaller, transactor bind.ContractTransactor, filterer bind.ContractFilterer) (*bind.BoundContract, error) {</span>
<span class="term-fg32">+	parsed, err := ERC721MetaData.GetAbi()</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return bind.NewBoundContract(address, *parsed, caller, transactor, filterer), nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Call invokes the (constant) contract method with params as input values and</span>
<span class="term-fg32">+&#47;&#47; sets the output to result. The result type might be a single field for simple</span>
<span class="term-fg32">+&#47;&#47; returns, a slice of interfaces for anonymous returns and a struct for named</span>
<span class="term-fg32">+&#47;&#47; returns.</span>
<span class="term-fg32">+func (_ERC721 *ERC721Raw) Call(opts *bind.CallOpts, result *[]interface{}, method string, params ...interface{}) error {</span>
<span class="term-fg32">+	return _ERC721.Contract.ERC721Caller.contract.Call(opts, result, method, params...)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Transfer initiates a plain transaction to move funds to the contract, calling</span>
<span class="term-fg32">+&#47;&#47; its default method if one is available.</span>
<span class="term-fg32">+func (_ERC721 *ERC721Raw) Transfer(opts *bind.TransactOpts) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _ERC721.Contract.ERC721Transactor.contract.Transfer(opts)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Transact invokes the (paid) contract method with params as input values.</span>
<span class="term-fg32">+func (_ERC721 *ERC721Raw) Transact(opts *bind.TransactOpts, method string, params ...interface{}) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _ERC721.Contract.ERC721Transactor.contract.Transact(opts, method, params...)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Call invokes the (constant) contract method with params as input values and</span>
<span class="term-fg32">+&#47;&#47; sets the output to result. The result type might be a single field for simple</span>
<span class="term-fg32">+&#47;&#47; returns, a slice of interfaces for anonymous returns and a struct for named</span>
<span class="term-fg32">+&#47;&#47; returns.</span>
<span class="term-fg32">+func (_ERC721 *ERC721CallerRaw) Call(opts *bind.CallOpts, result *[]interface{}, method string, params ...interface{}) error {</span>
<span class="term-fg32">+	return _ERC721.Contract.contract.Call(opts, result, method, params...)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Transfer initiates a plain transaction to move funds to the contract, calling</span>
<span class="term-fg32">+&#47;&#47; its default method if one is available.</span>
<span class="term-fg32">+func (_ERC721 *ERC721TransactorRaw) Transfer(opts *bind.TransactOpts) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _ERC721.Contract.contract.Transfer(opts)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Transact invokes the (paid) contract method with params as input values.</span>
<span class="term-fg32">+func (_ERC721 *ERC721TransactorRaw) Transact(opts *bind.TransactOpts, method string, params ...interface{}) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _ERC721.Contract.contract.Transact(opts, method, params...)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; BalanceOf is a free data retrieval call binding the contract method 0x70a08231.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function balanceOf(address owner) view returns(uint256)</span>
<span class="term-fg32">+func (_ERC721 *ERC721Caller) BalanceOf(opts *bind.CallOpts, owner common.Address) (*big.Int, error) {</span>
<span class="term-fg32">+	var out []interface{}</span>
<span class="term-fg32">+	err := _ERC721.contract.Call(opts, &amp;out, &quot;balanceOf&quot;, owner)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return *new(*big.Int), err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	out0 := *abi.ConvertType(out[0], new(*big.Int)).(**big.Int)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return out0, err</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; BalanceOf is a free data retrieval call binding the contract method 0x70a08231.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function balanceOf(address owner) view returns(uint256)</span>
<span class="term-fg32">+func (_ERC721 *ERC721Session) BalanceOf(owner common.Address) (*big.Int, error) {</span>
<span class="term-fg32">+	return _ERC721.Contract.BalanceOf(&amp;_ERC721.CallOpts, owner)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; BalanceOf is a free data retrieval call binding the contract method 0x70a08231.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function balanceOf(address owner) view returns(uint256)</span>
<span class="term-fg32">+func (_ERC721 *ERC721CallerSession) BalanceOf(owner common.Address) (*big.Int, error) {</span>
<span class="term-fg32">+	return _ERC721.Contract.BalanceOf(&amp;_ERC721.CallOpts, owner)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; GetApproved is a free data retrieval call binding the contract method 0x081812fc.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function getApproved(uint256 tokenId) view returns(address)</span>
<span class="term-fg32">+func (_ERC721 *ERC721Caller) GetApproved(opts *bind.CallOpts, tokenId *big.Int) (common.Address, error) {</span>
<span class="term-fg32">+	var out []interface{}</span>
<span class="term-fg32">+	err := _ERC721.contract.Call(opts, &amp;out, &quot;getApproved&quot;, tokenId)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return *new(common.Address), err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	out0 := *abi.ConvertType(out[0], new(common.Address)).(*common.Address)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return out0, err</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; GetApproved is a free data retrieval call binding the contract method 0x081812fc.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function getApproved(uint256 tokenId) view returns(address)</span>
<span class="term-fg32">+func (_ERC721 *ERC721Session) GetApproved(tokenId *big.Int) (common.Address, error) {</span>
<span class="term-fg32">+	return _ERC721.Contract.GetApproved(&amp;_ERC721.CallOpts, tokenId)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; GetApproved is a free data retrieval call binding the contract method 0x081812fc.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function getApproved(uint256 tokenId) view returns(address)</span>
<span class="term-fg32">+func (_ERC721 *ERC721CallerSession) GetApproved(tokenId *big.Int) (common.Address, error) {</span>
<span class="term-fg32">+	return _ERC721.Contract.GetApproved(&amp;_ERC721.CallOpts, tokenId)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; IsApprovedForAll is a free data retrieval call binding the contract method 0xe985e9c5.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function isApprovedForAll(address owner, address operator) view returns(bool)</span>
<span class="term-fg32">+func (_ERC721 *ERC721Caller) IsApprovedForAll(opts *bind.CallOpts, owner common.Address, operator common.Address) (bool, error) {</span>
<span class="term-fg32">+	var out []interface{}</span>
<span class="term-fg32">+	err := _ERC721.contract.Call(opts, &amp;out, &quot;isApprovedForAll&quot;, owner, operator)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return *new(bool), err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	out0 := *abi.ConvertType(out[0], new(bool)).(*bool)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return out0, err</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; IsApprovedForAll is a free data retrieval call binding the contract method 0xe985e9c5.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function isApprovedForAll(address owner, address operator) view returns(bool)</span>
<span class="term-fg32">+func (_ERC721 *ERC721Session) IsApprovedForAll(owner common.Address, operator common.Address) (bool, error) {</span>
<span class="term-fg32">+	return _ERC721.Contract.IsApprovedForAll(&amp;_ERC721.CallOpts, owner, operator)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; IsApprovedForAll is a free data retrieval call binding the contract method 0xe985e9c5.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function isApprovedForAll(address owner, address operator) view returns(bool)</span>
<span class="term-fg32">+func (_ERC721 *ERC721CallerSession) IsApprovedForAll(owner common.Address, operator common.Address) (bool, error) {</span>
<span class="term-fg32">+	return _ERC721.Contract.IsApprovedForAll(&amp;_ERC721.CallOpts, owner, operator)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Name is a free data retrieval call binding the contract method 0x06fdde03.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function name() view returns(string)</span>
<span class="term-fg32">+func (_ERC721 *ERC721Caller) Name(opts *bind.CallOpts) (string, error) {</span>
<span class="term-fg32">+	var out []interface{}</span>
<span class="term-fg32">+	err := _ERC721.contract.Call(opts, &amp;out, &quot;name&quot;)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return *new(string), err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	out0 := *abi.ConvertType(out[0], new(string)).(*string)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return out0, err</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Name is a free data retrieval call binding the contract method 0x06fdde03.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function name() view returns(string)</span>
<span class="term-fg32">+func (_ERC721 *ERC721Session) Name() (string, error) {</span>
<span class="term-fg32">+	return _ERC721.Contract.Name(&amp;_ERC721.CallOpts)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Name is a free data retrieval call binding the contract method 0x06fdde03.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function name() view returns(string)</span>
<span class="term-fg32">+func (_ERC721 *ERC721CallerSession) Name() (string, error) {</span>
<span class="term-fg32">+	return _ERC721.Contract.Name(&amp;_ERC721.CallOpts)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; OwnerOf is a free data retrieval call binding the contract method 0x6352211e.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function ownerOf(uint256 tokenId) view returns(address)</span>
<span class="term-fg32">+func (_ERC721 *ERC721Caller) OwnerOf(opts *bind.CallOpts, tokenId *big.Int) (common.Address, error) {</span>
<span class="term-fg32">+	var out []interface{}</span>
<span class="term-fg32">+	err := _ERC721.contract.Call(opts, &amp;out, &quot;ownerOf&quot;, tokenId)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return *new(common.Address), err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	out0 := *abi.ConvertType(out[0], new(common.Address)).(*common.Address)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return out0, err</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; OwnerOf is a free data retrieval call binding the contract method 0x6352211e.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function ownerOf(uint256 tokenId) view returns(address)</span>
<span class="term-fg32">+func (_ERC721 *ERC721Session) OwnerOf(tokenId *big.Int) (common.Address, error) {</span>
<span class="term-fg32">+	return _ERC721.Contract.OwnerOf(&amp;_ERC721.CallOpts, tokenId)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; OwnerOf is a free data retrieval call binding the contract method 0x6352211e.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function ownerOf(uint256 tokenId) view returns(address)</span>
<span class="term-fg32">+func (_ERC721 *ERC721CallerSession) OwnerOf(tokenId *big.Int) (common.Address, error) {</span>
<span class="term-fg32">+	return _ERC721.Contract.OwnerOf(&amp;_ERC721.CallOpts, tokenId)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SupportsInterface is a free data retrieval call binding the contract method 0x01ffc9a7.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function supportsInterface(bytes4 interfaceId) view returns(bool)</span>
<span class="term-fg32">+func (_ERC721 *ERC721Caller) SupportsInterface(opts *bind.CallOpts, interfaceId [4]byte) (bool, error) {</span>
<span class="term-fg32">+	var out []interface{}</span>
<span class="term-fg32">+	err := _ERC721.contract.Call(opts, &amp;out, &quot;supportsInterface&quot;, interfaceId)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return *new(bool), err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	out0 := *abi.ConvertType(out[0], new(bool)).(*bool)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return out0, err</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SupportsInterface is a free data retrieval call binding the contract method 0x01ffc9a7.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function supportsInterface(bytes4 interfaceId) view returns(bool)</span>
<span class="term-fg32">+func (_ERC721 *ERC721Session) SupportsInterface(interfaceId [4]byte) (bool, error) {</span>
<span class="term-fg32">+	return _ERC721.Contract.SupportsInterface(&amp;_ERC721.CallOpts, interfaceId)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SupportsInterface is a free data retrieval call binding the contract method 0x01ffc9a7.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function supportsInterface(bytes4 interfaceId) view returns(bool)</span>
<span class="term-fg32">+func (_ERC721 *ERC721CallerSession) SupportsInterface(interfaceId [4]byte) (bool, error) {</span>
<span class="term-fg32">+	return _ERC721.Contract.SupportsInterface(&amp;_ERC721.CallOpts, interfaceId)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Symbol is a free data retrieval call binding the contract method 0x95d89b41.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function symbol() view returns(string)</span>
<span class="term-fg32">+func (_ERC721 *ERC721Caller) Symbol(opts *bind.CallOpts) (string, error) {</span>
<span class="term-fg32">+	var out []interface{}</span>
<span class="term-fg32">+	err := _ERC721.contract.Call(opts, &amp;out, &quot;symbol&quot;)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return *new(string), err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	out0 := *abi.ConvertType(out[0], new(string)).(*string)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return out0, err</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Symbol is a free data retrieval call binding the contract method 0x95d89b41.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function symbol() view returns(string)</span>
<span class="term-fg32">+func (_ERC721 *ERC721Session) Symbol() (string, error) {</span>
<span class="term-fg32">+	return _ERC721.Contract.Symbol(&amp;_ERC721.CallOpts)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Symbol is a free data retrieval call binding the contract method 0x95d89b41.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function symbol() view returns(string)</span>
<span class="term-fg32">+func (_ERC721 *ERC721CallerSession) Symbol() (string, error) {</span>
<span class="term-fg32">+	return _ERC721.Contract.Symbol(&amp;_ERC721.CallOpts)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; TokenURI is a free data retrieval call binding the contract method 0xc87b56dd.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function tokenURI(uint256 tokenId) view returns(string)</span>
<span class="term-fg32">+func (_ERC721 *ERC721Caller) TokenURI(opts *bind.CallOpts, tokenId *big.Int) (string, error) {</span>
<span class="term-fg32">+	var out []interface{}</span>
<span class="term-fg32">+	err := _ERC721.contract.Call(opts, &amp;out, &quot;tokenURI&quot;, tokenId)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return *new(string), err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	out0 := *abi.ConvertType(out[0], new(string)).(*string)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return out0, err</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; TokenURI is a free data retrieval call binding the contract method 0xc87b56dd.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function tokenURI(uint256 tokenId) view returns(string)</span>
<span class="term-fg32">+func (_ERC721 *ERC721Session) TokenURI(tokenId *big.Int) (string, error) {</span>
<span class="term-fg32">+	return _ERC721.Contract.TokenURI(&amp;_ERC721.CallOpts, tokenId)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; TokenURI is a free data retrieval call binding the contract method 0xc87b56dd.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function tokenURI(uint256 tokenId) view returns(string)</span>
<span class="term-fg32">+func (_ERC721 *ERC721CallerSession) TokenURI(tokenId *big.Int) (string, error) {</span>
<span class="term-fg32">+	return _ERC721.Contract.TokenURI(&amp;_ERC721.CallOpts, tokenId)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Approve is a paid mutator transaction binding the contract method 0x095ea7b3.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function approve(address to, uint256 tokenId) returns()</span>
<span class="term-fg32">+func (_ERC721 *ERC721Transactor) Approve(opts *bind.TransactOpts, to common.Address, tokenId *big.Int) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _ERC721.contract.Transact(opts, &quot;approve&quot;, to, tokenId)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Approve is a paid mutator transaction binding the contract method 0x095ea7b3.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function approve(address to, uint256 tokenId) returns()</span>
<span class="term-fg32">+func (_ERC721 *ERC721Session) Approve(to common.Address, tokenId *big.Int) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _ERC721.Contract.Approve(&amp;_ERC721.TransactOpts, to, tokenId)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Approve is a paid mutator transaction binding the contract method 0x095ea7b3.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function approve(address to, uint256 tokenId) returns()</span>
<span class="term-fg32">+func (_ERC721 *ERC721TransactorSession) Approve(to common.Address, tokenId *big.Int) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _ERC721.Contract.Approve(&amp;_ERC721.TransactOpts, to, tokenId)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; MintNFT is a paid mutator transaction binding the contract method 0x3c168eab.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function mintNFT(address collector, uint256 tokenId) returns()</span>
<span class="term-fg32">+func (_ERC721 *ERC721Transactor) MintNFT(opts *bind.TransactOpts, collector common.Address, tokenId *big.Int) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _ERC721.contract.Transact(opts, &quot;mintNFT&quot;, collector, tokenId)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; MintNFT is a paid mutator transaction binding the contract method 0x3c168eab.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function mintNFT(address collector, uint256 tokenId) returns()</span>
<span class="term-fg32">+func (_ERC721 *ERC721Session) MintNFT(collector common.Address, tokenId *big.Int) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _ERC721.Contract.MintNFT(&amp;_ERC721.TransactOpts, collector, tokenId)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; MintNFT is a paid mutator transaction binding the contract method 0x3c168eab.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function mintNFT(address collector, uint256 tokenId) returns()</span>
<span class="term-fg32">+func (_ERC721 *ERC721TransactorSession) MintNFT(collector common.Address, tokenId *big.Int) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _ERC721.Contract.MintNFT(&amp;_ERC721.TransactOpts, collector, tokenId)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SafeTransferFrom is a paid mutator transaction binding the contract method 0x42842e0e.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function safeTransferFrom(address from, address to, uint256 tokenId) returns()</span>
<span class="term-fg32">+func (_ERC721 *ERC721Transactor) SafeTransferFrom(opts *bind.TransactOpts, from common.Address, to common.Address, tokenId *big.Int) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _ERC721.contract.Transact(opts, &quot;safeTransferFrom&quot;, from, to, tokenId)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SafeTransferFrom is a paid mutator transaction binding the contract method 0x42842e0e.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function safeTransferFrom(address from, address to, uint256 tokenId) returns()</span>
<span class="term-fg32">+func (_ERC721 *ERC721Session) SafeTransferFrom(from common.Address, to common.Address, tokenId *big.Int) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _ERC721.Contract.SafeTransferFrom(&amp;_ERC721.TransactOpts, from, to, tokenId)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SafeTransferFrom is a paid mutator transaction binding the contract method 0x42842e0e.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function safeTransferFrom(address from, address to, uint256 tokenId) returns()</span>
<span class="term-fg32">+func (_ERC721 *ERC721TransactorSession) SafeTransferFrom(from common.Address, to common.Address, tokenId *big.Int) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _ERC721.Contract.SafeTransferFrom(&amp;_ERC721.TransactOpts, from, to, tokenId)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SafeTransferFrom0 is a paid mutator transaction binding the contract method 0xb88d4fde.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function safeTransferFrom(address from, address to, uint256 tokenId, bytes data) returns()</span>
<span class="term-fg32">+func (_ERC721 *ERC721Transactor) SafeTransferFrom0(opts *bind.TransactOpts, from common.Address, to common.Address, tokenId *big.Int, data []byte) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _ERC721.contract.Transact(opts, &quot;safeTransferFrom0&quot;, from, to, tokenId, data)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SafeTransferFrom0 is a paid mutator transaction binding the contract method 0xb88d4fde.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function safeTransferFrom(address from, address to, uint256 tokenId, bytes data) returns()</span>
<span class="term-fg32">+func (_ERC721 *ERC721Session) SafeTransferFrom0(from common.Address, to common.Address, tokenId *big.Int, data []byte) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _ERC721.Contract.SafeTransferFrom0(&amp;_ERC721.TransactOpts, from, to, tokenId, data)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SafeTransferFrom0 is a paid mutator transaction binding the contract method 0xb88d4fde.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function safeTransferFrom(address from, address to, uint256 tokenId, bytes data) returns()</span>
<span class="term-fg32">+func (_ERC721 *ERC721TransactorSession) SafeTransferFrom0(from common.Address, to common.Address, tokenId *big.Int, data []byte) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _ERC721.Contract.SafeTransferFrom0(&amp;_ERC721.TransactOpts, from, to, tokenId, data)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SetApprovalForAll is a paid mutator transaction binding the contract method 0xa22cb465.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function setApprovalForAll(address operator, bool approved) returns()</span>
<span class="term-fg32">+func (_ERC721 *ERC721Transactor) SetApprovalForAll(opts *bind.TransactOpts, operator common.Address, approved bool) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _ERC721.contract.Transact(opts, &quot;setApprovalForAll&quot;, operator, approved)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SetApprovalForAll is a paid mutator transaction binding the contract method 0xa22cb465.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function setApprovalForAll(address operator, bool approved) returns()</span>
<span class="term-fg32">+func (_ERC721 *ERC721Session) SetApprovalForAll(operator common.Address, approved bool) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _ERC721.Contract.SetApprovalForAll(&amp;_ERC721.TransactOpts, operator, approved)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SetApprovalForAll is a paid mutator transaction binding the contract method 0xa22cb465.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function setApprovalForAll(address operator, bool approved) returns()</span>
<span class="term-fg32">+func (_ERC721 *ERC721TransactorSession) SetApprovalForAll(operator common.Address, approved bool) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _ERC721.Contract.SetApprovalForAll(&amp;_ERC721.TransactOpts, operator, approved)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; TransferFrom is a paid mutator transaction binding the contract method 0x23b872dd.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function transferFrom(address from, address to, uint256 tokenId) returns()</span>
<span class="term-fg32">+func (_ERC721 *ERC721Transactor) TransferFrom(opts *bind.TransactOpts, from common.Address, to common.Address, tokenId *big.Int) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _ERC721.contract.Transact(opts, &quot;transferFrom&quot;, from, to, tokenId)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; TransferFrom is a paid mutator transaction binding the contract method 0x23b872dd.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function transferFrom(address from, address to, uint256 tokenId) returns()</span>
<span class="term-fg32">+func (_ERC721 *ERC721Session) TransferFrom(from common.Address, to common.Address, tokenId *big.Int) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _ERC721.Contract.TransferFrom(&amp;_ERC721.TransactOpts, from, to, tokenId)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; TransferFrom is a paid mutator transaction binding the contract method 0x23b872dd.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function transferFrom(address from, address to, uint256 tokenId) returns()</span>
<span class="term-fg32">+func (_ERC721 *ERC721TransactorSession) TransferFrom(from common.Address, to common.Address, tokenId *big.Int) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _ERC721.Contract.TransferFrom(&amp;_ERC721.TransactOpts, from, to, tokenId)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ERC721ApprovalIterator is returned from FilterApproval and is used to iterate over the raw logs and unpacked data for Approval events raised by the ERC721 contract.</span>
<span class="term-fg32">+type ERC721ApprovalIterator struct {</span>
<span class="term-fg32">+	Event *ERC721Approval &#47;&#47; Event containing the contract specifics and raw log</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	contract *bind.BoundContract &#47;&#47; Generic contract to use for unpacking event data</span>
<span class="term-fg32">+	event    string              &#47;&#47; Event name to use for unpacking event data</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	logs chan types.Log        &#47;&#47; Log channel receiving the found contract events</span>
<span class="term-fg32">+	sub  ethereum.Subscription &#47;&#47; Subscription for errors, completion and termination</span>
<span class="term-fg32">+	done bool                  &#47;&#47; Whether the subscription completed delivering logs</span>
<span class="term-fg32">+	fail error                 &#47;&#47; Occurred error to stop iteration</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Next advances the iterator to the subsequent event, returning whether there</span>
<span class="term-fg32">+&#47;&#47; are any more events found. In case of a retrieval or parsing error, false is</span>
<span class="term-fg32">+&#47;&#47; returned and Error() can be queried for the exact failure.</span>
<span class="term-fg32">+func (it *ERC721ApprovalIterator) Next() bool {</span>
<span class="term-fg32">+	&#47;&#47; If the iterator failed, stop iterating</span>
<span class="term-fg32">+	if it.fail != nil {</span>
<span class="term-fg32">+		return false</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; If the iterator completed, deliver directly whatever&#39;s available</span>
<span class="term-fg32">+	if it.done {</span>
<span class="term-fg32">+		select {</span>
<span class="term-fg32">+		case log := &lt;-it.logs:</span>
<span class="term-fg32">+			it.Event = new(ERC721Approval)</span>
<span class="term-fg32">+			if err := it.contract.UnpackLog(it.Event, it.event, log); err != nil {</span>
<span class="term-fg32">+				it.fail = err</span>
<span class="term-fg32">+				return false</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			it.Event.Raw = log</span>
<span class="term-fg32">+			return true</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		default:</span>
<span class="term-fg32">+			return false</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Iterator still in progress, wait for either a data or an error event</span>
<span class="term-fg32">+	select {</span>
<span class="term-fg32">+	case log := &lt;-it.logs:</span>
<span class="term-fg32">+		it.Event = new(ERC721Approval)</span>
<span class="term-fg32">+		if err := it.contract.UnpackLog(it.Event, it.event, log); err != nil {</span>
<span class="term-fg32">+			it.fail = err</span>
<span class="term-fg32">+			return false</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		it.Event.Raw = log</span>
<span class="term-fg32">+		return true</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	case err := &lt;-it.sub.Err():</span>
<span class="term-fg32">+		it.done = true</span>
<span class="term-fg32">+		it.fail = err</span>
<span class="term-fg32">+		return it.Next()</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Error returns any retrieval or parsing error occurred during filtering.</span>
<span class="term-fg32">+func (it *ERC721ApprovalIterator) Error() error {</span>
<span class="term-fg32">+	return it.fail</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Close terminates the iteration process, releasing any pending underlying</span>
<span class="term-fg32">+&#47;&#47; resources.</span>
<span class="term-fg32">+func (it *ERC721ApprovalIterator) Close() error {</span>
<span class="term-fg32">+	it.sub.Unsubscribe()</span>
<span class="term-fg32">+	return nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ERC721Approval represents a Approval event raised by the ERC721 contract.</span>
<span class="term-fg32">+type ERC721Approval struct {</span>
<span class="term-fg32">+	Owner    common.Address</span>
<span class="term-fg32">+	Approved common.Address</span>
<span class="term-fg32">+	TokenId  *big.Int</span>
<span class="term-fg32">+	Raw      types.Log &#47;&#47; Blockchain specific contextual infos</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; FilterApproval is a free log retrieval operation binding the contract event 0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: event Approval(address indexed owner, address indexed approved, uint256 indexed tokenId)</span>
<span class="term-fg32">+func (_ERC721 *ERC721Filterer) FilterApproval(opts *bind.FilterOpts, owner []common.Address, approved []common.Address, tokenId []*big.Int) (*ERC721ApprovalIterator, error) {</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	var ownerRule []interface{}</span>
<span class="term-fg32">+	for _, ownerItem := range owner {</span>
<span class="term-fg32">+		ownerRule = append(ownerRule, ownerItem)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	var approvedRule []interface{}</span>
<span class="term-fg32">+	for _, approvedItem := range approved {</span>
<span class="term-fg32">+		approvedRule = append(approvedRule, approvedItem)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	var tokenIdRule []interface{}</span>
<span class="term-fg32">+	for _, tokenIdItem := range tokenId {</span>
<span class="term-fg32">+		tokenIdRule = append(tokenIdRule, tokenIdItem)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	logs, sub, err := _ERC721.contract.FilterLogs(opts, &quot;Approval&quot;, ownerRule, approvedRule, tokenIdRule)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;ERC721ApprovalIterator{contract: _ERC721.contract, event: &quot;Approval&quot;, logs: logs, sub: sub}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; WatchApproval is a free log subscription operation binding the contract event 0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: event Approval(address indexed owner, address indexed approved, uint256 indexed tokenId)</span>
<span class="term-fg32">+func (_ERC721 *ERC721Filterer) WatchApproval(opts *bind.WatchOpts, sink chan&lt;- *ERC721Approval, owner []common.Address, approved []common.Address, tokenId []*big.Int) (event.Subscription, error) {</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	var ownerRule []interface{}</span>
<span class="term-fg32">+	for _, ownerItem := range owner {</span>
<span class="term-fg32">+		ownerRule = append(ownerRule, ownerItem)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	var approvedRule []interface{}</span>
<span class="term-fg32">+	for _, approvedItem := range approved {</span>
<span class="term-fg32">+		approvedRule = append(approvedRule, approvedItem)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	var tokenIdRule []interface{}</span>
<span class="term-fg32">+	for _, tokenIdItem := range tokenId {</span>
<span class="term-fg32">+		tokenIdRule = append(tokenIdRule, tokenIdItem)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	logs, sub, err := _ERC721.contract.WatchLogs(opts, &quot;Approval&quot;, ownerRule, approvedRule, tokenIdRule)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return event.NewSubscription(func(quit &lt;-chan struct{}) error {</span>
<span class="term-fg32">+		defer sub.Unsubscribe()</span>
<span class="term-fg32">+		for {</span>
<span class="term-fg32">+			select {</span>
<span class="term-fg32">+			case log := &lt;-logs:</span>
<span class="term-fg32">+				&#47;&#47; New log arrived, parse the event and forward to the user</span>
<span class="term-fg32">+				event := new(ERC721Approval)</span>
<span class="term-fg32">+				if err := _ERC721.contract.UnpackLog(event, &quot;Approval&quot;, log); err != nil {</span>
<span class="term-fg32">+					return err</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+				event.Raw = log</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+				select {</span>
<span class="term-fg32">+				case sink &lt;- event:</span>
<span class="term-fg32">+				case err := &lt;-sub.Err():</span>
<span class="term-fg32">+					return err</span>
<span class="term-fg32">+				case &lt;-quit:</span>
<span class="term-fg32">+					return nil</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+			case err := &lt;-sub.Err():</span>
<span class="term-fg32">+				return err</span>
<span class="term-fg32">+			case &lt;-quit:</span>
<span class="term-fg32">+				return nil</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}), nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ParseApproval is a log parse operation binding the contract event 0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: event Approval(address indexed owner, address indexed approved, uint256 indexed tokenId)</span>
<span class="term-fg32">+func (_ERC721 *ERC721Filterer) ParseApproval(log types.Log) (*ERC721Approval, error) {</span>
<span class="term-fg32">+	event := new(ERC721Approval)</span>
<span class="term-fg32">+	if err := _ERC721.contract.UnpackLog(event, &quot;Approval&quot;, log); err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	event.Raw = log</span>
<span class="term-fg32">+	return event, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ERC721ApprovalForAllIterator is returned from FilterApprovalForAll and is used to iterate over the raw logs and unpacked data for ApprovalForAll events raised by the ERC721 contract.</span>
<span class="term-fg32">+type ERC721ApprovalForAllIterator struct {</span>
<span class="term-fg32">+	Event *ERC721ApprovalForAll &#47;&#47; Event containing the contract specifics and raw log</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	contract *bind.BoundContract &#47;&#47; Generic contract to use for unpacking event data</span>
<span class="term-fg32">+	event    string              &#47;&#47; Event name to use for unpacking event data</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	logs chan types.Log        &#47;&#47; Log channel receiving the found contract events</span>
<span class="term-fg32">+	sub  ethereum.Subscription &#47;&#47; Subscription for errors, completion and termination</span>
<span class="term-fg32">+	done bool                  &#47;&#47; Whether the subscription completed delivering logs</span>
<span class="term-fg32">+	fail error                 &#47;&#47; Occurred error to stop iteration</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Next advances the iterator to the subsequent event, returning whether there</span>
<span class="term-fg32">+&#47;&#47; are any more events found. In case of a retrieval or parsing error, false is</span>
<span class="term-fg32">+&#47;&#47; returned and Error() can be queried for the exact failure.</span>
<span class="term-fg32">+func (it *ERC721ApprovalForAllIterator) Next() bool {</span>
<span class="term-fg32">+	&#47;&#47; If the iterator failed, stop iterating</span>
<span class="term-fg32">+	if it.fail != nil {</span>
<span class="term-fg32">+		return false</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; If the iterator completed, deliver directly whatever&#39;s available</span>
<span class="term-fg32">+	if it.done {</span>
<span class="term-fg32">+		select {</span>
<span class="term-fg32">+		case log := &lt;-it.logs:</span>
<span class="term-fg32">+			it.Event = new(ERC721ApprovalForAll)</span>
<span class="term-fg32">+			if err := it.contract.UnpackLog(it.Event, it.event, log); err != nil {</span>
<span class="term-fg32">+				it.fail = err</span>
<span class="term-fg32">+				return false</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			it.Event.Raw = log</span>
<span class="term-fg32">+			return true</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		default:</span>
<span class="term-fg32">+			return false</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Iterator still in progress, wait for either a data or an error event</span>
<span class="term-fg32">+	select {</span>
<span class="term-fg32">+	case log := &lt;-it.logs:</span>
<span class="term-fg32">+		it.Event = new(ERC721ApprovalForAll)</span>
<span class="term-fg32">+		if err := it.contract.UnpackLog(it.Event, it.event, log); err != nil {</span>
<span class="term-fg32">+			it.fail = err</span>
<span class="term-fg32">+			return false</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		it.Event.Raw = log</span>
<span class="term-fg32">+		return true</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	case err := &lt;-it.sub.Err():</span>
<span class="term-fg32">+		it.done = true</span>
<span class="term-fg32">+		it.fail = err</span>
<span class="term-fg32">+		return it.Next()</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Error returns any retrieval or parsing error occurred during filtering.</span>
<span class="term-fg32">+func (it *ERC721ApprovalForAllIterator) Error() error {</span>
<span class="term-fg32">+	return it.fail</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Close terminates the iteration process, releasing any pending underlying</span>
<span class="term-fg32">+&#47;&#47; resources.</span>
<span class="term-fg32">+func (it *ERC721ApprovalForAllIterator) Close() error {</span>
<span class="term-fg32">+	it.sub.Unsubscribe()</span>
<span class="term-fg32">+	return nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ERC721ApprovalForAll represents a ApprovalForAll event raised by the ERC721 contract.</span>
<span class="term-fg32">+type ERC721ApprovalForAll struct {</span>
<span class="term-fg32">+	Owner    common.Address</span>
<span class="term-fg32">+	Operator common.Address</span>
<span class="term-fg32">+	Approved bool</span>
<span class="term-fg32">+	Raw      types.Log &#47;&#47; Blockchain specific contextual infos</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; FilterApprovalForAll is a free log retrieval operation binding the contract event 0x17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c31.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: event ApprovalForAll(address indexed owner, address indexed operator, bool approved)</span>
<span class="term-fg32">+func (_ERC721 *ERC721Filterer) FilterApprovalForAll(opts *bind.FilterOpts, owner []common.Address, operator []common.Address) (*ERC721ApprovalForAllIterator, error) {</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	var ownerRule []interface{}</span>
<span class="term-fg32">+	for _, ownerItem := range owner {</span>
<span class="term-fg32">+		ownerRule = append(ownerRule, ownerItem)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	var operatorRule []interface{}</span>
<span class="term-fg32">+	for _, operatorItem := range operator {</span>
<span class="term-fg32">+		operatorRule = append(operatorRule, operatorItem)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	logs, sub, err := _ERC721.contract.FilterLogs(opts, &quot;ApprovalForAll&quot;, ownerRule, operatorRule)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;ERC721ApprovalForAllIterator{contract: _ERC721.contract, event: &quot;ApprovalForAll&quot;, logs: logs, sub: sub}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; WatchApprovalForAll is a free log subscription operation binding the contract event 0x17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c31.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: event ApprovalForAll(address indexed owner, address indexed operator, bool approved)</span>
<span class="term-fg32">+func (_ERC721 *ERC721Filterer) WatchApprovalForAll(opts *bind.WatchOpts, sink chan&lt;- *ERC721ApprovalForAll, owner []common.Address, operator []common.Address) (event.Subscription, error) {</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	var ownerRule []interface{}</span>
<span class="term-fg32">+	for _, ownerItem := range owner {</span>
<span class="term-fg32">+		ownerRule = append(ownerRule, ownerItem)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	var operatorRule []interface{}</span>
<span class="term-fg32">+	for _, operatorItem := range operator {</span>
<span class="term-fg32">+		operatorRule = append(operatorRule, operatorItem)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	logs, sub, err := _ERC721.contract.WatchLogs(opts, &quot;ApprovalForAll&quot;, ownerRule, operatorRule)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return event.NewSubscription(func(quit &lt;-chan struct{}) error {</span>
<span class="term-fg32">+		defer sub.Unsubscribe()</span>
<span class="term-fg32">+		for {</span>
<span class="term-fg32">+			select {</span>
<span class="term-fg32">+			case log := &lt;-logs:</span>
<span class="term-fg32">+				&#47;&#47; New log arrived, parse the event and forward to the user</span>
<span class="term-fg32">+				event := new(ERC721ApprovalForAll)</span>
<span class="term-fg32">+				if err := _ERC721.contract.UnpackLog(event, &quot;ApprovalForAll&quot;, log); err != nil {</span>
<span class="term-fg32">+					return err</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+				event.Raw = log</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+				select {</span>
<span class="term-fg32">+				case sink &lt;- event:</span>
<span class="term-fg32">+				case err := &lt;-sub.Err():</span>
<span class="term-fg32">+					return err</span>
<span class="term-fg32">+				case &lt;-quit:</span>
<span class="term-fg32">+					return nil</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+			case err := &lt;-sub.Err():</span>
<span class="term-fg32">+				return err</span>
<span class="term-fg32">+			case &lt;-quit:</span>
<span class="term-fg32">+				return nil</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}), nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ParseApprovalForAll is a log parse operation binding the contract event 0x17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c31.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: event ApprovalForAll(address indexed owner, address indexed operator, bool approved)</span>
<span class="term-fg32">+func (_ERC721 *ERC721Filterer) ParseApprovalForAll(log types.Log) (*ERC721ApprovalForAll, error) {</span>
<span class="term-fg32">+	event := new(ERC721ApprovalForAll)</span>
<span class="term-fg32">+	if err := _ERC721.contract.UnpackLog(event, &quot;ApprovalForAll&quot;, log); err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	event.Raw = log</span>
<span class="term-fg32">+	return event, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ERC721TransferIterator is returned from FilterTransfer and is used to iterate over the raw logs and unpacked data for Transfer events raised by the ERC721 contract.</span>
<span class="term-fg32">+type ERC721TransferIterator struct {</span>
<span class="term-fg32">+	Event *ERC721Transfer &#47;&#47; Event containing the contract specifics and raw log</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	contract *bind.BoundContract &#47;&#47; Generic contract to use for unpacking event data</span>
<span class="term-fg32">+	event    string              &#47;&#47; Event name to use for unpacking event data</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	logs chan types.Log        &#47;&#47; Log channel receiving the found contract events</span>
<span class="term-fg32">+	sub  ethereum.Subscription &#47;&#47; Subscription for errors, completion and termination</span>
<span class="term-fg32">+	done bool                  &#47;&#47; Whether the subscription completed delivering logs</span>
<span class="term-fg32">+	fail error                 &#47;&#47; Occurred error to stop iteration</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Next advances the iterator to the subsequent event, returning whether there</span>
<span class="term-fg32">+&#47;&#47; are any more events found. In case of a retrieval or parsing error, false is</span>
<span class="term-fg32">+&#47;&#47; returned and Error() can be queried for the exact failure.</span>
<span class="term-fg32">+func (it *ERC721TransferIterator) Next() bool {</span>
<span class="term-fg32">+	&#47;&#47; If the iterator failed, stop iterating</span>
<span class="term-fg32">+	if it.fail != nil {</span>
<span class="term-fg32">+		return false</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; If the iterator completed, deliver directly whatever&#39;s available</span>
<span class="term-fg32">+	if it.done {</span>
<span class="term-fg32">+		select {</span>
<span class="term-fg32">+		case log := &lt;-it.logs:</span>
<span class="term-fg32">+			it.Event = new(ERC721Transfer)</span>
<span class="term-fg32">+			if err := it.contract.UnpackLog(it.Event, it.event, log); err != nil {</span>
<span class="term-fg32">+				it.fail = err</span>
<span class="term-fg32">+				return false</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			it.Event.Raw = log</span>
<span class="term-fg32">+			return true</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		default:</span>
<span class="term-fg32">+			return false</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Iterator still in progress, wait for either a data or an error event</span>
<span class="term-fg32">+	select {</span>
<span class="term-fg32">+	case log := &lt;-it.logs:</span>
<span class="term-fg32">+		it.Event = new(ERC721Transfer)</span>
<span class="term-fg32">+		if err := it.contract.UnpackLog(it.Event, it.event, log); err != nil {</span>
<span class="term-fg32">+			it.fail = err</span>
<span class="term-fg32">+			return false</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		it.Event.Raw = log</span>
<span class="term-fg32">+		return true</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	case err := &lt;-it.sub.Err():</span>
<span class="term-fg32">+		it.done = true</span>
<span class="term-fg32">+		it.fail = err</span>
<span class="term-fg32">+		return it.Next()</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Error returns any retrieval or parsing error occurred during filtering.</span>
<span class="term-fg32">+func (it *ERC721TransferIterator) Error() error {</span>
<span class="term-fg32">+	return it.fail</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Close terminates the iteration process, releasing any pending underlying</span>
<span class="term-fg32">+&#47;&#47; resources.</span>
<span class="term-fg32">+func (it *ERC721TransferIterator) Close() error {</span>
<span class="term-fg32">+	it.sub.Unsubscribe()</span>
<span class="term-fg32">+	return nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ERC721Transfer represents a Transfer event raised by the ERC721 contract.</span>
<span class="term-fg32">+type ERC721Transfer struct {</span>
<span class="term-fg32">+	From    common.Address</span>
<span class="term-fg32">+	To      common.Address</span>
<span class="term-fg32">+	TokenId *big.Int</span>
<span class="term-fg32">+	Raw     types.Log &#47;&#47; Blockchain specific contextual infos</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; FilterTransfer is a free log retrieval operation binding the contract event 0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: event Transfer(address indexed from, address indexed to, uint256 indexed tokenId)</span>
<span class="term-fg32">+func (_ERC721 *ERC721Filterer) FilterTransfer(opts *bind.FilterOpts, from []common.Address, to []common.Address, tokenId []*big.Int) (*ERC721TransferIterator, error) {</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	var fromRule []interface{}</span>
<span class="term-fg32">+	for _, fromItem := range from {</span>
<span class="term-fg32">+		fromRule = append(fromRule, fromItem)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	var toRule []interface{}</span>
<span class="term-fg32">+	for _, toItem := range to {</span>
<span class="term-fg32">+		toRule = append(toRule, toItem)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	var tokenIdRule []interface{}</span>
<span class="term-fg32">+	for _, tokenIdItem := range tokenId {</span>
<span class="term-fg32">+		tokenIdRule = append(tokenIdRule, tokenIdItem)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	logs, sub, err := _ERC721.contract.FilterLogs(opts, &quot;Transfer&quot;, fromRule, toRule, tokenIdRule)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;ERC721TransferIterator{contract: _ERC721.contract, event: &quot;Transfer&quot;, logs: logs, sub: sub}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; WatchTransfer is a free log subscription operation binding the contract event 0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: event Transfer(address indexed from, address indexed to, uint256 indexed tokenId)</span>
<span class="term-fg32">+func (_ERC721 *ERC721Filterer) WatchTransfer(opts *bind.WatchOpts, sink chan&lt;- *ERC721Transfer, from []common.Address, to []common.Address, tokenId []*big.Int) (event.Subscription, error) {</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	var fromRule []interface{}</span>
<span class="term-fg32">+	for _, fromItem := range from {</span>
<span class="term-fg32">+		fromRule = append(fromRule, fromItem)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	var toRule []interface{}</span>
<span class="term-fg32">+	for _, toItem := range to {</span>
<span class="term-fg32">+		toRule = append(toRule, toItem)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	var tokenIdRule []interface{}</span>
<span class="term-fg32">+	for _, tokenIdItem := range tokenId {</span>
<span class="term-fg32">+		tokenIdRule = append(tokenIdRule, tokenIdItem)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	logs, sub, err := _ERC721.contract.WatchLogs(opts, &quot;Transfer&quot;, fromRule, toRule, tokenIdRule)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return event.NewSubscription(func(quit &lt;-chan struct{}) error {</span>
<span class="term-fg32">+		defer sub.Unsubscribe()</span>
<span class="term-fg32">+		for {</span>
<span class="term-fg32">+			select {</span>
<span class="term-fg32">+			case log := &lt;-logs:</span>
<span class="term-fg32">+				&#47;&#47; New log arrived, parse the event and forward to the user</span>
<span class="term-fg32">+				event := new(ERC721Transfer)</span>
<span class="term-fg32">+				if err := _ERC721.contract.UnpackLog(event, &quot;Transfer&quot;, log); err != nil {</span>
<span class="term-fg32">+					return err</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+				event.Raw = log</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+				select {</span>
<span class="term-fg32">+				case sink &lt;- event:</span>
<span class="term-fg32">+				case err := &lt;-sub.Err():</span>
<span class="term-fg32">+					return err</span>
<span class="term-fg32">+				case &lt;-quit:</span>
<span class="term-fg32">+					return nil</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+			case err := &lt;-sub.Err():</span>
<span class="term-fg32">+				return err</span>
<span class="term-fg32">+			case &lt;-quit:</span>
<span class="term-fg32">+				return nil</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}), nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ParseTransfer is a log parse operation binding the contract event 0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: event Transfer(address indexed from, address indexed to, uint256 indexed tokenId)</span>
<span class="term-fg32">+func (_ERC721 *ERC721Filterer) ParseTransfer(log types.Log) (*ERC721Transfer, error) {</span>
<span class="term-fg32">+	event := new(ERC721Transfer)</span>
<span class="term-fg32">+	if err := _ERC721.contract.UnpackLog(event, &quot;Transfer&quot;, log); err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	event.Raw = log</span>
<span class="term-fg32">+	return event, nil</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-99ff432aa0fed000ff9c2ac6" role="button"
                       aria-expanded="false" aria-controls="id-99ff432aa0fed000ff9c2ac6">
                        <code>tests/immutable/evm/client.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/evm/client.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+219</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-99ff432aa0fed000ff9c2ac6"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;evm&#47;client.go immutable-geth&#47;tests&#47;immutable&#47;evm&#47;client.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..20d2d5f7e19a7ecc6db3544752be60121a3bde87</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;evm&#47;client.go</span>
<span class="term-fg36">@@ -0,0 +1,219 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package evm</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;context&quot;</span>
<span class="term-fg32">+	&quot;errors&quot;</span>
<span class="term-fg32">+	&quot;fmt&quot;</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+	&quot;net&#47;url&quot;</span>
<span class="term-fg32">+	&quot;time&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	gethrpc &quot;github.com&#47;ethereum&#47;go-ethereum&#47;rpc&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;ethclient&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;sethvargo&#47;go-retry&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;sirupsen&#47;logrus&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+type Client struct {</span>
<span class="term-fg32">+	ethClient  *ethclient.Client</span>
<span class="term-fg32">+	rpcClient  *gethrpc.Client</span>
<span class="term-fg32">+	retryCount uint64</span>
<span class="term-fg32">+	retryWait  time.Duration</span>
<span class="term-fg32">+	&#47;&#47; Capable of giving EIP-1559 gas tip estimations according to some internal</span>
<span class="term-fg32">+	&#47;&#47; strategy. Receives the ethclient.Client to fetch gas information.</span>
<span class="term-fg32">+	gasTipEstimator GasTipEstimator</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+const gethExecutionReverted = &quot;execution reverted&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; TODO: Remove edgeExecutionReverted once edge matches up error strings with geth</span>
<span class="term-fg32">+const edgeExecutionReverted = &quot;execution was reverted&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; TODO: Figure out a better way to handle error from hardhat</span>
<span class="term-fg32">+const hardhatExecutionReverted = &quot;Error: Transaction reverted without a reason string&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+var ErrExecutionReverted = errors.New(&quot;execution reverted&quot;)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewClient create default instance of an EVM Client</span>
<span class="term-fg32">+func NewClient(ctx context.Context, u *url.URL, retryCount uint64, retryWait time.Duration) (*Client, error) {</span>
<span class="term-fg32">+	evmClient, err := ethclient.DialContext(ctx, u.String())</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;failed to dial context for eth client: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	rpcClient, err := gethrpc.DialContext(ctx, u.String())</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;failed to dial context for rpc client: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return &amp;Client{</span>
<span class="term-fg32">+		ethClient:  evmClient,</span>
<span class="term-fg32">+		rpcClient:  rpcClient,</span>
<span class="term-fg32">+		retryCount: retryCount,</span>
<span class="term-fg32">+		retryWait:  retryWait,</span>
<span class="term-fg32">+		&#47;&#47; Suggested minimum per EIP-1559</span>
<span class="term-fg32">+		gasTipEstimator: NewFixedGasTipEstimator(big.NewInt(1000000000)),</span>
<span class="term-fg32">+	}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; FilterLogs Ethereum RPC FilterLogs</span>
<span class="term-fg32">+func (d *Client) FilterLogs(ctx context.Context, filter ethereum.FilterQuery) ([]types.Log, error) {</span>
<span class="term-fg32">+	log := logrus.WithContext(ctx).WithField(&quot;function&quot;, &quot;Client.FilterLogs&quot;)</span>
<span class="term-fg32">+	var logs []types.Log</span>
<span class="term-fg32">+	err := d.retryDo(ctx, func(ctx context.Context) error {</span>
<span class="term-fg32">+		var err error</span>
<span class="term-fg32">+		logs, err = d.ethClient.FilterLogs(ctx, filter)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return logAndReturnRetryableErr(log, err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		return nil</span>
<span class="term-fg32">+	})</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;failed to filter eth logs: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return logs, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; BlockNumber Ethereum RPC BlockNumber</span>
<span class="term-fg32">+func (d *Client) BlockNumber(ctx context.Context) (uint64, error) {</span>
<span class="term-fg32">+	log := logrus.WithContext(ctx).WithField(&quot;function&quot;, &quot;Client.BlockNumber&quot;)</span>
<span class="term-fg32">+	var blockNum uint64</span>
<span class="term-fg32">+	err := d.retryDo(ctx, func(ctx context.Context) error {</span>
<span class="term-fg32">+		var err error</span>
<span class="term-fg32">+		blockNum, err = d.ethClient.BlockNumber(ctx)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return logAndReturnRetryableErr(log, err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		return nil</span>
<span class="term-fg32">+	})</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return 0, fmt.Errorf(&quot;failed to get block number: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return blockNum, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; BlockByNumber Ethereum RPC BlockByNumber</span>
<span class="term-fg32">+func (d *Client) BlockByNumber(ctx context.Context, number *big.Int) (*types.Block, error) {</span>
<span class="term-fg32">+	log := logrus.WithContext(ctx).WithField(&quot;function&quot;, &quot;Client.BlockByNumber&quot;)</span>
<span class="term-fg32">+	var block *types.Block</span>
<span class="term-fg32">+	err := d.retryDo(ctx, func(ctx context.Context) error {</span>
<span class="term-fg32">+		var err error</span>
<span class="term-fg32">+		block, err = d.ethClient.BlockByNumber(ctx, number)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return logAndReturnRetryableErr(log, err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		return nil</span>
<span class="term-fg32">+	})</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;failed to get transactions by block number %s: %w&quot;, number.String(), err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return block, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; TransactionReceipt Ethereum RPC TransactionReceipt</span>
<span class="term-fg32">+func (d *Client) TransactionReceipt(ctx context.Context, txHash common.Hash) (*types.Receipt, error) {</span>
<span class="term-fg32">+	log := logrus.WithContext(ctx).WithField(&quot;function&quot;, &quot;Client.TransactionReceipt&quot;)</span>
<span class="term-fg32">+	var receipt *types.Receipt</span>
<span class="term-fg32">+	err := d.retryDo(ctx, func(ctx context.Context) error {</span>
<span class="term-fg32">+		var err error</span>
<span class="term-fg32">+		receipt, err = d.ethClient.TransactionReceipt(ctx, txHash)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			&#47;&#47; Don&#39;t log &quot;not found&quot; errors, they are expected</span>
<span class="term-fg32">+			if err.Error() == &quot;not found&quot; {</span>
<span class="term-fg32">+				return retry.RetryableError(err)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			return logAndReturnRetryableErr(log, err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		return nil</span>
<span class="term-fg32">+	})</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;failed to get transaction recept for transaction %s: %w&quot;, txHash.Hex(), err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return receipt, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; CodeAt calls the Ethereum RPC CodeAt function.</span>
<span class="term-fg32">+func (d *Client) CodeAt(ctx context.Context, contract common.Address, blockNumber *big.Int) ([]byte, error) {</span>
<span class="term-fg32">+	log := logrus.WithContext(ctx).WithField(&quot;function&quot;, &quot;Client.CodeAt&quot;)</span>
<span class="term-fg32">+	var codeAt []byte</span>
<span class="term-fg32">+	err := d.retryDo(ctx, func(ctx context.Context) error {</span>
<span class="term-fg32">+		var err error</span>
<span class="term-fg32">+		codeAt, err = d.ethClient.CodeAt(ctx, contract, blockNumber)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			&#47;&#47; NOTE: We have to do string comparison because generated bindings don&#39;t return a type we can easily work with</span>
<span class="term-fg32">+			&#47;&#47; This error is not retryable.</span>
<span class="term-fg32">+			if err.Error() == gethExecutionReverted || err.Error() == edgeExecutionReverted || err.Error() == hardhatExecutionReverted {</span>
<span class="term-fg32">+				return ErrExecutionReverted</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			return logAndReturnRetryableErr(log, err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		return nil</span>
<span class="term-fg32">+	})</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;failed to get code at for address %s: %w&quot;, contract.Hex(), err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return codeAt, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; CallContract calls the Ethereum RPC CallContract function.</span>
<span class="term-fg32">+func (d *Client) CallContract(ctx context.Context, call ethereum.CallMsg, blockNumber *big.Int) ([]byte, error) {</span>
<span class="term-fg32">+	log := logrus.WithContext(ctx).WithField(&quot;function&quot;, &quot;Client.CallContract&quot;)</span>
<span class="term-fg32">+	var callResult []byte</span>
<span class="term-fg32">+	err := d.retryDo(ctx, func(ctx context.Context) error {</span>
<span class="term-fg32">+		var err error</span>
<span class="term-fg32">+		callResult, err = d.ethClient.CallContract(ctx, call, blockNumber)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			&#47;&#47; NOTE: We have to do string comparison because generated bindings don&#39;t return a type we can easily work with</span>
<span class="term-fg32">+			&#47;&#47; This error is not retryable</span>
<span class="term-fg32">+			if err.Error() == gethExecutionReverted || err.Error() == edgeExecutionReverted || err.Error() == hardhatExecutionReverted {</span>
<span class="term-fg32">+				return ErrExecutionReverted</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			return logAndReturnRetryableErr(log, err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		return nil</span>
<span class="term-fg32">+	})</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return callResult, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (d *Client) EthClient() *ethclient.Client {</span>
<span class="term-fg32">+	&#47;&#47; TODO: can we avoid exposing this? Can we define an interface to accommodate?</span>
<span class="term-fg32">+	return d.ethClient</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (d *Client) retryDo(ctx context.Context, f retry.RetryFunc) error {</span>
<span class="term-fg32">+	&#47;&#47; If no retries, just run the func</span>
<span class="term-fg32">+	if d.retryCount == 0 {</span>
<span class="term-fg32">+		return f(ctx)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Run func with retries</span>
<span class="term-fg32">+	b := retry.WithMaxRetries(d.retryCount, retry.NewConstant(d.retryWait))</span>
<span class="term-fg32">+	err := retry.Do(ctx, b, f)</span>
<span class="term-fg32">+	return err</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func logAndReturnRetryableErr(log *logrus.Entry, err error) error {</span>
<span class="term-fg32">+	log.Warnf(&quot;query error: %s&quot;, err.Error())</span>
<span class="term-fg32">+	return retry.RetryableError(err)</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-84e85990433ee86917c77cd5" role="button"
                       aria-expanded="false" aria-controls="id-84e85990433ee86917c77cd5">
                        <code>tests/immutable/evm/client_transactor.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/evm/client_transactor.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+152</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-84e85990433ee86917c77cd5"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;evm&#47;client_transactor.go immutable-geth&#47;tests&#47;immutable&#47;evm&#47;client_transactor.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..065ebe355dd5be2c92f76d016740f2ff93ab52d5</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;evm&#47;client_transactor.go</span>
<span class="term-fg36">@@ -0,0 +1,152 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package evm</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;context&quot;</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;sirupsen&#47;logrus&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; The below functions implement the bind.ContractTransactor interface:</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; - HeaderByNumber</span>
<span class="term-fg32">+&#47;&#47; - PendingCodeAt</span>
<span class="term-fg32">+&#47;&#47; - PendingNonceAt</span>
<span class="term-fg32">+&#47;&#47; - SuggestGasPrice</span>
<span class="term-fg32">+&#47;&#47; - SuggestGasTipCap</span>
<span class="term-fg32">+&#47;&#47; - EstimateGas</span>
<span class="term-fg32">+&#47;&#47; - SendTransaction</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; These are used by bindings when executing contract calls. The reasoning</span>
<span class="term-fg32">+&#47;&#47; behind having a custom implementation is that it allows for retry</span>
<span class="term-fg32">+&#47;&#47; functionality and for custom gas pricing strategies.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (client *Client) HeaderByNumber(ctx context.Context, number *big.Int) (*types.Header, error) {</span>
<span class="term-fg32">+	log := logrus.WithContext(ctx).WithField(&quot;function&quot;, &quot;Client.HeaderByNumber&quot;)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	var header *types.Header</span>
<span class="term-fg32">+	err := client.retryDo(ctx, func(ctx context.Context) error {</span>
<span class="term-fg32">+		var err error</span>
<span class="term-fg32">+		header, err = client.ethClient.HeaderByNumber(ctx, number)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return logAndReturnRetryableErr(log, err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		return nil</span>
<span class="term-fg32">+	})</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return header, err</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (client *Client) PendingCodeAt(ctx context.Context, account common.Address) ([]byte, error) {</span>
<span class="term-fg32">+	log := logrus.WithContext(ctx).WithField(&quot;function&quot;, &quot;Client.PendingCodeAt&quot;)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	var pendingCode []byte</span>
<span class="term-fg32">+	err := client.retryDo(ctx, func(ctx context.Context) error {</span>
<span class="term-fg32">+		var err error</span>
<span class="term-fg32">+		pendingCode, err = client.ethClient.PendingCodeAt(ctx, account)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return logAndReturnRetryableErr(log, err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		return nil</span>
<span class="term-fg32">+	})</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return pendingCode, err</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (client *Client) PendingNonceAt(ctx context.Context, account common.Address) (uint64, error) {</span>
<span class="term-fg32">+	log := logrus.WithContext(ctx).WithField(&quot;function&quot;, &quot;Client.PendingNonceAt&quot;)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	var pendingNonce uint64</span>
<span class="term-fg32">+	err := client.retryDo(ctx, func(ctx context.Context) error {</span>
<span class="term-fg32">+		var err error</span>
<span class="term-fg32">+		pendingNonce, err = client.ethClient.PendingNonceAt(ctx, account)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return logAndReturnRetryableErr(log, err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		return nil</span>
<span class="term-fg32">+	})</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return pendingNonce, err</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SuggestGasPrice is used for pricing legacy transactions.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; NOTE: Since we plan to use EIP-1559 transactions, there&#39;s no need to</span>
<span class="term-fg32">+&#47;&#47; implement it. Panic to make sure anyone trying to use it knows it&#39;s not</span>
<span class="term-fg32">+&#47;&#47; implemented.</span>
<span class="term-fg32">+func (client *Client) SuggestGasPrice(ctx context.Context) (*big.Int, error) {</span>
<span class="term-fg32">+	panic(&quot;unimplemented&quot;)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (client *Client) SuggestGasTipCap(ctx context.Context) (*big.Int, error) {</span>
<span class="term-fg32">+	log := logrus.WithContext(ctx).WithField(&quot;function&quot;, &quot;Client.SuggestGasTipCap&quot;)</span>
<span class="term-fg32">+	log.Warnf(&quot;Temporary gas pricing calculation! Returns 0!&quot;)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	tip := big.NewInt(0)</span>
<span class="term-fg32">+	err := client.retryDo(ctx, func(ctx context.Context) error {</span>
<span class="term-fg32">+		var err error</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		tip, err = client.gasTipEstimator.SuggestGasTipCap(ctx, client.ethClient)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return logAndReturnRetryableErr(log, err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		return nil</span>
<span class="term-fg32">+	})</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return tip, err</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (client *Client) EstimateGas(ctx context.Context, call ethereum.CallMsg) (uint64, error) {</span>
<span class="term-fg32">+	log := logrus.WithContext(ctx).WithField(&quot;function&quot;, &quot;Client.EstimateGas&quot;)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	var gas uint64</span>
<span class="term-fg32">+	err := client.retryDo(ctx, func(ctx context.Context) error {</span>
<span class="term-fg32">+		var err error</span>
<span class="term-fg32">+		gas, err = client.ethClient.EstimateGas(ctx, call)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			&#47;&#47; NOTE: We have to do string comparison because generated bindings</span>
<span class="term-fg32">+			&#47;&#47; don&#39;t return a type we can easily work with This error is not</span>
<span class="term-fg32">+			&#47;&#47; retryable.</span>
<span class="term-fg32">+			if err.Error() == gethExecutionReverted {</span>
<span class="term-fg32">+				return ErrExecutionReverted</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			return logAndReturnRetryableErr(log, err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		return nil</span>
<span class="term-fg32">+	})</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return gas, err</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (client *Client) SendTransaction(ctx context.Context, tx *types.Transaction) error {</span>
<span class="term-fg32">+	log := logrus.WithContext(ctx).WithField(&quot;function&quot;, &quot;Client.SendTransaction&quot;)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return client.retryDo(ctx, func(ctx context.Context) error {</span>
<span class="term-fg32">+		err := client.ethClient.SendTransaction(ctx, tx)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			return logAndReturnRetryableErr(log, err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		return nil</span>
<span class="term-fg32">+	})</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-816c3089d2685cbfe20ebda3" role="button"
                       aria-expanded="false" aria-controls="id-816c3089d2685cbfe20ebda3">
                        <code>tests/immutable/evm/tip_estimator.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/evm/tip_estimator.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+43</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-816c3089d2685cbfe20ebda3"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;evm&#47;tip_estimator.go immutable-geth&#47;tests&#47;immutable&#47;evm&#47;tip_estimator.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..383d0e6cb45df15c98163da23d74f3e8b823815c</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;evm&#47;tip_estimator.go</span>
<span class="term-fg36">@@ -0,0 +1,43 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package evm</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;context&quot;</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;ethclient&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+type GasTipEstimator interface {</span>
<span class="term-fg32">+	SuggestGasTipCap(context.Context, *ethclient.Client) (*big.Int, error)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+type fixedGasTipEstimator struct {</span>
<span class="term-fg32">+	fixedTipCap *big.Int</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func NewFixedGasTipEstimator(tipCap *big.Int) GasTipEstimator {</span>
<span class="term-fg32">+	return fixedGasTipEstimator{tipCap}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (estimator fixedGasTipEstimator) SuggestGasTipCap(</span>
<span class="term-fg32">+	context.Context,</span>
<span class="term-fg32">+	*ethclient.Client,</span>
<span class="term-fg32">+) (*big.Int, error) {</span>
<span class="term-fg32">+	return estimator.fixedTipCap, nil</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-264d58ca819537eedbddd0b3" role="button"
                       aria-expanded="false" aria-controls="id-264d58ca819537eedbddd0b3">
                        <code>tests/immutable/randao/abi.json</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/randao/abi.json" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+27</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-264d58ca819537eedbddd0b3"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;randao&#47;abi.json immutable-geth&#47;tests&#47;immutable&#47;randao&#47;abi.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..988e2c47f4ef175233dc6c90586efa5623c695ad</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;randao&#47;abi.json</span>
<span class="term-fg36">@@ -0,0 +1,28 @@</span>
<span class="term-fg32">+[</span>
<span class="term-fg32">+  {</span>
<span class="term-fg32">+    &quot;type&quot;: &quot;function&quot;,</span>
<span class="term-fg32">+    &quot;name&quot;: &quot;difficulty&quot;,</span>
<span class="term-fg32">+    &quot;inputs&quot;: [],</span>
<span class="term-fg32">+    &quot;outputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;uint256&quot;,</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;uint256&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;stateMutability&quot;: &quot;view&quot;</span>
<span class="term-fg32">+  },</span>
<span class="term-fg32">+  {</span>
<span class="term-fg32">+    &quot;type&quot;: &quot;function&quot;,</span>
<span class="term-fg32">+    &quot;name&quot;: &quot;rand&quot;,</span>
<span class="term-fg32">+    &quot;inputs&quot;: [],</span>
<span class="term-fg32">+    &quot;outputs&quot;: [</span>
<span class="term-fg32">+      {</span>
<span class="term-fg32">+        &quot;name&quot;: &quot;&quot;,</span>
<span class="term-fg32">+        &quot;type&quot;: &quot;uint256&quot;,</span>
<span class="term-fg32">+        &quot;internalType&quot;: &quot;uint256&quot;</span>
<span class="term-fg32">+      }</span>
<span class="term-fg32">+    ],</span>
<span class="term-fg32">+    &quot;stateMutability&quot;: &quot;view&quot;</span>
<span class="term-fg32">+  }</span>
<span class="term-fg32">+]</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-898c438aaf975e88f24431a7" role="button"
                       aria-expanded="false" aria-controls="id-898c438aaf975e88f24431a7">
                        <code>tests/immutable/randao/bytecode.bin</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/randao/bytecode.bin" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+0</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-898c438aaf975e88f24431a7"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;randao&#47;bytecode.bin immutable-geth&#47;tests&#47;immutable&#47;randao&#47;bytecode.bin</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..9a4c44c955f2a33e41d49906142cf333fa6faddc</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;randao&#47;bytecode.bin</span>
<span class="term-fg36">@@ -0,0 +1 @@</span>
<span class="term-fg32">+0x6080604052348015600f57600080fd5b5060808061001e6000396000f3fe6080604052348015600f57600080fd5b506004361060325760003560e01c806319cae4621460375780633b3dca76146037575b600080fd5b4460405190815260200160405180910390f3fea264697066735822122073d353e8eb69c22f774d562d71a74ea7cb9835935aa5f222c0c41eec2c15a7c364736f6c63430008180033</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-120f44af8cedf42086d940bf" role="button"
                       aria-expanded="false" aria-controls="id-120f44af8cedf42086d940bf">
                        <code>tests/immutable/randao/randao.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/randao/randao.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+265</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-120f44af8cedf42086d940bf"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;randao&#47;randao.go immutable-geth&#47;tests&#47;immutable&#47;randao&#47;randao.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..3af1324fdabd2b58b208ba40fc41b304ff2ad710</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;randao&#47;randao.go</span>
<span class="term-fg36">@@ -0,0 +1,265 @@</span>
<span class="term-fg32">+&#47;&#47; Code generated - DO NOT EDIT.</span>
<span class="term-fg32">+&#47;&#47; This file is a generated binding and any manual changes will be lost.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package randao</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;errors&quot;</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+	&quot;strings&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	ethereum &quot;github.com&#47;ethereum&#47;go-ethereum&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&#47;abi&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&#47;abi&#47;bind&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;event&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Reference imports to suppress errors if they are not otherwise used.</span>
<span class="term-fg32">+var (</span>
<span class="term-fg32">+	_ = errors.New</span>
<span class="term-fg32">+	_ = big.NewInt</span>
<span class="term-fg32">+	_ = strings.NewReader</span>
<span class="term-fg32">+	_ = ethereum.NotFound</span>
<span class="term-fg32">+	_ = bind.Bind</span>
<span class="term-fg32">+	_ = common.Big1</span>
<span class="term-fg32">+	_ = types.BloomLookup</span>
<span class="term-fg32">+	_ = event.NewSubscription</span>
<span class="term-fg32">+	_ = abi.ConvertType</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; RandaoMetaData contains all meta data concerning the Randao contract.</span>
<span class="term-fg32">+var RandaoMetaData = &amp;bind.MetaData{</span>
<span class="term-fg32">+	ABI: &quot;[{\&quot;type\&quot;:\&quot;function\&quot;,\&quot;name\&quot;:\&quot;difficulty\&quot;,\&quot;inputs\&quot;:[],\&quot;outputs\&quot;:[{\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;,\&quot;internalType\&quot;:\&quot;uint256\&quot;}],\&quot;stateMutability\&quot;:\&quot;view\&quot;},{\&quot;type\&quot;:\&quot;function\&quot;,\&quot;name\&quot;:\&quot;rand\&quot;,\&quot;inputs\&quot;:[],\&quot;outputs\&quot;:[{\&quot;name\&quot;:\&quot;\&quot;,\&quot;type\&quot;:\&quot;uint256\&quot;,\&quot;internalType\&quot;:\&quot;uint256\&quot;}],\&quot;stateMutability\&quot;:\&quot;view\&quot;}]&quot;,</span>
<span class="term-fg32">+	Bin: &quot;0x6080604052348015600f57600080fd5b5060808061001e6000396000f3fe6080604052348015600f57600080fd5b506004361060325760003560e01c806319cae4621460375780633b3dca76146037575b600080fd5b4460405190815260200160405180910390f3fea264697066735822122073d353e8eb69c22f774d562d71a74ea7cb9835935aa5f222c0c41eec2c15a7c364736f6c63430008180033&quot;,</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; RandaoABI is the input ABI used to generate the binding from.</span>
<span class="term-fg32">+&#47;&#47; Deprecated: Use RandaoMetaData.ABI instead.</span>
<span class="term-fg32">+var RandaoABI = RandaoMetaData.ABI</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; RandaoBin is the compiled bytecode used for deploying new contracts.</span>
<span class="term-fg32">+&#47;&#47; Deprecated: Use RandaoMetaData.Bin instead.</span>
<span class="term-fg32">+var RandaoBin = RandaoMetaData.Bin</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; DeployRandao deploys a new Ethereum contract, binding an instance of Randao to it.</span>
<span class="term-fg32">+func DeployRandao(auth *bind.TransactOpts, backend bind.ContractBackend) (common.Address, *types.Transaction, *Randao, error) {</span>
<span class="term-fg32">+	parsed, err := RandaoMetaData.GetAbi()</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return common.Address{}, nil, nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if parsed == nil {</span>
<span class="term-fg32">+		return common.Address{}, nil, nil, errors.New(&quot;GetABI returned nil&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	address, tx, contract, err := bind.DeployContract(auth, *parsed, common.FromHex(RandaoBin), backend)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return common.Address{}, nil, nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return address, tx, &amp;Randao{RandaoCaller: RandaoCaller{contract: contract}, RandaoTransactor: RandaoTransactor{contract: contract}, RandaoFilterer: RandaoFilterer{contract: contract}}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Randao is an auto generated Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type Randao struct {</span>
<span class="term-fg32">+	RandaoCaller     &#47;&#47; Read-only binding to the contract</span>
<span class="term-fg32">+	RandaoTransactor &#47;&#47; Write-only binding to the contract</span>
<span class="term-fg32">+	RandaoFilterer   &#47;&#47; Log filterer for contract events</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; RandaoCaller is an auto generated read-only Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type RandaoCaller struct {</span>
<span class="term-fg32">+	contract *bind.BoundContract &#47;&#47; Generic contract wrapper for the low level calls</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; RandaoTransactor is an auto generated write-only Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type RandaoTransactor struct {</span>
<span class="term-fg32">+	contract *bind.BoundContract &#47;&#47; Generic contract wrapper for the low level calls</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; RandaoFilterer is an auto generated log filtering Go binding around an Ethereum contract events.</span>
<span class="term-fg32">+type RandaoFilterer struct {</span>
<span class="term-fg32">+	contract *bind.BoundContract &#47;&#47; Generic contract wrapper for the low level calls</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; RandaoSession is an auto generated Go binding around an Ethereum contract,</span>
<span class="term-fg32">+&#47;&#47; with pre-set call and transact options.</span>
<span class="term-fg32">+type RandaoSession struct {</span>
<span class="term-fg32">+	Contract     *Randao           &#47;&#47; Generic contract binding to set the session for</span>
<span class="term-fg32">+	CallOpts     bind.CallOpts     &#47;&#47; Call options to use throughout this session</span>
<span class="term-fg32">+	TransactOpts bind.TransactOpts &#47;&#47; Transaction auth options to use throughout this session</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; RandaoCallerSession is an auto generated read-only Go binding around an Ethereum contract,</span>
<span class="term-fg32">+&#47;&#47; with pre-set call options.</span>
<span class="term-fg32">+type RandaoCallerSession struct {</span>
<span class="term-fg32">+	Contract *RandaoCaller &#47;&#47; Generic contract caller binding to set the session for</span>
<span class="term-fg32">+	CallOpts bind.CallOpts &#47;&#47; Call options to use throughout this session</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; RandaoTransactorSession is an auto generated write-only Go binding around an Ethereum contract,</span>
<span class="term-fg32">+&#47;&#47; with pre-set transact options.</span>
<span class="term-fg32">+type RandaoTransactorSession struct {</span>
<span class="term-fg32">+	Contract     *RandaoTransactor &#47;&#47; Generic contract transactor binding to set the session for</span>
<span class="term-fg32">+	TransactOpts bind.TransactOpts &#47;&#47; Transaction auth options to use throughout this session</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; RandaoRaw is an auto generated low-level Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type RandaoRaw struct {</span>
<span class="term-fg32">+	Contract *Randao &#47;&#47; Generic contract binding to access the raw methods on</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; RandaoCallerRaw is an auto generated low-level read-only Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type RandaoCallerRaw struct {</span>
<span class="term-fg32">+	Contract *RandaoCaller &#47;&#47; Generic read-only contract binding to access the raw methods on</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; RandaoTransactorRaw is an auto generated low-level write-only Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type RandaoTransactorRaw struct {</span>
<span class="term-fg32">+	Contract *RandaoTransactor &#47;&#47; Generic write-only contract binding to access the raw methods on</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewRandao creates a new instance of Randao, bound to a specific deployed contract.</span>
<span class="term-fg32">+func NewRandao(address common.Address, backend bind.ContractBackend) (*Randao, error) {</span>
<span class="term-fg32">+	contract, err := bindRandao(address, backend, backend, backend)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;Randao{RandaoCaller: RandaoCaller{contract: contract}, RandaoTransactor: RandaoTransactor{contract: contract}, RandaoFilterer: RandaoFilterer{contract: contract}}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewRandaoCaller creates a new read-only instance of Randao, bound to a specific deployed contract.</span>
<span class="term-fg32">+func NewRandaoCaller(address common.Address, caller bind.ContractCaller) (*RandaoCaller, error) {</span>
<span class="term-fg32">+	contract, err := bindRandao(address, caller, nil, nil)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;RandaoCaller{contract: contract}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewRandaoTransactor creates a new write-only instance of Randao, bound to a specific deployed contract.</span>
<span class="term-fg32">+func NewRandaoTransactor(address common.Address, transactor bind.ContractTransactor) (*RandaoTransactor, error) {</span>
<span class="term-fg32">+	contract, err := bindRandao(address, nil, transactor, nil)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;RandaoTransactor{contract: contract}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewRandaoFilterer creates a new log filterer instance of Randao, bound to a specific deployed contract.</span>
<span class="term-fg32">+func NewRandaoFilterer(address common.Address, filterer bind.ContractFilterer) (*RandaoFilterer, error) {</span>
<span class="term-fg32">+	contract, err := bindRandao(address, nil, nil, filterer)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;RandaoFilterer{contract: contract}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; bindRandao binds a generic wrapper to an already deployed contract.</span>
<span class="term-fg32">+func bindRandao(address common.Address, caller bind.ContractCaller, transactor bind.ContractTransactor, filterer bind.ContractFilterer) (*bind.BoundContract, error) {</span>
<span class="term-fg32">+	parsed, err := RandaoMetaData.GetAbi()</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return bind.NewBoundContract(address, *parsed, caller, transactor, filterer), nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Call invokes the (constant) contract method with params as input values and</span>
<span class="term-fg32">+&#47;&#47; sets the output to result. The result type might be a single field for simple</span>
<span class="term-fg32">+&#47;&#47; returns, a slice of interfaces for anonymous returns and a struct for named</span>
<span class="term-fg32">+&#47;&#47; returns.</span>
<span class="term-fg32">+func (_Randao *RandaoRaw) Call(opts *bind.CallOpts, result *[]interface{}, method string, params ...interface{}) error {</span>
<span class="term-fg32">+	return _Randao.Contract.RandaoCaller.contract.Call(opts, result, method, params...)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Transfer initiates a plain transaction to move funds to the contract, calling</span>
<span class="term-fg32">+&#47;&#47; its default method if one is available.</span>
<span class="term-fg32">+func (_Randao *RandaoRaw) Transfer(opts *bind.TransactOpts) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _Randao.Contract.RandaoTransactor.contract.Transfer(opts)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Transact invokes the (paid) contract method with params as input values.</span>
<span class="term-fg32">+func (_Randao *RandaoRaw) Transact(opts *bind.TransactOpts, method string, params ...interface{}) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _Randao.Contract.RandaoTransactor.contract.Transact(opts, method, params...)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Call invokes the (constant) contract method with params as input values and</span>
<span class="term-fg32">+&#47;&#47; sets the output to result. The result type might be a single field for simple</span>
<span class="term-fg32">+&#47;&#47; returns, a slice of interfaces for anonymous returns and a struct for named</span>
<span class="term-fg32">+&#47;&#47; returns.</span>
<span class="term-fg32">+func (_Randao *RandaoCallerRaw) Call(opts *bind.CallOpts, result *[]interface{}, method string, params ...interface{}) error {</span>
<span class="term-fg32">+	return _Randao.Contract.contract.Call(opts, result, method, params...)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Transfer initiates a plain transaction to move funds to the contract, calling</span>
<span class="term-fg32">+&#47;&#47; its default method if one is available.</span>
<span class="term-fg32">+func (_Randao *RandaoTransactorRaw) Transfer(opts *bind.TransactOpts) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _Randao.Contract.contract.Transfer(opts)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Transact invokes the (paid) contract method with params as input values.</span>
<span class="term-fg32">+func (_Randao *RandaoTransactorRaw) Transact(opts *bind.TransactOpts, method string, params ...interface{}) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _Randao.Contract.contract.Transact(opts, method, params...)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Difficulty is a free data retrieval call binding the contract method 0x19cae462.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function difficulty() view returns(uint256)</span>
<span class="term-fg32">+func (_Randao *RandaoCaller) Difficulty(opts *bind.CallOpts) (*big.Int, error) {</span>
<span class="term-fg32">+	var out []interface{}</span>
<span class="term-fg32">+	err := _Randao.contract.Call(opts, &amp;out, &quot;difficulty&quot;)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return *new(*big.Int), err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	out0 := *abi.ConvertType(out[0], new(*big.Int)).(**big.Int)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return out0, err</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Difficulty is a free data retrieval call binding the contract method 0x19cae462.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function difficulty() view returns(uint256)</span>
<span class="term-fg32">+func (_Randao *RandaoSession) Difficulty() (*big.Int, error) {</span>
<span class="term-fg32">+	return _Randao.Contract.Difficulty(&amp;_Randao.CallOpts)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Difficulty is a free data retrieval call binding the contract method 0x19cae462.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function difficulty() view returns(uint256)</span>
<span class="term-fg32">+func (_Randao *RandaoCallerSession) Difficulty() (*big.Int, error) {</span>
<span class="term-fg32">+	return _Randao.Contract.Difficulty(&amp;_Randao.CallOpts)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Rand is a free data retrieval call binding the contract method 0x3b3dca76.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function rand() view returns(uint256)</span>
<span class="term-fg32">+func (_Randao *RandaoCaller) Rand(opts *bind.CallOpts) (*big.Int, error) {</span>
<span class="term-fg32">+	var out []interface{}</span>
<span class="term-fg32">+	err := _Randao.contract.Call(opts, &amp;out, &quot;rand&quot;)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return *new(*big.Int), err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	out0 := *abi.ConvertType(out[0], new(*big.Int)).(**big.Int)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return out0, err</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Rand is a free data retrieval call binding the contract method 0x3b3dca76.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function rand() view returns(uint256)</span>
<span class="term-fg32">+func (_Randao *RandaoSession) Rand() (*big.Int, error) {</span>
<span class="term-fg32">+	return _Randao.Contract.Rand(&amp;_Randao.CallOpts)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Rand is a free data retrieval call binding the contract method 0x3b3dca76.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function rand() view returns(uint256)</span>
<span class="term-fg32">+func (_Randao *RandaoCallerSession) Rand() (*big.Int, error) {</span>
<span class="term-fg32">+	return _Randao.Contract.Rand(&amp;_Randao.CallOpts)</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-b20652d394b88132755cdbce" role="button"
                       aria-expanded="false" aria-controls="id-b20652d394b88132755cdbce">
                        <code>tests/immutable/randao/randao.sol</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/randao/randao.sol" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+13</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-b20652d394b88132755cdbce"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;randao&#47;randao.sol immutable-geth&#47;tests&#47;immutable&#47;randao&#47;randao.sol</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..3187f4778209e344027e81cd755181ecbce3c27d</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;randao&#47;randao.sol</span>
<span class="term-fg36">@@ -0,0 +1,13 @@</span>
<span class="term-fg32">+&#47;&#47; SPDX-License-Identifier: MIT</span>
<span class="term-fg32">+pragma solidity ^0.8.20;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+contract RandDao {</span>
<span class="term-fg32">+    function rand() external view returns (uint) {</span>
<span class="term-fg32">+        return block.prevrandao;</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+    function difficulty() external view returns (uint) {</span>
<span class="term-fg32">+        return block.difficulty;</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; build&#47;bin&#47;abigen --abi .&#47;tests&#47;immutable&#47;randao&#47;abi.json --pkg randao --type Randao --out .&#47;tests&#47;immutable&#47;randao&#47;randao.go --bin .&#47;tests&#47;immutable&#47;randao&#47;bytecode.bin</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-ddf6cb5ac8454e4f331cf62a" role="button"
                       aria-expanded="false" aria-controls="id-ddf6cb5ac8454e4f331cf62a">
                        <code>tests/immutable/shanghai/abi.json</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/shanghai/abi.json" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+8</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-ddf6cb5ac8454e4f331cf62a"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;shanghai&#47;abi.json immutable-geth&#47;tests&#47;immutable&#47;shanghai&#47;abi.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..acfc3992fa38ac02cbd25f59a63a603d2653dabe</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;shanghai&#47;abi.json</span>
<span class="term-fg36">@@ -0,0 +1,9 @@</span>
<span class="term-fg32">+[</span>
<span class="term-fg32">+	{</span>
<span class="term-fg32">+		&quot;inputs&quot;: [],</span>
<span class="term-fg32">+		&quot;name&quot;: &quot;SetCoinbase&quot;,</span>
<span class="term-fg32">+		&quot;outputs&quot;: [],</span>
<span class="term-fg32">+		&quot;stateMutability&quot;: &quot;nonpayable&quot;,</span>
<span class="term-fg32">+		&quot;type&quot;: &quot;function&quot;</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+]</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-f22d4bb4588f1d49318b8844" role="button"
                       aria-expanded="false" aria-controls="id-f22d4bb4588f1d49318b8844">
                        <code>tests/immutable/shanghai/bytecode.bin</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/shanghai/bytecode.bin" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+0</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-f22d4bb4588f1d49318b8844"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;shanghai&#47;bytecode.bin immutable-geth&#47;tests&#47;immutable&#47;shanghai&#47;bytecode.bin</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..6efc7ef1e0575fd0990c75d8968807d8a00d65ba</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;shanghai&#47;bytecode.bin</span>
<span class="term-fg36">@@ -0,0 +1 @@</span>
<span class="term-fg32">+6080604052348015600e575f80fd5b50606f80601a5f395ff3fe6080604052348015600e575f80fd5b50600436106026575f3560e01c8063de4436a614602a575b5f80fd5b60306032565b005b5f4190505056fea2646970667358221220ac8ec15e4867e5d8e3f28efa2be3d944029f496c1c0465c0f2fd611ac8d7d3e664736f6c63430008140033</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-5b4526c778f1dee015253b1e" role="button"
                       aria-expanded="false" aria-controls="id-5b4526c778f1dee015253b1e">
                        <code>tests/immutable/shanghai/shanghai.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/shanghai/shanghai.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+224</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-5b4526c778f1dee015253b1e"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;shanghai&#47;shanghai.go immutable-geth&#47;tests&#47;immutable&#47;shanghai&#47;shanghai.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..1a699843e566a3d264300b3c8233700e08415c6f</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;shanghai&#47;shanghai.go</span>
<span class="term-fg36">@@ -0,0 +1,224 @@</span>
<span class="term-fg32">+&#47;&#47; Code generated - DO NOT EDIT.</span>
<span class="term-fg32">+&#47;&#47; This file is a generated binding and any manual changes will be lost.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package shanghai</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;errors&quot;</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+	&quot;strings&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	ethereum &quot;github.com&#47;ethereum&#47;go-ethereum&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&#47;abi&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&#47;abi&#47;bind&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;event&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Reference imports to suppress errors if they are not otherwise used.</span>
<span class="term-fg32">+var (</span>
<span class="term-fg32">+	_ = errors.New</span>
<span class="term-fg32">+	_ = big.NewInt</span>
<span class="term-fg32">+	_ = strings.NewReader</span>
<span class="term-fg32">+	_ = ethereum.NotFound</span>
<span class="term-fg32">+	_ = bind.Bind</span>
<span class="term-fg32">+	_ = common.Big1</span>
<span class="term-fg32">+	_ = types.BloomLookup</span>
<span class="term-fg32">+	_ = event.NewSubscription</span>
<span class="term-fg32">+	_ = abi.ConvertType</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ShanghaiMetaData contains all meta data concerning the Shanghai contract.</span>
<span class="term-fg32">+var ShanghaiMetaData = &amp;bind.MetaData{</span>
<span class="term-fg32">+	ABI: &quot;[{\&quot;inputs\&quot;:[],\&quot;name\&quot;:\&quot;SetCoinbase\&quot;,\&quot;outputs\&quot;:[],\&quot;stateMutability\&quot;:\&quot;nonpayable\&quot;,\&quot;type\&quot;:\&quot;function\&quot;}]&quot;,</span>
<span class="term-fg32">+	Bin: &quot;0x6080604052348015600e575f80fd5b50606f80601a5f395ff3fe6080604052348015600e575f80fd5b50600436106026575f3560e01c8063de4436a614602a575b5f80fd5b60306032565b005b5f4190505056fea2646970667358221220ac8ec15e4867e5d8e3f28efa2be3d944029f496c1c0465c0f2fd611ac8d7d3e664736f6c63430008140033&quot;,</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ShanghaiABI is the input ABI used to generate the binding from.</span>
<span class="term-fg32">+&#47;&#47; Deprecated: Use ShanghaiMetaData.ABI instead.</span>
<span class="term-fg32">+var ShanghaiABI = ShanghaiMetaData.ABI</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ShanghaiBin is the compiled bytecode used for deploying new contracts.</span>
<span class="term-fg32">+&#47;&#47; Deprecated: Use ShanghaiMetaData.Bin instead.</span>
<span class="term-fg32">+var ShanghaiBin = ShanghaiMetaData.Bin</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; DeployShanghai deploys a new Ethereum contract, binding an instance of Shanghai to it.</span>
<span class="term-fg32">+func DeployShanghai(auth *bind.TransactOpts, backend bind.ContractBackend) (common.Address, *types.Transaction, *Shanghai, error) {</span>
<span class="term-fg32">+	parsed, err := ShanghaiMetaData.GetAbi()</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return common.Address{}, nil, nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if parsed == nil {</span>
<span class="term-fg32">+		return common.Address{}, nil, nil, errors.New(&quot;GetABI returned nil&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	address, tx, contract, err := bind.DeployContract(auth, *parsed, common.FromHex(ShanghaiBin), backend)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return common.Address{}, nil, nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return address, tx, &amp;Shanghai{ShanghaiCaller: ShanghaiCaller{contract: contract}, ShanghaiTransactor: ShanghaiTransactor{contract: contract}, ShanghaiFilterer: ShanghaiFilterer{contract: contract}}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Shanghai is an auto generated Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type Shanghai struct {</span>
<span class="term-fg32">+	ShanghaiCaller     &#47;&#47; Read-only binding to the contract</span>
<span class="term-fg32">+	ShanghaiTransactor &#47;&#47; Write-only binding to the contract</span>
<span class="term-fg32">+	ShanghaiFilterer   &#47;&#47; Log filterer for contract events</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ShanghaiCaller is an auto generated read-only Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type ShanghaiCaller struct {</span>
<span class="term-fg32">+	contract *bind.BoundContract &#47;&#47; Generic contract wrapper for the low level calls</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ShanghaiTransactor is an auto generated write-only Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type ShanghaiTransactor struct {</span>
<span class="term-fg32">+	contract *bind.BoundContract &#47;&#47; Generic contract wrapper for the low level calls</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ShanghaiFilterer is an auto generated log filtering Go binding around an Ethereum contract events.</span>
<span class="term-fg32">+type ShanghaiFilterer struct {</span>
<span class="term-fg32">+	contract *bind.BoundContract &#47;&#47; Generic contract wrapper for the low level calls</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ShanghaiSession is an auto generated Go binding around an Ethereum contract,</span>
<span class="term-fg32">+&#47;&#47; with pre-set call and transact options.</span>
<span class="term-fg32">+type ShanghaiSession struct {</span>
<span class="term-fg32">+	Contract     *Shanghai         &#47;&#47; Generic contract binding to set the session for</span>
<span class="term-fg32">+	CallOpts     bind.CallOpts     &#47;&#47; Call options to use throughout this session</span>
<span class="term-fg32">+	TransactOpts bind.TransactOpts &#47;&#47; Transaction auth options to use throughout this session</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ShanghaiCallerSession is an auto generated read-only Go binding around an Ethereum contract,</span>
<span class="term-fg32">+&#47;&#47; with pre-set call options.</span>
<span class="term-fg32">+type ShanghaiCallerSession struct {</span>
<span class="term-fg32">+	Contract *ShanghaiCaller &#47;&#47; Generic contract caller binding to set the session for</span>
<span class="term-fg32">+	CallOpts bind.CallOpts   &#47;&#47; Call options to use throughout this session</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ShanghaiTransactorSession is an auto generated write-only Go binding around an Ethereum contract,</span>
<span class="term-fg32">+&#47;&#47; with pre-set transact options.</span>
<span class="term-fg32">+type ShanghaiTransactorSession struct {</span>
<span class="term-fg32">+	Contract     *ShanghaiTransactor &#47;&#47; Generic contract transactor binding to set the session for</span>
<span class="term-fg32">+	TransactOpts bind.TransactOpts   &#47;&#47; Transaction auth options to use throughout this session</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ShanghaiRaw is an auto generated low-level Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type ShanghaiRaw struct {</span>
<span class="term-fg32">+	Contract *Shanghai &#47;&#47; Generic contract binding to access the raw methods on</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ShanghaiCallerRaw is an auto generated low-level read-only Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type ShanghaiCallerRaw struct {</span>
<span class="term-fg32">+	Contract *ShanghaiCaller &#47;&#47; Generic read-only contract binding to access the raw methods on</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; ShanghaiTransactorRaw is an auto generated low-level write-only Go binding around an Ethereum contract.</span>
<span class="term-fg32">+type ShanghaiTransactorRaw struct {</span>
<span class="term-fg32">+	Contract *ShanghaiTransactor &#47;&#47; Generic write-only contract binding to access the raw methods on</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewShanghai creates a new instance of Shanghai, bound to a specific deployed contract.</span>
<span class="term-fg32">+func NewShanghai(address common.Address, backend bind.ContractBackend) (*Shanghai, error) {</span>
<span class="term-fg32">+	contract, err := bindShanghai(address, backend, backend, backend)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;Shanghai{ShanghaiCaller: ShanghaiCaller{contract: contract}, ShanghaiTransactor: ShanghaiTransactor{contract: contract}, ShanghaiFilterer: ShanghaiFilterer{contract: contract}}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewShanghaiCaller creates a new read-only instance of Shanghai, bound to a specific deployed contract.</span>
<span class="term-fg32">+func NewShanghaiCaller(address common.Address, caller bind.ContractCaller) (*ShanghaiCaller, error) {</span>
<span class="term-fg32">+	contract, err := bindShanghai(address, caller, nil, nil)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;ShanghaiCaller{contract: contract}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewShanghaiTransactor creates a new write-only instance of Shanghai, bound to a specific deployed contract.</span>
<span class="term-fg32">+func NewShanghaiTransactor(address common.Address, transactor bind.ContractTransactor) (*ShanghaiTransactor, error) {</span>
<span class="term-fg32">+	contract, err := bindShanghai(address, nil, transactor, nil)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;ShanghaiTransactor{contract: contract}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; NewShanghaiFilterer creates a new log filterer instance of Shanghai, bound to a specific deployed contract.</span>
<span class="term-fg32">+func NewShanghaiFilterer(address common.Address, filterer bind.ContractFilterer) (*ShanghaiFilterer, error) {</span>
<span class="term-fg32">+	contract, err := bindShanghai(address, nil, nil, filterer)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return &amp;ShanghaiFilterer{contract: contract}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; bindShanghai binds a generic wrapper to an already deployed contract.</span>
<span class="term-fg32">+func bindShanghai(address common.Address, caller bind.ContractCaller, transactor bind.ContractTransactor, filterer bind.ContractFilterer) (*bind.BoundContract, error) {</span>
<span class="term-fg32">+	parsed, err := ShanghaiMetaData.GetAbi()</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, err</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return bind.NewBoundContract(address, *parsed, caller, transactor, filterer), nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Call invokes the (constant) contract method with params as input values and</span>
<span class="term-fg32">+&#47;&#47; sets the output to result. The result type might be a single field for simple</span>
<span class="term-fg32">+&#47;&#47; returns, a slice of interfaces for anonymous returns and a struct for named</span>
<span class="term-fg32">+&#47;&#47; returns.</span>
<span class="term-fg32">+func (_Shanghai *ShanghaiRaw) Call(opts *bind.CallOpts, result *[]interface{}, method string, params ...interface{}) error {</span>
<span class="term-fg32">+	return _Shanghai.Contract.ShanghaiCaller.contract.Call(opts, result, method, params...)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Transfer initiates a plain transaction to move funds to the contract, calling</span>
<span class="term-fg32">+&#47;&#47; its default method if one is available.</span>
<span class="term-fg32">+func (_Shanghai *ShanghaiRaw) Transfer(opts *bind.TransactOpts) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _Shanghai.Contract.ShanghaiTransactor.contract.Transfer(opts)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Transact invokes the (paid) contract method with params as input values.</span>
<span class="term-fg32">+func (_Shanghai *ShanghaiRaw) Transact(opts *bind.TransactOpts, method string, params ...interface{}) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _Shanghai.Contract.ShanghaiTransactor.contract.Transact(opts, method, params...)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Call invokes the (constant) contract method with params as input values and</span>
<span class="term-fg32">+&#47;&#47; sets the output to result. The result type might be a single field for simple</span>
<span class="term-fg32">+&#47;&#47; returns, a slice of interfaces for anonymous returns and a struct for named</span>
<span class="term-fg32">+&#47;&#47; returns.</span>
<span class="term-fg32">+func (_Shanghai *ShanghaiCallerRaw) Call(opts *bind.CallOpts, result *[]interface{}, method string, params ...interface{}) error {</span>
<span class="term-fg32">+	return _Shanghai.Contract.contract.Call(opts, result, method, params...)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Transfer initiates a plain transaction to move funds to the contract, calling</span>
<span class="term-fg32">+&#47;&#47; its default method if one is available.</span>
<span class="term-fg32">+func (_Shanghai *ShanghaiTransactorRaw) Transfer(opts *bind.TransactOpts) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _Shanghai.Contract.contract.Transfer(opts)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Transact invokes the (paid) contract method with params as input values.</span>
<span class="term-fg32">+func (_Shanghai *ShanghaiTransactorRaw) Transact(opts *bind.TransactOpts, method string, params ...interface{}) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _Shanghai.Contract.contract.Transact(opts, method, params...)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SetCoinbase is a paid mutator transaction binding the contract method 0xde4436a6.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function SetCoinbase() returns()</span>
<span class="term-fg32">+func (_Shanghai *ShanghaiTransactor) SetCoinbase(opts *bind.TransactOpts) (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _Shanghai.contract.Transact(opts, &quot;SetCoinbase&quot;)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SetCoinbase is a paid mutator transaction binding the contract method 0xde4436a6.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function SetCoinbase() returns()</span>
<span class="term-fg32">+func (_Shanghai *ShanghaiSession) SetCoinbase() (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _Shanghai.Contract.SetCoinbase(&amp;_Shanghai.TransactOpts)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; SetCoinbase is a paid mutator transaction binding the contract method 0xde4436a6.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; Solidity: function SetCoinbase() returns()</span>
<span class="term-fg32">+func (_Shanghai *ShanghaiTransactorSession) SetCoinbase() (*types.Transaction, error) {</span>
<span class="term-fg32">+	return _Shanghai.Contract.SetCoinbase(&amp;_Shanghai.TransactOpts)</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-8c98083b165352c22f8ba125" role="button"
                       aria-expanded="false" aria-controls="id-8c98083b165352c22f8ba125">
                        <code>tests/immutable/shanghai/shanghai.sol</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/shanghai/shanghai.sol" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+9</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-8c98083b165352c22f8ba125"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;shanghai&#47;shanghai.sol immutable-geth&#47;tests&#47;immutable&#47;shanghai&#47;shanghai.sol</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..d7fd4c7672af4bc99149f367c2833ac176d64790</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;shanghai&#47;shanghai.sol</span>
<span class="term-fg36">@@ -0,0 +1,10 @@</span>
<span class="term-fg32">+&#47;&#47; SPDX-License-Identifier: MIT</span>
<span class="term-fg32">+pragma solidity ^0.8.20;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+contract Shanghai {</span>
<span class="term-fg32">+    function SetCoinbase() external {</span>
<span class="term-fg32">+        address coinbase = block.coinbase;</span>
<span class="term-fg32">+    }</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; build&#47;bin&#47;abigen --abi .&#47;tests&#47;immutable&#47;shanghai&#47;abi.json --pkg shanghai --type Shanghai --out .&#47;tests&#47;immutable&#47;shanghai&#47;shanghai.go --bin .&#47;tests&#47;immutable&#47;shanghai&#47;bytecode.bin</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-6f80382e38b1b6586c293e6c" role="button"
                       aria-expanded="false" aria-controls="id-6f80382e38b1b6586c293e6c">
                        <code>tests/immutable/utils.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/utils.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+104</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-6f80382e38b1b6586c293e6c"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;utils.go immutable-geth&#47;tests&#47;immutable&#47;utils.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..a99c419a29b8260618fbe7e5a3e05dab5a5cf19f</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;utils.go</span>
<span class="term-fg36">@@ -0,0 +1,104 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package test</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;bytes&quot;</span>
<span class="term-fg32">+	&quot;context&quot;</span>
<span class="term-fg32">+	&quot;crypto&#47;ecdsa&quot;</span>
<span class="term-fg32">+	&quot;fmt&quot;</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+	&quot;os&quot;</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&#47;abi&#47;bind&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;settings&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;crypto&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;ethclient&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;stretchr&#47;testify&#47;require&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; Wallet represents an account&#47;wallet which holds currency</span>
<span class="term-fg32">+type Wallet struct {</span>
<span class="term-fg32">+	key     *ecdsa.PrivateKey</span>
<span class="term-fg32">+	address common.Address</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func loadWalletFromFile(filepath string) (*Wallet, error) {</span>
<span class="term-fg32">+	privKeyFileBytes, err := os.ReadFile(filepath)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;priv key read file: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	privKeyFileBytes = bytes.ReplaceAll(privKeyFileBytes, []byte{&#39;\n&#39;}, []byte{})</span>
<span class="term-fg32">+	return loadWallet(string(privKeyFileBytes))</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func loadWallet(privKeyHex string) (*Wallet, error) {</span>
<span class="term-fg32">+	privKey, err := crypto.HexToECDSA(privKeyHex)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		return nil, fmt.Errorf(&quot;priv key from bytes: %w&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	address := crypto.PubkeyToAddress(privKey.PublicKey)</span>
<span class="term-fg32">+	return &amp;Wallet{key: privKey, address: address}, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func legacyTxOpts(t *testing.T, ctx context.Context, client *ethclient.Client, user *Wallet) *bind.TransactOpts {</span>
<span class="term-fg32">+	t.Helper()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	chainID, err := client.ChainID(ctx)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	opts, err := bind.NewKeyedTransactorWithChainID(user.key, chainID)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Set gasprice above price limit</span>
<span class="term-fg32">+	opts.GasPrice = big.NewInt(0).SetUint64(settings.PriceLimit * 2)</span>
<span class="term-fg32">+	return opts</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func EIP1559TxOpts(t *testing.T, ctx context.Context, client *ethclient.Client, user *Wallet) *bind.TransactOpts {</span>
<span class="term-fg32">+	t.Helper()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	chainID, err := client.ChainID(ctx)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	return &amp;bind.TransactOpts{</span>
<span class="term-fg32">+		Signer: func(a common.Address, t *types.Transaction) (*types.Transaction, error) {</span>
<span class="term-fg32">+			return types.SignTx(t, types.NewLondonSigner(chainID), user.key)</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		From: user.address,</span>
<span class="term-fg32">+		&#47;&#47; Nonce nil, otherwise we need to increment or call PendingNonce</span>
<span class="term-fg32">+		&#47;&#47; between transactions ourselves</span>
<span class="term-fg32">+		Nonce: nil,</span>
<span class="term-fg32">+		&#47;&#47; Leaving these as nil allows go-ethereum to calculate the values</span>
<span class="term-fg32">+		&#47;&#47; based on suggested prices from the chain</span>
<span class="term-fg32">+		GasTipCap: nil,</span>
<span class="term-fg32">+		GasFeeCap: nil,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func genRandPubKey(t *testing.T) common.Address {</span>
<span class="term-fg32">+	t.Helper()</span>
<span class="term-fg32">+	privateKey, err := crypto.GenerateKey()</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	publicKey := privateKey.Public()</span>
<span class="term-fg32">+	publicKeyECDSA, ok := publicKey.(*ecdsa.PublicKey)</span>
<span class="term-fg32">+	require.True(t, ok)</span>
<span class="term-fg32">+	return crypto.PubkeyToAddress(*publicKeyECDSA)</span>
<span class="term-fg32">+}</span></div>
    </div>

            
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-b45330f062053817e85c42a5"role="button" aria-expanded="false" aria-controls="id-b45330f062053817e85c42a5">
        
            <div class="col-12 col-md-12 col-lg-6 col-xl-6 text-start"><h2>Configurations</h2></div>
        

        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2">
            <div class="row line-stat">
                
                
            </div>
        </div>
        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2 ">
            <div class="row line-stat">
                
                    <div class="text-end"><span class="text-success">+544</span></div>
                    <div class="text-start"><span class="text-danger">-0</span></div>
                
                
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-b45330f062053817e85c42a5">
        <div><p>Miscellaneous configuration files for Immutable geth.</p>
</div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-03a7f7fbdd00b23f32a79c19" role="button"
                       aria-expanded="false" aria-controls="id-03a7f7fbdd00b23f32a79c19">
                        <code>cmd/geth/immutable/settings/genesis/devnet.json</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/geth/immutable/settings/genesis/devnet.json" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+121</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-03a7f7fbdd00b23f32a79c19"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;settings&#47;genesis&#47;devnet.json immutable-geth&#47;cmd&#47;geth&#47;immutable&#47;settings&#47;genesis&#47;devnet.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..ece27ca71be1b6fdee35667979c352330ea055e6</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;geth&#47;immutable&#47;settings&#47;genesis&#47;devnet.json</span>
<span class="term-fg36">@@ -0,0 +1,122 @@</span>
<span class="term-fg32">+{</span>
<span class="term-fg32">+    &quot;config&quot;: {</span>
<span class="term-fg32">+        &quot;chainId&quot;: 15003,</span>
<span class="term-fg32">+        &quot;homesteadBlock&quot;: 0,</span>
<span class="term-fg32">+        &quot;eip150Block&quot;: 0,</span>
<span class="term-fg32">+        &quot;eip155Block&quot;: 0,</span>
<span class="term-fg32">+        &quot;eip158Block&quot;: 0,</span>
<span class="term-fg32">+        &quot;byzantiumBlock&quot;: 0,</span>
<span class="term-fg32">+        &quot;constantinopleBlock&quot;: 0,</span>
<span class="term-fg32">+        &quot;petersburgBlock&quot;: 0,</span>
<span class="term-fg32">+        &quot;istanbulBlock&quot;: 0,</span>
<span class="term-fg32">+        &quot;muirGlacierBlock&quot;: 0,</span>
<span class="term-fg32">+        &quot;berlinBlock&quot;: 0,</span>
<span class="term-fg32">+        &quot;londonBlock&quot;: 0,</span>
<span class="term-fg32">+        &quot;arrowGlacierBlock&quot;: 0,</span>
<span class="term-fg32">+        &quot;grayGlacierBlock&quot;: 0,</span>
<span class="term-fg32">+        &quot;prevrandaoTime&quot;: 1709067600,</span>
<span class="term-fg32">+        &quot;shanghaiTime&quot;: 1709067600,</span>
<span class="term-fg32">+        &quot;cancunTime&quot;: 1724796000,</span>
<span class="term-fg32">+        &quot;clique&quot;: {</span>
<span class="term-fg32">+            &quot;period&quot;: 2,</span>
<span class="term-fg32">+            &quot;epoch&quot;: 30000</span>
<span class="term-fg32">+        },</span>
<span class="term-fg32">+        &quot;isReorgBlocked&quot;: true</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;nonce&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+    &quot;extraData&quot;: &quot;0x000000000000000000000000000000000000000000000000000000000000000092e13fb4e00a5daecf5b61553b678ad56e6985150000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;0x5f5e100&quot;,</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;0x1&quot;,</span>
<span class="term-fg32">+    &quot;mixHash&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+    &quot;coinbase&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+    &quot;alloc&quot;: {</span>
<span class="term-fg32">+        &quot;000000000013b7b1b08b3c8efe02e866f746bd38&quot;: {</span>
<span class="term-fg32">+            &quot;balance&quot;: &quot;0x6765c793fa10079d0000000&quot;</span>
<span class="term-fg32">+        },</span>
<span class="term-fg32">+        &quot;0ccb0a3fc5ca38fcd9ffd8a667cb83e3194250d7&quot;: {</span>
<span class="term-fg32">+            &quot;balance&quot;: &quot;0x6765c793fa10079d0000000&quot;</span>
<span class="term-fg32">+        },</span>
<span class="term-fg32">+        &quot;2e969d22e6654e064f461cf8b1314cc0864a4914&quot;: {</span>
<span class="term-fg32">+            &quot;balance&quot;: &quot;0x6765c793fa10079d0000000&quot;</span>
<span class="term-fg32">+        },</span>
<span class="term-fg32">+        &quot;340bc2c77514ede2a23fd4f42f411a8e351d8ee6&quot;: {</span>
<span class="term-fg32">+            &quot;balance&quot;: &quot;0x6765c793fa10079d0000000&quot;</span>
<span class="term-fg32">+        },</span>
<span class="term-fg32">+        &quot;3e290fe8f2a5db60a81cb47ea296e0299048dd71&quot;: {</span>
<span class="term-fg32">+            &quot;balance&quot;: &quot;0x6765c793fa10079d0000000&quot;</span>
<span class="term-fg32">+        },</span>
<span class="term-fg32">+        &quot;4a73506a31db769ac442b17ca9a1679f44757bbf&quot;: {</span>
<span class="term-fg32">+            &quot;balance&quot;: &quot;0x6765c793fa10079d0000000&quot;</span>
<span class="term-fg32">+        },</span>
<span class="term-fg32">+        &quot;4aedf28a437b94749037cc39f83f4422469cf2f7&quot;: {</span>
<span class="term-fg32">+            &quot;balance&quot;: &quot;0x6765c793fa10079d0000000&quot;</span>
<span class="term-fg32">+        },</span>
<span class="term-fg32">+        &quot;5abfc3e307b037325bfc6988ae265dcb211ec533&quot;: {</span>
<span class="term-fg32">+            &quot;balance&quot;: &quot;0x6765c793fa10079d0000000&quot;</span>
<span class="term-fg32">+        },</span>
<span class="term-fg32">+        &quot;7442ed1e3c9fd421f47d12a2742aff5dafbf43f8&quot;: {</span>
<span class="term-fg32">+            &quot;balance&quot;: &quot;0x6765c793fa10079d0000000&quot;</span>
<span class="term-fg32">+        },</span>
<span class="term-fg32">+        &quot;784578949a4a50dea641fb15dd2b11c72e76919a&quot;: {</span>
<span class="term-fg32">+            &quot;balance&quot;: &quot;0x6765c793fa10079d0000000&quot;</span>
<span class="term-fg32">+        },</span>
<span class="term-fg32">+        &quot;7c3e6ce6fd293fc66d9d73d49fd546cce1e19f0e&quot;: {</span>
<span class="term-fg32">+            &quot;balance&quot;: &quot;0x6765c793fa10079d0000000&quot;</span>
<span class="term-fg32">+        },</span>
<span class="term-fg32">+        &quot;8318a871cc140d9f77a1999f84875ac36eecc04e&quot;: {</span>
<span class="term-fg32">+            &quot;balance&quot;: &quot;0x6765c793fa10079d0000000&quot;</span>
<span class="term-fg32">+        },</span>
<span class="term-fg32">+        &quot;9c1634bebc88653d2aebf4c14a3031f62092b1d9&quot;: {</span>
<span class="term-fg32">+            &quot;balance&quot;: &quot;0x6765c793fa10079d0000000&quot;</span>
<span class="term-fg32">+        },</span>
<span class="term-fg32">+        &quot;a6c368164eb270c31592c1830ed25c2bf5d34bae&quot;: {</span>
<span class="term-fg32">+            &quot;balance&quot;: &quot;0x6765c793fa10079d0000000&quot;</span>
<span class="term-fg32">+        },</span>
<span class="term-fg32">+        &quot;b3343666188a694120c18c4985c57e4c0913a6f0&quot;: {</span>
<span class="term-fg32">+            &quot;balance&quot;: &quot;0x6765c793fa10079d0000000&quot;</span>
<span class="term-fg32">+        },</span>
<span class="term-fg32">+        &quot;c606830d8341bc9f5f5dd7615e9313d2655b505d&quot;: {</span>
<span class="term-fg32">+            &quot;balance&quot;: &quot;0x6765c793fa10079d0000000&quot;</span>
<span class="term-fg32">+        },</span>
<span class="term-fg32">+        &quot;c8714f989ce817e5d21349888077aa5db4a9bcf6&quot;: {</span>
<span class="term-fg32">+            &quot;balance&quot;: &quot;0x6765c793fa10079d0000000&quot;</span>
<span class="term-fg32">+        },</span>
<span class="term-fg32">+        &quot;cc5c8cea877f2f351f38c190867bbd31fafadd22&quot;: {</span>
<span class="term-fg32">+            &quot;balance&quot;: &quot;0x6765c793fa10079d0000000&quot;</span>
<span class="term-fg32">+        },</span>
<span class="term-fg32">+        &quot;d509997ab62fda51c32e64e69fb090df8894105e&quot;: {</span>
<span class="term-fg32">+            &quot;balance&quot;: &quot;0x6765c793fa10079d0000000&quot;</span>
<span class="term-fg32">+        },</span>
<span class="term-fg32">+        &quot;d9275eb8276e14b9e28d5f9b12e90ddaaf3586ef&quot;: {</span>
<span class="term-fg32">+            &quot;balance&quot;: &quot;0x6765c793fa10079d0000000&quot;</span>
<span class="term-fg32">+        },</span>
<span class="term-fg32">+        &quot;deadc0de8a3b037925a895843f96b0c525fbc31f&quot;: {</span>
<span class="term-fg32">+            &quot;balance&quot;: &quot;0x6765c793fa10079d0000000&quot;</span>
<span class="term-fg32">+        },</span>
<span class="term-fg32">+        &quot;e567ea84e1eb3ffdc8f5aa420bf14a16eee6a809&quot;: {</span>
<span class="term-fg32">+            &quot;balance&quot;: &quot;0x6765c793fa10079d0000000&quot;</span>
<span class="term-fg32">+        },</span>
<span class="term-fg32">+        &quot;eac347177dba4a190b632c7d9b8da2abff57c772&quot;: {</span>
<span class="term-fg32">+            &quot;balance&quot;: &quot;0x6765c793fa10079d0000000&quot;</span>
<span class="term-fg32">+        },</span>
<span class="term-fg32">+        &quot;eb7ffb9fb0c80437120f6f97ede60ab59055eae0&quot;: {</span>
<span class="term-fg32">+            &quot;balance&quot;: &quot;0x6765c793fa10079d0000000&quot;</span>
<span class="term-fg32">+        },</span>
<span class="term-fg32">+        &quot;ebbf4c07a63986204c37cc5a188aabf53564c583&quot;: {</span>
<span class="term-fg32">+            &quot;balance&quot;: &quot;0x6765c793fa10079d0000000&quot;</span>
<span class="term-fg32">+        },</span>
<span class="term-fg32">+        &quot;efe12952541356ffc969a343a81d1ce7d2806179&quot;: {</span>
<span class="term-fg32">+            &quot;balance&quot;: &quot;0x6765c793fa10079d0000000&quot;</span>
<span class="term-fg32">+        },</span>
<span class="term-fg32">+        &quot;f6372939ce2d14a68a629b8e4785e9dcb4eda0cf&quot;: {</span>
<span class="term-fg32">+            &quot;balance&quot;: &quot;0x6765c793fa10079d0000000&quot;</span>
<span class="term-fg32">+        }</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+    &quot;gasUsed&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+    &quot;parentHash&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+    &quot;baseFeePerGas&quot;: null,</span>
<span class="term-fg32">+    &quot;excessBlobGas&quot;: null,</span>
<span class="term-fg32">+    &quot;blobGasUsed&quot;: null</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-c7ea1ddbf547857f65ed591b" role="button"
                       aria-expanded="false" aria-controls="id-c7ea1ddbf547857f65ed591b">
                        <code>cmd/geth/immutable/settings/genesis/mainnet.json</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/geth/immutable/settings/genesis/mainnet.json" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+43</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-c7ea1ddbf547857f65ed591b"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;settings&#47;genesis&#47;mainnet.json immutable-geth&#47;cmd&#47;geth&#47;immutable&#47;settings&#47;genesis&#47;mainnet.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..3b71328a696bdc3cf4983fe1fe83ff299814f9b8</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;geth&#47;immutable&#47;settings&#47;genesis&#47;mainnet.json</span>
<span class="term-fg36">@@ -0,0 +1,44 @@</span>
<span class="term-fg32">+{</span>
<span class="term-fg32">+    &quot;config&quot;: {</span>
<span class="term-fg32">+        &quot;chainId&quot;: 13371,</span>
<span class="term-fg32">+        &quot;homesteadBlock&quot;: 0,</span>
<span class="term-fg32">+        &quot;eip150Block&quot;: 0,</span>
<span class="term-fg32">+        &quot;eip155Block&quot;: 0,</span>
<span class="term-fg32">+        &quot;eip158Block&quot;: 0,</span>
<span class="term-fg32">+        &quot;byzantiumBlock&quot;: 0,</span>
<span class="term-fg32">+        &quot;constantinopleBlock&quot;: 0,</span>
<span class="term-fg32">+        &quot;petersburgBlock&quot;: 0,</span>
<span class="term-fg32">+        &quot;istanbulBlock&quot;: 0,</span>
<span class="term-fg32">+        &quot;muirGlacierBlock&quot;: 0,</span>
<span class="term-fg32">+        &quot;berlinBlock&quot;: 0,</span>
<span class="term-fg32">+        &quot;londonBlock&quot;: 0,</span>
<span class="term-fg32">+        &quot;arrowGlacierBlock&quot;: 0,</span>
<span class="term-fg32">+        &quot;grayGlacierBlock&quot;: 0,</span>
<span class="term-fg32">+        &quot;prevrandaoTime&quot;: 1710899402,</span>
<span class="term-fg32">+        &quot;shanghaiTime&quot;: 1711490400,</span>
<span class="term-fg32">+        &quot;cancunTime&quot;: 1728338400,</span>
<span class="term-fg32">+        &quot;clique&quot;: {</span>
<span class="term-fg32">+            &quot;period&quot;: 2,</span>
<span class="term-fg32">+            &quot;epoch&quot;: 30000</span>
<span class="term-fg32">+        },</span>
<span class="term-fg32">+        &quot;isReorgBlocked&quot;: true</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;nonce&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+    &quot;extraData&quot;: &quot;0x000000000000000000000000000000000000000000000000000000000000000055e2ebc94b3314d387f423ef4424a95547f3f8c40000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;0x5f5e100&quot;,</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;0x1&quot;,</span>
<span class="term-fg32">+    &quot;mixHash&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+    &quot;coinbase&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+    &quot;alloc&quot;: {</span>
<span class="term-fg32">+        &quot;dda0d9448ebe3ea43afece5fa6401f5795c19333&quot;: {</span>
<span class="term-fg32">+            &quot;balance&quot;: &quot;0x6765c793fa10079d0000000&quot;</span>
<span class="term-fg32">+        }</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+    &quot;gasUsed&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+    &quot;parentHash&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+    &quot;baseFeePerGas&quot;: null,</span>
<span class="term-fg32">+    &quot;excessBlobGas&quot;: null,</span>
<span class="term-fg32">+    &quot;blobGasUsed&quot;: null</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-45c4044b9d12b0ea77ff395d" role="button"
                       aria-expanded="false" aria-controls="id-45c4044b9d12b0ea77ff395d">
                        <code>cmd/geth/immutable/settings/genesis/testnet.json</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/geth/immutable/settings/genesis/testnet.json" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+43</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-45c4044b9d12b0ea77ff395d"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;settings&#47;genesis&#47;testnet.json immutable-geth&#47;cmd&#47;geth&#47;immutable&#47;settings&#47;genesis&#47;testnet.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..c7dd17566bc45f655330a084dbe8d13bf11e8ad8</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;geth&#47;immutable&#47;settings&#47;genesis&#47;testnet.json</span>
<span class="term-fg36">@@ -0,0 +1,44 @@</span>
<span class="term-fg32">+{</span>
<span class="term-fg32">+    &quot;config&quot;: {</span>
<span class="term-fg32">+        &quot;chainId&quot;: 13473,</span>
<span class="term-fg32">+        &quot;homesteadBlock&quot;: 0,</span>
<span class="term-fg32">+        &quot;eip150Block&quot;: 0,</span>
<span class="term-fg32">+        &quot;eip155Block&quot;: 0,</span>
<span class="term-fg32">+        &quot;eip158Block&quot;: 0,</span>
<span class="term-fg32">+        &quot;byzantiumBlock&quot;: 0,</span>
<span class="term-fg32">+        &quot;constantinopleBlock&quot;: 0,</span>
<span class="term-fg32">+        &quot;petersburgBlock&quot;: 0,</span>
<span class="term-fg32">+        &quot;istanbulBlock&quot;: 0,</span>
<span class="term-fg32">+        &quot;muirGlacierBlock&quot;: 0,</span>
<span class="term-fg32">+        &quot;berlinBlock&quot;: 0,</span>
<span class="term-fg32">+        &quot;londonBlock&quot;: 0,</span>
<span class="term-fg32">+        &quot;arrowGlacierBlock&quot;: 0,</span>
<span class="term-fg32">+        &quot;grayGlacierBlock&quot;: 0,</span>
<span class="term-fg32">+        &quot;prevrandaoTime&quot;: 1710280800,</span>
<span class="term-fg32">+        &quot;shanghaiTime&quot;: 1710280800,</span>
<span class="term-fg32">+        &quot;cancunTime&quot;: 1727128800,</span>
<span class="term-fg32">+        &quot;clique&quot;: {</span>
<span class="term-fg32">+            &quot;period&quot;: 2,</span>
<span class="term-fg32">+            &quot;epoch&quot;: 30000</span>
<span class="term-fg32">+        },</span>
<span class="term-fg32">+        &quot;isReorgBlocked&quot;: true</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;nonce&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+    &quot;timestamp&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+    &quot;extraData&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000512069234755cc4bb2cc59b79b7541ed5a03babb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+    &quot;gasLimit&quot;: &quot;0x5f5e100&quot;,</span>
<span class="term-fg32">+    &quot;difficulty&quot;: &quot;0x1&quot;,</span>
<span class="term-fg32">+    &quot;mixHash&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+    &quot;coinbase&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+    &quot;alloc&quot;: {</span>
<span class="term-fg32">+        &quot;e567ea84e1eb3ffdc8f5aa420bf14a16eee6a809&quot;: {</span>
<span class="term-fg32">+            &quot;balance&quot;: &quot;0x6765c793fa10079d0000000&quot;</span>
<span class="term-fg32">+        }</span>
<span class="term-fg32">+    },</span>
<span class="term-fg32">+    &quot;number&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+    &quot;gasUsed&quot;: &quot;0x0&quot;,</span>
<span class="term-fg32">+    &quot;parentHash&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg32">+    &quot;baseFeePerGas&quot;: null,</span>
<span class="term-fg32">+    &quot;excessBlobGas&quot;: null,</span>
<span class="term-fg32">+    &quot;blobGasUsed&quot;: null</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-156c630977053131562bdf65" role="button"
                       aria-expanded="false" aria-controls="id-156c630977053131562bdf65">
                        <code>immutable/config/mainnet-public.toml</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/immutable/config/mainnet-public.toml" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+88</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-156c630977053131562bdf65"><span class="term-fg1">diff --git go-ethereum&#47;immutable&#47;config&#47;mainnet-public.toml immutable-geth&#47;immutable&#47;config&#47;mainnet-public.toml</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..4e7aa117bb6f20a5799a8ba9a2ac634e4144010b</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;immutable&#47;config&#47;mainnet-public.toml</span>
<span class="term-fg36">@@ -0,0 +1,88 @@</span>
<span class="term-fg32">+[Eth]</span>
<span class="term-fg32">+NetworkId = 13371</span>
<span class="term-fg32">+SyncMode = &quot;full&quot;</span>
<span class="term-fg32">+EthDiscoveryURLs = []</span>
<span class="term-fg32">+SnapDiscoveryURLs = []</span>
<span class="term-fg32">+NoPruning = true</span>
<span class="term-fg32">+NoPrefetch = false</span>
<span class="term-fg32">+TxLookupLimit = 2350000</span>
<span class="term-fg32">+TransactionHistory = 2350000</span>
<span class="term-fg32">+StateScheme = &quot;hash&quot;</span>
<span class="term-fg32">+DatabaseCache = 512</span>
<span class="term-fg32">+DatabaseFreezer = &quot;&quot;</span>
<span class="term-fg32">+TrieCleanCache = 256</span>
<span class="term-fg32">+TrieDirtyCache = 256</span>
<span class="term-fg32">+TrieTimeout = 3600000000000</span>
<span class="term-fg32">+SnapshotCache = 0</span>
<span class="term-fg32">+Preimages = false</span>
<span class="term-fg32">+FilterLogCacheSize = 32</span>
<span class="term-fg32">+EnablePreimageRecording = false</span>
<span class="term-fg32">+RPCGasCap = 50000000</span>
<span class="term-fg32">+RPCEVMTimeout = 5000000000</span>
<span class="term-fg32">+RPCTxFeeCap = 0e+00</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+[Eth.Miner]</span>
<span class="term-fg32">+GasFloor = 0</span>
<span class="term-fg32">+GasCeil = 30000000</span>
<span class="term-fg32">+GasPrice = 10000000000</span>
<span class="term-fg32">+Recommit = 999999999000000000</span>
<span class="term-fg32">+NewPayloadTimeout = 2000000000</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+[Eth.TxPool]</span>
<span class="term-fg32">+Locals = []</span>
<span class="term-fg32">+NoLocals = true</span>
<span class="term-fg32">+Journal = &quot;transactions.rlp&quot;</span>
<span class="term-fg32">+Rejournal = 3600000000000</span>
<span class="term-fg32">+PriceLimit = 10000000000</span>
<span class="term-fg32">+PriceBump = 10</span>
<span class="term-fg32">+AccountSlots = 16</span>
<span class="term-fg32">+GlobalSlots = 5120</span>
<span class="term-fg32">+AccountQueue = 64</span>
<span class="term-fg32">+GlobalQueue = 1024</span>
<span class="term-fg32">+Lifetime = 3600000000000</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+[Eth.BlobPool]</span>
<span class="term-fg32">+Datadir = &quot;blobpool&quot;</span>
<span class="term-fg32">+Datacap = 1</span>
<span class="term-fg32">+PriceBump = 100</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+[Eth.GPO]</span>
<span class="term-fg32">+Blocks = 20</span>
<span class="term-fg32">+Percentile = 60</span>
<span class="term-fg32">+MaxHeaderHistory = 1024</span>
<span class="term-fg32">+MaxBlockHistory = 1024</span>
<span class="term-fg32">+MaxPrice = 500000000000</span>
<span class="term-fg32">+IgnorePrice = 2</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+[Node]</span>
<span class="term-fg32">+DataDir = &quot;&quot;</span>
<span class="term-fg32">+IPCPath = &quot;geth.ipc&quot;</span>
<span class="term-fg32">+HTTPHost = &quot;&quot;</span>
<span class="term-fg32">+HTTPModules = []</span>
<span class="term-fg32">+WSHost = &quot;&quot;</span>
<span class="term-fg32">+WSModules = []</span>
<span class="term-fg32">+AllowUnprotectedTxs = false</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+[Node.P2P]</span>
<span class="term-fg32">+MaxPeers = 100</span>
<span class="term-fg32">+NoDiscovery = false</span>
<span class="term-fg32">+BootstrapNodes = []</span>
<span class="term-fg32">+StaticNodes = [</span>
<span class="term-fg32">+    &quot;enode:&#47;&#47;55b31c45e8c1dbd3e6f551dc9b5ade80eed38e754f033348bd479d98b1db1aee298d93af5c0992f50a7c5cdb686790ade04c584018b2634da193bc8c42d72209@partner-public-0.p2p.immutable.com:30300&quot;,</span>
<span class="term-fg32">+    &quot;enode:&#47;&#47;2f421178a1b51a1bf9b10dc7e7a0e7cb64446e11b5c9a6bf9697fe619918f3835435833d5df7354d3e43382748fe29f5da3e4e7242fa58fa45af493c421e0cda@partner-public-1.p2p.immutable.com:30300&quot;,</span>
<span class="term-fg32">+    &quot;enode:&#47;&#47;7864b41535dbbaa31edc4db45157ec8967ac1f9fcea39b4ad17d4506f0618e38f339a2717b39c3d1198dec0154316c6a05408267eeb4d5d8973c6966a21dac90@partner-public-2.p2p.immutable.com:30300&quot;,</span>
<span class="term-fg32">+]</span>
<span class="term-fg32">+TrustedNodes = [</span>
<span class="term-fg32">+    &quot;enode:&#47;&#47;55b31c45e8c1dbd3e6f551dc9b5ade80eed38e754f033348bd479d98b1db1aee298d93af5c0992f50a7c5cdb686790ade04c584018b2634da193bc8c42d72209@partner-public-0.p2p.immutable.com:30300&quot;,</span>
<span class="term-fg32">+    &quot;enode:&#47;&#47;2f421178a1b51a1bf9b10dc7e7a0e7cb64446e11b5c9a6bf9697fe619918f3835435833d5df7354d3e43382748fe29f5da3e4e7242fa58fa45af493c421e0cda@partner-public-1.p2p.immutable.com:30300&quot;,</span>
<span class="term-fg32">+    &quot;enode:&#47;&#47;7864b41535dbbaa31edc4db45157ec8967ac1f9fcea39b4ad17d4506f0618e38f339a2717b39c3d1198dec0154316c6a05408267eeb4d5d8973c6966a21dac90@partner-public-2.p2p.immutable.com:30300&quot;,</span>
<span class="term-fg32">+]</span>
<span class="term-fg32">+ListenAddr = &quot;&quot;</span>
<span class="term-fg32">+DiscAddr = &quot;&quot;</span>
<span class="term-fg32">+EnableMsgEvents = false</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+[Node.HTTPTimeouts]</span>
<span class="term-fg32">+ReadTimeout = 0</span>
<span class="term-fg32">+ReadHeaderTimeout = 0</span>
<span class="term-fg32">+WriteTimeout = 0</span>
<span class="term-fg32">+IdleTimeout = 0</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-ef1ac26a098eab5618f0509c" role="button"
                       aria-expanded="false" aria-controls="id-ef1ac26a098eab5618f0509c">
                        <code>immutable/config/mainnet.toml</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/immutable/config/mainnet.toml" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+80</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-ef1ac26a098eab5618f0509c"><span class="term-fg1">diff --git go-ethereum&#47;immutable&#47;config&#47;mainnet.toml immutable-geth&#47;immutable&#47;config&#47;mainnet.toml</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..a2006669597237f5d61d4a751c0e96dfcec453af</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;immutable&#47;config&#47;mainnet.toml</span>
<span class="term-fg36">@@ -0,0 +1,80 @@</span>
<span class="term-fg32">+[Eth]</span>
<span class="term-fg32">+NetworkId = 13371</span>
<span class="term-fg32">+SyncMode = &quot;full&quot;</span>
<span class="term-fg32">+EthDiscoveryURLs = []</span>
<span class="term-fg32">+SnapDiscoveryURLs = []</span>
<span class="term-fg32">+NoPruning = true</span>
<span class="term-fg32">+NoPrefetch = false</span>
<span class="term-fg32">+TxLookupLimit = 2350000</span>
<span class="term-fg32">+TransactionHistory = 2350000</span>
<span class="term-fg32">+StateScheme = &quot;hash&quot;</span>
<span class="term-fg32">+DatabaseCache = 512</span>
<span class="term-fg32">+DatabaseFreezer = &quot;&quot;</span>
<span class="term-fg32">+TrieCleanCache = 256</span>
<span class="term-fg32">+TrieDirtyCache = 256</span>
<span class="term-fg32">+TrieTimeout = 3600000000000</span>
<span class="term-fg32">+SnapshotCache = 0</span>
<span class="term-fg32">+Preimages = false</span>
<span class="term-fg32">+FilterLogCacheSize = 32</span>
<span class="term-fg32">+EnablePreimageRecording = false</span>
<span class="term-fg32">+RPCGasCap = 50000000</span>
<span class="term-fg32">+RPCEVMTimeout = 5000000000</span>
<span class="term-fg32">+RPCTxFeeCap = 0e+00</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+[Eth.TxPool]</span>
<span class="term-fg32">+Locals = []</span>
<span class="term-fg32">+NoLocals = true</span>
<span class="term-fg32">+Journal = &quot;transactions.rlp&quot;</span>
<span class="term-fg32">+Rejournal = 3600000000000</span>
<span class="term-fg32">+PriceLimit = 10000000000</span>
<span class="term-fg32">+PriceBump = 10</span>
<span class="term-fg32">+AccountSlots = 16</span>
<span class="term-fg32">+GlobalSlots = 5120</span>
<span class="term-fg32">+AccountQueue = 64</span>
<span class="term-fg32">+GlobalQueue = 1024</span>
<span class="term-fg32">+Lifetime = 3600000000000</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+[Eth.BlobPool]</span>
<span class="term-fg32">+Datadir = &quot;blobpool&quot;</span>
<span class="term-fg32">+Datacap = 0</span>
<span class="term-fg32">+PriceBump = 100</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+[Eth.GPO]</span>
<span class="term-fg32">+Blocks = 20</span>
<span class="term-fg32">+Percentile = 60</span>
<span class="term-fg32">+MaxHeaderHistory = 1024</span>
<span class="term-fg32">+MaxBlockHistory = 1024</span>
<span class="term-fg32">+MaxPrice = 500000000000</span>
<span class="term-fg32">+IgnorePrice = 2</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+[Node]</span>
<span class="term-fg32">+DataDir = &quot;&quot;</span>
<span class="term-fg32">+IPCPath = &quot;geth.ipc&quot;</span>
<span class="term-fg32">+HTTPHost = &quot;&quot;</span>
<span class="term-fg32">+HTTPModules = []</span>
<span class="term-fg32">+WSHost = &quot;&quot;</span>
<span class="term-fg32">+WSModules = []</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+[Node.P2P]</span>
<span class="term-fg32">+MaxPeers = 100</span>
<span class="term-fg32">+NoDiscovery = true</span>
<span class="term-fg32">+BootstrapNodes = []</span>
<span class="term-fg32">+StaticNodes = [</span>
<span class="term-fg32">+&quot;enode:&#47;&#47;eb7397171926b31cebc7a6036a5c21060390b4ccdefcf6bad4a047b99a63acc6ed9c9aee057aea0107bb40e1595158d1035de9b5290985dc3462de809fc592ac@partner-0.p2p.immutable.com:30300&quot;,</span>
<span class="term-fg32">+&quot;enode:&#47;&#47;221c21671dd3fcb20caebec9f4caf3d282202d5184e583ea9c1502204822d8ee6b4919588745d71ef21f223f2167c377ac70cf7dd4c7bc41436ef359c85ebe00@partner-1.p2p.immutable.com:30300&quot;,</span>
<span class="term-fg32">+&quot;enode:&#47;&#47;7fc82edda3dd04b4e50f14e3e68a186520c65e69eda04bfc649725463e57c9f1120e495f57d4a7f7de848a921e35c6fb4ba122867bf6765c72b648f2ac2b1d9e@partner-2.p2p.immutable.com:30300&quot;</span>
<span class="term-fg32">+]</span>
<span class="term-fg32">+TrustedNodes = [</span>
<span class="term-fg32">+&quot;enode:&#47;&#47;eb7397171926b31cebc7a6036a5c21060390b4ccdefcf6bad4a047b99a63acc6ed9c9aee057aea0107bb40e1595158d1035de9b5290985dc3462de809fc592ac@partner-0.p2p.immutable.com:30300&quot;,</span>
<span class="term-fg32">+&quot;enode:&#47;&#47;221c21671dd3fcb20caebec9f4caf3d282202d5184e583ea9c1502204822d8ee6b4919588745d71ef21f223f2167c377ac70cf7dd4c7bc41436ef359c85ebe00@partner-1.p2p.immutable.com:30300&quot;,</span>
<span class="term-fg32">+&quot;enode:&#47;&#47;7fc82edda3dd04b4e50f14e3e68a186520c65e69eda04bfc649725463e57c9f1120e495f57d4a7f7de848a921e35c6fb4ba122867bf6765c72b648f2ac2b1d9e@partner-2.p2p.immutable.com:30300&quot;</span>
<span class="term-fg32">+]</span>
<span class="term-fg32">+ListenAddr = &quot;&quot;</span>
<span class="term-fg32">+DiscAddr = &quot;&quot;</span>
<span class="term-fg32">+EnableMsgEvents = false</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+[Node.HTTPTimeouts]</span>
<span class="term-fg32">+ReadTimeout = 0</span>
<span class="term-fg32">+ReadHeaderTimeout = 0</span>
<span class="term-fg32">+WriteTimeout = 0</span>
<span class="term-fg32">+IdleTimeout = 0</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-38e8d7d928a89c48d3d21585" role="button"
                       aria-expanded="false" aria-controls="id-38e8d7d928a89c48d3d21585">
                        <code>immutable/config/testnet-public.toml</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/immutable/config/testnet-public.toml" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+89</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-38e8d7d928a89c48d3d21585"><span class="term-fg1">diff --git go-ethereum&#47;immutable&#47;config&#47;testnet-public.toml immutable-geth&#47;immutable&#47;config&#47;testnet-public.toml</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..e7bac56e3e2cf51067f05519de9d491737a38e5b</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;immutable&#47;config&#47;testnet-public.toml</span>
<span class="term-fg36">@@ -0,0 +1,89 @@</span>
<span class="term-fg32">+[Eth]</span>
<span class="term-fg32">+NetworkId = 13473</span>
<span class="term-fg32">+SyncMode = &quot;full&quot;</span>
<span class="term-fg32">+EthDiscoveryURLs = []</span>
<span class="term-fg32">+SnapDiscoveryURLs = []</span>
<span class="term-fg32">+NoPruning = true</span>
<span class="term-fg32">+NoPrefetch = false</span>
<span class="term-fg32">+TxLookupLimit = 2350000</span>
<span class="term-fg32">+TransactionHistory = 2350000</span>
<span class="term-fg32">+StateScheme = &quot;hash&quot;</span>
<span class="term-fg32">+DatabaseCache = 512</span>
<span class="term-fg32">+DatabaseFreezer = &quot;&quot;</span>
<span class="term-fg32">+TrieCleanCache = 256</span>
<span class="term-fg32">+TrieDirtyCache = 256</span>
<span class="term-fg32">+TrieTimeout = 3600000000000</span>
<span class="term-fg32">+SnapshotCache = 0</span>
<span class="term-fg32">+Preimages = false</span>
<span class="term-fg32">+FilterLogCacheSize = 32</span>
<span class="term-fg32">+EnablePreimageRecording = false</span>
<span class="term-fg32">+RPCGasCap = 50000000</span>
<span class="term-fg32">+RPCEVMTimeout = 5000000000</span>
<span class="term-fg32">+RPCTxFeeCap = 0e+00</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+[Eth.Miner]</span>
<span class="term-fg32">+GasFloor = 0</span>
<span class="term-fg32">+GasCeil = 30000000</span>
<span class="term-fg32">+GasPrice = 10000000000</span>
<span class="term-fg32">+Recommit = 999999999000000000</span>
<span class="term-fg32">+NewPayloadTimeout = 2000000000</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+[Eth.TxPool]</span>
<span class="term-fg32">+Locals = []</span>
<span class="term-fg32">+NoLocals = true</span>
<span class="term-fg32">+Journal = &quot;transactions.rlp&quot;</span>
<span class="term-fg32">+Rejournal = 3600000000000</span>
<span class="term-fg32">+PriceLimit = 10000000000</span>
<span class="term-fg32">+PriceBump = 10</span>
<span class="term-fg32">+AccountSlots = 16</span>
<span class="term-fg32">+GlobalSlots = 5120</span>
<span class="term-fg32">+AccountQueue = 64</span>
<span class="term-fg32">+GlobalQueue = 1024</span>
<span class="term-fg32">+Lifetime = 3600000000000</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+[Eth.BlobPool]</span>
<span class="term-fg32">+Datadir = &quot;blobpool&quot;</span>
<span class="term-fg32">+Datacap = 1</span>
<span class="term-fg32">+PriceBump = 100</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+[Eth.GPO]</span>
<span class="term-fg32">+Blocks = 20</span>
<span class="term-fg32">+Percentile = 60</span>
<span class="term-fg32">+MaxHeaderHistory = 1024</span>
<span class="term-fg32">+MaxBlockHistory = 1024</span>
<span class="term-fg32">+MaxPrice = 500000000000</span>
<span class="term-fg32">+IgnorePrice = 2</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+[Node]</span>
<span class="term-fg32">+DataDir = &quot;&quot;</span>
<span class="term-fg32">+IPCPath = &quot;geth.ipc&quot;</span>
<span class="term-fg32">+HTTPHost = &quot;&quot;</span>
<span class="term-fg32">+HTTPModules = []</span>
<span class="term-fg32">+WSHost = &quot;&quot;</span>
<span class="term-fg32">+WSModules = []</span>
<span class="term-fg32">+AllowUnprotectedTxs = true</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+[Node.P2P]</span>
<span class="term-fg32">+MaxPeers = 100</span>
<span class="term-fg32">+NoDiscovery = false</span>
<span class="term-fg32">+BootstrapNodes = []</span>
<span class="term-fg32">+StaticNodes = [</span>
<span class="term-fg32">+    &quot;enode:&#47;&#47;8c99adb00fd67c2b8f47fb4cc21fd1d9da469385f24c38ea593fea0ba986b7faa070aeb5646af25922bc06f0e2435dca47dc42df10c1dc138f735bda3a9925fe@partner-public-0.p2p.testnet.immutable.com:30300&quot;,</span>
<span class="term-fg32">+    &quot;enode:&#47;&#47;7abec29f54c9e6bbf3c2cc124734d154e1cbf08c5890446a6438108581e89cef3932603e2412c299bb33892f5d08e87264f293e55703df2aace9e8e9c9958b06@partner-public-1.p2p.testnet.immutable.com:30300&quot;,</span>
<span class="term-fg32">+    &quot;enode:&#47;&#47;92d767213118c6c5986eff443f82b8d6b2db284b2cadadd309c96d3b49cc8ded5f2ca05712f5301f392e937dbdfff50812c09875fb54d066e7a2f7b8bbd0c3fb@partner-public-2.p2p.testnet.immutable.com:30300&quot;,</span>
<span class="term-fg32">+]</span>
<span class="term-fg32">+TrustedNodes = [</span>
<span class="term-fg32">+    &quot;enode:&#47;&#47;8c99adb00fd67c2b8f47fb4cc21fd1d9da469385f24c38ea593fea0ba986b7faa070aeb5646af25922bc06f0e2435dca47dc42df10c1dc138f735bda3a9925fe@partner-public-0.p2p.testnet.immutable.com:30300&quot;,</span>
<span class="term-fg32">+    &quot;enode:&#47;&#47;7abec29f54c9e6bbf3c2cc124734d154e1cbf08c5890446a6438108581e89cef3932603e2412c299bb33892f5d08e87264f293e55703df2aace9e8e9c9958b06@partner-public-1.p2p.testnet.immutable.com:30300&quot;,</span>
<span class="term-fg32">+    &quot;enode:&#47;&#47;92d767213118c6c5986eff443f82b8d6b2db284b2cadadd309c96d3b49cc8ded5f2ca05712f5301f392e937dbdfff50812c09875fb54d066e7a2f7b8bbd0c3fb@partner-public-2.p2p.testnet.immutable.com:30300&quot;,</span>
<span class="term-fg32">+]</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+ListenAddr = &quot;&quot;</span>
<span class="term-fg32">+DiscAddr = &quot;&quot;</span>
<span class="term-fg32">+EnableMsgEvents = false</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+[Node.HTTPTimeouts]</span>
<span class="term-fg32">+ReadTimeout = 0</span>
<span class="term-fg32">+ReadHeaderTimeout = 0</span>
<span class="term-fg32">+WriteTimeout = 0</span>
<span class="term-fg32">+IdleTimeout = 0</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-d10a4e172aada51c9c0ddcf2" role="button"
                       aria-expanded="false" aria-controls="id-d10a4e172aada51c9c0ddcf2">
                        <code>immutable/config/testnet.toml</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/immutable/config/testnet.toml" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+80</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-d10a4e172aada51c9c0ddcf2"><span class="term-fg1">diff --git go-ethereum&#47;immutable&#47;config&#47;testnet.toml immutable-geth&#47;immutable&#47;config&#47;testnet.toml</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..6ad033c983434fe729e715b76f0720c8a0c45c37</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;immutable&#47;config&#47;testnet.toml</span>
<span class="term-fg36">@@ -0,0 +1,80 @@</span>
<span class="term-fg32">+[Eth]</span>
<span class="term-fg32">+NetworkId = 13473</span>
<span class="term-fg32">+SyncMode = &quot;full&quot;</span>
<span class="term-fg32">+EthDiscoveryURLs = []</span>
<span class="term-fg32">+SnapDiscoveryURLs = []</span>
<span class="term-fg32">+NoPruning = true</span>
<span class="term-fg32">+NoPrefetch = false</span>
<span class="term-fg32">+TxLookupLimit = 2350000</span>
<span class="term-fg32">+TransactionHistory = 2350000</span>
<span class="term-fg32">+StateScheme = &quot;hash&quot;</span>
<span class="term-fg32">+DatabaseCache = 512</span>
<span class="term-fg32">+DatabaseFreezer = &quot;&quot;</span>
<span class="term-fg32">+TrieCleanCache = 256</span>
<span class="term-fg32">+TrieDirtyCache = 256</span>
<span class="term-fg32">+TrieTimeout = 3600000000000</span>
<span class="term-fg32">+SnapshotCache = 0</span>
<span class="term-fg32">+Preimages = false</span>
<span class="term-fg32">+FilterLogCacheSize = 32</span>
<span class="term-fg32">+EnablePreimageRecording = false</span>
<span class="term-fg32">+RPCGasCap = 50000000</span>
<span class="term-fg32">+RPCEVMTimeout = 5000000000</span>
<span class="term-fg32">+RPCTxFeeCap = 0e+00</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+[Eth.TxPool]</span>
<span class="term-fg32">+Locals = []</span>
<span class="term-fg32">+NoLocals = true</span>
<span class="term-fg32">+Journal = &quot;transactions.rlp&quot;</span>
<span class="term-fg32">+Rejournal = 3600000000000</span>
<span class="term-fg32">+PriceLimit = 10000000000</span>
<span class="term-fg32">+PriceBump = 10</span>
<span class="term-fg32">+AccountSlots = 16</span>
<span class="term-fg32">+GlobalSlots = 5120</span>
<span class="term-fg32">+AccountQueue = 64</span>
<span class="term-fg32">+GlobalQueue = 1024</span>
<span class="term-fg32">+Lifetime = 3600000000000</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+[Eth.BlobPool]</span>
<span class="term-fg32">+Datadir = &quot;blobpool&quot;</span>
<span class="term-fg32">+Datacap = 0</span>
<span class="term-fg32">+PriceBump = 100</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+[Eth.GPO]</span>
<span class="term-fg32">+Blocks = 20</span>
<span class="term-fg32">+Percentile = 60</span>
<span class="term-fg32">+MaxHeaderHistory = 1024</span>
<span class="term-fg32">+MaxBlockHistory = 1024</span>
<span class="term-fg32">+MaxPrice = 500000000000</span>
<span class="term-fg32">+IgnorePrice = 2</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+[Node]</span>
<span class="term-fg32">+DataDir = &quot;&quot;</span>
<span class="term-fg32">+IPCPath = &quot;geth.ipc&quot;</span>
<span class="term-fg32">+HTTPHost = &quot;&quot;</span>
<span class="term-fg32">+HTTPModules = []</span>
<span class="term-fg32">+WSHost = &quot;&quot;</span>
<span class="term-fg32">+WSModules = []</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+[Node.P2P]</span>
<span class="term-fg32">+MaxPeers = 100</span>
<span class="term-fg32">+NoDiscovery = true</span>
<span class="term-fg32">+BootstrapNodes = []</span>
<span class="term-fg32">+StaticNodes = [</span>
<span class="term-fg32">+	&quot;enode:&#47;&#47;24d4248973a456502fcff378749d9c7290a6875b9f5116d6e77572932727ae6676637c7e98f1749ccd81c7b7d340f4413a029aa4fdb976650c51c35b38ef3233@partner-0.p2p.testnet.immutable.com:30300&quot;,</span>
<span class="term-fg32">+	&quot;enode:&#47;&#47;6e3da16b1b5792574b2ee717c8f37d0efc7a1ba934de439419869e43ff40d529c175773dcd0afc76c826c036e0068a8749ae836d5f5e53de89e96382cf4b1558@partner-1.p2p.testnet.immutable.com:30300&quot;,</span>
<span class="term-fg32">+	&quot;enode:&#47;&#47;eccb3c547028bcde38fc88e2a1517c8adcc4820e69869b7d6831a287e311df7a1c47f05adec0d5813ed4734f23485f15f33583c57e9674894eee4547856cb902@partner-2.p2p.testnet.immutable.com:30300&quot;,</span>
<span class="term-fg32">+]</span>
<span class="term-fg32">+TrustedNodes = [</span>
<span class="term-fg32">+	&quot;enode:&#47;&#47;24d4248973a456502fcff378749d9c7290a6875b9f5116d6e77572932727ae6676637c7e98f1749ccd81c7b7d340f4413a029aa4fdb976650c51c35b38ef3233@partner-0.p2p.testnet.immutable.com:30300&quot;,</span>
<span class="term-fg32">+	&quot;enode:&#47;&#47;6e3da16b1b5792574b2ee717c8f37d0efc7a1ba934de439419869e43ff40d529c175773dcd0afc76c826c036e0068a8749ae836d5f5e53de89e96382cf4b1558@partner-1.p2p.testnet.immutable.com:30300&quot;,</span>
<span class="term-fg32">+	&quot;enode:&#47;&#47;eccb3c547028bcde38fc88e2a1517c8adcc4820e69869b7d6831a287e311df7a1c47f05adec0d5813ed4734f23485f15f33583c57e9674894eee4547856cb902@partner-2.p2p.testnet.immutable.com:30300&quot;,</span>
<span class="term-fg32">+]</span>
<span class="term-fg32">+ListenAddr = &quot;&quot;</span>
<span class="term-fg32">+DiscAddr = &quot;&quot;</span>
<span class="term-fg32">+EnableMsgEvents = false</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+[Node.HTTPTimeouts]</span>
<span class="term-fg32">+ReadTimeout = 0</span>
<span class="term-fg32">+ReadHeaderTimeout = 0</span>
<span class="term-fg32">+WriteTimeout = 0</span>
<span class="term-fg32">+IdleTimeout = 0</span></div>
    </div>

            
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
                <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-d51cbd9f59c462fca3f210ae"role="button" aria-expanded="false" aria-controls="id-d51cbd9f59c462fca3f210ae">
        
            <div class="col-12 col-md-12 col-lg-6 col-xl-6 text-start"><h2>Other changes</h2></div>
        

        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2">
            <div class="row line-stat">
                
                
            </div>
        </div>
        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2 ">
            <div class="row line-stat">
                
                    <div class="text-end"><span class="text-success">+512</span></div>
                    <div class="text-start"><span class="text-danger">-480</span></div>
                
                
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-d51cbd9f59c462fca3f210ae">
        <div></div>
        <div>
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-459da74f202d856e4e5940cc" role="button"
                       aria-expanded="false" aria-controls="id-459da74f202d856e4e5940cc">
                        <code>CHANGELOG.md</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/CHANGELOG.md" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+243</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-459da74f202d856e4e5940cc"><span class="term-fg1">diff --git go-ethereum&#47;CHANGELOG.md immutable-geth&#47;CHANGELOG.md</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..c1b90520eba460c82874fc6ad7acb0b969e994f0</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;CHANGELOG.md</span>
<span class="term-fg36">@@ -0,0 +1,243 @@</span>
<span class="term-fg32">+# Changelog</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+All notable changes to this project will be documented in this file.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+The format is based on [Keep a Changelog](https:&#47;&#47;keepachangelog.com&#47;en&#47;1.1.0&#47;),</span>
<span class="term-fg32">+and this project adheres to</span>
<span class="term-fg32">+[Semantic Versioning](https:&#47;&#47;semver.org&#47;spec&#47;v2.0.0.html).</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+## [v1.0.0-beta.14]</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+* Limit the number of bytes read by NR RPC middleware</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+## [v1.0.0-beta.13]</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+* Remove deployer allowlist</span>
<span class="term-fg32">+* Add `GETH_FLAG_IMMUTABLE_LONG_RANGE_SYNC` flag to allow snap sync from genesis</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+## [v1.0.0-beta.12]</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+#### Cancun</span>
<span class="term-fg32">+This release enables Cancun fork on all Immutable zkEVM networks.</span>
<span class="term-fg32">+| Network  | Unix Timestamp | Date |</span>
<span class="term-fg32">+| -------- | ------- | ------- |</span>
<span class="term-fg32">+| Devnet   | 1724796000 | Tue Aug 27 22:00:00 UTC 2024 |</span>
<span class="term-fg32">+| Testnet  | 1727128800 | Mon Sep 23 22:00:00 UTC 2024 |</span>
<span class="term-fg32">+| Mainnet  | 1728338400 | Mon Oct  7 22:00:00 UTC 2024 |</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+* Enable `ExcessBlobGas`, `BlobGasUsed`, `ParentBeaconRoot`</span>
<span class="term-fg32">+    * All values are `0x0`</span>
<span class="term-fg32">+* Enable `WithdrawalsHash`, and `Withdrawals` headers</span>
<span class="term-fg32">+    * `Withdrawals` are empty and `WithdrawalsHash` is the corresponding digest</span>
<span class="term-fg32">+* Enable `TSTORE`, `TLOAD`, and `MCOPY` op codes</span>
<span class="term-fg32">+* Enable `BLOBHASH` op code</span>
<span class="term-fg32">+* Enable Point Evaluation precompile</span>
<span class="term-fg32">+* Update `SELFDESTRUCT` op code</span>
<span class="term-fg32">+* Update clique stack to support Cancun</span>
<span class="term-fg32">+* Disable blob transactions</span>
<span class="term-fg32">+* Re-order logic that sets blob block headers and beacon root header to after `engine.Prepare` in order to interoperate with clique which produces variable blocktimes (rather than fixed slots)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+#### Other</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+* Add `--gossipdefault` flag to toggle default geth tx gossiping</span>
<span class="term-fg32">+* Add GETH_FLAG_P2P_SUBNET env var to limit inbound messages based on subnet</span>
<span class="term-fg32">+* Add specific peer message handling in `eth&#47;handler.go` to disable ingestion of state</span>
<span class="term-fg32">+* Add `--rpcproxy` flag to toggle RPC proxy forwarding</span>
<span class="term-fg32">+* Add RPC proxy forwarding to Immutable zkEVM</span>
<span class="term-fg32">+* Add `--disabletxpoolgossip` flag to disable tx gossiping</span>
<span class="term-fg32">+* Add `--gossipdefault` flag to toggle default geth tx gossiping</span>
<span class="term-fg32">+* Add GETH_FLAG_P2P_SUBNET env var to limit inbound messages based on subnet</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+## [v1.0.0-beta.11]</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+* Added partner public role to init container logic</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+## [v1.0.0-beta.10]</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+* Add log to correlate block period with block number and hash</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+## [v1.0.0-beta.9]</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+* Reject forkids that do not contain prevrandao fork</span>
<span class="term-fg32">+* Disable more RPC namespaces</span>
<span class="term-fg32">+* Correct the embedded mainnet.toml&#39;s price limit value to 10 gwei</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+## [v1.0.0-beta.8]</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+* Add prevrandao fork to forkid</span>
<span class="term-fg32">+* Pull v1.13.15 from upstream: [ethereum&#47;go-ethereum](https:&#47;&#47;github.com&#47;ethereum&#47;go-ethereum)</span>
<span class="term-fg32">+* Log peer fullnames rather than abbreviated</span>
<span class="term-fg32">+* Do not rate limit peer connections that match on the supplied networks from the net restrict configuration</span>
<span class="term-fg32">+* Reduce p2p discv4 default refresh interval</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+## [v1.0.0-beta.7]</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+* Create Prevrandao fork</span>
<span class="term-fg32">+* Fix issues syncing with testnet and mainnet relating to Prevrandao fork</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+## [v1.0.0-beta.6]</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+* Update geth version logic to be based on immutable&#47;go-ethereum releases</span>
<span class="term-fg32">+* Add `downloader&#47;sync` metric</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+## [v1.0.0-beta.5]</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+* Pull v1.13.14 from upstream: [ethereum&#47;go-ethereum](https:&#47;&#47;github.com&#47;ethereum&#47;go-ethereum)</span>
<span class="term-fg32">+* Make `DefaultBaseFeeChangeDenominator` consistent with upstream (8) and mutate it based on chain configuration</span>
<span class="term-fg32">+  * If chain configuration matches Immutable zkEVM network ID and clique settings, set `DefaultBaseFeeChangeDenominator` to 50</span>
<span class="term-fg32">+* Validate chain configuration based on expected values if Immutable zkEVM network ID is specified</span>
<span class="term-fg32">+* Use minimum price limit instead of last price to represent the priority fee of each fetched empty block inside suggested tip cap endpoint.</span>
<span class="term-fg32">+* Add block period, block propagation, and suggested tip cap metrics</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+## [v1.0.0-beta.4]</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+- Fix PREVRANDAO opcode on shanghai network by setting random to mixhash</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+## [v1.0.0-beta.3]</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+- Testing release flow</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+## [v1.0.0-beta.2]</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+- Enforce minimum price limit on suggested tip cap endpoint</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+## [v1.0.0-beta.1]</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+This release enables Shanghai fork on all Immutable zkEVM networks.</span>
<span class="term-fg32">+| Network  | Unix Timestamp | Date |</span>
<span class="term-fg32">+| -------- | ------- | ------- |</span>
<span class="term-fg32">+| Devnet   | 1709067600 | Tue Feb 27 21:00:00 UTC 2024 |</span>
<span class="term-fg32">+| Testnet  | 1710280800 | Tue Mar 12 22:00:00 UTC 2024 |</span>
<span class="term-fg32">+| Mainnet  | 1711490400 | Tue Mar 26 22:00:00 UTC 2024 |</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+The following changes were made to support the forks:</span>
<span class="term-fg32">+- Update clique to</span>
<span class="term-fg32">+  - allow for Shanghai to be enabled; and</span>
<span class="term-fg32">+  - log more detail around existence of withdrawals and withdrawals hashes</span>
<span class="term-fg32">+- Update geth node initialization from genesis</span>
<span class="term-fg32">+  - Add command to be used instead of `geth init`</span>
<span class="term-fg32">+  ```sh</span>
<span class="term-fg32">+  geth immutable bootstrap rpc --zkevm testnet --datadir &quot;...&quot;</span>
<span class="term-fg32">+  ```</span>
<span class="term-fg32">+  - genesis.json has been removed from Docker image</span>
<span class="term-fg32">+- Update geth node run configuration</span>
<span class="term-fg32">+  - Add `--zkevm [testnet|mainnet]` flag to automatically configure genesis and fork overrides</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+## [v0.0.16]</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+- Add `geth immutable run boot` command for running boot node on cluster</span>
<span class="term-fg32">+- Move boot node p2p keys to Secrets Manager</span>
<span class="term-fg32">+- Update logs around allowlists</span>
<span class="term-fg32">+- Added more logging for ACL initialisation and a log when ACL rejects a TX from pool</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+## [v0.0.15]</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+- Re-enabled single sequencer invariants</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+## [v0.0.14]</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+- Change pod initialization process to use Put instead of Push</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+## [v0.0.13]</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+- Implement Immutable wallet backend</span>
<span class="term-fg32">+    - Add AWS Secrets Manager backend store implementation for private key access via AWS</span>
<span class="term-fg32">+    - Add local keystore backend store implementation for testing purposes</span>
<span class="term-fg32">+    - Add `GETH_FLAG_IMMUTABLE_AWS_REGION` and `POD_NAMESPACE` env var support for configuring aws wallet backend</span>
<span class="term-fg32">+    - Add `GETH_FLAG_PASSWORD_FILEPATH` env var to existing password filepath flag</span>
<span class="term-fg32">+- Added flag to disable Clique endpoints on RPC server</span>
<span class="term-fg32">+- Added Clique Client</span>
<span class="term-fg32">+- Added CLI for Clique Voting</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+## [v0.0.12]</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+- Revert dialHistoryExpiration change back to 35s</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+## [v0.0.11]</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+- Revert change to always drop peers when find node errors are greater than the threshold</span>
<span class="term-fg32">+- Reduce dialHistoryExpiration from 35 seconds to 5</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+## [v0.0.10]</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+- Decrease `seedMaxAge` to 1 second to ensure that nodes always query boot node for peer IPs</span>
<span class="term-fg32">+- Always drop peers when find node errors are greater than the threshold</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+## [v0.0.9]</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+- Automation &#47; CD updates only. Releasing with latest prod workflows.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+## [v0.0.8]</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+- Added max block range for logs queried using eth_getLogs (#346)</span>
<span class="term-fg32">+- Default mainnet configuration (`&#47;etc&#47;geth&#47;mainnet.toml`) and genesis (`&#47;etc&#47;geth&#47;mainnet.json`) added to Docker image</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+## [v0.0.7]</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+- Automation &#47; CD updates only: immutable init command</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+## [v0.0.6]</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+- Automation &#47; CD updates only</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+## [v0.0.5]</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+- Reduce price limit 100-&gt;10 Gwei</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+## [v0.0.4]</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+### Added</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+- Default testnet configuration (`&#47;etc&#47;geth&#47;testnet.toml`) and genesis (`&#47;etc&#47;geth&#47;testnet.json`) added to Docker image</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+## [v0.0.3]</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+### Added</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+- Add NewRelic agent to geth runtime for application metrics</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+### Fixed</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+- Price limit being 100 Gwei rather than 100 Gwei - 1 Wei</span>
<span class="term-fg32">+- Fixed bug in ACLs that caused transactions to be blocked when they should not have been</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+## [v0.0.2]</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+### Changed</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+- Change to add access control layer to geth legacypool, which safeguards txs</span>
<span class="term-fg32">+  from entering txpool if the sender is part of a collective SDN list (#17)</span>
<span class="term-fg32">+- Mempool Rebroadcasting: Legacy pool now rebroadcasts pending transactions</span>
<span class="term-fg32">+  whenever a pool reorg is triggered. Pool reorgs are triggered when a new block</span>
<span class="term-fg32">+  is received - (#103)</span>
<span class="term-fg32">+- Transaction Broadcasting: Transactions are broadcast to all peers, not a</span>
<span class="term-fg32">+  square root. All peers get the transaction, regardless of whether they may</span>
<span class="term-fg32">+  have previously received it. All peers get the full transaction payload, i.e.</span>
<span class="term-fg32">+  no more announcements. (#103)</span>
<span class="term-fg32">+- Changed `maxUncleDist` from 7 to 0. This means old blocks are rejected,</span>
<span class="term-fg32">+  reducing chance of reorgs. (#156)</span>
<span class="term-fg32">+- Changed `maxQueueDist` from 32 to 256. This means more blocks in the future</span>
<span class="term-fg32">+  can be received without being rejected. This is to account for our increased</span>
<span class="term-fg32">+  block production due to reduced block time. (#156)</span>
<span class="term-fg32">+- Changed `blockLimit` from 64 to 256. Since we only have a small amount of</span>
<span class="term-fg32">+  peers, more will come from the same set of peers, so we need to allow for</span>
<span class="term-fg32">+  this. (#156)</span>
<span class="term-fg32">+- Added invariants to prevents reorgs (#175)</span>
<span class="term-fg32">+- Added check for NoLocals on legacytxpool to reject underpriced TXs</span>
<span class="term-fg32">+- Changed the `DefaultBaseFeeChangeDenominator` from 8 to 50. This makes the max</span>
<span class="term-fg32">+  base fee rate of change 2%, instead of 12.5%. With a block time of 2 seconds,</span>
<span class="term-fg32">+  we match Ethereum in that it would take 72 seconds for the base fee to double.</span>
<span class="term-fg32">+  (#178)</span>
<span class="term-fg32">+- Mine a tx even if its effective tipcap (tipcap-basefee) is less than miner&#39;s minimum tipcap (which is pricelimit, or 100 gwei) (#258)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+### Added</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+- CLI commands for bootstrapping local and remote Immutable chains</span>
<span class="term-fg32">+- Added CLI parameter options for the geth immutable bootstraper, which can</span>
<span class="term-fg32">+  potentially takes in a list of filepaths for blocklists and allowlists (#83)</span>
<span class="term-fg32">+- Added flags to disable Admin&#47;Txpool&#47;Engine&#47;Debug endpoints on RPC server</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+### Fixed</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+[unreleased]: https:&#47;&#47;github.com&#47;immutable&#47;go-ethereum&#47;compare&#47;v1.11.6-beta.1...HEAD</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-b070b00e0e09261e5d3fb193" role="button"
                       aria-expanded="false" aria-controls="id-b070b00e0e09261e5d3fb193">
                        <code>Dockerfile</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/Dockerfile" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/Dockerfile" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+11</span></div>
                            <div class="text-start"><span class="text-danger">-3</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-b070b00e0e09261e5d3fb193"><span class="term-fg1">diff --git go-ethereum&#47;Dockerfile immutable-geth&#47;Dockerfile</span>
<span class="term-fg1">index ed69a04789678e839186208e04a2483b33b4d68c..4670fefcfb8972c2b8d42262e07492b3686a9ea1 100644</span>
<span class="term-fg1">--- go-ethereum&#47;Dockerfile</span>
<span class="term-fg1">+++ immutable-geth&#47;Dockerfile</span>
<span class="term-fg36">@@ -12,17 +12,25 @@</span> # Get dependencies - will also be cached if we won&#39;t change go.mod&#47;go.sum
 COPY go.mod &#47;go-ethereum&#47;
 COPY go.sum &#47;go-ethereum&#47;
 RUN cd &#47;go-ethereum &amp;&amp; go mod download
<span class="term-fg31">-</span>
 ADD . &#47;go-ethereum
 RUN cd &#47;go-ethereum &amp;&amp; go run build&#47;ci.go install -static .&#47;cmd&#47;geth
&nbsp;
 # Pull Geth into a second stage deploy alpine container
<span class="term-fg31">-FROM alpine:latest</span>
<span class="term-fg32">+FROM alpine:3.18.4</span>
&nbsp;
 RUN apk add --no-cache ca-certificates
 COPY --from=builder &#47;go-ethereum&#47;build&#47;bin&#47;geth &#47;usr&#47;local&#47;bin&#47;
&nbsp;
<span class="term-fg31">-EXPOSE 8545 8546 30303 30303&#47;udp</span>
<span class="term-fg32">+# Default config</span>
<span class="term-fg32">+RUN mkdir &#47;etc&#47;geth</span>
<span class="term-fg32">+ADD .&#47;immutable&#47;config&#47;testnet.toml &#47;etc&#47;geth&#47;testnet.toml</span>
<span class="term-fg32">+ADD .&#47;immutable&#47;config&#47;mainnet.toml &#47;etc&#47;geth&#47;mainnet.toml</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+# Public config</span>
<span class="term-fg32">+ADD .&#47;immutable&#47;config&#47;testnet-public.toml &#47;etc&#47;geth&#47;testnet-public.toml</span>
<span class="term-fg32">+ADD .&#47;immutable&#47;config&#47;mainnet-public.toml &#47;etc&#47;geth&#47;mainnet-public.toml</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+EXPOSE 8545 8546 30300 30300&#47;udp</span>
 ENTRYPOINT [&quot;geth&quot;]
&nbsp;
 # Add some metadata labels to help programatic image consumption</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-b88826e61fc38d47948efbfd" role="button"
                       aria-expanded="false" aria-controls="id-b88826e61fc38d47948efbfd">
                        <code>README.md</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/README.md" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/README.md" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+33</span></div>
                            <div class="text-start"><span class="text-danger">-307</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-b88826e61fc38d47948efbfd"><span class="term-fg1">diff --git go-ethereum&#47;README.md immutable-geth&#47;README.md</span>
<span class="term-fg1">index 1e8dba80909486832a01f1226ce1c98d2383cf94..20869a741174a66d5269d4a50a981dc1ff221991 100644</span>
<span class="term-fg1">--- go-ethereum&#47;README.md</span>
<span class="term-fg1">+++ immutable-geth&#47;README.md</span>
<span class="term-fg36">@@ -1,55 +1,49 @@</span>
<span class="term-fg31">-## Go Ethereum</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-Golang execution layer implementation of the Ethereum protocol.</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-[![API Reference](</span>
<span class="term-fg31">-https:&#47;&#47;pkg.go.dev&#47;badge&#47;github.com&#47;ethereum&#47;go-ethereum</span>
<span class="term-fg31">-)](https:&#47;&#47;pkg.go.dev&#47;github.com&#47;ethereum&#47;go-ethereum?tab=doc)</span>
<span class="term-fg31">-[![Go Report Card](https:&#47;&#47;goreportcard.com&#47;badge&#47;github.com&#47;ethereum&#47;go-ethereum)](https:&#47;&#47;goreportcard.com&#47;report&#47;github.com&#47;ethereum&#47;go-ethereum)</span>
<span class="term-fg31">-[![Travis](https:&#47;&#47;app.travis-ci.com&#47;ethereum&#47;go-ethereum.svg?branch=master)](https:&#47;&#47;app.travis-ci.com&#47;github&#47;ethereum&#47;go-ethereum)</span>
<span class="term-fg31">-[![Discord](https:&#47;&#47;img.shields.io&#47;badge&#47;discord-join%20chat-blue.svg)](https:&#47;&#47;discord.gg&#47;nthXNEv)</span>
<span class="term-fg32">+# Immutable Geth</span>
&nbsp;
<span class="term-fg31">-Automated builds are available for stable releases and the unstable master branch. Binary</span>
<span class="term-fg31">-archives are published at https:&#47;&#47;geth.ethereum.org&#47;downloads&#47;.</span>
<span class="term-fg32">+Golang execution layer implementation of the Ethereum protocol. Modified for the purposes of the Immutable zkEVM.</span>
&nbsp;
<span class="term-fg31">-## Building the source</span>
<span class="term-fg32">+All modifications made by Immutable are either contained in files named `*immutable*.go` or have `CHANGE(immutable):` comments above or inside the modified lines of code.</span>
&nbsp;
<span class="term-fg31">-For prerequisites and detailed build instructions please read the [Installation Instructions](https:&#47;&#47;geth.ethereum.org&#47;docs&#47;getting-started&#47;installing-geth).</span>
<span class="term-fg32">+## Build</span>
&nbsp;
<span class="term-fg31">-Building `geth` requires both a Go (version 1.19 or later) and a C compiler. You can install</span>
<span class="term-fg31">-them using your favourite package manager. Once the dependencies are installed, run</span>
<span class="term-fg32">+With Golang 1.20 installed, run:</span>
&nbsp;
<span class="term-fg31">-```shell</span>
<span class="term-fg32">+```</span>
 make geth
 ```
&nbsp;
 or, to build the full suite of utilities:
&nbsp;
<span class="term-fg31">-```shell</span>
<span class="term-fg32">+```</span>
 make all
 ```
&nbsp;
<span class="term-fg31">-## Executables</span>
<span class="term-fg32">+The built client binary is `.&#47;build&#47;bin&#47;geth`</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+You can run a local network with your built binary via the `immutable bootstrap local` command:</span>
<span class="term-fg32">+```</span>
<span class="term-fg32">+now=$(date +%s)</span>
<span class="term-fg32">+.&#47;build&#47;bin&#47;geth immutable bootstrap local \</span>
<span class="term-fg32">+--override.shanghai=&quot;$now&quot; \</span>
<span class="term-fg32">+--override.prevrandao=&quot;$now&quot; \</span>
<span class="term-fg32">+--override.cancun=&quot;$now&quot;</span>
<span class="term-fg32">+```</span>
&nbsp;
<span class="term-fg31">-The go-ethereum project comes with several wrappers&#47;executables found in the `cmd`</span>
<span class="term-fg31">-directory.</span>
<span class="term-fg32">+You can run the E2E tests against your built binary via:</span>
<span class="term-fg32">+```</span>
<span class="term-fg32">+.github&#47;scripts&#47;bootstrap_test.sh</span>
<span class="term-fg32">+```</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+## Docker</span>
&nbsp;
<span class="term-fg31">-|  Command   | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |</span>
<span class="term-fg31">-| :--------: | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |</span>
<span class="term-fg31">-| **`geth`** | Our main Ethereum CLI client. It is the entry point into the Ethereum network (main-, test- or private net), capable of running as a full node (default), archive node (retaining all historical state) or a light node (retrieving data live). It can be used by other processes as a gateway into the Ethereum network via JSON RPC endpoints exposed on top of HTTP, WebSocket and&#47;or IPC transports. `geth --help` and the [CLI page](https:&#47;&#47;geth.ethereum.org&#47;docs&#47;fundamentals&#47;command-line-options) for command line options. |</span>
<span class="term-fg31">-|   `clef`   | Stand-alone signing tool, which can be used as a backend signer for `geth`.                                                                                                                                                                                                                                                                                                                                                                                                                                                        |</span>
<span class="term-fg31">-|  `devp2p`  | Utilities to interact with nodes on the networking layer, without running a full blockchain.                                                                                                                                                                                                                                                                                                                                                                                                                                       |</span>
<span class="term-fg31">-|  `abigen`  | Source code generator to convert Ethereum contract definitions into easy-to-use, compile-time type-safe Go packages. It operates on plain [Ethereum contract ABIs](https:&#47;&#47;docs.soliditylang.org&#47;en&#47;develop&#47;abi-spec.html) with expanded functionality if the contract bytecode is also available. However, it also accepts Solidity source files, making development much more streamlined. Please see our [Native DApps](https:&#47;&#47;geth.ethereum.org&#47;docs&#47;developers&#47;dapp-developer&#47;native-bindings) page for details.                                  |</span>
<span class="term-fg31">-| `bootnode` | Stripped down version of our Ethereum client implementation that only takes part in the network node discovery protocol, but does not run any of the higher level application protocols. It can be used as a lightweight bootstrap node to aid in finding peers in private networks.                                                                                                                                                                                                                                               |</span>
<span class="term-fg31">-|   `evm`    | Developer utility version of the EVM (Ethereum Virtual Machine) that is capable of running bytecode snippets within a configurable environment and execution mode. Its purpose is to allow isolated, fine-grained debugging of EVM opcodes (e.g. `evm --code 60ff60ff --debug run`).                                                                                                                                                                                                                                               |</span>
<span class="term-fg31">-| `rlpdump`  | Developer utility tool to convert binary RLP ([Recursive Length Prefix](https:&#47;&#47;ethereum.org&#47;en&#47;developers&#47;docs&#47;data-structures-and-encoding&#47;rlp)) dumps (data encoding used by the Ethereum protocol both network as well as consensus wise) to user-friendlier hierarchical representation (e.g. `rlpdump --hex CE0183FFFFFFC4C304050583616263`).                                                                                                                                                                                |</span>
<span class="term-fg32">+The client is distributed as the following Docker image:</span>
<span class="term-fg32">+```</span>
<span class="term-fg32">+docker pull ghcr.io&#47;immutable&#47;go-ethereum&#47;go-ethereum:latest</span>
<span class="term-fg32">+```</span>
&nbsp;
<span class="term-fg31">-## Running `geth`</span>
<span class="term-fg32">+## Run</span>
&nbsp;
<span class="term-fg31">-Going through all the possible command line flags is out of scope here (please consult our</span>
<span class="term-fg31">-[CLI Wiki page](https:&#47;&#47;geth.ethereum.org&#47;docs&#47;fundamentals&#47;command-line-options)),</span>
<span class="term-fg31">-but we&#39;ve enumerated a few common parameter combos to get you up to speed quickly</span>
<span class="term-fg31">-on how you can run your own `geth` instance.</span>
<span class="term-fg32">+If you wish to join the P2P network, you must follow [these](https:&#47;&#47;docs.axelar.dev&#47;validator&#47;external-chains&#47;immutable) instructions.</span>
&nbsp;
 ### Hardware Requirements
&nbsp;
<span class="term-fg36">@@ -67,265 +61,9 @@</span> * 16GB+ RAM
 * High-performance SSD with at least 1TB of free space
 * 25+ MBit&#47;sec download Internet service
&nbsp;
<span class="term-fg31">-### Full node on the main Ethereum network</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-By far the most common scenario is people wanting to simply interact with the Ethereum</span>
<span class="term-fg31">-network: create accounts; transfer funds; deploy and interact with contracts. For this</span>
<span class="term-fg31">-particular use case, the user doesn&#39;t care about years-old historical data, so we can</span>
<span class="term-fg31">-sync quickly to the current state of the network. To do so:</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-```shell</span>
<span class="term-fg31">-$ geth console</span>
<span class="term-fg31">-```</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-This command will:</span>
<span class="term-fg31">- * Start `geth` in snap sync mode (default, can be changed with the `--syncmode` flag),</span>
<span class="term-fg31">-   causing it to download more data in exchange for avoiding processing the entire history</span>
<span class="term-fg31">-   of the Ethereum network, which is very CPU intensive.</span>
<span class="term-fg31">- * Start the built-in interactive [JavaScript console](https:&#47;&#47;geth.ethereum.org&#47;docs&#47;interacting-with-geth&#47;javascript-console),</span>
<span class="term-fg31">-   (via the trailing `console` subcommand) through which you can interact using [`web3` methods](https:&#47;&#47;github.com&#47;ChainSafe&#47;web3.js&#47;blob&#47;0.20.7&#47;DOCUMENTATION.md) </span>
<span class="term-fg31">-   (note: the `web3` version bundled within `geth` is very old, and not up to date with official docs),</span>
<span class="term-fg31">-   as well as `geth`&#39;s own [management APIs](https:&#47;&#47;geth.ethereum.org&#47;docs&#47;interacting-with-geth&#47;rpc).</span>
<span class="term-fg31">-   This tool is optional and if you leave it out you can always attach it to an already running</span>
<span class="term-fg31">-   `geth` instance with `geth attach`.</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-### A Full node on the Görli test network</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-Transitioning towards developers, if you&#39;d like to play around with creating Ethereum</span>
<span class="term-fg31">-contracts, you almost certainly would like to do that without any real money involved until</span>
<span class="term-fg31">-you get the hang of the entire system. In other words, instead of attaching to the main</span>
<span class="term-fg31">-network, you want to join the **test** network with your node, which is fully equivalent to</span>
<span class="term-fg31">-the main network, but with play-Ether only.</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-```shell</span>
<span class="term-fg31">-$ geth --goerli console</span>
<span class="term-fg31">-```</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-The `console` subcommand has the same meaning as above and is equally</span>
<span class="term-fg31">-useful on the testnet too.</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-Specifying the `--goerli` flag, however, will reconfigure your `geth` instance a bit:</span>
<span class="term-fg31">-</span>
<span class="term-fg31">- * Instead of connecting to the main Ethereum network, the client will connect to the Görli</span>
<span class="term-fg31">-   test network, which uses different P2P bootnodes, different network IDs and genesis</span>
<span class="term-fg31">-   states.</span>
<span class="term-fg31">- * Instead of using the default data directory (`~&#47;.ethereum` on Linux for example), `geth`</span>
<span class="term-fg31">-   will nest itself one level deeper into a `goerli` subfolder (`~&#47;.ethereum&#47;goerli` on</span>
<span class="term-fg31">-   Linux). Note, on OSX and Linux this also means that attaching to a running testnet node</span>
<span class="term-fg31">-   requires the use of a custom endpoint since `geth attach` will try to attach to a</span>
<span class="term-fg31">-   production node endpoint by default, e.g.,</span>
<span class="term-fg31">-   `geth attach &lt;datadir&gt;&#47;goerli&#47;geth.ipc`. Windows users are not affected by</span>
<span class="term-fg31">-   this.</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-*Note: Although some internal protective measures prevent transactions from</span>
<span class="term-fg31">-crossing over between the main network and test network, you should always</span>
<span class="term-fg31">-use separate accounts for play and real money. Unless you manually move</span>
<span class="term-fg31">-accounts, `geth` will by default correctly separate the two networks and will not make any</span>
<span class="term-fg31">-accounts available between them.*</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-### Configuration</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-As an alternative to passing the numerous flags to the `geth` binary, you can also pass a</span>
<span class="term-fg31">-configuration file via:</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-```shell</span>
<span class="term-fg31">-$ geth --config &#47;path&#47;to&#47;your_config.toml</span>
<span class="term-fg31">-```</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-To get an idea of how the file should look like you can use the `dumpconfig` subcommand to</span>
<span class="term-fg31">-export your existing configuration:</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-```shell</span>
<span class="term-fg31">-$ geth --your-favourite-flags dumpconfig</span>
<span class="term-fg31">-```</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-*Note: This works only with `geth` v1.6.0 and above.*</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-#### Docker quick start</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-One of the quickest ways to get Ethereum up and running on your machine is by using</span>
<span class="term-fg31">-Docker:</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-```shell</span>
<span class="term-fg31">-docker run -d --name ethereum-node -v &#47;Users&#47;alice&#47;ethereum:&#47;root \</span>
<span class="term-fg31">-           -p 8545:8545 -p 30303:30303 \</span>
<span class="term-fg31">-           ethereum&#47;client-go</span>
<span class="term-fg31">-```</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-This will start `geth` in snap-sync mode with a DB memory allowance of 1GB, as the</span>
<span class="term-fg31">-above command does.  It will also create a persistent volume in your home directory for</span>
<span class="term-fg31">-saving your blockchain as well as map the default ports. There is also an `alpine` tag</span>
<span class="term-fg31">-available for a slim version of the image.</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-Do not forget `--http.addr 0.0.0.0`, if you want to access RPC from other containers</span>
<span class="term-fg31">-and&#47;or hosts. By default, `geth` binds to the local interface and RPC endpoints are not</span>
<span class="term-fg31">-accessible from the outside.</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-### Programmatically interfacing `geth` nodes</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-As a developer, sooner rather than later you&#39;ll want to start interacting with `geth` and the</span>
<span class="term-fg31">-Ethereum network via your own programs and not manually through the console. To aid</span>
<span class="term-fg31">-this, `geth` has built-in support for a JSON-RPC based APIs ([standard APIs](https:&#47;&#47;ethereum.github.io&#47;execution-apis&#47;api-documentation&#47;)</span>
<span class="term-fg31">-and [`geth` specific APIs](https:&#47;&#47;geth.ethereum.org&#47;docs&#47;interacting-with-geth&#47;rpc)).</span>
<span class="term-fg31">-These can be exposed via HTTP, WebSockets and IPC (UNIX sockets on UNIX based</span>
<span class="term-fg31">-platforms, and named pipes on Windows).</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-The IPC interface is enabled by default and exposes all the APIs supported by `geth`,</span>
<span class="term-fg31">-whereas the HTTP and WS interfaces need to manually be enabled and only expose a</span>
<span class="term-fg31">-subset of APIs due to security reasons. These can be turned on&#47;off and configured as</span>
<span class="term-fg31">-you&#39;d expect.</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-HTTP based JSON-RPC API options:</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-  * `--http` Enable the HTTP-RPC server</span>
<span class="term-fg31">-  * `--http.addr` HTTP-RPC server listening interface (default: `localhost`)</span>
<span class="term-fg31">-  * `--http.port` HTTP-RPC server listening port (default: `8545`)</span>
<span class="term-fg31">-  * `--http.api` API&#39;s offered over the HTTP-RPC interface (default: `eth,net,web3`)</span>
<span class="term-fg31">-  * `--http.corsdomain` Comma separated list of domains from which to accept cross origin requests (browser enforced)</span>
<span class="term-fg31">-  * `--ws` Enable the WS-RPC server</span>
<span class="term-fg31">-  * `--ws.addr` WS-RPC server listening interface (default: `localhost`)</span>
<span class="term-fg31">-  * `--ws.port` WS-RPC server listening port (default: `8546`)</span>
<span class="term-fg31">-  * `--ws.api` API&#39;s offered over the WS-RPC interface (default: `eth,net,web3`)</span>
<span class="term-fg31">-  * `--ws.origins` Origins from which to accept WebSocket requests</span>
<span class="term-fg31">-  * `--ipcdisable` Disable the IPC-RPC server</span>
<span class="term-fg31">-  * `--ipcapi` API&#39;s offered over the IPC-RPC interface (default: `admin,debug,eth,miner,net,personal,txpool,web3`)</span>
<span class="term-fg31">-  * `--ipcpath` Filename for IPC socket&#47;pipe within the datadir (explicit paths escape it)</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-You&#39;ll need to use your own programming environments&#39; capabilities (libraries, tools, etc) to</span>
<span class="term-fg31">-connect via HTTP, WS or IPC to a `geth` node configured with the above flags and you&#39;ll</span>
<span class="term-fg31">-need to speak [JSON-RPC](https:&#47;&#47;www.jsonrpc.org&#47;specification) on all transports. You</span>
<span class="term-fg31">-can reuse the same connection for multiple requests!</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-**Note: Please understand the security implications of opening up an HTTP&#47;WS based</span>
<span class="term-fg31">-transport before doing so! Hackers on the internet are actively trying to subvert</span>
<span class="term-fg31">-Ethereum nodes with exposed APIs! Further, all browser tabs can access locally</span>
<span class="term-fg31">-running web servers, so malicious web pages could try to subvert locally available</span>
<span class="term-fg31">-APIs!**</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-### Operating a private network</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-Maintaining your own private network is more involved as a lot of configurations taken for</span>
<span class="term-fg31">-granted in the official networks need to be manually set up.</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-#### Defining the private genesis state</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-First, you&#39;ll need to create the genesis state of your networks, which all nodes need to be</span>
<span class="term-fg31">-aware of and agree upon. This consists of a small JSON file (e.g. call it `genesis.json`):</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-```json</span>
<span class="term-fg31">-{</span>
<span class="term-fg31">-  &quot;config&quot;: {</span>
<span class="term-fg31">-    &quot;chainId&quot;: &lt;arbitrary positive integer&gt;,</span>
<span class="term-fg31">-    &quot;homesteadBlock&quot;: 0,</span>
<span class="term-fg31">-    &quot;eip150Block&quot;: 0,</span>
<span class="term-fg31">-    &quot;eip155Block&quot;: 0,</span>
<span class="term-fg31">-    &quot;eip158Block&quot;: 0,</span>
<span class="term-fg31">-    &quot;byzantiumBlock&quot;: 0,</span>
<span class="term-fg31">-    &quot;constantinopleBlock&quot;: 0,</span>
<span class="term-fg31">-    &quot;petersburgBlock&quot;: 0,</span>
<span class="term-fg31">-    &quot;istanbulBlock&quot;: 0,</span>
<span class="term-fg31">-    &quot;berlinBlock&quot;: 0,</span>
<span class="term-fg31">-    &quot;londonBlock&quot;: 0</span>
<span class="term-fg31">-  },</span>
<span class="term-fg31">-  &quot;alloc&quot;: {},</span>
<span class="term-fg31">-  &quot;coinbase&quot;: &quot;0x0000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg31">-  &quot;difficulty&quot;: &quot;0x20000&quot;,</span>
<span class="term-fg31">-  &quot;extraData&quot;: &quot;&quot;,</span>
<span class="term-fg31">-  &quot;gasLimit&quot;: &quot;0x2fefd8&quot;,</span>
<span class="term-fg31">-  &quot;nonce&quot;: &quot;0x0000000000000042&quot;,</span>
<span class="term-fg31">-  &quot;mixhash&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg31">-  &quot;parentHash&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="term-fg31">-  &quot;timestamp&quot;: &quot;0x00&quot;</span>
<span class="term-fg31">-}</span>
<span class="term-fg31">-```</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-The above fields should be fine for most purposes, although we&#39;d recommend changing</span>
<span class="term-fg31">-the `nonce` to some random value so you prevent unknown remote nodes from being able</span>
<span class="term-fg31">-to connect to you. If you&#39;d like to pre-fund some accounts for easier testing, create</span>
<span class="term-fg31">-the accounts and populate the `alloc` field with their addresses.</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-```json</span>
<span class="term-fg31">-&quot;alloc&quot;: {</span>
<span class="term-fg31">-  &quot;0x0000000000000000000000000000000000000001&quot;: {</span>
<span class="term-fg31">-    &quot;balance&quot;: &quot;111111111&quot;</span>
<span class="term-fg31">-  },</span>
<span class="term-fg31">-  &quot;0x0000000000000000000000000000000000000002&quot;: {</span>
<span class="term-fg31">-    &quot;balance&quot;: &quot;222222222&quot;</span>
<span class="term-fg31">-  }</span>
<span class="term-fg31">-}</span>
<span class="term-fg31">-```</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-With the genesis state defined in the above JSON file, you&#39;ll need to initialize **every**</span>
<span class="term-fg31">-`geth` node with it prior to starting it up to ensure all blockchain parameters are correctly</span>
<span class="term-fg31">-set:</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-```shell</span>
<span class="term-fg31">-$ geth init path&#47;to&#47;genesis.json</span>
<span class="term-fg31">-```</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-#### Creating the rendezvous point</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-With all nodes that you want to run initialized to the desired genesis state, you&#39;ll need to</span>
<span class="term-fg31">-start a bootstrap node that others can use to find each other in your network and&#47;or over</span>
<span class="term-fg31">-the internet. The clean way is to configure and run a dedicated bootnode:</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-```shell</span>
<span class="term-fg31">-$ bootnode --genkey=boot.key</span>
<span class="term-fg31">-$ bootnode --nodekey=boot.key</span>
<span class="term-fg31">-```</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-With the bootnode online, it will display an [`enode` URL](https:&#47;&#47;ethereum.org&#47;en&#47;developers&#47;docs&#47;networking-layer&#47;network-addresses&#47;#enode)</span>
<span class="term-fg31">-that other nodes can use to connect to it and exchange peer information. Make sure to</span>
<span class="term-fg31">-replace the displayed IP address information (most probably `[::]`) with your externally</span>
<span class="term-fg31">-accessible IP to get the actual `enode` URL.</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-*Note: You could also use a full-fledged `geth` node as a bootnode, but it&#39;s the less</span>
<span class="term-fg31">-recommended way.*</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-#### Starting up your member nodes</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-With the bootnode operational and externally reachable (you can try</span>
<span class="term-fg31">-`telnet &lt;ip&gt; &lt;port&gt;` to ensure it&#39;s indeed reachable), start every subsequent `geth`</span>
<span class="term-fg31">-node pointed to the bootnode for peer discovery via the `--bootnodes` flag. It will</span>
<span class="term-fg31">-probably also be desirable to keep the data directory of your private network separated, so</span>
<span class="term-fg31">-do also specify a custom `--datadir` flag.</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-```shell</span>
<span class="term-fg31">-$ geth --datadir=path&#47;to&#47;custom&#47;data&#47;folder --bootnodes=&lt;bootnode-enode-url-from-above&gt;</span>
<span class="term-fg31">-```</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-*Note: Since your network will be completely cut off from the main and test networks, you&#39;ll</span>
<span class="term-fg31">-also need to configure a miner to process transactions and create new blocks for you.*</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-#### Running a private miner</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-In a private network setting a single CPU miner instance is more than enough for</span>
<span class="term-fg31">-practical purposes as it can produce a stable stream of blocks at the correct intervals</span>
<span class="term-fg31">-without needing heavy resources (consider running on a single thread, no need for multiple</span>
<span class="term-fg31">-ones either). To start a `geth` instance for mining, run it with all your usual flags, extended</span>
<span class="term-fg31">-by:</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-```shell</span>
<span class="term-fg31">-$ geth &lt;usual-flags&gt; --mine --miner.threads=1 --miner.etherbase=0x0000000000000000000000000000000000000000</span>
<span class="term-fg31">-```</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-Which will start mining blocks and transactions on a single CPU thread, crediting all</span>
<span class="term-fg31">-proceedings to the account specified by `--miner.etherbase`. You can further tune the mining</span>
<span class="term-fg31">-by changing the default gas limit blocks converge to (`--miner.targetgaslimit`) and the price</span>
<span class="term-fg31">-transactions are accepted at (`--miner.gasprice`).</span>
<span class="term-fg31">-</span>
 ## Contribution
&nbsp;
<span class="term-fg31">-Thank you for considering helping out with the source code! We welcome contributions</span>
<span class="term-fg31">-from anyone on the internet, and are grateful for even the smallest of fixes!</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-If you&#39;d like to contribute to go-ethereum, please fork, fix, commit and send a pull request</span>
<span class="term-fg31">-for the maintainers to review and merge into the main code base. If you wish to submit</span>
<span class="term-fg31">-more complex changes though, please check up with the core devs first on [our Discord Server](https:&#47;&#47;discord.gg&#47;invite&#47;nthXNEv)</span>
<span class="term-fg31">-to ensure those changes are in line with the general philosophy of the project and&#47;or get</span>
<span class="term-fg31">-some early feedback which can make both your efforts much lighter as well as our review</span>
<span class="term-fg31">-and merge procedures quick and simple.</span>
<span class="term-fg32">+We welcome any contributions and aim to respond promptly to issues and pull requests.</span>
&nbsp;
 Please make sure your contributions adhere to our coding guidelines:
&nbsp;
<span class="term-fg36">@@ -333,26 +71,14 @@</span>  * Code must adhere to the official Go [formatting](https:&#47;&#47;golang.org&#47;doc&#47;effective_go.html#formatting)
    guidelines (i.e. uses [gofmt](https:&#47;&#47;golang.org&#47;cmd&#47;gofmt&#47;)).
  * Code must be documented adhering to the official Go [commentary](https:&#47;&#47;golang.org&#47;doc&#47;effective_go.html#commentary)
    guidelines.
<span class="term-fg31">- * Pull requests need to be based on and opened against the `master` branch.</span>
<span class="term-fg31">- * Commit messages should be prefixed with the package(s) they modify.</span>
<span class="term-fg31">-   * E.g. &quot;eth, rpc: make trace configs optional&quot;</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-Please see the [Developers&#39; Guide](https:&#47;&#47;geth.ethereum.org&#47;docs&#47;developers&#47;geth-developer&#47;dev-guide)</span>
<span class="term-fg31">-for more details on configuring your environment, managing project dependencies, and</span>
<span class="term-fg31">-testing procedures.</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-### Contributing to geth.ethereum.org</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-For contributions to the [go-ethereum website](https:&#47;&#47;geth.ethereum.org), please checkout and raise pull requests against the `website` branch.</span>
<span class="term-fg31">-For more detailed instructions please see the `website` branch [README](https:&#47;&#47;github.com&#47;ethereum&#47;go-ethereum&#47;tree&#47;website#readme) or the </span>
<span class="term-fg31">-[contributing](https:&#47;&#47;geth.ethereum.org&#47;docs&#47;developers&#47;geth-developer&#47;contributing) page of the website.</span>
<span class="term-fg32">+ * Pull requests need to be based on and opened against the `main` branch.</span>
&nbsp;
 ## License
&nbsp;
<span class="term-fg31">-The go-ethereum library (i.e. all code outside of the `cmd` directory) is licensed under the</span>
<span class="term-fg32">+The Immutable go-ethereum library (i.e. all code outside of the `cmd` directory) is licensed under the</span>
 [GNU Lesser General Public License v3.0](https:&#47;&#47;www.gnu.org&#47;licenses&#47;lgpl-3.0.en.html),
 also included in our repository in the `COPYING.LESSER` file.
&nbsp;
<span class="term-fg31">-The go-ethereum binaries (i.e. all code inside of the `cmd` directory) are licensed under the</span>
<span class="term-fg32">+The Immutable go-ethereum binaries (i.e. all code inside of the `cmd` directory) are licensed under the</span>
 [GNU General Public License v3.0](https:&#47;&#47;www.gnu.org&#47;licenses&#47;gpl-3.0.en.html), also
 included in our repository in the `COPYING` file.</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-0e6ebd325dced8b620316852" role="button"
                       aria-expanded="false" aria-controls="id-0e6ebd325dced8b620316852">
                        <code>SECURITY.md</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/SECURITY.md" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/SECURITY.md" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+7</span></div>
                            <div class="text-start"><span class="text-danger">-167</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-0e6ebd325dced8b620316852"><span class="term-fg1">diff --git go-ethereum&#47;SECURITY.md immutable-geth&#47;SECURITY.md</span>
<span class="term-fg1">index 41b900d5e98432f6c49ea3830349d912781fe0ff..b72cf86d634013ff3894034c8a966e8695fd71ff 100644</span>
<span class="term-fg1">--- go-ethereum&#47;SECURITY.md</span>
<span class="term-fg1">+++ immutable-geth&#47;SECURITY.md</span>
<span class="term-fg36">@@ -1,175 +1,15 @@</span>
 # Security Policy
&nbsp;
<span class="term-fg31">-## Supported Versions</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-Please see [Releases](https:&#47;&#47;github.com&#47;ethereum&#47;go-ethereum&#47;releases). We recommend using the [most recently released version](https:&#47;&#47;github.com&#47;ethereum&#47;go-ethereum&#47;releases&#47;latest).</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-## Audit reports</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-Audit reports are published in the `docs` folder: https:&#47;&#47;github.com&#47;ethereum&#47;go-ethereum&#47;tree&#47;master&#47;docs&#47;audits </span>
<span class="term-fg31">-</span>
<span class="term-fg31">-| Scope | Date | Report Link |</span>
<span class="term-fg31">-| ------- | ------- | ----------- |</span>
<span class="term-fg31">-| `geth` | 20170425 | [pdf](https:&#47;&#47;github.com&#47;ethereum&#47;go-ethereum&#47;blob&#47;master&#47;docs&#47;audits&#47;2017-04-25_Geth-audit_Truesec.pdf) |</span>
<span class="term-fg31">-| `clef` | 20180914 | [pdf](https:&#47;&#47;github.com&#47;ethereum&#47;go-ethereum&#47;blob&#47;master&#47;docs&#47;audits&#47;2018-09-14_Clef-audit_NCC.pdf) |</span>
<span class="term-fg31">-| `Discv5` | 20191015 | [pdf](https:&#47;&#47;github.com&#47;ethereum&#47;go-ethereum&#47;blob&#47;master&#47;docs&#47;audits&#47;2019-10-15_Discv5_audit_LeastAuthority.pdf) |</span>
<span class="term-fg31">-| `Discv5` | 20200124 | [pdf](https:&#47;&#47;github.com&#47;ethereum&#47;go-ethereum&#47;blob&#47;master&#47;docs&#47;audits&#47;2020-01-24_DiscV5_audit_Cure53.pdf) |</span>
<span class="term-fg32">+Security vulnerabilities should be disclosed to the project maintainers through our public [immutable bug bounty program](https:&#47;&#47;bugcrowd.com&#47;immutable-og) or email us at security@immutable.com.</span>
&nbsp;
<span class="term-fg31">-## Reporting a Vulnerability</span>
<span class="term-fg32">+## Security Patches</span>
&nbsp;
<span class="term-fg31">-**Please do not file a public ticket** mentioning the vulnerability.</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-To find out how to disclose a vulnerability in Ethereum visit [https:&#47;&#47;bounty.ethereum.org](https:&#47;&#47;bounty.ethereum.org) or email bounty@ethereum.org. Please read the [disclosure page](https:&#47;&#47;github.com&#47;ethereum&#47;go-ethereum&#47;security&#47;advisories?state=published) for more information about publicly disclosed security vulnerabilities.</span>
<span class="term-fg31">-</span>
<span class="term-fg31">-Use the built-in `geth version-check` feature to check whether the software is affected by any known vulnerability. This command will fetch the latest [`vulnerabilities.json`](https:&#47;&#47;geth.ethereum.org&#47;docs&#47;vulnerabilities&#47;vulnerabilities.json) file which contains known security vulnerabilities concerning `geth`, and cross-check the data against its own version number.</span>
<span class="term-fg32">+Security vulnerabilities will be patched as soon as responsibly possible, and published as an advisory on this repository.</span>
&nbsp;
<span class="term-fg31">-The following key may be used to communicate sensitive information to developers.</span>
<span class="term-fg32">+## Supported Versions</span>
&nbsp;
<span class="term-fg31">-Fingerprint: `AE96 ED96 9E47 9B00 84F3 E17F E88D 3334 FA5F 6A0A`</span>
<span class="term-fg32">+Please see [Releases](https:&#47;&#47;github.com&#47;immutable&#47;geth&#47;releases). We recommend using the [most recently released version](https:&#47;&#47;github.com&#47;immutable&#47;geth&#47;releases&#47;latest).</span>
&nbsp;
<span class="term-fg31">-```</span>
<span class="term-fg31">------BEGIN PGP PUBLIC KEY BLOCK-----</span>
<span class="term-fg31">-Version: SKS 1.1.6</span>
<span class="term-fg31">-Comment: Hostname: pgp.mit.edu</span>
<span class="term-fg32">+Security patches will be released for the latest minor of a given major release. For example, if an issue is found in versions &gt;=1.1.0 and the latest is 1.8.0, the patch will be released only in version 1.8.1.</span>
&nbsp;
<span class="term-fg31">-mQINBFgl3tgBEAC8A1tUBkD9YV+eLrOmtgy+&#47;JS&#47;H9RoZvkg3K1WZ8IYfj6iIRaYneAk3Bp1</span>
<span class="term-fg31">-82GUPVz&#47;zhKr2g0tMXIScDR3EnaDsY+Qg+JqQl8NOG+Cikr1nnkG2on9L8c8yiqry1ZTCmYM</span>
<span class="term-fg31">-qCa2acTFqnyuXJ482aZNtB4QG2BpzfhW4k8YThpegk&#47;EoRUim+y7buJDtoNf7YILlhDQXN8q</span>
<span class="term-fg31">-lHB02DWOVUihph9tUIFsPK6BvTr9SIr&#47;eG6j6k0bfUo9pexOn7LS4SojoJmsm&#47;5dp6AoKlac</span>
<span class="term-fg31">-48cZU5zwR9AYcq&#47;nvkrfmf2WkObg&#47;xRdEvKZzn05jRopmAIwmoC3CiLmqCHPmT5a29vEob&#47;y</span>
<span class="term-fg31">-PFE335k+ujjZCPOu7OwjzDk7M0zMSfnNfDq8bXh16nn+ueBxJ0NzgD1oC6c2PhM+XRQCXCho</span>
<span class="term-fg31">-yI8vbfp4dGvCvYqvQAE1bWjqnumZ&#47;7vUPgZN6gDfiAzG2mUxC2SeFBhacgzDvtQls+uuvm+F</span>
<span class="term-fg31">-nQOUgg2Hh8x2zgoZ7kqV29wjaUPFREuew7e+Th5BxielnzOfVycVXeSuvvIn6cd3g&#47;s8mX1c</span>
<span class="term-fg31">-2kLSXJR7+KdWDrIrR5Az0kwAqFZt6B6QTlDrPswu3mxsm5TzMbny0PsbL&#47;HBM+GZEZCjMXxB</span>
<span class="term-fg31">-8bqV2eSaktjnSlUNX1VXxyOxXA+ZG2jwpr51egi57riVRXokrQARAQABtDRFdGhlcmV1bSBG</span>
<span class="term-fg31">-b3VuZGF0aW9uIEJ1ZyBCb3VudHkgPGJvdW50eUBldGhlcmV1bS5vcmc+iQIcBBEBCAAGBQJa</span>
<span class="term-fg31">-FCY6AAoJEHoMA3Q0&#47;nfveH8P+gJBPo9BXZL8isUfbUWjwLi81Yi70hZqIJUnz64SWTqBzg5b</span>
<span class="term-fg31">-mCZ69Ji5637THsxQetS2ARabz0DybQ779FhD&#47;IWnqV9T3KuBM&#47;9RzJtuhLzKCyMrAINPMo28</span>
<span class="term-fg31">-rKWdunHHarpuR4m3tL2zWJkle5QVYb+vkZXJJE98PJw+N4IYeKKeCs2ubeqZu636GA0sMzzB</span>
<span class="term-fg31">-Jn3m&#47;dRRA2va+&#47;zzbr6F6b51ynzbMxWKTsJnstjC8gs8EeI+Zcd6otSyelLtCUkk3h5sTvpV</span>
<span class="term-fg31">-Wv67BNSU0BYsMkxyFi9PUyy07Wixgeas89K5jG1oOtDva&#47;FkpRHrTE&#47;WA5OXDRcLrHJM+SwD</span>
<span class="term-fg31">-CwqcLQqJd09NxwUW1iKeBmPptTiOGu1Gv2o7aEyoaWrHRBO7JuYrQrj6q2B3H1Je0zjAd2qt</span>
<span class="term-fg31">-09ni2bLwLn4LA+VDpprNTO+eZDprv09s2oFSU6NwziHybovu0y7X4pADGkK2evOM7c86PohX</span>
<span class="term-fg31">-QRQ1M1T16xLj6wP8&#47;Ykwl6v&#47;LUk7iDPXP3GPILnh4YOkwBR3DsCOPn8098xy7FxEELmupRzt</span>
<span class="term-fg31">-Cj9oC7YAoweeShgUjBPzb+nGY1m6OcFfbUPBgFyMMfwF6joHbiVIO+39+Ut2g2ysZa7KF+yp</span>
<span class="term-fg31">-XqVDqyEkYXsOLb25OC7brt8IJEPgBPwcHK5GNag6RfLxnQV+iVZ9KNH1yQgSiQI+BBMBAgAo</span>
<span class="term-fg31">-AhsDBgsJCAcDAgYVCAIJCgsEFgIDAQIeAQIXgAUCWglh+gUJBaNgWAAKCRDojTM0+l9qCgQ2</span>
<span class="term-fg31">-D&#47;4udJpV4zGIZW1yNaVvtd3vfKsTLi7GIRJLUBqVb2Yx&#47;uhnN8jTl&#47;tAhCVosCQ1pzvi9kMl</span>
<span class="term-fg31">-s8qO1vu2kw5EWFFkwK96roI8pTql3VIjwhRVQrCkR7oAk&#47;eUd1U&#47;nt2q6J4UTYeVgqbq4dsI</span>
<span class="term-fg31">-ZZTRyPJMD667YpuAIcaah+w9j&#47;E5xksYQdMeprnDrQkkBCb4FIMqfDzBPKvEa8DcQr949K85</span>
<span class="term-fg31">-kxhr6LDq9i5l4Egxt2JdH8DaR4GLca6+oHy0MyPs&#47;bZOsfmZUObfM2oZgPpqYM96JanhzO1j</span>
<span class="term-fg31">-dpnItyBii2pc+kNx5nMOf4eikE&#47;MBv+WUJ0TttWzApGGmFUzDhtuEvRH9NBjtJ&#47;pMrYspIGu</span>
<span class="term-fg31">-O&#47;QNY5KKOKQTvVIlwGcm8dTsSkqtBDSUwZyWbfKfKOI1&#47;RhM9dC3gj5&#47;BOY57DYYV4rdTK01</span>
<span class="term-fg31">-ZtYjuhdfs2bhuP1uF&#47;cgnSSZlv8azvf7Egh7tHPnYxvLjfq1bJAhCIX0hNg0a81&#47;ndPAEFky</span>
<span class="term-fg31">-fSko+JPKvdSvsUcSi2QQ4U2HX&#47;&#47;jNBjXRfG4F0utgbJnhXzEckz6gqt7wSDZH2oddVuO8Ssc</span>
<span class="term-fg31">-T7sK+CdXthSKnRyuI+sGUpG+6glpKWIfYkWFKNZWuQ+YUatY3QEDHXTIioycSmV8p4d&#47;g&#47;0S</span>
<span class="term-fg31">-V6TegidLxY8bXMkbqz+3n6FArRffv5MH7qt3cYkCPgQTAQIAKAUCWCXhOwIbAwUJAeEzgAYL</span>
<span class="term-fg31">-CQgHAwIGFQgCCQoLBBYCAwECHgECF4AACgkQ6I0zNPpfagrN&#47;w&#47;+Igp3vtYdNunikw3yHnYf</span>
<span class="term-fg31">-Jkm0MmaMDUM9mtsaXVN6xb9n25N3Xa3GWCpmdsbYZ8334tI&#47;oQ4&#47;NHq&#47;bEI5WFH5F1aFkMkm</span>
<span class="term-fg31">-5AJVLuUkipCtmCZ5NkbRPJA9l0uNUUE6uuFXBhf4ddu7jb0jMetRF&#47;kifJHVCCo5fISUNhLp</span>
<span class="term-fg31">-7bwcWq9qgDQNZNYMOo4s9WX5Tl+5x4gTZdd2&#47;cAYt49h&#47;wnkw+huM+Jm0GojpLqIQ1jZiffm</span>
<span class="term-fg31">-otf5rF4L+JhIIdW0W4IIh1v9BhHVllXw+z9oj0PALstT5h8&#47;DuKoIiirFJ4DejU85GR1KKAS</span>
<span class="term-fg31">-DeO19G&#47;lSpWj1rSgFv2N2gAOxq0X+BbQTua2jdcY6JpHR4H1JJ2wzfHsHPgDQcgY1rGlmjVF</span>
<span class="term-fg31">-aqU73WV4&#47;hzXc&#47;HshK&#47;k4Zd8uD4zypv6rFsZ3UemK0aL2zXLVpV8SPWQ61nS03x675SmDlYr</span>
<span class="term-fg31">-A80ENfdqvsn00JQuBVIv4Tv0Ub7NfDraDGJCst8rObjBT&#47;0vnBWTBCebb2EsnS2iStIFkWdz</span>
<span class="term-fg31">-&#47;WXs4L4Yzre1iJwqRjiuqahZR5jHsjAUf2a0O29HVHE7zlFtCFmLPClml2lGQfQOpm5klGZF</span>
<span class="term-fg31">-rmvus+qZ9rt35UgWHPZezykkwtWrFOwspwuCWaPDto6tgbRJZ4ftitpdYYM3dKW9IGJXBwrt</span>
<span class="term-fg31">-BQrMsu+lp0vDF+yJAlUEEwEIAD8CGwMGCwkIBwMCBhUIAgkKCwQWAgMBAh4BAheAFiEErpbt</span>
<span class="term-fg31">-lp5HmwCE8+F&#47;6I0zNPpfagoFAmEAEJwFCQycmLgACgkQ6I0zNPpfagpWoBAAhOcbMAUw6Zt0</span>
<span class="term-fg31">-GYzT3sR5&#47;c0iatezPzXEXJf9ebzR8M5uPElXcxcnMx1dvXZmGPXPJKCPa99WCu1NZYy8F+Wj</span>
<span class="term-fg31">-GTOY9tfIkvSxhys1p&#47;giPAmvid6uQmD+bz7ivktnyzCkDWfMA+l8lsCSEqVlaq6y5T+a6SWB</span>
<span class="term-fg31">-6TzC2S0MPb&#47;RrC&#47;7DpwyrNYWumvyVJh09adm1Mw&#47;UGgst&#47;sZ8eMaRYEd3X0yyT1CBpX4zp2E</span>
<span class="term-fg31">-qQj9IEOTizvzv1x2jkHe5ZUeU3+nTBNlhSA+WFHUi0pfBdo2qog3Mv2EC1P2qMKoSdD5tPbA</span>
<span class="term-fg31">-zql1yKoHHnXOMsqdftGwbiv2sYXWvrYvmaCd3Ys&#47;viOyt3HOy9uV2ZEtBd9Yqo9x&#47;NZj8QMA</span>
<span class="term-fg31">-nY5k8jjrIXbUC89MqrJsQ6xxWQIg5ikMT7DvY0Ln89ev4oJyVvwIQAwCm4jUzFNm9bZLYDOP</span>
<span class="term-fg31">-5lGJCV7tF5NYVU7NxNM8vescKc40mVNK&#47;pygS5mxhK9QYOUjZsIv8gddrl1TkqrFMuxFnTyN</span>
<span class="term-fg31">-WvzE29wFu&#47;n4N1DkF+ZBqS70SlRvB+Hjz5LrDgEzF1Wf1eA&#47;wq1dZbvMjjDVIc2VGlYp8Cp2</span>
<span class="term-fg31">-8ob23c1seTtYXTNYgSR5go4EpH+xi+bIWv01bQQ9xGwBbT5sm4WUeWOcmX4QewzLZ3T&#47;wK9+</span>
<span class="term-fg31">-N4Ye&#47;hmU9O34FwWJOY58EIe0OUV0aGVyZXVtIEZvdW5kYXRpb24gU2VjdXJpdHkgVGVhbSA8</span>
<span class="term-fg31">-c2VjdXJpdHlAZXRoZXJldW0ub3JnPokCHAQRAQgABgUCWhQmOgAKCRB6DAN0NP5372LSEACT</span>
<span class="term-fg31">-wZk1TASWZj5QF7rmkIM1GEyBxLE+PundNcMgM9Ktj1315ED8SmiukNI4knVS1MY99OIgXhQl</span>
<span class="term-fg31">-D1foF2GKdTomrwwC4012zTNyUYCY60LnPZ6Z511HG+rZgZtZrbkz0IiUpwAlhGQND77lBqem</span>
<span class="term-fg31">-J3K+CFX2XpDA&#47;ojui&#47;kqrY4cwMT5P8xPJkwgpRgw&#47;jgdcZyJTsXdHblV9IGU4H1Vd1SgcfAf</span>
<span class="term-fg31">-Db3YxDUlBtzlp0NkZqxen8irLIXUQvsfuIfRUbUSkWoK&#47;n3U&#47;gOCajAe8ZNF07iX4OWjH4Sw</span>
<span class="term-fg31">-NDA841WhFWcGE+d8+pfMVfPASU3UPKH72uw86b2VgR46Av6voyMFd1pj+yCA+YAhJuOpV4yL</span>
<span class="term-fg31">-QaGg2Z0kVOjuNWK&#47;kBzp1F58DWGh4YBatbhE&#47;UyQOqAAtR7lNf0M3QF9AdrHTxX8oZeqVW3V</span>
<span class="term-fg31">-Fmi2mk0NwCIUv8SSrZr1dTchp04OtyXe5gZBXSfzncCSRQIUDC8OgNWaOzAaUmK299v4bvye</span>
<span class="term-fg31">-uSCxOysxC7Q1hZtjzFPKdljS81mRlYeUL4fHlJU9R57bg8mriSXLmn7eKrSEDm&#47;EG5T8nRx7</span>
<span class="term-fg31">-TgX2MqJs8sWFxD2+bboVEu75yuFmZ&#47;&#47;nmCBApAit9Hr2&#47;sCshGIEpa9MQ6xJCYUxyqeJH+Cc</span>
<span class="term-fg31">-Aja0UfXhnK2uvPClpJLIl4RE3gm4OXeE1IkCPgQTAQIAKAIbAwYLCQgHAwIGFQgCCQoLBBYC</span>
<span class="term-fg31">-AwECHgECF4AFAloJYfoFCQWjYFgACgkQ6I0zNPpfagr4MQ&#47;&#47;cfp3GSbSG8dkqgctW67Fy7cQ</span>
<span class="term-fg31">-diiTmx3cwxY+tlI3yrNmdjtrIQMzGdqtY6LNz7aN87F8mXNf+DyVHX9+wd1Y8U+E+hVCTzKC</span>
<span class="term-fg31">-sefUfxTz6unD9TTcGqaoelgIPMn4IiKz1RZE6eKpfDWe6q78W1Y6x1bE0qGNSjqT&#47;QSxpezF</span>
<span class="term-fg31">-E&#47;OAm&#47;t8RRxVxDtqz8LfH2zLea5zaC+ADj8EqgY9vX9TQa4DyVV8MgOyECCCadJQCD5O5hIA</span>
<span class="term-fg31">-B2gVDWwrAUw+KBwskXZ7Iq4reJTKLEmt5z9zgtJ&#47;fABwaCFt66ojwg0&#47;RjbO9cNA3ZwHLGwU</span>
<span class="term-fg31">-C6hkb6bRzIoZoMfYxVS84opiqf&#47;Teq+t&#47;XkBYCxbSXTJDA5MKjcVuw3N6YKWbkGP&#47;EfQThe7</span>
<span class="term-fg31">-BfAKFwwIw5YmsWjHK8IQj6R6hBxzTz9rz8y1Lu8EAAFfA7OJKaboI2qbOlauH98OuOUmVtr1</span>
<span class="term-fg31">-TczHO+pTcgWVN0ytq2&#47;pX5KBf4vbmULNbg3HFRq+gHx8CW+jyXGkcqjbgU&#47;5FwtDxeqRTdGJ</span>
<span class="term-fg31">-SyBGNBEU6pBNolyynyaKaaJjJ&#47;biY27pvjymL5rlz95BH3Dn16Z4RRmqwlT6eq&#47;wFYginujg</span>
<span class="term-fg31">-CCE1icqOSE+Vjl7V8tV8AcgANkXKdbBE+Q8wlKsGI&#47;kS1w4XFAYcaNHFT8qNeS8TSFXFhvU8</span>
<span class="term-fg31">-HylYxO79t56JAj4EEwECACgFAlgl3tgCGwMFCQHhM4AGCwkIBwMCBhUIAgkKCwQWAgMBAh4B</span>
<span class="term-fg31">-AheAAAoJEOiNMzT6X2oKmUMP&#47;0hnaL6bVyepAq2LIdvIUbHfagt&#47;Oo&#47;KVfZs4bkM+xJOitJR</span>
<span class="term-fg31">-0kwZV9PTihXFdzhL&#47;YNWc2+LtEBtKItqkJZKmWC0E6OPXGVuU6hfFPebuzVccYJfm0Q3Ej19</span>
<span class="term-fg31">-VJI9Uomf59Bpak8HYyEED7WVQjoYn7XVPsonwus&#47;9+LDX+c5vutbrUdbjga3KjHbewD93X4O</span>
<span class="term-fg31">-wVVoXyHEmU2Plyg8qvzFbNDylCWO7N2McO6SN6+7DitGZGr2+jO+P2R4RT1cnl2V3IRVcWZ0</span>
<span class="term-fg31">-OTspPSnRGVr2fFiHN&#47;+v8G&#47;wHPLQcJZFvYPfUGNdcYbTmhWdiY0bEYXFiNrgzCCsyad7eKUR</span>
<span class="term-fg31">-WN9QmxqmyqLDjUEDJCAh19ES6Vg3tqGwXk+uNUCoF30ga0TxQt6UXZJDEQFAGeASQ&#47;RqE&#47;q1</span>
<span class="term-fg31">-EAuLv8IGM8o7IqKO2pWfLuqsY6dTbKBwDzz9YOJt7EOGuPPQbHxaYStTushZmJnm7hi8lhVG</span>
<span class="term-fg31">-jT7qsEJdE95Il+I&#47;mHWnXsCevaXjZugBiyV9yvOq4Hwwe2s1zKfrnQ4u0cadvGAh2eIqum7M</span>
<span class="term-fg31">-Y3o6nD47aJ3YmEPX&#47;WnhI56bACa2GmWvUwjI4c0&#47;er3esSPYnuHnM9L8Am4qQwMVSmyU80tC</span>
<span class="term-fg31">-MI7A9e13Mvv+RRkYFLJ7PVPdNpbW5jqX1doklFpKf6&#47;XM+B+ngYneU+zgCUBiQJVBBMBCAA&#47;</span>
<span class="term-fg31">-AhsDBgsJCAcDAgYVCAIJCgsEFgIDAQIeAQIXgBYhBK6W7ZaeR5sAhPPhf+iNMzT6X2oKBQJh</span>
<span class="term-fg31">-ABCQBQkMnJi4AAoJEOiNMzT6X2oKAv0P+gJ3twBp5efNWyVLcIg4h4cOo9uD0NPvz8&#47;fm2gX</span>
<span class="term-fg31">-FoOJL3MeigtPuSVfE9kuTaTuRbArzuFtdvH6G&#47;kcRQvOlO4zyiIRHCk1gDHoIvvtn6RbRhVm</span>
<span class="term-fg31">-&#47;Xo4uGIsFHst7n4A7BjicwEK5Op6Ih5Hoq19xz83YSBgBVk2fYEJIRyJiKFbyPjH0eSYe8v+</span>
<span class="term-fg31">-Ra5&#47;F85ugLx1P6mMVkW+WPzULns89riW7BGTnZmXFHZp8nO2pkUlcI7F3KRG7l4kmlC50ox6</span>
<span class="term-fg31">-DiG&#47;6AJCVulbAClky9C68TmJ&#47;R1RazQxU&#47;9IqVywsydq66tbJQbm5Z7GEti0C5jjbSRJL2oT</span>
<span class="term-fg31">-1xC7Rilr85PMREkPL3vegJdgj5PKlffZ&#47;MocD&#47;0EohiQ7wFpejFD4iTljeh0exRUwCRb6655</span>
<span class="term-fg31">-9ib34JSQgU8Hl4JJu+mEgd9v0ZHD0&#47;1mMD6fnAR84zca+O3cdASbnQmzTOKcGzLIrkE8TEnU</span>
<span class="term-fg31">-+2UZ8Ol7SAAqmBgzY1gKOilUho6dkyCAwNL+QDpvrITDPLEFPsjyB&#47;M2KudZSVEn+Rletju1</span>
<span class="term-fg31">-qkMW31qFMNlsbwzMZw+0USeGcs31Cs0B2&#47;WQsro99CExlhS9auUFkmoVjJmYVTIYOM0zuPa4</span>
<span class="term-fg31">-OyGspqPhRu5hEsmMDPDWD7Aad5k4GTqogQNnuKyRliZjXXrDZqFD5nfsJSL8Ky&#47;sJGEMuQIN</span>
<span class="term-fg31">-BFgl3tgBEACbgq6HTN5gEBi0lkD&#47;MafInmNi+59U5gRGYqk46WlfRjhHudXjDpgD0lolGb4h</span>
<span class="term-fg31">-YontkMaKRlCg2Rvgjvk3Zve0PKWjKw7gr8YBa9fMFY8BhAXI32OdyI9rFhxEZFfWAfwKVmT1</span>
<span class="term-fg31">-9BdeAQRFvcfd+8w8f1XVc+zddULMJFBTr+xKDlIRWwTkdLPQeWbjo0eHl&#47;g4tuLiLrTxVbnj</span>
<span class="term-fg31">-26bf+2+1DbM&#47;w5VavzPrkviHqvKe&#47;QP&#47;gay4QDViWvFgLb90idfAHIdsPgflp0VDS5rVHFL6</span>
<span class="term-fg31">-D73rSRdIRo3I8c8mYoNjSR4XDuvgOkAKW9LR3pvouFHHjp6Fr0GesRbrbb2EG66iPsR99MQ7</span>
<span class="term-fg31">-FqIL9VMHPm2mtR+XvbnKkH2rYyEqaMbSdk29jGapkAWle4sIhSKk749A4tGkHl08KZ2N9o6G</span>
<span class="term-fg31">-rfUehP&#47;V2eJLaph2DioFL1HxRryrKy80QQKLMJRekxigq8greW8xB4zuf9Mkuou+RHNmo8Pe</span>
<span class="term-fg31">-bHjFstLigiD6&#47;zP2e+4tUmrT0&#47;JTGOShoGMl8Rt0VRxdPImKun+4LOXbfOxArOSkY6i35+gs</span>
<span class="term-fg31">-gkkSy1gTJE0BY3S9auT6+YrglY&#47;TWPQ9IJxWVOKlT+3WIp5wJu2bBKQ420VLqDYzkoWytel&#47;</span>
<span class="term-fg31">-bM1ACUtipMiIVeUs2uFiRjpzA1Wy0QHKPTdSuGlJPRrfcQARAQABiQIlBBgBAgAPAhsMBQJa</span>
<span class="term-fg31">-CWIIBQkFo2BYAAoJEOiNMzT6X2oKgSwQAKKs7BGF8TyZeIEO2EUK7R2bdQDCdSGZY06tqLFg</span>
<span class="term-fg31">-3IHMGxDMb&#47;7FVoa2AEsFgv6xpoebxBB5zkhUk7lslgxvKiSLYjxfNjTBltfiFJ+eQnf+OTs8</span>
<span class="term-fg31">-KeR51lLa66rvIH2qUzkNDCCTF45H4wIDpV05AXhBjKYkrDCrtey1rQyFp5fxI+0IQ1UKKXvz</span>
<span class="term-fg31">-ZK4GdxhxDbOUSd38MYy93nqcmclGSGK&#47;gF8XiyuVjeifDCM6+T1NQTX0K9lneidcqtBDvlgg</span>
<span class="term-fg31">-JTLJtQPO33o5EHzXSiud+dKth1uUhZOFEaYRZoye1YE3yB0TNOOE8fXlvu8iuIAMBSDL9ep6</span>
<span class="term-fg31">-sEIaXYwoD60I2gHdWD0lkP0DOjGQpi4ouXM3Edsd5MTi0MDRNTij431kn8T&#47;D0LCgmoUmYYM</span>
<span class="term-fg31">-BgbwFhXr67axPZlKjrqR0z3F&#47;Elv0ZPPcVg1tNznsALYQ9Ovl6b5M3cJ5GapbbvNWC7yEE1q</span>
<span class="term-fg31">-Scl9HiMxjt&#47;H6aPastH63&#47;7wcN0TslW+zRBy05VNJvpWGStQXcngsSUeJtI1Gd992YNjUJq4</span>
<span class="term-fg31">-&#47;Lih6Z1TlwcFVap+cTcDptoUvXYGg&#47;9mRNNPZwErSfIJ0Ibnx9wPVuRN6NiCLOt2mtKp2F1p</span>
<span class="term-fg31">-M6AOQPpZ85vEh6I8i6OaO0w&#47;Z0UHBwvpY6jDUliaROsWUQsqz78Z34CVj4cy6vPW2EF4iQIl</span>
<span class="term-fg31">-BBgBAgAPBQJYJd7YAhsMBQkB4TOAAAoJEOiNMzT6X2oKTjgP&#47;1ojCVyGyvHMLUgnX0zwrR5Q</span>
<span class="term-fg31">-1M5RKFz6kHwKjODVLR3Isp8I935oTQt3DY7yFDI4t0GqbYRQMtxcNEb7maianhK2trCXfhPs</span>
<span class="term-fg31">-6&#47;L04igjDf5iTcmzamXN6xnh5xkz06hZJJCMuu4MvKxC9MQHCVKAwjswl&#47;9H9JqIBXAY3E2l</span>
<span class="term-fg31">-LpX5P+5jDZuPxS86p3+k4Rrdp9KTGXjiuEleM3zGlz5BLWydqovOck7C2aKh27ETFpDYY0z3</span>
<span class="term-fg31">-yQ5AsPJyk1rAr0wrH6+ywmwWlzuQewavnrLnJ2M8iMFXpIhyHeEIU&#47;f7o8f+dQk72rZ9CGzd</span>
<span class="term-fg31">-cqig2za&#47;BS3zawZWgbv2vB2elNsIllYLdir45jxBOxx2yvJvEuu4glz78y4oJTCTAYAbMlle</span>
<span class="term-fg31">-5gVdPkVcGyvvVS9tinnSaiIzuvWrYHKWll1uYPm2Q1CDs06P5I7bUGAXpgQLUh&#47;XQguy&#47;0sX</span>
<span class="term-fg31">-GWqW3FS5JzP+XgcR&#47;7UASvwBdHylubKbeqEpB7G1s+m+8C67qOrc7EQv3Jmy1YDOkhEyNig1</span>
<span class="term-fg31">-rmjplLuir3tC1X+D7dHpn7NJe7nMwFx2b2MpMkLA9jPPAGPp&#47;ekcu5sxCe+E0J&#47;4UF++K+CR</span>
<span class="term-fg31">-XIxgtzU2UJfp8p9x+ygbx5qHinR0tVRdIzv3ZnGsXrfxnWfSOaB582cU3VRN9INzHHax8ETa</span>
<span class="term-fg31">-QVDnGO5uQa+FiQI8BBgBCAAmAhsMFiEErpbtlp5HmwCE8+F&#47;6I0zNPpfagoFAmEAELYFCQyc</span>
<span class="term-fg31">-mN4ACgkQ6I0zNPpfagoqAQ&#47;+MnDjBx8JWMd&#47;XjeFoYKx&#47;Oo0ntkInV+ME61JTBls4PdVk+TB</span>
<span class="term-fg31">-8PWZdPQHw9SnTvRmykFeznXIRzuxkowjrZYXdPXBxY2b1WyD5V3Ati1TM9vqpaR4osyPs2xy</span>
<span class="term-fg31">-I4dzDssh9YvUsIRL99O04&#47;65lGiYeBNuACq+yK&#47;7nD&#47;ErzBkDYJHhMCdadbVWUACxvVIDvro</span>
<span class="term-fg31">-yQeVLKMsHqMCd8BTGD7VDs79NXskPnN77pAFnkzS4Z2b8SNzrlgTc5pUiuZHIXPIpEYmsYzh</span>
<span class="term-fg31">-ucTU6uI3dN1PbSFHK5tG2pHb4ZrPxY3L20Dgc2Tfu5&#47;SDApZzwvvKTqjdO891MEJ++H+ssOz</span>
<span class="term-fg31">-i4O1UeWKs9owWttan9+PI47ozBSKOTxmMqLSQ0f56Np9FJsV0ilGxRKfjhzJ4KniOMUBA7mP</span>
<span class="term-fg31">-+m+TmXfVtthJred4sHlJMTJNpt+sCcT6wLMmyc3keIEAu33gsJj3LTpkEA2q+V+ZiP6Q8HRB</span>
<span class="term-fg31">-402ITklABSArrPSE&#47;fQU9L8hZ5qmy0Z96z0iyILgVMLuRCCfQOMWhwl8yQWIIaf1yPI07xur</span>
<span class="term-fg31">-epy6lH7HmxjjOR7eo0DaSxQGQpThAtFGwkWkFh8yki8j3E42kkrxvEyyYZDXn2YcI3bpqhJx</span>
<span class="term-fg31">-PtwCMZUJ3kc&#47;skOrs6bOI19iBNaEoNX5Dllm7UHjOgWNDQkcCuOCxucKano=</span>
<span class="term-fg31">-=arte</span>
<span class="term-fg31">------END PGP PUBLIC KEY BLOCK------</span>
<span class="term-fg31">-```</span>
<span class="term-fg32">+Only critical severity bug fixes will be backported to past major releases.</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-db5db7d110403fee05adcd7c" role="button"
                       aria-expanded="false" aria-controls="id-db5db7d110403fee05adcd7c">
                        <code>build/ci.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/build/ci.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/build/ci.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+3</span></div>
                            <div class="text-start"><span class="text-danger">-3</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-db5db7d110403fee05adcd7c"><span class="term-fg1">diff --git go-ethereum&#47;build&#47;ci.go immutable-geth&#47;build&#47;ci.go</span>
<span class="term-fg1">index 4d8dba6ce23405e8ab0ecf9d9cb6fadec1819f48..8c05da9854581aea2f263d9efca5521b09737fdc 100644</span>
<span class="term-fg1">--- go-ethereum&#47;build&#47;ci.go</span>
<span class="term-fg1">+++ immutable-geth&#47;build&#47;ci.go</span>
<span class="term-fg36">@@ -310,9 +310,9 @@</span>
 	&#47;&#47; Enable integration-tests
 	gotest.Args = append(gotest.Args, &quot;-tags=integrationtests&quot;)
&nbsp;
<span class="term-fg31">-	&#47;&#47; Test a single package at a time. CI builders are slow</span>
<span class="term-fg31">-	&#47;&#47; and some tests run into timeouts under load.</span>
<span class="term-fg31">-	gotest.Args = append(gotest.Args, &quot;-p&quot;, &quot;1&quot;)</span>
<span class="term-fg32">+	&#47;&#47; CHANGE(immutable): update flags for CI workflow</span>
<span class="term-fg32">+	&#47;&#47; Use -p for pkg parallelism and --parallel for test func parallelism.</span>
<span class="term-fg32">+	gotest.Args = append(gotest.Args, &quot;-p&quot;, &quot;1&quot;, &quot;--parallel&quot;, &quot;4&quot;)</span>
 	if *coverage {
 		gotest.Args = append(gotest.Args, &quot;-covermode=atomic&quot;, &quot;-cover&quot;)
 	}</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-b8f0bc161aab5987f8727709" role="button"
                       aria-expanded="false" aria-controls="id-b8f0bc161aab5987f8727709">
                        <code>cmd/immutable/README.md</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/immutable/README.md" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+28</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-b8f0bc161aab5987f8727709"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;immutable&#47;README.md immutable-geth&#47;cmd&#47;immutable&#47;README.md</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..1b161b59d14c30e5f01ae4b2f574c1b0e53aa3ff</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;immutable&#47;README.md</span>
<span class="term-fg36">@@ -0,0 +1,28 @@</span>
<span class="term-fg32">+## Immutable</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+This is a fork of go-ethereum that is specific to Immutables deployment and infrastructure.</span>
<span class="term-fg32">+Several commands have been added to the geth-cli to support Immutable&#39;s operations. All subcommands</span>
<span class="term-fg32">+will be accessible under the `immutable` parent command.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+## Run a local network</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+Build the binary:</span>
<span class="term-fg32">+```sh</span>
<span class="term-fg32">+make geth</span>
<span class="term-fg32">+```</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+To bootstrap a minimal chain locally, run:</span>
<span class="term-fg32">+```sh</span>
<span class="term-fg32">+.&#47;build&#47;bin&#47;geth immutable bootstrap local</span>
<span class="term-fg32">+```</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+this will set up a network with 1 validator (http:&#47;&#47;localhost:8545) and 1 RPC (http:&#47;&#47;localhost:8546) node.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+Use --help to learn about the other ways of configuring your local network:</span>
<span class="term-fg32">+```sh</span>
<span class="term-fg32">+.&#47;build&#47;bin&#47;geth immutable bootstrap --help</span>
<span class="term-fg32">+```</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+## Test against a running network</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+See `.github&#47;scripts&#47;bootstrap_test.sh` on how to run go tests against a running local network.</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-79a246cac26adf868e04d045" role="button"
                       aria-expanded="false" aria-controls="id-79a246cac26adf868e04d045">
                        <code>diff/README.md</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/diff/README.md" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+19</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-79a246cac26adf868e04d045"><span class="term-fg1">diff --git go-ethereum&#47;diff&#47;README.md immutable-geth&#47;diff&#47;README.md</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..766e9604a9e13a9bd82c2b5626acb83a1dbe8ba3</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;diff&#47;README.md</span>
<span class="term-fg36">@@ -0,0 +1,19 @@</span>
<span class="term-fg32">+# Immutable Geth Fork Diff</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+You can use this file to generate an `index.html` containing a structured breakdown of all the diffs introduced by Immutable Geth from upstream.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+## How To</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+First install the tool forkdiff:</span>
<span class="term-fg32">+```</span>
<span class="term-fg32">+go install github.com&#47;protolambda&#47;forkdiff</span>
<span class="term-fg32">+```</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+The tool does not seem to work with remote repositories. So you must manually clone and set up the tags you want to work with.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+For example, if you fetch and tag appropriately in this repository, you can use this command:</span>
<span class="term-fg32">+```</span>
<span class="term-fg32">+forkdiff -fork .&#47;diff&#47;fork.yaml -repo . -upstream-repo . -out &#47;tmp&#47;index.html</span>
<span class="term-fg32">+```</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+Check the expected tags in the `diff&#47;fork.yaml` file.</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-decoration-none" data-bs-toggle="collapse" href="#id-c264fe7f323e3ec11b89a042" role="button"
                       aria-expanded="false" aria-controls="id-c264fe7f323e3ec11b89a042">
                        <code>diff/fork.yaml</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/diff/fork.yaml" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-success">+168</span></div>
                            <div class="text-start"><span class="text-danger">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-c264fe7f323e3ec11b89a042"><span class="term-fg1">diff --git go-ethereum&#47;diff&#47;fork.yaml immutable-geth&#47;diff&#47;fork.yaml</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..222a63d80d043bf0f2a3ee300fd3caa168f6da97</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;diff&#47;fork.yaml</span>
<span class="term-fg36">@@ -0,0 +1,168 @@</span>
<span class="term-fg32">+title: &quot;immutable-geth - go-ethereum fork diff overview&quot;</span>
<span class="term-fg32">+footer: |</span>
<span class="term-fg32">+  Fork-diff overview of [`immutable-geth`](https:&#47;&#47;github.com&#47;immutable&#47;geth), a fork of [`go-ethereum`](https:&#47;&#47;github.com&#47;ethereum&#47;go-ethereum).</span>
<span class="term-fg32">+base:</span>
<span class="term-fg32">+  name: go-ethereum</span>
<span class="term-fg32">+  url: https:&#47;&#47;github.com&#47;ethereum&#47;go-ethereum</span>
<span class="term-fg32">+  ref: refs&#47;tags&#47;v1.13.15</span>
<span class="term-fg32">+fork:</span>
<span class="term-fg32">+  name: immutable-geth</span>
<span class="term-fg32">+  url: https:&#47;&#47;github.com&#47;immutable&#47;go-ethereum</span>
<span class="term-fg32">+  ref: refs&#47;tags&#47;audit.1</span>
<span class="term-fg32">+def:</span>
<span class="term-fg32">+  title: &quot;immutable-geth&quot;</span>
<span class="term-fg32">+  description: |</span>
<span class="term-fg32">+    All modifications made by Immutable to the go-ethereum codebase are listed here.</span>
<span class="term-fg32">+    The diff is based on the `v1.13.15` tag of go-ethereum and the `audit.1` tag of immutable-geth.</span>
<span class="term-fg32">+  sub:</span>
<span class="term-fg32">+    # Uncomment these to pull the diffs out of the main pkg sections</span>
<span class="term-fg32">+    #- title: &quot;Priority Diffs&quot;</span>
<span class="term-fg32">+    #  description: This section contains prioritized for the purposes of security analysis</span>
<span class="term-fg32">+    #  globs:</span>
<span class="term-fg32">+    #    - &quot;core&#47;blockchain.go&quot;</span>
<span class="term-fg32">+    #    - &quot;core&#47;evm.go&quot;</span>
<span class="term-fg32">+    #    - &quot;core&#47;state_processor.go&quot;</span>
<span class="term-fg32">+    #    - &quot;core&#47;types&#47;block.go&quot;</span>
<span class="term-fg32">+    #    - &quot;core&#47;txpool&#47;validation.go&quot;</span>
<span class="term-fg32">+    #    - &quot;core&#47;txpool&#47;immutable&#47;accesscontrol&#47;contract_creation_controller.go&quot;</span>
<span class="term-fg32">+    #    - &quot;core&#47;txpool&#47;immutable&#47;accesscontrol&#47;controller.go&quot;</span>
<span class="term-fg32">+    #    - &quot;core&#47;txpool&#47;immutable&#47;accesscontrol&#47;sdn_provider.go&quot;</span>
<span class="term-fg32">+    #    - &quot;core&#47;txpool&#47;legacypool&#47;legacypool.go&quot;</span>
<span class="term-fg32">+    #    - &quot;core&#47;txpool&#47;txpool.go&quot;</span>
<span class="term-fg32">+    #    - &quot;params&#47;config.go&quot;</span>
<span class="term-fg32">+    #    - &quot;params&#47;protocol_params.go&quot;</span>
<span class="term-fg32">+    #    - &quot;node&#47;api.go&quot;</span>
<span class="term-fg32">+    #    - &quot;node&#47;immutable_newrelic.go&quot;</span>
<span class="term-fg32">+    #    - &quot;node&#47;node.go&quot;</span>
<span class="term-fg32">+    #    - &quot;node&#47;rpcstack.go&quot;</span>
<span class="term-fg32">+    #    - &quot;consensus&#47;clique&#47;clique.go&quot;</span>
<span class="term-fg32">+    #    - &quot;miner&#47;worker.go&quot;</span>
<span class="term-fg32">+    #    - &quot;cmd&#47;geth&#47;config.go&quot;</span>
<span class="term-fg32">+    #    - &quot;cmd&#47;immutable&#47;remote&#47;aws&#47;secretsmanager.go&quot;</span>
<span class="term-fg32">+    - title: &quot;Go Source Changes&quot;</span>
<span class="term-fg32">+      description: This section contains diffs organized by each root Go pkg of the repository.</span>
<span class="term-fg32">+      sub:</span>
<span class="term-fg32">+        - title: &quot;core&quot;</span>
<span class="term-fg32">+          description: &quot;&quot;</span>
<span class="term-fg32">+          sub:</span>
<span class="term-fg32">+            - title: &quot;Reorg Invariant&quot;</span>
<span class="term-fg32">+              globs:</span>
<span class="term-fg32">+                - &quot;core&#47;blockchain.go&quot;</span>
<span class="term-fg32">+            - title: &quot;Immutable Genesis &#47; Forks&quot;</span>
<span class="term-fg32">+              globs:</span>
<span class="term-fg32">+                - &quot;core&#47;genesis.go&quot;</span>
<span class="term-fg32">+                - &quot;core&#47;immutable_genesis.go&quot;</span>
<span class="term-fg32">+                - &quot;core&#47;evm.go&quot;</span>
<span class="term-fg32">+                - &quot;core&#47;gen_genesis.go&quot;</span>
<span class="term-fg32">+                - &quot;core&#47;forkid&#47;forkid.go&quot;</span>
<span class="term-fg32">+            - title: &quot;Blobs&quot;</span>
<span class="term-fg32">+              globs:</span>
<span class="term-fg32">+                - &quot;core&#47;txpool&#47;blobpool&#47;blobpool.go&quot;</span>
<span class="term-fg32">+                - &quot;core&#47;txpool&#47;blobpool&#47;limbo.go&quot;</span>
<span class="term-fg32">+                - &quot;core&#47;txpool&#47;validation.go&quot;</span>
<span class="term-fg32">+                - &quot;core&#47;state_processor.go&quot;</span>
<span class="term-fg32">+            - title: &quot;ACL&quot;</span>
<span class="term-fg32">+              globs:</span>
<span class="term-fg32">+                - &quot;core&#47;**&#47;accesscontrol&#47;**&#47;*.go&quot;</span>
<span class="term-fg32">+                - &quot;core&#47;txpool&#47;errors.go&quot;</span>
<span class="term-fg32">+                - &quot;core&#47;txpool&#47;legacypool&#47;legacypool.go&quot;</span>
<span class="term-fg32">+                - &quot;core&#47;txpool&#47;subpool.go&quot;</span>
<span class="term-fg32">+                - &quot;core&#47;txpool&#47;txpool.go&quot;</span>
<span class="term-fg32">+                - &quot;core&#47;txpool&#47;immutable_access_controller.go&quot;</span>
<span class="term-fg32">+          globs:</span>
<span class="term-fg32">+            - &quot;core&#47;**&#47;*.go&quot;</span>
<span class="term-fg32">+        - title: &quot;node&quot;</span>
<span class="term-fg32">+          description: &quot;&quot;</span>
<span class="term-fg32">+          sub:</span>
<span class="term-fg32">+            - title: &quot;New Relic&quot;</span>
<span class="term-fg32">+              globs:</span>
<span class="term-fg32">+                - &quot;node&#47;api.go&quot;</span>
<span class="term-fg32">+                - &quot;node&#47;immutable_newrelic.go&quot;</span>
<span class="term-fg32">+                - &quot;node&#47;node.go&quot;</span>
<span class="term-fg32">+            - title: &quot;RPC&quot;</span>
<span class="term-fg32">+              globs:</span>
<span class="term-fg32">+                - &quot;node&#47;rpcstack.go&quot;</span>
<span class="term-fg32">+                - &quot;node&#47;defaults.go&quot;</span>
<span class="term-fg32">+                - &quot;node&#47;config.go&quot;</span>
<span class="term-fg32">+          globs:</span>
<span class="term-fg32">+            - &quot;node&#47;**&#47;*.go&quot;</span>
<span class="term-fg32">+        - title: &quot;consensus&quot;</span>
<span class="term-fg32">+          description: &quot;&quot;</span>
<span class="term-fg32">+          globs:</span>
<span class="term-fg32">+            - &quot;consensus&#47;**&#47;*.go&quot;</span>
<span class="term-fg32">+        - title: &quot;miner&quot;</span>
<span class="term-fg32">+          description: &quot;&quot;</span>
<span class="term-fg32">+          globs:</span>
<span class="term-fg32">+            - &quot;miner&#47;**&#47;*.go&quot;</span>
<span class="term-fg32">+        - title: &quot;common&quot;</span>
<span class="term-fg32">+          description: &quot;&quot;</span>
<span class="term-fg32">+          globs:</span>
<span class="term-fg32">+            - &quot;common&#47;**&#47;*.go&quot;</span>
<span class="term-fg32">+        - title: &quot;internal&quot;</span>
<span class="term-fg32">+          description: &quot;&quot;</span>
<span class="term-fg32">+          globs:</span>
<span class="term-fg32">+            - &quot;internal&#47;**&#47;*.go&quot;</span>
<span class="term-fg32">+        - title: &quot;cmd&quot;</span>
<span class="term-fg32">+          description: &quot;&quot;</span>
<span class="term-fg32">+          sub:</span>
<span class="term-fg32">+            - title: &quot;Bootstrap&quot;</span>
<span class="term-fg32">+              description: &quot;Logic for bootstrapping Immutable geth instances both locally and inside K8s pods&quot;</span>
<span class="term-fg32">+              globs:</span>
<span class="term-fg32">+                - &quot;cmd&#47;geth&#47;immutable.go&quot;</span>
<span class="term-fg32">+                - &quot;cmd&#47;geth&#47;immutable&#47;**&#47;*.go&quot;</span>
<span class="term-fg32">+                - &quot;cmd&#47;**&#47;immutable_*.go&quot;</span>
<span class="term-fg32">+                - &quot;cmd&#47;immutable&#47;*.go&quot;</span>
<span class="term-fg32">+            - title: &quot;Sequencer&quot;</span>
<span class="term-fg32">+              globs:</span>
<span class="term-fg32">+                - &quot;cmd&#47;geth&#47;config.go&quot;</span>
<span class="term-fg32">+                - &quot;cmd&#47;immutable&#47;remote&#47;aws&#47;**&#47;*.go&quot;</span>
<span class="term-fg32">+          globs:</span>
<span class="term-fg32">+            - &quot;cmd&#47;**&#47;*.go&quot;</span>
<span class="term-fg32">+        - title: &quot;accounts&quot;</span>
<span class="term-fg32">+          description: &quot;&quot;</span>
<span class="term-fg32">+          globs:</span>
<span class="term-fg32">+            - &quot;accounts&#47;**&#47;*.go&quot;</span>
<span class="term-fg32">+        - title: &quot;p2p&quot;</span>
<span class="term-fg32">+          description: &quot;&quot;</span>
<span class="term-fg32">+          globs:</span>
<span class="term-fg32">+            - &quot;p2p&#47;**&#47;*.go&quot;</span>
<span class="term-fg32">+        - title: &quot;eth&quot;</span>
<span class="term-fg32">+          description: &quot;&quot;</span>
<span class="term-fg32">+          globs:</span>
<span class="term-fg32">+            - &quot;eth&#47;**&#47;*.go&quot;</span>
<span class="term-fg32">+            - &quot;internal&#47;ethapi&#47;api.go&quot;</span>
<span class="term-fg32">+        - title: &quot;params&quot;</span>
<span class="term-fg32">+          description: &quot;&quot;</span>
<span class="term-fg32">+          globs:</span>
<span class="term-fg32">+            - &quot;params&#47;**&#47;*.go&quot;</span>
<span class="term-fg32">+        - title: &quot;ethclient&quot;</span>
<span class="term-fg32">+          description: &quot;&quot;</span>
<span class="term-fg32">+          globs:</span>
<span class="term-fg32">+            - &quot;ethclient&#47;gethclient&#47;immutable_gethclient.go&quot;</span>
<span class="term-fg32">+        - title: &quot;e2e&quot;</span>
<span class="term-fg32">+          description: &quot;E2E test suite for Immutable geth&quot;</span>
<span class="term-fg32">+          globs:</span>
<span class="term-fg32">+            - &quot;tests&#47;immutable&#47;**&#47;*&quot;</span>
<span class="term-fg32">+    - title: &quot;Configurations&quot;</span>
<span class="term-fg32">+      description: Miscellaneous configuration files for Immutable geth.</span>
<span class="term-fg32">+      globs:</span>
<span class="term-fg32">+        - &quot;**&#47;genesis&#47;**.json&quot;</span>
<span class="term-fg32">+        - &quot;immutable&#47;**&#47;*.toml&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+# ignored globally, does not count towards line count</span>
<span class="term-fg32">+ignore:</span>
<span class="term-fg32">+  - &quot;**&#47;*_test.go&quot;</span>
<span class="term-fg32">+  - &quot;tests&#47;state_test_util.go&quot;</span>
<span class="term-fg32">+  - &quot;**&#47;testdata&#47;**&quot;</span>
<span class="term-fg32">+  - &quot;**&#47;*t8ntool&#47;*.go&quot;</span>
<span class="term-fg32">+  - &quot;.circleci&#47;*&quot;</span>
<span class="term-fg32">+  - &quot;deployment&#47;**&#47;*&quot;</span>
<span class="term-fg32">+  - &quot;*.sum&quot;</span>
<span class="term-fg32">+  - &quot;go.mod&quot;</span>
<span class="term-fg32">+  - &quot;fork.yaml&quot;</span>
<span class="term-fg32">+  - &quot;Makefile&quot;</span>
<span class="term-fg32">+  - &quot;.golangci.yml&quot;</span>
<span class="term-fg32">+  - &quot;.github&#47;**&quot;</span>
<span class="term-fg32">+  - &quot;**&#47;*.gob&quot; # data asset, not code</span>
<span class="term-fg32">+  - &quot;core&#47;vm&#47;testdata&#47;precompiles&#47;p256Verify.json&quot; # data asset, not code</span>
<span class="term-fg32">+  - &quot;eth&#47;tracers&#47;internal&#47;tracetest&#47;testdata&#47;**&#47;*.json&quot;</span></div>
    </div>

            
            
        </div>
        <div>
            
        </div>
    </div>
</div>

            
        </div>
    </div>
</div>

                
                    <div class="ps-1 py-2 my-1"><div class="row border-bottom border-1"data-bs-toggle="collapse" data-bs-target="#id-0387a4c326290f457b6ec003"role="button" aria-expanded="false" aria-controls="id-0387a4c326290f457b6ec003">
        
            <div class="col-12 col-md-12 col-lg-6 col-xl-6 text-start"><h4>Ignored changes</h4></div>
        

        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2">
            <div class="row line-stat">
                
                
            </div>
        </div>
        <div class="col-6 col-md-3 col-xl-2 ms-auto mt-2 ">
            <div class="row line-stat">
                
                
                    <div class="text-end"><span class="text-add-ignored">+4645</span></div>
                    <div class="text-start"><span class="text-delete-ignored">-173</span></div>
                
            </div>
        </div>
    </div>

    <div class="row forkdef-content collapse  border-1 ps-3 my-3" id="id-0387a4c326290f457b6ec003">
        <div></div>
        <div>
            
            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-b3c77f397fa5d749e7300c60" role="button"
                       aria-expanded="false" aria-controls="id-b3c77f397fa5d749e7300c60">
                        <code>Makefile</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/Makefile" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/Makefile" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+4</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-b3c77f397fa5d749e7300c60"><span class="term-fg1">diff --git go-ethereum&#47;Makefile immutable-geth&#47;Makefile</span>
<span class="term-fg1">index 99b8ba54b4929d34c7fe4e8dba7268f3339a6778..9472d9d31a25ff87d6dc12a5716894ccdbeb6e8e 100644</span>
<span class="term-fg1">--- go-ethereum&#47;Makefile</span>
<span class="term-fg1">+++ immutable-geth&#47;Makefile</span>
<span class="term-fg36">@@ -43,6 +43,10 @@</span> 	env GOBIN= go install .&#47;cmd&#47;abigen
 	@type &quot;solc&quot; 2&gt; &#47;dev&#47;null || echo &#39;Please install solc&#39;
 	@type &quot;protoc&quot; 2&gt; &#47;dev&#47;null || echo &#39;Please install protoc&#39;
&nbsp;
<span class="term-fg32">+# CHANGE(immutable): immutable specific makes</span>
<span class="term-fg32">+immutable-test:</span>
<span class="term-fg32">+	go test -run Immutable .&#47;... | grep -v &quot;\[no tests to run\]&quot; | grep -v &quot;\[no test files\]&quot;</span>
<span class="term-fg32">+</span>
 #? help: Get more info on make commands.
 help: Makefile
 	@echo &quot; Choose a command run in go-ethereum:&quot;</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-d0077ef343bf4e4877d421fc" role="button"
                       aria-expanded="false" aria-controls="id-d0077ef343bf4e4877d421fc">
                        <code>accounts/immutable/backend_test.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/accounts/immutable/backend_test.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+83</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-d0077ef343bf4e4877d421fc"><span class="term-fg1">diff --git go-ethereum&#47;accounts&#47;immutable&#47;backend_test.go immutable-geth&#47;accounts&#47;immutable&#47;backend_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..38b5ff566a6ea32be680c98cebfbedfe98a531a3</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;accounts&#47;immutable&#47;backend_test.go</span>
<span class="term-fg36">@@ -0,0 +1,83 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package immutable</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;context&quot;</span>
<span class="term-fg32">+	&quot;os&quot;</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+	&quot;time&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutableBackend_WithKeyStore_ValidAddress(t *testing.T) {</span>
<span class="term-fg32">+	&#47;&#47; Initialize keystore</span>
<span class="term-fg32">+	ks, err := NewKeystore(&quot;.&#47;testdata&#47;keystore&quot;, &quot;.&#47;testdata&#47;password.txt&quot;)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Fatal(err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Initialize backend</span>
<span class="term-fg32">+	b, err := NewBackend(context.Background(), ks)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Fatal(err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Get wallet</span>
<span class="term-fg32">+	wallets := b.Wallets()</span>
<span class="term-fg32">+	if len(wallets) != 1 {</span>
<span class="term-fg32">+		t.Fatalf(&quot;expected 1 wallet, got %d&quot;, len(wallets))</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if len(wallets[0].Accounts()) != 1 {</span>
<span class="term-fg32">+		t.Fatalf(&quot;expected 1 account, got %d&quot;, len(wallets[0].Accounts()))</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Compare wallet address</span>
<span class="term-fg32">+	addressBytes, err := os.ReadFile(&quot;.&#47;testdata&#47;address.txt&quot;)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Fatal(err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if wallets[0].Accounts()[0].Address.Hex() != string(addressBytes) {</span>
<span class="term-fg32">+		t.Fatalf(&quot;expected address %s, got %s&quot;, string(addressBytes), wallets[0].Accounts()[0].Address.Hex())</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutableBackend_WithKeyStore_SubscribeNoOp(t *testing.T) {</span>
<span class="term-fg32">+	&#47;&#47; Initialize keystore</span>
<span class="term-fg32">+	ks, err := NewKeystore(&quot;.&#47;testdata&#47;keystore&quot;, &quot;.&#47;testdata&#47;password.txt&quot;)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Fatal(err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Initialize backend</span>
<span class="term-fg32">+	b, err := NewBackend(context.Background(), ks)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Fatal(err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Set up subscription</span>
<span class="term-fg32">+	sink := make(chan accounts.WalletEvent)</span>
<span class="term-fg32">+	sub := b.Subscribe(sink)</span>
<span class="term-fg32">+	&#47;&#47; Close subscription</span>
<span class="term-fg32">+	go func() {</span>
<span class="term-fg32">+		time.Sleep(1 * time.Second)</span>
<span class="term-fg32">+		sub.Unsubscribe()</span>
<span class="term-fg32">+	}()</span>
<span class="term-fg32">+	&#47;&#47; Run subscription until closed</span>
<span class="term-fg32">+	for err := range sub.Err() {</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			t.Fatal(err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-f238fe901d1a45d5179c7ead" role="button"
                       aria-expanded="false" aria-controls="id-f238fe901d1a45d5179c7ead">
                        <code>accounts/immutable/keystore_test.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/accounts/immutable/keystore_test.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+61</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-f238fe901d1a45d5179c7ead"><span class="term-fg1">diff --git go-ethereum&#47;accounts&#47;immutable&#47;keystore_test.go immutable-geth&#47;accounts&#47;immutable&#47;keystore_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..0781ed43f31314528219bf80dd989bdad0250bdc</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;accounts&#47;immutable&#47;keystore_test.go</span>
<span class="term-fg36">@@ -0,0 +1,61 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package immutable</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;context&quot;</span>
<span class="term-fg32">+	&quot;encoding&#47;json&quot;</span>
<span class="term-fg32">+	&quot;os&quot;</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;crypto&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutableKeyStore_ReadKeyStoreFile_ValidKeystore(t *testing.T) {</span>
<span class="term-fg32">+	ks, err := NewKeystore(&quot;.&#47;testdata&#47;keystore&quot;, &quot;.&#47;testdata&#47;password.txt&quot;)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Fatal(err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	key, err := ks.GetPrivateKey(context.Background())</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Fatal(err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Check address</span>
<span class="term-fg32">+	addr := crypto.PubkeyToAddress(key.PublicKey)</span>
<span class="term-fg32">+	addressBytes, err := os.ReadFile(&quot;.&#47;testdata&#47;address.txt&quot;)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Fatal(err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if addr.Hex() != string(addressBytes) {</span>
<span class="term-fg32">+		t.Fatalf(&quot;expected address %s, got %s&quot;, string(addressBytes), addr)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Check JSON</span>
<span class="term-fg32">+	if err := json.Unmarshal([]byte(ks.JSON()), &amp;struct{}{}); err != nil {</span>
<span class="term-fg32">+		t.Fatal(err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Check pw</span>
<span class="term-fg32">+	pwBytes, err := os.ReadFile(&quot;.&#47;testdata&#47;password.txt&quot;)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Fatal(err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if string(pwBytes) != ks.Password() {</span>
<span class="term-fg32">+		t.Fatalf(&quot;expected pw %s, got %s&quot;, string(pwBytes), ks.Password())</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-e1e8d78320096df0febacae2" role="button"
                       aria-expanded="false" aria-controls="id-e1e8d78320096df0febacae2">
                        <code>accounts/immutable/testdata/address.txt</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/accounts/immutable/testdata/address.txt" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+0</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-e1e8d78320096df0febacae2"><span class="term-fg1">diff --git go-ethereum&#47;accounts&#47;immutable&#47;testdata&#47;address.txt immutable-geth&#47;accounts&#47;immutable&#47;testdata&#47;address.txt</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..c729c687e76603abc25fe621be58890e73066bcb</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;accounts&#47;immutable&#47;testdata&#47;address.txt</span>
<span class="term-fg36">@@ -0,0 +1 @@</span>
<span class="term-fg32">+0x084E5222E772B6f2C0a3F04F84D9BAB836e0eb4E</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-7a7852f6f517a86d6fd07a93" role="button"
                       aria-expanded="false" aria-controls="id-7a7852f6f517a86d6fd07a93">
                        <code>accounts/immutable/testdata/keystore/keystore.json</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/accounts/immutable/testdata/keystore/keystore.json" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+0</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-7a7852f6f517a86d6fd07a93"><span class="term-fg1">diff --git go-ethereum&#47;accounts&#47;immutable&#47;testdata&#47;keystore&#47;keystore.json immutable-geth&#47;accounts&#47;immutable&#47;testdata&#47;keystore&#47;keystore.json</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..179bcdc634ce8f38dcc67001c3b5c180f29d9b20</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;accounts&#47;immutable&#47;testdata&#47;keystore&#47;keystore.json</span>
<span class="term-fg36">@@ -0,0 +1 @@</span>
<span class="term-fg32">+{&quot;address&quot;:&quot;084e5222e772b6f2c0a3f04f84d9bab836e0eb4e&quot;,&quot;crypto&quot;:{&quot;cipher&quot;:&quot;aes-128-ctr&quot;,&quot;ciphertext&quot;:&quot;4987547a93d0e928cabae873d38f6368f5a0090db5a22932ff74a6e58ee105e2&quot;,&quot;cipherparams&quot;:{&quot;iv&quot;:&quot;d941112519f96c63aeb09c691276b611&quot;},&quot;kdf&quot;:&quot;scrypt&quot;,&quot;kdfparams&quot;:{&quot;dklen&quot;:32,&quot;n&quot;:262144,&quot;p&quot;:1,&quot;r&quot;:8,&quot;salt&quot;:&quot;4e07f3aa37f669a58aa92ce2ea4a1249cf4366e1e9d534f38507290f4a8e82cd&quot;},&quot;mac&quot;:&quot;e068f021e9890f9a997049939e90c2a9db2c4e8723107c1e634fac1a37c14baf&quot;},&quot;id&quot;:&quot;ee6efd23-c845-4281-a2fb-169fb7d017c7&quot;,&quot;version&quot;:3}</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-0a75559281f060524cfc860f" role="button"
                       aria-expanded="false" aria-controls="id-0a75559281f060524cfc860f">
                        <code>accounts/immutable/testdata/password.txt</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/accounts/immutable/testdata/password.txt" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+0</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-0a75559281f060524cfc860f"><span class="term-fg1">diff --git go-ethereum&#47;accounts&#47;immutable&#47;testdata&#47;password.txt immutable-geth&#47;accounts&#47;immutable&#47;testdata&#47;password.txt</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..7aa311adf93ff404972ea5e75ff97253cd32ecbd</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;accounts&#47;immutable&#47;testdata&#47;password.txt</span>
<span class="term-fg36">@@ -0,0 +1 @@</span>
<span class="term-fg32">+password</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-394024889720d8eda1672732" role="button"
                       aria-expanded="false" aria-controls="id-394024889720d8eda1672732">
                        <code>accounts/immutable/wallet_test.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/accounts/immutable/wallet_test.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+156</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-394024889720d8eda1672732"><span class="term-fg1">diff --git go-ethereum&#47;accounts&#47;immutable&#47;wallet_test.go immutable-geth&#47;accounts&#47;immutable&#47;wallet_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..f8e6cab37bb70f96a8b4b975070bc8917a62b421</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;accounts&#47;immutable&#47;wallet_test.go</span>
<span class="term-fg36">@@ -0,0 +1,156 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package immutable</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;context&quot;</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+	&quot;os&quot;</span>
<span class="term-fg32">+	&quot;strings&quot;</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&#47;keystore&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;google&#47;go-cmp&#47;cmp&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutableWallet_FromKeystore_SignaturesNoErrors(t *testing.T) {</span>
<span class="term-fg32">+	&#47;&#47; Initialize keystore</span>
<span class="term-fg32">+	ks, err := NewKeystore(&quot;.&#47;testdata&#47;keystore&quot;, &quot;.&#47;testdata&#47;password.txt&quot;)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Fatal(err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Initialize backend</span>
<span class="term-fg32">+	b, err := NewBackend(context.Background(), ks)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Fatal(err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Get wallet and sign data</span>
<span class="term-fg32">+	w := b.Wallets()[0]</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	tests := []struct {</span>
<span class="term-fg32">+		data    []byte</span>
<span class="term-fg32">+		tx      *types.Transaction</span>
<span class="term-fg32">+		chainID *big.Int</span>
<span class="term-fg32">+	}{</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			data:    []byte{1, 2, 3},</span>
<span class="term-fg32">+			tx:      types.NewTx(&amp;types.LegacyTx{}),</span>
<span class="term-fg32">+			chainID: big.NewInt(1),</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	for _, test := range tests {</span>
<span class="term-fg32">+		if _, err := w.SignData(w.Accounts()[0], &quot;&quot;, test.data); err != nil {</span>
<span class="term-fg32">+			t.Fatal(err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if _, err := w.SignText(w.Accounts()[0], test.data); err != nil {</span>
<span class="term-fg32">+			t.Fatal(err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if _, err := w.SignTx(w.Accounts()[0], test.tx, test.chainID); err != nil {</span>
<span class="term-fg32">+			t.Fatal(err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutableWallet_FromKeystore_SignaturesValid(t *testing.T) {</span>
<span class="term-fg32">+	&#47;&#47; Get default keystore wallet</span>
<span class="term-fg32">+	ks := keystore.NewKeyStore(&quot;.&#47;testdata&#47;keystore&quot;, keystore.StandardScryptN, keystore.StandardScryptP)</span>
<span class="term-fg32">+	pwBytes, err := os.ReadFile(&quot;.&#47;testdata&#47;password.txt&quot;)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Fatal(err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	pw := strings.TrimRight(string(pwBytes), &quot;\r\n&quot;)</span>
<span class="term-fg32">+	if err := ks.Unlock(ks.Accounts()[0], pw); err != nil {</span>
<span class="term-fg32">+		t.Fatal(err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if len(ks.Accounts()) != 1 {</span>
<span class="term-fg32">+		t.Fatalf(&quot;expected 1 account, got %d&quot;, len(ks.Accounts()))</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if len(ks.Wallets()) != 1 {</span>
<span class="term-fg32">+		t.Fatalf(&quot;expected 1 wallet, got %d&quot;, len(ks.Wallets()))</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Get immutable wallet</span>
<span class="term-fg32">+	immutableKeystore, err := NewKeystore(&quot;.&#47;testdata&#47;keystore&quot;, &quot;.&#47;testdata&#47;password.txt&quot;)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Fatal(err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	b, err := NewBackend(context.Background(), immutableKeystore)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Fatal(err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	tests := []struct {</span>
<span class="term-fg32">+		walletLeft  accounts.Wallet</span>
<span class="term-fg32">+		walletRight accounts.Wallet</span>
<span class="term-fg32">+	}{</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			walletLeft:  ks.Wallets()[0],</span>
<span class="term-fg32">+			walletRight: b.Wallets()[0],</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	for _, test := range tests {</span>
<span class="term-fg32">+		&#47;&#47; Sign data</span>
<span class="term-fg32">+		data := []byte{1, 2, 3}</span>
<span class="term-fg32">+		signatureLeft, err := test.walletLeft.SignData(test.walletLeft.Accounts()[0], &quot;&quot;, data)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			t.Fatal(err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		signatureRight, err := test.walletRight.SignData(test.walletRight.Accounts()[0], &quot;&quot;, data)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			t.Fatal(err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if !cmp.Equal(signatureLeft, signatureRight) {</span>
<span class="term-fg32">+			t.Fatalf(&quot;expected signature %s, got %s&quot;, string(signatureLeft), string(signatureRight))</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		&#47;&#47; Sign text</span>
<span class="term-fg32">+		signatureLeft, err = test.walletLeft.SignText(test.walletLeft.Accounts()[0], data)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			t.Fatal(err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		signatureRight, err = test.walletRight.SignText(test.walletRight.Accounts()[0], data)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			t.Fatal(err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if !cmp.Equal(signatureLeft, signatureRight) {</span>
<span class="term-fg32">+			t.Fatalf(&quot;expected signature %s, got %s&quot;, string(signatureLeft), string(signatureRight))</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		&#47;&#47; Sign tx</span>
<span class="term-fg32">+		tx := types.NewTx(&amp;types.LegacyTx{})</span>
<span class="term-fg32">+		chainID := big.NewInt(1)</span>
<span class="term-fg32">+		txLeft, err := test.walletLeft.SignTx(test.walletLeft.Accounts()[0], tx, chainID)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			t.Fatal(err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		txRight, err := test.walletRight.SignTx(test.walletRight.Accounts()[0], tx, chainID)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			t.Fatal(err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		lv, lr, ls := txLeft.RawSignatureValues()</span>
<span class="term-fg32">+		rv, rr, rs := txRight.RawSignatureValues()</span>
<span class="term-fg32">+		if !cmp.Equal(lv.String(), rv.String()) {</span>
<span class="term-fg32">+			t.Fatalf(&quot;expected v %d, got %d&quot;, lv, rv)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if !cmp.Equal(lr.String(), rr.String()) {</span>
<span class="term-fg32">+			t.Fatalf(&quot;expected r %d, got %d&quot;, lr, rr)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if !cmp.Equal(ls.String(), rs.String()) {</span>
<span class="term-fg32">+			t.Fatalf(&quot;expected s %d, got %d&quot;, ls, rs)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-1c153e8196c9a086093ac5e6" role="button"
                       aria-expanded="false" aria-controls="id-1c153e8196c9a086093ac5e6">
                        <code>cmd/evm/internal/t8ntool/execution.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/cmd/evm/internal/t8ntool/execution.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/evm/internal/t8ntool/execution.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+7</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-1c153e8196c9a086093ac5e6"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;evm&#47;internal&#47;t8ntool&#47;execution.go immutable-geth&#47;cmd&#47;evm&#47;internal&#47;t8ntool&#47;execution.go</span>
<span class="term-fg1">index cb975054c1b284a91baeced4af7c7eeecea568f3..5a56873a3535bd7c211015150e9363aaada1f5f4 100644</span>
<span class="term-fg1">--- go-ethereum&#47;cmd&#47;evm&#47;internal&#47;t8ntool&#47;execution.go</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;evm&#47;internal&#47;t8ntool&#47;execution.go</span>
<span class="term-fg36">@@ -200,6 +200,13 @@</span> 			log.Warn(&quot;rejected tx&quot;, &quot;index&quot;, i, &quot;error&quot;, err)
 			rejectedTxs = append(rejectedTxs, &amp;rejectedTx{i, err.Error()})
 			continue
 		}
<span class="term-fg32">+		&#47;&#47; CHANGE(immutable): Reject blob transactions.</span>
<span class="term-fg32">+		if chainConfig.IsImmutableZKEVM() &amp;&amp; tx.Type() == types.BlobTxType {</span>
<span class="term-fg32">+			errMsg := &quot;blob tx not allowed&quot;</span>
<span class="term-fg32">+			log.Warn(&quot;rejected blob tx&quot;, &quot;index&quot;, i, &quot;hash&quot;, tx.Hash(), &quot;error&quot;, errMsg)</span>
<span class="term-fg32">+			rejectedTxs = append(rejectedTxs, &amp;rejectedTx{i, errMsg})</span>
<span class="term-fg32">+			continue</span>
<span class="term-fg32">+		}</span>
 		if tx.Type() == types.BlobTxType &amp;&amp; vmContext.BlobBaseFee == nil {
 			errMsg := &quot;blob tx used but field env.ExcessBlobGas missing&quot;
 			log.Warn(&quot;rejected tx&quot;, &quot;index&quot;, i, &quot;hash&quot;, tx.Hash(), &quot;error&quot;, errMsg)</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-48e232ccde1e9f7ebf9d15da" role="button"
                       aria-expanded="false" aria-controls="id-48e232ccde1e9f7ebf9d15da">
                        <code>cmd/geth/immutable/rewind/rewind_test.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/geth/immutable/rewind/rewind_test.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+59</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-48e232ccde1e9f7ebf9d15da"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;rewind&#47;rewind_test.go immutable-geth&#47;cmd&#47;geth&#47;immutable&#47;rewind&#47;rewind_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..ea1589d56053c77e475688e31bd29ca78d61cf2d</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;geth&#47;immutable&#47;rewind&#47;rewind_test.go</span>
<span class="term-fg36">@@ -0,0 +1,59 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package rewind</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;path&#47;filepath&quot;</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+	&quot;time&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;stretchr&#47;testify&#47;require&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestRewind_FileDoesNotExist_HistoryEmpty(t *testing.T) {</span>
<span class="term-fg32">+	history, err := ReadRewindHistory(&quot;test.yaml&quot;)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	require.NotNil(t, history)</span>
<span class="term-fg32">+	require.Empty(t, history)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestRewind_WriteRecord_HistoryNotEmptyAndRecordExists(t *testing.T) {</span>
<span class="term-fg32">+	&#47;&#47; Write file</span>
<span class="term-fg32">+	filepath := filepath.Join(t.TempDir(), &quot;test.yaml&quot;)</span>
<span class="term-fg32">+	firstHash := common.HexToHash(&quot;0x123&quot;)</span>
<span class="term-fg32">+	history := History{{BlockNumber: 1, BlockHash: firstHash, Timestamp: time.Now()}}</span>
<span class="term-fg32">+	err := WriteRewindHistory(history, filepath)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Write file again, with a new record</span>
<span class="term-fg32">+	secondHash := common.HexToHash(&quot;0x456&quot;)</span>
<span class="term-fg32">+	history = append(history, Record{BlockNumber: 2, BlockHash: secondHash, Timestamp: time.Now()})</span>
<span class="term-fg32">+	err = WriteRewindHistory(history, filepath)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Read file</span>
<span class="term-fg32">+	history, err = ReadRewindHistory(filepath)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Verify contents</span>
<span class="term-fg32">+	require.NotNil(t, history)</span>
<span class="term-fg32">+	require.Len(t, history, 2)</span>
<span class="term-fg32">+	require.True(t, history.Contains(firstHash))</span>
<span class="term-fg32">+	require.True(t, history.Contains(secondHash))</span>
<span class="term-fg32">+	require.False(t, history.Contains(common.HexToHash(&quot;0x789&quot;)))</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-b1b4619020406bd7be4041de" role="button"
                       aria-expanded="false" aria-controls="id-b1b4619020406bd7be4041de">
                        <code>cmd/geth/immutable/settings/forks_test.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/geth/immutable/settings/forks_test.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+62</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-b1b4619020406bd7be4041de"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;settings&#47;forks_test.go immutable-geth&#47;cmd&#47;geth&#47;immutable&#47;settings&#47;forks_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..0a66650d8c27624f6ef6f137aff51e4217290089</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;geth&#47;immutable&#47;settings&#47;forks_test.go</span>
<span class="term-fg36">@@ -0,0 +1,62 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package settings</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;fmt&quot;</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+	&quot;time&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestForks_IsPastTimestamp(t *testing.T) {</span>
<span class="term-fg32">+	&#47;&#47; Test certain timestamps</span>
<span class="term-fg32">+	var tests = []struct {</span>
<span class="term-fg32">+		unixTimestamp int64</span>
<span class="term-fg32">+		isPast        bool</span>
<span class="term-fg32">+		forks         []Fork</span>
<span class="term-fg32">+	}{</span>
<span class="term-fg32">+		{0, false, []Fork{</span>
<span class="term-fg32">+			DevnetShanghaiFork, TestnetShanghaiFork, MainnetShanghaiFork,</span>
<span class="term-fg32">+			DevnetPrevrandaoFork, TestnetPrevrandaoFork, MainnetPrevrandaoFork,</span>
<span class="term-fg32">+			DevnetCancunFork, TestnetCancunFork, MainnetCancunFork,</span>
<span class="term-fg32">+		}},</span>
<span class="term-fg32">+		&#47;&#47; Enabled now</span>
<span class="term-fg32">+		{time.Now().Unix(), true, []Fork{</span>
<span class="term-fg32">+			DevnetShanghaiFork, TestnetShanghaiFork, MainnetShanghaiFork,</span>
<span class="term-fg32">+			DevnetPrevrandaoFork, TestnetPrevrandaoFork, MainnetPrevrandaoFork,</span>
<span class="term-fg32">+			DevnetCancunFork, TestnetCancunFork, MainnetCancunFork,</span>
<span class="term-fg32">+		}},</span>
<span class="term-fg32">+		&#47;&#47; Scheduled forks that are not yet enabled (may be empty list)</span>
<span class="term-fg32">+		{time.Now().Unix(), false, []Fork{}},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	for _, test := range tests {</span>
<span class="term-fg32">+		for _, fork := range test.forks {</span>
<span class="term-fg32">+			name := fmt.Sprintf(&quot;unix %d %s&quot;, test.unixTimestamp, fork)</span>
<span class="term-fg32">+			t.Run(name, func(t *testing.T) {</span>
<span class="term-fg32">+				if got, want := fork.IsEnabledAt(test.unixTimestamp), test.isPast; got != want {</span>
<span class="term-fg32">+					t.Errorf(&quot;got %v, want %v&quot;, got, want)</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+				if !fork.IsEnabledAt(fork.Unix()) {</span>
<span class="term-fg32">+					t.Errorf(&quot;fork timestamp should be past itself&quot;)</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+				if fork.IsEnabledAt(fork.Unix() - 10) {</span>
<span class="term-fg32">+					t.Errorf(&quot;fork timestamp should not be past itself - 10&quot;)</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+			})</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-88eab05250fc46ba21c510ad" role="button"
                       aria-expanded="false" aria-controls="id-88eab05250fc46ba21c510ad">
                        <code>cmd/geth/immutable/settings/network_test.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/geth/immutable/settings/network_test.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+67</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-88eab05250fc46ba21c510ad"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;settings&#47;network_test.go immutable-geth&#47;cmd&#47;geth&#47;immutable&#47;settings&#47;network_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..9a52b8aaf226fb2e7d9b32831feee23f96b67095</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;geth&#47;immutable&#47;settings&#47;network_test.go</span>
<span class="term-fg36">@@ -0,0 +1,67 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package settings</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;encoding&#47;json&quot;</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestGenesis_GetJSON(t *testing.T) {</span>
<span class="term-fg32">+	var tests = []struct {</span>
<span class="term-fg32">+		network   string</span>
<span class="term-fg32">+		networkID int</span>
<span class="term-fg32">+	}{</span>
<span class="term-fg32">+		{&quot;devnet&quot;, DevnetNetworkID},</span>
<span class="term-fg32">+		{&quot;testnet&quot;, TestnetNetworkID},</span>
<span class="term-fg32">+		{&quot;mainnet&quot;, MainnetNetworkID},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	previousJSONs := []string{}</span>
<span class="term-fg32">+	for _, test := range tests {</span>
<span class="term-fg32">+		t.Run(test.network, func(t *testing.T) {</span>
<span class="term-fg32">+			network, err := NewNetwork(test.network)</span>
<span class="term-fg32">+			if err != nil {</span>
<span class="term-fg32">+				t.Fatal(err)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			&#47;&#47; ID</span>
<span class="term-fg32">+			if network.ID() != test.networkID {</span>
<span class="term-fg32">+				t.Errorf(&quot;expected network ID %d, got %d&quot;, test.networkID, network.ID())</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			&#47;&#47; JSON</span>
<span class="term-fg32">+			if len(network.GenesisJSON()) &lt; 1000 { &#47;&#47; All files should be at least 1000 bytes</span>
<span class="term-fg32">+				t.Errorf(&quot;expected non-empty genesis JSON&quot;)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			&#47;&#47; Valid JSON</span>
<span class="term-fg32">+			genesis := map[string]interface{}{}</span>
<span class="term-fg32">+			if err := json.Unmarshal([]byte(network.GenesisJSON()), &amp;genesis); err != nil {</span>
<span class="term-fg32">+				t.Fatal(err)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			&#47;&#47; Unique JSON</span>
<span class="term-fg32">+			if len(previousJSONs) &gt; 0 {</span>
<span class="term-fg32">+				for _, previousJSON := range previousJSONs {</span>
<span class="term-fg32">+					if previousJSON == network.GenesisJSON() {</span>
<span class="term-fg32">+						t.Fatalf(&quot;expected unique genesis JSONs, got duplicate for %s and previous&quot;, test.network)</span>
<span class="term-fg32">+					}</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			previousJSONs = append(previousJSONs, network.GenesisJSON())</span>
<span class="term-fg32">+		})</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if len(previousJSONs) != len(tests) {</span>
<span class="term-fg32">+		t.Fatalf(&quot;expected %d unique genesis JSONs, got %d&quot;, len(tests), len(previousJSONs))</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-a1eeecaaec5232cfd5efc363" role="button"
                       aria-expanded="false" aria-controls="id-a1eeecaaec5232cfd5efc363">
                        <code>cmd/geth/immutable_bootstrap_test.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/geth/immutable_bootstrap_test.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+336</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-a1eeecaaec5232cfd5efc363"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;immutable_bootstrap_test.go immutable-geth&#47;cmd&#47;geth&#47;immutable_bootstrap_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..db038115fb12d5468e9262d608ed09138c05ae93</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;geth&#47;immutable_bootstrap_test.go</span>
<span class="term-fg36">@@ -0,0 +1,336 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package main</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;context&quot;</span>
<span class="term-fg32">+	&quot;errors&quot;</span>
<span class="term-fg32">+	&quot;fmt&quot;</span>
<span class="term-fg32">+	&quot;os&quot;</span>
<span class="term-fg32">+	&quot;path&#47;filepath&quot;</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;keys&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;node&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;role&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;crypto&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+const TestSecretIDTemplate = &quot;{POD_ROLE}&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutableBootstrap_AllRoles_CreateKeysAndChainState(t *testing.T) {</span>
<span class="term-fg32">+	ctx := context.Background()</span>
<span class="term-fg32">+	&#47;&#47; Temp dir</span>
<span class="term-fg32">+	testDirpath, err := os.MkdirTemp(&quot;&quot;, &quot;immutable-test&quot;)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Fatal(err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	defer os.Remove(testDirpath)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Configuration</span>
<span class="term-fg32">+	ordinal := 0</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Subtest specification</span>
<span class="term-fg32">+	type tests struct {</span>
<span class="term-fg32">+		role     role.Role</span>
<span class="term-fg32">+		name     string</span>
<span class="term-fg32">+		store    keys.Store</span>
<span class="term-fg32">+		addr     string</span>
<span class="term-fg32">+		err      error</span>
<span class="term-fg32">+		secretID string</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	ts := []tests{}</span>
<span class="term-fg32">+	&#47;&#47; These roles generate keys</span>
<span class="term-fg32">+	for _, r := range []role.Role{role.Validator, role.Boot} {</span>
<span class="term-fg32">+		&#47;&#47; secretID :=</span>
<span class="term-fg32">+		ts = append(ts, []tests{</span>
<span class="term-fg32">+			{</span>
<span class="term-fg32">+				r,</span>
<span class="term-fg32">+				fmt.Sprintf(&quot;%sWithoutKey&quot;, r.String()),</span>
<span class="term-fg32">+				&amp;mockArtefactStore{},</span>
<span class="term-fg32">+				&quot;&quot;,</span>
<span class="term-fg32">+				keys.ErrPrivateKeyNotFound,</span>
<span class="term-fg32">+				&quot;&quot;,</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			{</span>
<span class="term-fg32">+				r,</span>
<span class="term-fg32">+				fmt.Sprintf(&quot;%sWithKey&quot;, r.String()),</span>
<span class="term-fg32">+				testNewStoreWithKey(t, r, ordinal),</span>
<span class="term-fg32">+				&quot;0x02F0d131F1f97aef08aEc6E3291B957d9Efe7105&quot;,</span>
<span class="term-fg32">+				nil,</span>
<span class="term-fg32">+				node.CanonicalNodeName(r, ordinal),</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			{</span>
<span class="term-fg32">+				r,</span>
<span class="term-fg32">+				fmt.Sprintf(&quot;%sWithEmptyKey&quot;, r.String()),</span>
<span class="term-fg32">+				testNewStoreWithEmptyKey(t, r, ordinal),</span>
<span class="term-fg32">+				&quot;&quot;,</span>
<span class="term-fg32">+				keys.ErrPrivateKeyInvalid,</span>
<span class="term-fg32">+				node.CanonicalNodeName(r, ordinal),</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			{</span>
<span class="term-fg32">+				r,</span>
<span class="term-fg32">+				fmt.Sprintf(&quot;%sWithReadyKey&quot;, r.String()),</span>
<span class="term-fg32">+				testNewStoreWithReadyKey(t, r, ordinal),</span>
<span class="term-fg32">+				&quot;&quot;,</span>
<span class="term-fg32">+				nil,</span>
<span class="term-fg32">+				node.CanonicalNodeName(r, ordinal),</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+		}...)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; These roles don&#39;t generate keys</span>
<span class="term-fg32">+	for _, r := range []role.Role{role.RPC, role.Partner, role.PartnerPublic} {</span>
<span class="term-fg32">+		ts = append(ts, []tests{</span>
<span class="term-fg32">+			{</span>
<span class="term-fg32">+				r,</span>
<span class="term-fg32">+				fmt.Sprintf(&quot;%sWithoutKey&quot;, r.String()),</span>
<span class="term-fg32">+				&amp;mockArtefactStore{},</span>
<span class="term-fg32">+				&quot;&quot;,</span>
<span class="term-fg32">+				nil,</span>
<span class="term-fg32">+				&quot;&quot;,</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+		}...)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Run subtests</span>
<span class="term-fg32">+	for i := range ts {</span>
<span class="term-fg32">+		test := ts[i]</span>
<span class="term-fg32">+		t.Run(test.name, func(t *testing.T) {</span>
<span class="term-fg32">+			&#47;&#47; Make subdir</span>
<span class="term-fg32">+			subtestDirpath := filepath.Join(testDirpath, test.name)</span>
<span class="term-fg32">+			if err := os.Mkdir(subtestDirpath, os.ModePerm); err != nil {</span>
<span class="term-fg32">+				t.Fatal(err)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			&#47;&#47; Run bootstrap func</span>
<span class="term-fg32">+			b, err := bootstrapFactory(</span>
<span class="term-fg32">+				test.role,</span>
<span class="term-fg32">+				test.store,</span>
<span class="term-fg32">+				&quot;us-east-2&quot;,</span>
<span class="term-fg32">+				subtestDirpath,</span>
<span class="term-fg32">+				test.secretID,</span>
<span class="term-fg32">+				core.ImmutableGenesisBlock(&quot;devnet&quot;),</span>
<span class="term-fg32">+			)</span>
<span class="term-fg32">+			if err != nil {</span>
<span class="term-fg32">+				t.Fatal(err)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			if err := b.Bootstrap(context.Background()); err != nil {</span>
<span class="term-fg32">+				if test.err == nil {</span>
<span class="term-fg32">+					t.Fatalf(&quot;unexpected error %v, %+v&quot;, err, test)</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+				if !errors.Is(err, test.err) {</span>
<span class="term-fg32">+					t.Fatalf(&quot;expected error %v, got %v, %+v&quot;, test.err, err, test)</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+				&#47;&#47; Expected an error, nothing else to test</span>
<span class="term-fg32">+				return</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+			&#47;&#47; Key validation</span>
<span class="term-fg32">+			if test.role == role.Boot || test.role == role.Validator {</span>
<span class="term-fg32">+				&#47;&#47; Now read all the secrets that should have been generated and stored and validate them</span>
<span class="term-fg32">+				&#47;&#47; Key hex to compare against keystore</span>
<span class="term-fg32">+				secretID, err := keys.SecretID(TestSecretIDTemplate, node.CanonicalNodeName(test.role, ordinal))</span>
<span class="term-fg32">+				if err != nil {</span>
<span class="term-fg32">+					t.Fatal(err)</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+				keyHex, err := test.store.GetSecret(ctx, secretID)</span>
<span class="term-fg32">+				if err != nil {</span>
<span class="term-fg32">+					t.Fatal(err)</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+				&#47;&#47; Validate secret contains valid private key</span>
<span class="term-fg32">+				if _, err := crypto.HexToECDSA(keyHex); err != nil {</span>
<span class="term-fg32">+					t.Fatal(err)</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+			&#47;&#47; Address file validation</span>
<span class="term-fg32">+			if test.role == role.Validator {</span>
<span class="term-fg32">+				addr, err := os.ReadFile(filepath.Join(subtestDirpath, &quot;address&quot;))</span>
<span class="term-fg32">+				if err != nil {</span>
<span class="term-fg32">+					t.Fatal(err)</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+				if !common.IsHexAddress(string(addr)) {</span>
<span class="term-fg32">+					t.Fatalf(&quot;address file does not contain a valid address %s&quot;, string(addr))</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+				if test.addr != &quot;&quot; {</span>
<span class="term-fg32">+					if string(addr) != test.addr {</span>
<span class="term-fg32">+						t.Fatalf(&quot;expected address %s, got %s&quot;, test.addr, string(addr))</span>
<span class="term-fg32">+					}</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+			&#47;&#47; Chain state validation</span>
<span class="term-fg32">+			if test.role != role.Boot {</span>
<span class="term-fg32">+				testRenderedChainStateDirs(t, subtestDirpath)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		})</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func testNewStoreWithKey(t *testing.T, r role.Role, ordinal int) keys.Store {</span>
<span class="term-fg32">+	t.Helper()</span>
<span class="term-fg32">+	storeWithKey := &amp;mockArtefactStore{}</span>
<span class="term-fg32">+	secretID, err := keys.SecretID(TestSecretIDTemplate, node.CanonicalNodeName(r, ordinal))</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Fatal(err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if err := storeWithKey.PushSecretString(</span>
<span class="term-fg32">+		secretID,</span>
<span class="term-fg32">+		&quot;48aa455c373ec5ce7fefb0e54f44a215decdc85b9047bc4d09801e038909bdbe&quot;,</span>
<span class="term-fg32">+	); err != nil {</span>
<span class="term-fg32">+		t.Fatal(err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return storeWithKey</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func testNewStoreWithEmptyKey(t *testing.T, r role.Role, ordinal int) keys.Store {</span>
<span class="term-fg32">+	t.Helper()</span>
<span class="term-fg32">+	storeWithNoKey := &amp;mockArtefactStore{}</span>
<span class="term-fg32">+	secretID, err := keys.SecretID(TestSecretIDTemplate, node.CanonicalNodeName(r, ordinal))</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Fatal(err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if err := storeWithNoKey.PushSecretString(</span>
<span class="term-fg32">+		secretID,</span>
<span class="term-fg32">+		&quot;&quot;,</span>
<span class="term-fg32">+	); err != nil {</span>
<span class="term-fg32">+		t.Fatal(err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return storeWithNoKey</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func testNewStoreWithReadyKey(t *testing.T, r role.Role, ordinal int) keys.Store {</span>
<span class="term-fg32">+	t.Helper()</span>
<span class="term-fg32">+	storeWithReadyKey := &amp;mockArtefactStore{}</span>
<span class="term-fg32">+	secretID, err := keys.SecretID(TestSecretIDTemplate, node.CanonicalNodeName(r, ordinal))</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Fatal(err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if err := storeWithReadyKey.PushSecretString(</span>
<span class="term-fg32">+		secretID,</span>
<span class="term-fg32">+		keys.EmptyPrivateKeySecretValue,</span>
<span class="term-fg32">+	); err != nil {</span>
<span class="term-fg32">+		t.Fatal(err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return storeWithReadyKey</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func testRenderedChainStateDirs(t *testing.T, dirpath string) {</span>
<span class="term-fg32">+	&#47;&#47; Check data dir contains expected files</span>
<span class="term-fg32">+	dirTests := []struct {</span>
<span class="term-fg32">+		dirpath string</span>
<span class="term-fg32">+		empty   bool</span>
<span class="term-fg32">+	}{</span>
<span class="term-fg32">+		{dirpath, false},</span>
<span class="term-fg32">+		{filepath.Join(dirpath, &quot;geth&quot;), false},</span>
<span class="term-fg32">+		{filepath.Join(dirpath, &quot;geth&quot;, &quot;chaindata&quot;), false},</span>
<span class="term-fg32">+		{filepath.Join(dirpath, &quot;geth&quot;, &quot;lightchaindata&quot;), false},</span>
<span class="term-fg32">+		{filepath.Join(dirpath, &quot;keystore&quot;), true},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	for _, dirTest := range dirTests {</span>
<span class="term-fg32">+		empty, err := isEmptyOrDoesNotExist(dirTest.dirpath)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			t.Fatal(err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if empty != dirTest.empty {</span>
<span class="term-fg32">+			t.Fatalf(&quot;dir %s state is incorrect&quot;, dirTest.dirpath)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	expectedFiles := []string{</span>
<span class="term-fg32">+		filepath.Join(dirpath, &quot;geth&quot;, &quot;LOCK&quot;),</span>
<span class="term-fg32">+		filepath.Join(dirpath, &quot;geth&quot;, &quot;nodekey&quot;),</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	for _, expectedFile := range expectedFiles {</span>
<span class="term-fg32">+		if _, err := os.Stat(expectedFile); os.IsNotExist(err) {</span>
<span class="term-fg32">+			t.Fatalf(&quot;expected file %s to exist&quot;, expectedFile)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutablePodEnvVars(t *testing.T) {</span>
<span class="term-fg32">+	tests := []struct {</span>
<span class="term-fg32">+		podName      string</span>
<span class="term-fg32">+		ordinal      int</span>
<span class="term-fg32">+		podNamespace string</span>
<span class="term-fg32">+		podValid     bool</span>
<span class="term-fg32">+		nsValid      bool</span>
<span class="term-fg32">+	}{</span>
<span class="term-fg32">+		{&quot;&quot;, 0, &quot;&quot;, false, false},</span>
<span class="term-fg32">+		{&quot;zkevm-geth-validator-0&quot;, 0, &quot;dev&quot;, true, true},</span>
<span class="term-fg32">+		{&quot;zkevm-geth-validator-1&quot;, 1, &quot;sandbox&quot;, true, true},</span>
<span class="term-fg32">+		{&quot;zkevm-geth-validator-2&quot;, 2, &quot;prod&quot;, true, true},</span>
<span class="term-fg32">+		{&quot;zkevm-geth-validator-3&quot;, 3, &quot;abc&quot;, true, false},</span>
<span class="term-fg32">+		{&quot;zkevm-geth-validator-&quot;, 0, &quot;abc&quot;, false, false},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	for _, test := range tests {</span>
<span class="term-fg32">+		if err := os.Setenv(&quot;POD_NAME&quot;, test.podName); err != nil {</span>
<span class="term-fg32">+			t.Fatal(err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if err := os.Setenv(&quot;POD_NAMESPACE&quot;, test.podNamespace); err != nil {</span>
<span class="term-fg32">+			t.Fatal(err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if _, err := envFromPodNamespaceEnvVar(); err != nil &amp;&amp; test.nsValid {</span>
<span class="term-fg32">+			t.Fatalf(&quot;expected pod namespace %s to be valid&quot;, test.podNamespace)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if ordinal, err := ordinalFromPodNameEnvVar(); err != nil &amp;&amp; test.podValid {</span>
<span class="term-fg32">+			t.Fatalf(&quot;expected pod name %s to be valid&quot;, test.podName)</span>
<span class="term-fg32">+		} else {</span>
<span class="term-fg32">+			if ordinal != test.ordinal {</span>
<span class="term-fg32">+				t.Fatalf(&quot;expected ordinal %d, got %d&quot;, test.ordinal, ordinal)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutableIsEmpty(t *testing.T) {</span>
<span class="term-fg32">+	dir := filepath.Join(os.TempDir(), &quot;immutable-test&quot;)</span>
<span class="term-fg32">+	if err := os.MkdirAll(dir, os.ModePerm); err != nil {</span>
<span class="term-fg32">+		t.Fatal(err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	defer os.RemoveAll(dir)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	tests := []struct {</span>
<span class="term-fg32">+		dirpath string</span>
<span class="term-fg32">+		isEmpty bool</span>
<span class="term-fg32">+	}{</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			dirpath: dir,</span>
<span class="term-fg32">+			isEmpty: true,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			dirpath: &quot;.&#47;testdata&quot;,</span>
<span class="term-fg32">+			isEmpty: false,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			dirpath: &quot;.&#47;does-not-exist&quot;,</span>
<span class="term-fg32">+			isEmpty: true,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	for _, test := range tests {</span>
<span class="term-fg32">+		t.Run(test.dirpath, func(t *testing.T) {</span>
<span class="term-fg32">+			isEmpty, err := isEmptyOrDoesNotExist(test.dirpath)</span>
<span class="term-fg32">+			if err != nil {</span>
<span class="term-fg32">+				t.Fatal(err)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			if isEmpty != test.isEmpty {</span>
<span class="term-fg32">+				t.Errorf(&quot;expected %v, got %v&quot;, test.isEmpty, isEmpty)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		})</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-409ea51471f194b63ebd6fd0" role="button"
                       aria-expanded="false" aria-controls="id-409ea51471f194b63ebd6fd0">
                        <code>cmd/geth/immutable_configure_test.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/geth/immutable_configure_test.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+141</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-409ea51471f194b63ebd6fd0"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;immutable_configure_test.go immutable-geth&#47;cmd&#47;geth&#47;immutable_configure_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..974a2bf415623f151cc43fdfb1101c609c24b7cc</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;geth&#47;immutable_configure_test.go</span>
<span class="term-fg36">@@ -0,0 +1,141 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package main</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;errors&quot;</span>
<span class="term-fg32">+	&quot;os&quot;</span>
<span class="term-fg32">+	&quot;path&#47;filepath&quot;</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;role&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutableConfigure(t *testing.T) {</span>
<span class="term-fg32">+	&#47;&#47; Skip this test if rotating the validator keys. Invariants will be disabled.</span>
<span class="term-fg32">+	&#47;&#47; t.Skip()</span>
<span class="term-fg32">+	dir := filepath.Join(os.TempDir(), &quot;immutable-test&quot;)</span>
<span class="term-fg32">+	if err := os.MkdirAll(dir, os.ModePerm); err != nil {</span>
<span class="term-fg32">+		t.Fatal(err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	defer os.RemoveAll(dir)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	tests := []struct {</span>
<span class="term-fg32">+		name      string</span>
<span class="term-fg32">+		r         role.Role</span>
<span class="term-fg32">+		pod       string</span>
<span class="term-fg32">+		ordinal   int</span>
<span class="term-fg32">+		filepaths configureNodePaths</span>
<span class="term-fg32">+		err       error</span>
<span class="term-fg32">+	}{</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name:    &quot;validator valid config&quot;,</span>
<span class="term-fg32">+			r:       role.Validator,</span>
<span class="term-fg32">+			pod:     &quot;zkevm-geth-validator-0&quot;,</span>
<span class="term-fg32">+			ordinal: 0,</span>
<span class="term-fg32">+			filepaths: configureNodePaths{</span>
<span class="term-fg32">+				ConfigFilepath: &quot;..&#47;..&#47;cmd&#47;geth&#47;testdata&#47;dev.toml&quot;,</span>
<span class="term-fg32">+				DataDirpath:    dir,</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			err: nil,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name:    &quot;validator invalid config&quot;,</span>
<span class="term-fg32">+			r:       role.Validator,</span>
<span class="term-fg32">+			pod:     &quot;zkevm-geth-validator-0&quot;,</span>
<span class="term-fg32">+			ordinal: 0,</span>
<span class="term-fg32">+			filepaths: configureNodePaths{</span>
<span class="term-fg32">+				ConfigFilepath: &quot;..&#47;..&#47;cmd&#47;geth&#47;testdata&#47;dev_bad_recommit.toml&quot;,</span>
<span class="term-fg32">+				DataDirpath:    dir,</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			err: ErrConfigRecommitInvariant,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name:    &quot;validator invalid ordinal&quot;,</span>
<span class="term-fg32">+			r:       role.Validator,</span>
<span class="term-fg32">+			pod:     &quot;zkevm-geth-validator-1&quot;,</span>
<span class="term-fg32">+			ordinal: 1,</span>
<span class="term-fg32">+			filepaths: configureNodePaths{</span>
<span class="term-fg32">+				ConfigFilepath: &quot;..&#47;..&#47;cmd&#47;geth&#47;testdata&#47;dev.toml&quot;,</span>
<span class="term-fg32">+				DataDirpath:    dir,</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			err: ErrOrdinalInvariant,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name:    &quot;boot valid config&quot;,</span>
<span class="term-fg32">+			r:       role.Boot,</span>
<span class="term-fg32">+			pod:     &quot;zkevm-geth-boot-0&quot;,</span>
<span class="term-fg32">+			ordinal: 0,</span>
<span class="term-fg32">+			filepaths: configureNodePaths{</span>
<span class="term-fg32">+				ConfigFilepath: &quot;..&#47;..&#47;cmd&#47;geth&#47;testdata&#47;dev.toml&quot;,</span>
<span class="term-fg32">+				DataDirpath:    dir,</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			err: nil,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name:    &quot;boot invalid ordinal&quot;,</span>
<span class="term-fg32">+			r:       role.Boot,</span>
<span class="term-fg32">+			pod:     &quot;zkevm-geth-boot-1&quot;,</span>
<span class="term-fg32">+			ordinal: 1,</span>
<span class="term-fg32">+			filepaths: configureNodePaths{</span>
<span class="term-fg32">+				ConfigFilepath: &quot;..&#47;..&#47;cmd&#47;geth&#47;testdata&#47;dev.toml&quot;,</span>
<span class="term-fg32">+				DataDirpath:    dir,</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			err: ErrOrdinalInvariant,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name:    &quot;rpc valid config&quot;,</span>
<span class="term-fg32">+			r:       role.RPC,</span>
<span class="term-fg32">+			pod:     &quot;zkevm-geth-rpc-2&quot;,</span>
<span class="term-fg32">+			ordinal: 2,</span>
<span class="term-fg32">+			filepaths: configureNodePaths{</span>
<span class="term-fg32">+				ConfigFilepath: &quot;..&#47;..&#47;cmd&#47;geth&#47;testdata&#47;dev.toml&quot;,</span>
<span class="term-fg32">+				DataDirpath:    dir,</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			err: nil,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name:    &quot;partner valid config&quot;,</span>
<span class="term-fg32">+			r:       role.Partner,</span>
<span class="term-fg32">+			pod:     &quot;zkevm-geth-partner-3&quot;,</span>
<span class="term-fg32">+			ordinal: 3,</span>
<span class="term-fg32">+			filepaths: configureNodePaths{</span>
<span class="term-fg32">+				ConfigFilepath: &quot;..&#47;..&#47;cmd&#47;geth&#47;testdata&#47;dev.toml&quot;,</span>
<span class="term-fg32">+				DataDirpath:    dir,</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			err: nil,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	for _, test := range tests {</span>
<span class="term-fg32">+		t.Run(test.name, func(t *testing.T) {</span>
<span class="term-fg32">+			err := configureNodeInPod(test.r, test.pod, test.filepaths)</span>
<span class="term-fg32">+			if err != nil {</span>
<span class="term-fg32">+				if test.err == nil {</span>
<span class="term-fg32">+					t.Fatal(err)</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+				if !errors.Is(err, test.err) {</span>
<span class="term-fg32">+					t.Fatalf(&quot;error: %v, expected: %v&quot;, err, test.err)</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+				&#47;&#47; Got the error we expected</span>
<span class="term-fg32">+				return</span>
<span class="term-fg32">+			} else if test.err != nil {</span>
<span class="term-fg32">+				t.Fatalf(&quot;expected error: %v&quot;, test.err)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		})</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-1b7a4bcd5a112ef9a2a181e8" role="button"
                       aria-expanded="false" aria-controls="id-1b7a4bcd5a112ef9a2a181e8">
                        <code>cmd/geth/immutable_premine_test.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/geth/immutable_premine_test.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+57</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-1b7a4bcd5a112ef9a2a181e8"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;immutable_premine_test.go immutable-geth&#47;cmd&#47;geth&#47;immutable_premine_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..c66c62ed7be7b2c4e8e7446a78a9f3126d4bd570</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;geth&#47;immutable_premine_test.go</span>
<span class="term-fg36">@@ -0,0 +1,57 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package main</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;env&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutablePremine(t *testing.T) {</span>
<span class="term-fg32">+	testAddr := common.HexToAddress(&quot;0x2E969d22e6654e064F461cf8B1314Cc0864a4914&quot;)</span>
<span class="term-fg32">+	type test struct {</span>
<span class="term-fg32">+		env          env.Environment</span>
<span class="term-fg32">+		premineCount int</span>
<span class="term-fg32">+		premineWei   *big.Int</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	tests := []test{</span>
<span class="term-fg32">+		{env: env.Devnet, premineCount: len(immutableDevPremineAddresses) + 1, premineWei: totalSupplyWei},</span>
<span class="term-fg32">+		{env: env.Testnet, premineCount: 1, premineWei: totalSupplyWei},</span>
<span class="term-fg32">+		{env: env.Mainnet, premineCount: 1, premineWei: totalSupplyWei},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	for _, tc := range tests {</span>
<span class="term-fg32">+		got := immutablePremines(tc.env, testAddr)</span>
<span class="term-fg32">+		if len(got) != tc.premineCount {</span>
<span class="term-fg32">+			t.Fatalf(&quot;expected: %v, got: %v, %+v&quot;, tc.premineCount, len(got), tc)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		for _, premine := range got {</span>
<span class="term-fg32">+			if premine.Wei.String() != tc.premineWei.String() {</span>
<span class="term-fg32">+				t.Fatalf(&quot;expected: %v, got: %v, %+v&quot;, tc.premineWei, premine.Wei, tc)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if len(got) == 1 {</span>
<span class="term-fg32">+			if got[0].Address != testAddr {</span>
<span class="term-fg32">+				t.Fatalf(&quot;expected: %v, got: %v, %+v&quot;, testAddr, got[0].Address, tc)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-1945f87beeecc27918f787b8" role="button"
                       aria-expanded="false" aria-controls="id-1945f87beeecc27918f787b8">
                        <code>cmd/geth/testdata/acl_list.txt</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/geth/testdata/acl_list.txt" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+1</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-1945f87beeecc27918f787b8"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;testdata&#47;acl_list.txt immutable-geth&#47;cmd&#47;geth&#47;testdata&#47;acl_list.txt</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..9f9ee18d35c001b7d9343d62b012bffe2351b164</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;geth&#47;testdata&#47;acl_list.txt</span>
<span class="term-fg36">@@ -0,0 +1 @@</span>
<span class="term-fg32">+0xed557863FFD4C87537BA8264098B22483c6145f2</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-f3f2fd6e5688dd4835c429f4" role="button"
                       aria-expanded="false" aria-controls="id-f3f2fd6e5688dd4835c429f4">
                        <code>cmd/geth/testdata/blockedkey.prv</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/geth/testdata/blockedkey.prv" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+1</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-f3f2fd6e5688dd4835c429f4"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;testdata&#47;blockedkey.prv immutable-geth&#47;cmd&#47;geth&#47;testdata&#47;blockedkey.prv</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..43462b087b503a6992848fd6f9e6bc6cac5f0d90</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;geth&#47;testdata&#47;blockedkey.prv</span>
<span class="term-fg36">@@ -0,0 +1 @@</span>
<span class="term-fg32">+c9fa59f5d81e6725e568e61c6844d7f341e1612168ea11931e6ff986cf00c278</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-d79ed8b4e3e7fc1b9d166ae3" role="button"
                       aria-expanded="false" aria-controls="id-d79ed8b4e3e7fc1b9d166ae3">
                        <code>cmd/geth/testdata/blocklist.txt</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/geth/testdata/blocklist.txt" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+1</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-d79ed8b4e3e7fc1b9d166ae3"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;testdata&#47;blocklist.txt immutable-geth&#47;cmd&#47;geth&#47;testdata&#47;blocklist.txt</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..5e845e5e9f078125f89f00703ec84ce3d64e08a4</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;geth&#47;testdata&#47;blocklist.txt</span>
<span class="term-fg36">@@ -0,0 +1 @@</span>
<span class="term-fg32">+0x72a5843cc08275C8171E582972Aa4fDa8C397B2A,0x7F19720A857F834887FC9A7bC0a0fBe7Fc7f8102,0x1da5821544e25c636c1417ba96ade4cf6d2f9b5a,0x7Db418b5D567A4e0E8c59Ad71BE1FcE48f3E6107</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-fa0f11123d251fcef56a2a02" role="button"
                       aria-expanded="false" aria-controls="id-fa0f11123d251fcef56a2a02">
                        <code>cmd/geth/testdata/dev.toml</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/geth/testdata/dev.toml" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+79</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-fa0f11123d251fcef56a2a02"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;testdata&#47;dev.toml immutable-geth&#47;cmd&#47;geth&#47;testdata&#47;dev.toml</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..8fa720cbb5f53220a00aa8cddd1e9f8b94b6ec59</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;geth&#47;testdata&#47;dev.toml</span>
<span class="term-fg36">@@ -0,0 +1,79 @@</span>
<span class="term-fg32">+[Eth]</span>
<span class="term-fg32">+NetworkId = 15003</span>
<span class="term-fg32">+SyncMode = &quot;full&quot;</span>
<span class="term-fg32">+EthDiscoveryURLs = []</span>
<span class="term-fg32">+SnapDiscoveryURLs = []</span>
<span class="term-fg32">+NoPruning = true</span>
<span class="term-fg32">+NoPrefetch = false</span>
<span class="term-fg32">+TxLookupLimit = 2350000</span>
<span class="term-fg32">+TransactionHistory = 2350000</span>
<span class="term-fg32">+StateScheme = &quot;hash&quot;</span>
<span class="term-fg32">+DatabaseCache = 512</span>
<span class="term-fg32">+DatabaseFreezer = &quot;&quot;</span>
<span class="term-fg32">+TrieCleanCache = 256</span>
<span class="term-fg32">+TrieDirtyCache = 256</span>
<span class="term-fg32">+TrieTimeout = 3600000000000</span>
<span class="term-fg32">+SnapshotCache = 0</span>
<span class="term-fg32">+Preimages = false</span>
<span class="term-fg32">+FilterLogCacheSize = 32</span>
<span class="term-fg32">+EnablePreimageRecording = false</span>
<span class="term-fg32">+RPCGasCap = 50000000</span>
<span class="term-fg32">+RPCEVMTimeout = 5000000000</span>
<span class="term-fg32">+RPCTxFeeCap = 0e+00</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+[Eth.Miner]</span>
<span class="term-fg32">+GasFloor = 0</span>
<span class="term-fg32">+GasCeil = 30000000</span>
<span class="term-fg32">+GasPrice = 10000000000</span>
<span class="term-fg32">+Recommit = 999999999000000000</span>
<span class="term-fg32">+NewPayloadTimeout = 2000000000</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+[Eth.TxPool]</span>
<span class="term-fg32">+Locals = []</span>
<span class="term-fg32">+NoLocals = true</span>
<span class="term-fg32">+Journal = &quot;transactions.rlp&quot;</span>
<span class="term-fg32">+Rejournal = 3600000000000</span>
<span class="term-fg32">+PriceLimit = 10000000000</span>
<span class="term-fg32">+PriceBump = 10</span>
<span class="term-fg32">+AccountSlots = 16</span>
<span class="term-fg32">+GlobalSlots = 5120</span>
<span class="term-fg32">+AccountQueue = 64</span>
<span class="term-fg32">+GlobalQueue = 1024</span>
<span class="term-fg32">+Lifetime = 3600000000000</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+[Eth.BlobPool]</span>
<span class="term-fg32">+Datadir = &quot;blobpool&quot;</span>
<span class="term-fg32">+Datacap = 0</span>
<span class="term-fg32">+PriceBump = 100</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+[Eth.GPO]</span>
<span class="term-fg32">+Blocks = 120</span>
<span class="term-fg32">+Percentile = 60</span>
<span class="term-fg32">+MaxHeaderHistory = 1024</span>
<span class="term-fg32">+MaxBlockHistory = 1024</span>
<span class="term-fg32">+MaxPrice = 500000000000</span>
<span class="term-fg32">+IgnorePrice = 2</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+[Node]</span>
<span class="term-fg32">+DataDir = &quot;&quot;</span>
<span class="term-fg32">+IPCPath = &quot;geth.ipc&quot;</span>
<span class="term-fg32">+HTTPHost = &quot;&quot;</span>
<span class="term-fg32">+HTTPModules = []</span>
<span class="term-fg32">+WSHost = &quot;&quot;</span>
<span class="term-fg32">+WSModules = []</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+[Node.P2P]</span>
<span class="term-fg32">+MaxPeers = 100</span>
<span class="term-fg32">+NoDiscovery = false</span>
<span class="term-fg32">+BootstrapNodes = [&quot;enode:&#47;&#47;26ed2b67b49284e3aca7a04fae065681bf28a7a1c7958e5039472e213cc1ae0b743d987c8a9832e17b42f423e7800ce74d0ad23f477c5fa1a1adb51808d67aa4@127.0.0.1:30300&quot;]</span>
<span class="term-fg32">+StaticNodes = []</span>
<span class="term-fg32">+TrustedNodes = []</span>
<span class="term-fg32">+ListenAddr = &quot;&quot;</span>
<span class="term-fg32">+DiscAddr = &quot;&quot;</span>
<span class="term-fg32">+EnableMsgEvents = false</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+[Node.HTTPTimeouts]</span>
<span class="term-fg32">+ReadTimeout = 0</span>
<span class="term-fg32">+ReadHeaderTimeout = 0</span>
<span class="term-fg32">+WriteTimeout = 0</span>
<span class="term-fg32">+IdleTimeout = 0</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-d54ca0160be6ebb49002e041" role="button"
                       aria-expanded="false" aria-controls="id-d54ca0160be6ebb49002e041">
                        <code>cmd/geth/testdata/dev_bad_recommit.toml</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/geth/testdata/dev_bad_recommit.toml" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+79</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-d54ca0160be6ebb49002e041"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;testdata&#47;dev_bad_recommit.toml immutable-geth&#47;cmd&#47;geth&#47;testdata&#47;dev_bad_recommit.toml</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..08a3b8335a8a60481544d924463b8a03d78312ef</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;geth&#47;testdata&#47;dev_bad_recommit.toml</span>
<span class="term-fg36">@@ -0,0 +1,79 @@</span>
<span class="term-fg32">+[Eth]</span>
<span class="term-fg32">+NetworkId = 15003</span>
<span class="term-fg32">+SyncMode = &quot;full&quot;</span>
<span class="term-fg32">+EthDiscoveryURLs = []</span>
<span class="term-fg32">+SnapDiscoveryURLs = []</span>
<span class="term-fg32">+NoPruning = true</span>
<span class="term-fg32">+NoPrefetch = false</span>
<span class="term-fg32">+TxLookupLimit = 2350000</span>
<span class="term-fg32">+TransactionHistory = 2350000</span>
<span class="term-fg32">+StateScheme = &quot;hash&quot;</span>
<span class="term-fg32">+DatabaseCache = 512</span>
<span class="term-fg32">+DatabaseFreezer = &quot;&quot;</span>
<span class="term-fg32">+TrieCleanCache = 256</span>
<span class="term-fg32">+TrieDirtyCache = 256</span>
<span class="term-fg32">+TrieTimeout = 3600000000000</span>
<span class="term-fg32">+SnapshotCache = 0</span>
<span class="term-fg32">+Preimages = false</span>
<span class="term-fg32">+FilterLogCacheSize = 32</span>
<span class="term-fg32">+EnablePreimageRecording = false</span>
<span class="term-fg32">+RPCGasCap = 50000000</span>
<span class="term-fg32">+RPCEVMTimeout = 5000000000</span>
<span class="term-fg32">+RPCTxFeeCap = 0e+00</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+[Eth.Miner]</span>
<span class="term-fg32">+GasFloor = 0</span>
<span class="term-fg32">+GasCeil = 30000000</span>
<span class="term-fg32">+GasPrice = 10000000000</span>
<span class="term-fg32">+Recommit = 123</span>
<span class="term-fg32">+NewPayloadTimeout = 2000000000</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+[Eth.TxPool]</span>
<span class="term-fg32">+Locals = []</span>
<span class="term-fg32">+NoLocals = true</span>
<span class="term-fg32">+Journal = &quot;transactions.rlp&quot;</span>
<span class="term-fg32">+Rejournal = 3600000000000</span>
<span class="term-fg32">+PriceLimit = 10000000000</span>
<span class="term-fg32">+PriceBump = 10</span>
<span class="term-fg32">+AccountSlots = 16</span>
<span class="term-fg32">+GlobalSlots = 5120</span>
<span class="term-fg32">+AccountQueue = 64</span>
<span class="term-fg32">+GlobalQueue = 1024</span>
<span class="term-fg32">+Lifetime = 3600000000000</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+[Eth.BlobPool]</span>
<span class="term-fg32">+Datadir = &quot;blobpool&quot;</span>
<span class="term-fg32">+Datacap = 0</span>
<span class="term-fg32">+PriceBump = 100</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+[Eth.GPO]</span>
<span class="term-fg32">+Blocks = 120</span>
<span class="term-fg32">+Percentile = 60</span>
<span class="term-fg32">+MaxHeaderHistory = 1024</span>
<span class="term-fg32">+MaxBlockHistory = 1024</span>
<span class="term-fg32">+MaxPrice = 500000000000</span>
<span class="term-fg32">+IgnorePrice = 2</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+[Node]</span>
<span class="term-fg32">+DataDir = &quot;&quot;</span>
<span class="term-fg32">+IPCPath = &quot;geth.ipc&quot;</span>
<span class="term-fg32">+HTTPHost = &quot;&quot;</span>
<span class="term-fg32">+HTTPModules = []</span>
<span class="term-fg32">+WSHost = &quot;&quot;</span>
<span class="term-fg32">+WSModules = []</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+[Node.P2P]</span>
<span class="term-fg32">+MaxPeers = 100</span>
<span class="term-fg32">+NoDiscovery = false</span>
<span class="term-fg32">+BootstrapNodes = [&quot;enode:&#47;&#47;26ed2b67b49284e3aca7a04fae065681bf28a7a1c7958e5039472e213cc1ae0b743d987c8a9832e17b42f423e7800ce74d0ad23f477c5fa1a1adb51808d67aa4@127.0.0.1:30300&quot;]</span>
<span class="term-fg32">+StaticNodes = []</span>
<span class="term-fg32">+TrustedNodes = []</span>
<span class="term-fg32">+ListenAddr = &quot;&quot;</span>
<span class="term-fg32">+DiscAddr = &quot;&quot;</span>
<span class="term-fg32">+EnableMsgEvents = false</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+[Node.HTTPTimeouts]</span>
<span class="term-fg32">+ReadTimeout = 0</span>
<span class="term-fg32">+ReadHeaderTimeout = 0</span>
<span class="term-fg32">+WriteTimeout = 0</span>
<span class="term-fg32">+IdleTimeout = 0</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-96f12466d4cc397482a83e37" role="button"
                       aria-expanded="false" aria-controls="id-96f12466d4cc397482a83e37">
                        <code>cmd/geth/testdata/key.addr</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/geth/testdata/key.addr" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+0</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-96f12466d4cc397482a83e37"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;geth&#47;testdata&#47;key.addr immutable-geth&#47;cmd&#47;geth&#47;testdata&#47;key.addr</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..1368edfe603997c348980988353e664816c8284c</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;geth&#47;testdata&#47;key.addr</span>
<span class="term-fg36">@@ -0,0 +1 @@</span>
<span class="term-fg32">+0x02F0d131F1f97aef08aEc6E3291B957d9Efe7105</span>
<span class="term-fg32">\ No newline at end of file</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-2803397308ff4bbf4cb7f260" role="button"
                       aria-expanded="false" aria-controls="id-2803397308ff4bbf4cb7f260">
                        <code>cmd/immutable/remote/aws/secretsmanager_test.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/cmd/immutable/remote/aws/secretsmanager_test.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+50</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-2803397308ff4bbf4cb7f260"><span class="term-fg1">diff --git go-ethereum&#47;cmd&#47;immutable&#47;remote&#47;aws&#47;secretsmanager_test.go immutable-geth&#47;cmd&#47;immutable&#47;remote&#47;aws&#47;secretsmanager_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..39d41d496db7caf2876f6dc9b8a904084f03dd80</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;cmd&#47;immutable&#47;remote&#47;aws&#47;secretsmanager_test.go</span>
<span class="term-fg36">@@ -0,0 +1,50 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package aws</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;fmt&quot;</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;aws&#47;aws-sdk-go&#47;aws&#47;awserr&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;aws&#47;aws-sdk-go&#47;service&#47;secretsmanager&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutableSecretsManager_SecretIsNotFound(t *testing.T) {</span>
<span class="term-fg32">+	tests := []struct {</span>
<span class="term-fg32">+		err        error</span>
<span class="term-fg32">+		isNotFound bool</span>
<span class="term-fg32">+	}{</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			awserr.New(secretsmanager.ErrCodeResourceNotFoundException, &quot;Secret not found&quot;, nil),</span>
<span class="term-fg32">+			true,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			fmt.Errorf(&quot;err: %w&quot;, awserr.New(secretsmanager.ErrCodeResourceNotFoundException, &quot;Secret not found&quot;, nil)),</span>
<span class="term-fg32">+			true,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			fmt.Errorf(&quot;bad&quot;),</span>
<span class="term-fg32">+			false,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	for _, test := range tests {</span>
<span class="term-fg32">+		if IsNotFound(test.err) != test.isNotFound {</span>
<span class="term-fg32">+			t.Fatalf(&quot;expected %v, got %v: %s&quot;, test.isNotFound, IsNotFound(test.err), test.err.Error())</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-b008fb0b8e209d7258e0ce06" role="button"
                       aria-expanded="false" aria-controls="id-b008fb0b8e209d7258e0ce06">
                        <code>consensus/clique/clique_immutable_test.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/consensus/clique/clique_immutable_test.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+124</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-b008fb0b8e209d7258e0ce06"><span class="term-fg1">diff --git go-ethereum&#47;consensus&#47;clique&#47;clique_immutable_test.go immutable-geth&#47;consensus&#47;clique&#47;clique_immutable_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..a4dfbad7696fe1cb42fbf567c00cde69c3bd56c4</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;consensus&#47;clique&#47;clique_immutable_test.go</span>
<span class="term-fg36">@@ -0,0 +1,124 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2019 The go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package clique</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;rawdb&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;vm&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;crypto&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;params&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutableClique_ForksEnabled_BlocksValid(t *testing.T) {</span>
<span class="term-fg32">+	&#47;&#47; Initialize a Clique chain with a single signer</span>
<span class="term-fg32">+	var (</span>
<span class="term-fg32">+		db     = rawdb.NewMemoryDatabase()</span>
<span class="term-fg32">+		key, _ = crypto.HexToECDSA(&quot;b71c71a67e1177ad4e901695e1b4b9ee17ae16c6668d313eac2f96dbcda3f291&quot;)</span>
<span class="term-fg32">+		addr   = crypto.PubkeyToAddress(key.PublicKey)</span>
<span class="term-fg32">+		engine = New(params.AllCliqueProtocolChanges.Clique, db)</span>
<span class="term-fg32">+	)</span>
<span class="term-fg32">+	&#47;&#47; Configs</span>
<span class="term-fg32">+	zero := uint64(0)</span>
<span class="term-fg32">+	shanghaiConfig := params.AllCliqueProtocolChanges</span>
<span class="term-fg32">+	shanghaiConfig.ShanghaiTime = &amp;zero</span>
<span class="term-fg32">+	immutableConfig := params.AllCliqueProtocolChanges</span>
<span class="term-fg32">+	immutableConfig.ShanghaiTime = &amp;zero</span>
<span class="term-fg32">+	immutableConfig.PrevrandaoTime = &amp;zero</span>
<span class="term-fg32">+	immutableConfig.CancunTime = &amp;zero</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Test fixtures</span>
<span class="term-fg32">+	var tests = []struct {</span>
<span class="term-fg32">+		name          string</span>
<span class="term-fg32">+		config        *params.ChainConfig</span>
<span class="term-fg32">+		blockModifier func(*core.BlockGen)</span>
<span class="term-fg32">+	}{</span>
<span class="term-fg32">+		{&quot;shanghai&quot;, immutableConfig, func(*core.BlockGen) {}},</span>
<span class="term-fg32">+		{&quot;shanghaiWithdrawals&quot;, immutableConfig, func(block *core.BlockGen) {</span>
<span class="term-fg32">+			block.AddWithdrawal(&amp;types.Withdrawal{</span>
<span class="term-fg32">+				Index:     0,</span>
<span class="term-fg32">+				Validator: 0,</span>
<span class="term-fg32">+				Address:   addr,</span>
<span class="term-fg32">+				Amount:    1,</span>
<span class="term-fg32">+			})</span>
<span class="term-fg32">+		}},</span>
<span class="term-fg32">+		{&quot;immutable&quot;, immutableConfig, func(*core.BlockGen) {}},</span>
<span class="term-fg32">+		{&quot;immutableWithdrawals&quot;, immutableConfig, func(block *core.BlockGen) {</span>
<span class="term-fg32">+			block.AddWithdrawal(&amp;types.Withdrawal{</span>
<span class="term-fg32">+				Index:     0,</span>
<span class="term-fg32">+				Validator: 0,</span>
<span class="term-fg32">+				Address:   addr,</span>
<span class="term-fg32">+				Amount:    1,</span>
<span class="term-fg32">+			})</span>
<span class="term-fg32">+		}},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Run</span>
<span class="term-fg32">+	for _, test := range tests {</span>
<span class="term-fg32">+		t.Run(test.name, func(t *testing.T) {</span>
<span class="term-fg32">+			genspec := &amp;core.Genesis{</span>
<span class="term-fg32">+				Config:    test.config,</span>
<span class="term-fg32">+				ExtraData: make([]byte, extraVanity+common.AddressLength+extraSeal),</span>
<span class="term-fg32">+				Alloc: map[common.Address]types.Account{</span>
<span class="term-fg32">+					addr: {Balance: big.NewInt(10000000000000000)},</span>
<span class="term-fg32">+				},</span>
<span class="term-fg32">+				BaseFee: big.NewInt(params.InitialBaseFee),</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			copy(genspec.ExtraData[extraVanity:], addr[:])</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+			&#47;&#47; Generate a batch of blocks, each properly signed</span>
<span class="term-fg32">+			chain, _ := core.NewBlockChain(rawdb.NewMemoryDatabase(), nil, genspec, nil, engine, vm.Config{}, nil, nil)</span>
<span class="term-fg32">+			defer chain.Stop()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+			_, blocks, _ := core.GenerateChainWithGenesis(genspec, engine, 3, func(i int, block *core.BlockGen) {</span>
<span class="term-fg32">+				&#47;&#47; The chain maker doesn&#39;t have access to a chain, so the difficulty will be</span>
<span class="term-fg32">+				&#47;&#47; lets unset (nil). Set it here to the correct value.</span>
<span class="term-fg32">+				block.SetDifficulty(diffInTurn)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+				test.blockModifier(block)</span>
<span class="term-fg32">+			})</span>
<span class="term-fg32">+			for i, block := range blocks {</span>
<span class="term-fg32">+				header := block.Header()</span>
<span class="term-fg32">+				if i &gt; 0 {</span>
<span class="term-fg32">+					header.ParentHash = blocks[i-1].Hash()</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+				header.Extra = make([]byte, extraVanity+extraSeal)</span>
<span class="term-fg32">+				header.Difficulty = diffInTurn</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+				sig, _ := crypto.Sign(SealHash(header).Bytes(), key)</span>
<span class="term-fg32">+				copy(header.Extra[len(header.Extra)-extraSeal:], sig)</span>
<span class="term-fg32">+				blocks[i] = block.WithSeal(header)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			&#47;&#47; Insert the first two blocks and make sure the chain is valid</span>
<span class="term-fg32">+			db = rawdb.NewMemoryDatabase()</span>
<span class="term-fg32">+			chain, _ = core.NewBlockChain(db, nil, genspec, nil, engine, vm.Config{}, nil, nil)</span>
<span class="term-fg32">+			defer chain.Stop()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+			if _, err := chain.InsertChain(blocks[:2]); err != nil {</span>
<span class="term-fg32">+				t.Fatalf(&quot;failed to insert initial blocks: %v&quot;, err)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			if head := chain.CurrentBlock().Number.Uint64(); head != 2 {</span>
<span class="term-fg32">+				t.Fatalf(&quot;chain head mismatch: have %d, want %d&quot;, head, 2)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		})</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-926f0bccd12effe6b91b15ca" role="button"
                       aria-expanded="false" aria-controls="id-926f0bccd12effe6b91b15ca">
                        <code>consensus/clique/clique_test.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/consensus/clique/clique_test.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/consensus/clique/clique_test.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+53</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-926f0bccd12effe6b91b15ca"><span class="term-fg1">diff --git go-ethereum&#47;consensus&#47;clique&#47;clique_test.go immutable-geth&#47;consensus&#47;clique&#47;clique_test.go</span>
<span class="term-fg1">index 8ef8dbffa974a1e5563a03894caafe1a4179f83e..16896d8d734da9ce2641a1039919b950b3462bc7 100644</span>
<span class="term-fg1">--- go-ethereum&#47;consensus&#47;clique&#47;clique_test.go</span>
<span class="term-fg1">+++ immutable-geth&#47;consensus&#47;clique&#47;clique_test.go</span>
<span class="term-fg36">@@ -27,6 +27,7 @@</span> 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;vm&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;crypto&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;params&quot;
<span class="term-fg32">+	&quot;github.com&#47;stretchr&#47;testify&#47;require&quot;</span>
 )
&nbsp;
 &#47;&#47; This test case is a repro of an annoying bug that took us forever to catch.
<span class="term-fg36">@@ -123,3 +124,55 @@</span> 	if have != want {
 		t.Errorf(&quot;have %x, want %x&quot;, have, want)
 	}
 }
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutableEnforceCancunHeaderInvariants_NonZeroParentBeaconRoot_ReturnsError(t *testing.T) {</span>
<span class="term-fg32">+	header := &amp;types.Header{ParentBeaconRoot: &amp;common.MaxHash, BlobGasUsed: newUint64(0), ExcessBlobGas: newUint64(0)}</span>
<span class="term-fg32">+	err := enforceCancunHeaderInvariants(header)</span>
<span class="term-fg32">+	require.EqualError(t, err, &quot;invalid parentBeaconRoot, have 0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff, expected zero hash&quot;)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutableEnforceCancunHeaderInvariants_NonZeroBlobGasUsed_ReturnsError(t *testing.T) {</span>
<span class="term-fg32">+	header := &amp;types.Header{ParentBeaconRoot: &amp;common.MinHash, BlobGasUsed: newUint64(1), ExcessBlobGas: newUint64(0)}</span>
<span class="term-fg32">+	err := enforceCancunHeaderInvariants(header)</span>
<span class="term-fg32">+	require.EqualError(t, err, &quot;invalid BlobGasUsed: have 1, expected 0&quot;)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutableEnforceCancunHeaderInvariants_NonZeroExcessBlobGas_ReturnsError(t *testing.T) {</span>
<span class="term-fg32">+	header := &amp;types.Header{ParentBeaconRoot: &amp;common.MinHash, BlobGasUsed: newUint64(0), ExcessBlobGas: newUint64(1)}</span>
<span class="term-fg32">+	err := enforceCancunHeaderInvariants(header)</span>
<span class="term-fg32">+	require.EqualError(t, err, &quot;invalid ExcessBlobGas: have 1, expected 0&quot;)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutableEnforceCancunHeaderInvariants_NilParentBeaconRoot_ReturnsError(t *testing.T) {</span>
<span class="term-fg32">+	header := &amp;types.Header{ParentBeaconRoot: nil, BlobGasUsed: newUint64(0), ExcessBlobGas: newUint64(0)}</span>
<span class="term-fg32">+	err := enforceCancunHeaderInvariants(header)</span>
<span class="term-fg32">+	require.ErrorContains(t, err, &quot;invalid header with nil values&quot;)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutableEnforceCancunHeaderInvariants_NilBlobGasUsed_ReturnsError(t *testing.T) {</span>
<span class="term-fg32">+	header := &amp;types.Header{ParentBeaconRoot: &amp;common.MaxHash, BlobGasUsed: nil, ExcessBlobGas: newUint64(0)}</span>
<span class="term-fg32">+	err := enforceCancunHeaderInvariants(header)</span>
<span class="term-fg32">+	require.ErrorContains(t, err, &quot;invalid header with nil values&quot;)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutableEnforceCancunHeaderInvariants_NilExcessBlobGas_ReturnsError(t *testing.T) {</span>
<span class="term-fg32">+	header := &amp;types.Header{ParentBeaconRoot: &amp;common.MinHash, BlobGasUsed: newUint64(0), ExcessBlobGas: nil}</span>
<span class="term-fg32">+	err := enforceCancunHeaderInvariants(header)</span>
<span class="term-fg32">+	require.ErrorContains(t, err, &quot;invalid header with nil values&quot;)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutableEnforceCancunHeaderInvariants_ValidValues_ReturnsNil(t *testing.T) {</span>
<span class="term-fg32">+	validA := common.HexToHash(&quot;0x0&quot;)</span>
<span class="term-fg32">+	validB := common.Hash{}</span>
<span class="term-fg32">+	validC := common.BigToHash(big.NewInt(0))</span>
<span class="term-fg32">+	validD := common.MinHash</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	validHashes := []common.Hash{validA, validB, validC, validD}</span>
<span class="term-fg32">+	for _, h := range validHashes {</span>
<span class="term-fg32">+		header := &amp;types.Header{ParentBeaconRoot: &amp;h, BlobGasUsed: newUint64(0), ExcessBlobGas: newUint64(0)}</span>
<span class="term-fg32">+		err := enforceCancunHeaderInvariants(header)</span>
<span class="term-fg32">+		require.NoError(t, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func newUint64(val uint64) *uint64 { return &amp;val }</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-ebd76cbb57bbf634b38a4135" role="button"
                       aria-expanded="false" aria-controls="id-ebd76cbb57bbf634b38a4135">
                        <code>consensus/misc/eip1559/immutable_eip1559_test.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/consensus/misc/eip1559/immutable_eip1559_test.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+62</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-ebd76cbb57bbf634b38a4135"><span class="term-fg1">diff --git go-ethereum&#47;consensus&#47;misc&#47;eip1559&#47;immutable_eip1559_test.go immutable-geth&#47;consensus&#47;misc&#47;eip1559&#47;immutable_eip1559_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..038479b24c4e375678f91ec4be38d682ed19caca</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;consensus&#47;misc&#47;eip1559&#47;immutable_eip1559_test.go</span>
<span class="term-fg36">@@ -0,0 +1,62 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package eip1559</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;settings&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;params&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutableCalcBaseFee(t *testing.T) {</span>
<span class="term-fg32">+	tests := []struct {</span>
<span class="term-fg32">+		parentBaseFee   int64</span>
<span class="term-fg32">+		parentGasLimit  uint64</span>
<span class="term-fg32">+		parentGasUsed   uint64</span>
<span class="term-fg32">+		expectedBaseFee int64</span>
<span class="term-fg32">+	}{</span>
<span class="term-fg32">+		{params.InitialBaseFee, 20000000, 10000000, params.InitialBaseFee}, &#47;&#47; usage == target</span>
<span class="term-fg32">+		{params.InitialBaseFee, 20000000, 9000000, 998000000},              &#47;&#47; usage below target</span>
<span class="term-fg32">+		{params.InitialBaseFee, 20000000, 11000000, 1002000000},            &#47;&#47; usage above target</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	for i, test := range tests {</span>
<span class="term-fg32">+		parent := &amp;types.Header{</span>
<span class="term-fg32">+			Number:   common.Big32,</span>
<span class="term-fg32">+			GasLimit: test.parentGasLimit,</span>
<span class="term-fg32">+			GasUsed:  test.parentGasUsed,</span>
<span class="term-fg32">+			BaseFee:  big.NewInt(test.parentBaseFee),</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		&#47;&#47; Set config that modifies base fee calculation</span>
<span class="term-fg32">+		&#47;&#47; (cannot import core pkg for genesis due to import cycle)</span>
<span class="term-fg32">+		c := config()</span>
<span class="term-fg32">+		c.Clique = &amp;params.CliqueConfig{</span>
<span class="term-fg32">+			Period: settings.SecondsPerBlock,</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		c.IsReorgBlocked = true</span>
<span class="term-fg32">+		c.ChainID = big.NewInt(settings.DevnetNetworkID)</span>
<span class="term-fg32">+		if !c.IsValidImmutableZKEVM() {</span>
<span class="term-fg32">+			t.Fatalf(&quot;test %d: invalid immutable zkevm config&quot;, i)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if have, want := CalcBaseFee(c, parent), big.NewInt(test.expectedBaseFee); have.Cmp(want) != 0 {</span>
<span class="term-fg32">+			t.Fatalf(&quot;test %d: have %d  want %d, &quot;, i, have, want)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-50966d5e5ff45132133f50b2" role="button"
                       aria-expanded="false" aria-controls="id-50966d5e5ff45132133f50b2">
                        <code>core/blockchain_test.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/core/blockchain_test.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/core/blockchain_test.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+17</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-8</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-50966d5e5ff45132133f50b2"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;blockchain_test.go immutable-geth&#47;core&#47;blockchain_test.go</span>
<span class="term-fg1">index 876d662f74d8ddc70c7e51711201ff476c5a0e50..b1815640a807b9f2fb15253fa55d30fd4eef7b0a 100644</span>
<span class="term-fg1">--- go-ethereum&#47;core&#47;blockchain_test.go</span>
<span class="term-fg1">+++ immutable-geth&#47;core&#47;blockchain_test.go</span>
<span class="term-fg36">@@ -53,13 +53,15 @@</span> &#47;&#47; newCanonical creates a chain database, and injects a deterministic canonical
 &#47;&#47; chain. Depending on the full flag, it creates either a full block chain or a
 &#47;&#47; header only chain. The database and genesis specification for block generation
 &#47;&#47; are also returned in case more test blocks are needed later.
<span class="term-fg32">+&#47;&#47; CHANGE(immutable): Wraps newCanonicalWithGenesis to allow for customization</span>
 func newCanonical(engine consensus.Engine, n int, full bool, scheme string) (ethdb.Database, *Genesis, *BlockChain, error) {
<span class="term-fg31">-	var (</span>
<span class="term-fg31">-		genesis = &amp;Genesis{</span>
<span class="term-fg31">-			BaseFee: big.NewInt(params.InitialBaseFee),</span>
<span class="term-fg31">-			Config:  params.AllEthashProtocolChanges,</span>
<span class="term-fg31">-		}</span>
<span class="term-fg31">-	)</span>
<span class="term-fg32">+	genesis := &amp;Genesis{</span>
<span class="term-fg32">+		BaseFee: big.NewInt(params.InitialBaseFee),</span>
<span class="term-fg32">+		Config:  params.AllEthashProtocolChanges,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return newCanonicalWithGenesis(engine, n, full, scheme, genesis)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+func newCanonicalWithGenesis(engine consensus.Engine, n int, full bool, scheme string, genesis *Genesis) (ethdb.Database, *Genesis, *BlockChain, error) {</span>
 	&#47;&#47; Initialize a fresh chain with only a genesis block
 	blockchain, _ := NewBlockChain(rawdb.NewMemoryDatabase(), DefaultCacheConfigWithScheme(scheme), genesis, nil, engine, vm.Config{}, nil, nil)
&nbsp;
<span class="term-fg36">@@ -83,7 +85,7 @@</span> func newGwei(n int64) *big.Int {
 	return new(big.Int).Mul(big.NewInt(n), big.NewInt(params.GWei))
 }
&nbsp;
<span class="term-fg31">-&#47;&#47; Test fork of length N starting from block i</span>
<span class="term-fg32">+&#47;&#47; Test fork of length N starting from block i. These will not trigger a reorg</span>
 func testFork(t *testing.T, blockchain *BlockChain, i, n int, full bool, comparator func(td1, td2 *big.Int), scheme string) {
 	&#47;&#47; Copy old chain up to #i into a new db
 	genDb, _, blockchain2, err := newCanonical(ethash.NewFaker(), i, full, scheme)
<span class="term-fg36">@@ -222,9 +224,16 @@</span> }
&nbsp;
 &#47;&#47; Test inserts the blocks&#47;headers after the fork choice rule is changed.
 &#47;&#47; The chain is reorged to whatever specified.
<span class="term-fg32">+&#47;&#47; CHANGE(immutable): Wraps testInsertAfterMergeConfigurable to allow for customization</span>
 func testInsertAfterMerge(t *testing.T, blockchain *BlockChain, i, n int, full bool, scheme string) {
<span class="term-fg32">+	testInsertAfterMergeConfigurable(t, blockchain, i, n, full, scheme, newCanonical)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func testInsertAfterMergeConfigurable(t *testing.T, blockchain *BlockChain, i, n int, full bool, scheme string,</span>
<span class="term-fg32">+	newCanonicalChain func(engine consensus.Engine, n int, full bool, scheme string) (ethdb.Database, *Genesis, *BlockChain, error),</span>
<span class="term-fg32">+) {</span>
 	&#47;&#47; Copy old chain up to #i into a new db
<span class="term-fg31">-	genDb, _, blockchain2, err := newCanonical(ethash.NewFaker(), i, full, scheme)</span>
<span class="term-fg32">+	genDb, _, blockchain2, err := newCanonicalChain(ethash.NewFaker(), i, full, scheme)</span>
 	if err != nil {
 		t.Fatal(&quot;could not make new canonical in testFork&quot;, err)
 	}</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-aed7da934bad039323df52f7" role="button"
                       aria-expanded="false" aria-controls="id-aed7da934bad039323df52f7">
                        <code>core/immutable_blockchain_test.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/core/immutable_blockchain_test.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+138</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-aed7da934bad039323df52f7"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;immutable_blockchain_test.go immutable-geth&#47;core&#47;immutable_blockchain_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..0785855f0ea75a00dbb63ba1428479057621ac7b</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;core&#47;immutable_blockchain_test.go</span>
<span class="term-fg36">@@ -0,0 +1,138 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package core</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;errors&quot;</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;consensus&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;consensus&#47;ethash&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;rawdb&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;ethdb&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;params&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+const scheme = rawdb.HashScheme</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; All tests use full blocks as light chains are not relevant to Immutable</span>
<span class="term-fg32">+const full = true</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; newCanonicalWithInvariants creates a chain database, and injects a deterministic canonical</span>
<span class="term-fg32">+&#47;&#47; full blockchain. The chain is configured with reorgs blocked.</span>
<span class="term-fg32">+&#47;&#47; The database and genesis specification for block generation</span>
<span class="term-fg32">+&#47;&#47; are also returned in case more test blocks are needed later. Evolved from newCanonical</span>
<span class="term-fg32">+func newCanonicalWithInvariants(engine consensus.Engine, n int, full bool, scheme string) (ethdb.Database, *Genesis, *BlockChain, error) {</span>
<span class="term-fg32">+	chainCfg := *params.AllEthashProtocolChanges</span>
<span class="term-fg32">+	chainCfg.IsReorgBlocked = true</span>
<span class="term-fg32">+	var (</span>
<span class="term-fg32">+		genesis = &amp;Genesis{</span>
<span class="term-fg32">+			BaseFee: big.NewInt(params.InitialBaseFee),</span>
<span class="term-fg32">+			Config:  &amp;chainCfg,</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	)</span>
<span class="term-fg32">+	return newCanonicalWithGenesis(engine, n, full, scheme, genesis)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; testFullBlockReorgWithInvariants will generate a blockchain with no blocks. It will then create two sequences of full blocks</span>
<span class="term-fg32">+&#47;&#47; of lengths defined by `first` and `second`. It will then attempt to insert the two sequences of blocks into the blockchain.</span>
<span class="term-fg32">+&#47;&#47; It will then check that the chain is a validate sequence of linked hashes.</span>
<span class="term-fg32">+func testFullBlockReorgWithInvariants(t *testing.T, first, second []int64, expectReorg bool, expectedChainLength uint64) {</span>
<span class="term-fg32">+	&#47;&#47; Create a pristine chain and database</span>
<span class="term-fg32">+	genDb, _, blockchain, err := newCanonicalWithInvariants(ethash.NewFaker(), 0, full, scheme)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Fatalf(&quot;failed to create pristine chain: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	defer blockchain.Stop()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Generate the first chain for inserting</span>
<span class="term-fg32">+	firstBlocks, _ := GenerateChain(params.TestChainConfig, blockchain.GetBlockByHash(blockchain.CurrentBlock().Hash()), ethash.NewFaker(), genDb, len(first), func(i int, b *BlockGen) {</span>
<span class="term-fg32">+		b.OffsetTime(first[i])</span>
<span class="term-fg32">+	})</span>
<span class="term-fg32">+	secondBlocks, _ := GenerateChain(params.TestChainConfig, blockchain.GetBlockByHash(blockchain.CurrentBlock().Hash()), ethash.NewFaker(), genDb, len(second), func(i int, b *BlockGen) {</span>
<span class="term-fg32">+		b.OffsetTime(second[i])</span>
<span class="term-fg32">+	})</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if _, err := blockchain.InsertChain(firstBlocks); err != nil {</span>
<span class="term-fg32">+		t.Fatalf(&quot;failed to insert firstBlocks chain: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	_, err = blockchain.InsertChain(secondBlocks)</span>
<span class="term-fg32">+	if expectReorg &amp;&amp; !errors.Is(err, ErrReorgAttempted) {</span>
<span class="term-fg32">+		t.Fatalf(&quot;expected reorg error but got: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if !expectReorg &amp;&amp; err != nil {</span>
<span class="term-fg32">+		t.Fatalf(&quot;failed to insert secondBlocks chain: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Check that the chain is valid number and link wise</span>
<span class="term-fg32">+	prev := blockchain.CurrentBlock()</span>
<span class="term-fg32">+	for block := blockchain.GetBlockByNumber(blockchain.CurrentBlock().Number.Uint64() - 1); block.NumberU64() != 0; prev, block = block.Header(), blockchain.GetBlockByNumber(block.NumberU64()-1) {</span>
<span class="term-fg32">+		if prev.ParentHash != block.Hash() {</span>
<span class="term-fg32">+			t.Errorf(&quot;parent block hash mismatch: have %x, want %x&quot;, prev.ParentHash, block.Hash())</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	chainLength := blockchain.CurrentBlock().Number.Uint64()</span>
<span class="term-fg32">+	if chainLength != expectedChainLength {</span>
<span class="term-fg32">+		t.Errorf(&quot;expected chain of length %d but got %d&quot;, expectedChainLength, chainLength)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; TestInvariantExtendCanonicalBlocks this tests that we can extend a given chain by adding canonical blocks</span>
<span class="term-fg32">+&#47;&#47; It works by generating a chain of length `i` and extending it by blocks `n`. Evolved from TestExtendCanonicalBlocksAfterMerge</span>
<span class="term-fg32">+&#47;&#47; Will not trigger a reorg since the canonical chain is never reverted</span>
<span class="term-fg32">+func TestImmutableInvariantExtendCanonicalBlocks(t *testing.T) {</span>
<span class="term-fg32">+	length := 5</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Make first chain starting from genesis</span>
<span class="term-fg32">+	_, _, processor, err := newCanonicalWithInvariants(ethash.NewFaker(), length, full, scheme)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Fatalf(&quot;failed to make new canonical chain: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	defer processor.Stop()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	testInsertAfterMergeConfigurable(t, processor, length, 1, full, scheme, newCanonicalWithInvariants)</span>
<span class="term-fg32">+	testInsertAfterMergeConfigurable(t, processor, length, 10, full, scheme, newCanonicalWithInvariants)</span>
<span class="term-fg32">+	testInsertAfterMergeConfigurable(t, processor, length, 100, full, scheme, newCanonicalWithInvariants)</span>
<span class="term-fg32">+	testInsertAfterMergeConfigurable(t, processor, length, 1000, full, scheme, newCanonicalWithInvariants)</span>
<span class="term-fg32">+	testInsertAfterMergeConfigurable(t, processor, length, 1000, full, scheme, newCanonicalWithInvariants)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutableInvariantReorg(t *testing.T) {</span>
<span class="term-fg32">+	&#47;&#47; Since the blocks being inserted in the second sequence do not reorg the first sequence, we do not expect a reorg</span>
<span class="term-fg32">+	&#47;&#47; and expect a final length of 6, as the second chain extends the canonical chain</span>
<span class="term-fg32">+	testFullBlockReorgWithInvariants(t, []int64{15, 16, 17, 18}, []int64{15, 16, 17, 18, 19, 20, 21, 22, 23, 24}, false, 10)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; The second chain blocks attempts to reorg the last block of the first chain. It should fail and the final</span>
<span class="term-fg32">+	&#47;&#47; chain should remain at the length of the initial chain</span>
<span class="term-fg32">+	testFullBlockReorgWithInvariants(t, []int64{15, 16, 17, 18}, []int64{15, 16, 17, -1, 18, 19, 20, 21, 22, 23}, true, 4)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; The second chain attempts to do a deep reorg, of multiple blocks</span>
<span class="term-fg32">+	testFullBlockReorgWithInvariants(t, []int64{15, 16, 17, 18}, []int64{1, 2, 3, 4, 5, 6, 7, 8, 9, 10}, true, 4)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; The second chain is different to the first chain, but since it is shorter, it will not cause a reorg</span>
<span class="term-fg32">+	testFullBlockReorgWithInvariants(t, []int64{15, 16, 17, 18, 19, 20}, []int64{1, 2}, false, 6)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Both chains are of equal length. Due to randomness, in the protocol, this will attempt to replace the head ~half the time</span>
<span class="term-fg32">+	&#47;&#47; Comment it out due to test flakiness.</span>
<span class="term-fg32">+	&#47;&#47;testFullBlockReorgWithInvariants(t, []int64{15, 16, 17, 18}, []int64{1, 2, 3, 4}, true, 4)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Short chains, where new chain extends the canonical chain</span>
<span class="term-fg32">+	testFullBlockReorgWithInvariants(t, []int64{15}, []int64{15, 16}, false, 2)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; No initial chain, new chain becomes the canonical chain</span>
<span class="term-fg32">+	testFullBlockReorgWithInvariants(t, []int64{}, []int64{15, 16, 17}, false, 3)</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-eff2f986e7d57bb3065f3b0d" role="button"
                       aria-expanded="false" aria-controls="id-eff2f986e7d57bb3065f3b0d">
                        <code>core/immutable_genesis_test.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/core/immutable_genesis_test.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+171</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-eff2f986e7d57bb3065f3b0d"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;immutable_genesis_test.go immutable-geth&#47;core&#47;immutable_genesis_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..260c78b6dc7ae575445829263501b4ab541704ec</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;core&#47;immutable_genesis_test.go</span>
<span class="term-fg36">@@ -0,0 +1,171 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package core</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+	&quot;path&#47;filepath&quot;</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+	&quot;time&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;settings&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&#47;hexutil&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;stretchr&#47;testify&#47;assert&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; TestImmutableGenesis_ImmutableGenesis_ParsedAndValid tests that the immutable genesis blocks are valid</span>
<span class="term-fg32">+&#47;&#47; so that nodes are configured correctly pre and post genesis.</span>
<span class="term-fg32">+func TestImmutableGenesis_ImmutableGenesis_ParsedAndValid(t *testing.T) {</span>
<span class="term-fg32">+	var tests = []struct {</span>
<span class="term-fg32">+		name       string</span>
<span class="term-fg32">+		addr       common.Address</span>
<span class="term-fg32">+		extraData  []byte</span>
<span class="term-fg32">+		prevrandao settings.Fork</span>
<span class="term-fg32">+		shanghai   settings.Fork</span>
<span class="term-fg32">+		cancun     settings.Fork</span>
<span class="term-fg32">+	}{</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			&quot;mainnet&quot;,</span>
<span class="term-fg32">+			common.HexToAddress(&quot;dda0d9448ebe3ea43afece5fa6401f5795c19333&quot;),</span>
<span class="term-fg32">+			hexutil.MustDecode(&quot;0x000000000000000000000000000000000000000000000000000000000000000055e2ebc94b3314d387f423ef4424a95547f3f8c40000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;),</span>
<span class="term-fg32">+			settings.MainnetPrevrandaoFork,</span>
<span class="term-fg32">+			settings.MainnetShanghaiFork,</span>
<span class="term-fg32">+			settings.MainnetCancunFork,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			&quot;testnet&quot;,</span>
<span class="term-fg32">+			common.HexToAddress(&quot;e567ea84e1eb3ffdc8f5aa420bf14a16eee6a809&quot;),</span>
<span class="term-fg32">+			hexutil.MustDecode(&quot;0x0000000000000000000000000000000000000000000000000000000000000000512069234755cc4bb2cc59b79b7541ed5a03babb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;),</span>
<span class="term-fg32">+			settings.TestnetPrevrandaoFork,</span>
<span class="term-fg32">+			settings.TestnetShanghaiFork,</span>
<span class="term-fg32">+			settings.TestnetCancunFork,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			&quot;devnet&quot;,</span>
<span class="term-fg32">+			common.HexToAddress(&quot;000000000013b7b1b08b3c8efe02e866f746bd38&quot;),</span>
<span class="term-fg32">+			hexutil.MustDecode(&quot;0x000000000000000000000000000000000000000000000000000000000000000092e13fb4e00a5daecf5b61553b678ad56e6985150000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;),</span>
<span class="term-fg32">+			settings.DevnetPrevrandaoFork,</span>
<span class="term-fg32">+			settings.DevnetShanghaiFork,</span>
<span class="term-fg32">+			settings.DevnetCancunFork,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	for _, test := range tests {</span>
<span class="term-fg32">+		g := ImmutableGenesisBlock(test.name)</span>
<span class="term-fg32">+		t.Run(test.name+&quot;genesis&quot;, func(t *testing.T) {</span>
<span class="term-fg32">+			assert.Equal(t, uint64(0x0), g.Nonce)</span>
<span class="term-fg32">+			assert.Equal(t, uint64(0x0), g.Timestamp)</span>
<span class="term-fg32">+			assert.Equal(t, test.extraData, g.ExtraData)</span>
<span class="term-fg32">+			assert.Equal(t, big.NewInt(0x1), g.Difficulty)</span>
<span class="term-fg32">+			assert.Equal(t, uint64(0x5f5e100), g.GasLimit)</span>
<span class="term-fg32">+			assert.Equal(t, common.BigToHash(common.Big0), g.Mixhash)</span>
<span class="term-fg32">+			assert.Equal(t, common.BigToAddress(common.Big0), g.Coinbase)</span>
<span class="term-fg32">+			assert.Contains(t, g.Alloc, test.addr)</span>
<span class="term-fg32">+			assert.Equal(t, hexutil.MustDecodeBig(&quot;0x6765c793fa10079d0000000&quot;), g.Alloc[test.addr].Balance)</span>
<span class="term-fg32">+			assert.Equal(t, uint64(0), g.Number)</span>
<span class="term-fg32">+			assert.Equal(t, uint64(0), g.GasUsed)</span>
<span class="term-fg32">+			assert.Equal(t, common.BigToHash(common.Big0), g.ParentHash)</span>
<span class="term-fg32">+			var (</span>
<span class="term-fg32">+				bigNil  *big.Int</span>
<span class="term-fg32">+				uintNil *uint64</span>
<span class="term-fg32">+			)</span>
<span class="term-fg32">+			assert.Equal(t, bigNil, g.BaseFee)</span>
<span class="term-fg32">+			assert.Equal(t, uintNil, g.ExcessBlobGas)</span>
<span class="term-fg32">+			assert.Equal(t, uintNil, g.BlobGasUsed)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+			&#47;&#47; Make sure that genesis json matches settings.go</span>
<span class="term-fg32">+			assert.Equal(t, test.cancun.Unix(), int64(*g.Config.CancunTime))</span>
<span class="term-fg32">+			assert.Equal(t, test.prevrandao.Unix(), int64(*g.Config.PrevrandaoTime))</span>
<span class="term-fg32">+			assert.Equal(t, test.shanghai.Unix(), int64(*g.Config.ShanghaiTime))</span>
<span class="term-fg32">+		})</span>
<span class="term-fg32">+		t.Run(test.name+&quot;config&quot;, func(t *testing.T) {</span>
<span class="term-fg32">+			c := g.Config</span>
<span class="term-fg32">+			assert.True(t, c.IsReorgBlocked)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+			&#47;&#47; NOTE: this test ensures that our nodes are configured to use the correct fork timetsamp!</span>
<span class="term-fg32">+			&#47;&#47; Existence</span>
<span class="term-fg32">+			assert.NotNil(t, c.PrevrandaoTime)</span>
<span class="term-fg32">+			assert.NotNil(t, c.ShanghaiTime)</span>
<span class="term-fg32">+			&#47;&#47; Values against human readable ones</span>
<span class="term-fg32">+			assert.Equal(t, test.prevrandao.Unix(), int64(*c.PrevrandaoTime))</span>
<span class="term-fg32">+			assert.Equal(t, test.shanghai.Unix(), int64(*c.ShanghaiTime))</span>
<span class="term-fg32">+			&#47;&#47; General network config</span>
<span class="term-fg32">+			assert.True(t, c.IsValidImmutableZKEVM(), &quot;Expected to be immutable zkevm&quot;)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+			now := uint64(time.Now().Unix())</span>
<span class="term-fg32">+			&#47;&#47; Prevrandao fork</span>
<span class="term-fg32">+			assert.True(t, c.IsImmutableZKEVMPrevrandao(now), test.prevrandao.IsEnabledAt(int64(now)))</span>
<span class="term-fg32">+			&#47;&#47; Shanghai fork</span>
<span class="term-fg32">+			assert.Equal(t, c.IsShanghai(common.Big0, now), test.shanghai.IsEnabledAt(int64(now)))</span>
<span class="term-fg32">+			&#47;&#47; Cancun fork</span>
<span class="term-fg32">+			assert.Equal(t, c.IsCancun(common.Big0, now), test.cancun.IsEnabledAt(int64(now)))</span>
<span class="term-fg32">+			&#47;&#47; Check network IDs</span>
<span class="term-fg32">+			network, err := settings.NewNetwork(test.name)</span>
<span class="term-fg32">+			assert.NoError(t, err)</span>
<span class="term-fg32">+			assert.Equal(t, network.ID(), int(c.ChainID.Uint64()),</span>
<span class="term-fg32">+				&quot;Expected network ID (%d) to match genesis chain ID (%d)&quot;, network.ID(), c.ChainID.Uint64())</span>
<span class="term-fg32">+		})</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutableTestCheckCompatible(t *testing.T) {</span>
<span class="term-fg32">+	var tests = []struct {</span>
<span class="term-fg32">+		name                string</span>
<span class="term-fg32">+		network             string</span>
<span class="term-fg32">+		prevrandaoTimestamp *big.Int</span>
<span class="term-fg32">+		shanghaTimestamp    *big.Int</span>
<span class="term-fg32">+		cancunTimestamp     *big.Int</span>
<span class="term-fg32">+		mergeNetSplitBlock  *big.Int</span>
<span class="term-fg32">+	}{</span>
<span class="term-fg32">+		&#47;&#47; Defaults</span>
<span class="term-fg32">+		{&quot;&quot;, &quot;devnet&quot;, nil, nil, nil, nil}, {&quot;&quot;, &quot;testnet&quot;, nil, nil, nil, nil}, {&quot;&quot;, &quot;mainnet&quot;, nil, nil, nil, nil},</span>
<span class="term-fg32">+		&#47;&#47; Non-defaults</span>
<span class="term-fg32">+		{&quot;devnet shanghai and cancun before merge&quot;, &quot;devnet&quot;, big.NewInt(0), big.NewInt(0), big.NewInt(0), big.NewInt(10000)},</span>
<span class="term-fg32">+		&#47;&#47; Actual</span>
<span class="term-fg32">+		{&quot;devnet actual&quot;, &quot;devnet&quot;,</span>
<span class="term-fg32">+			big.NewInt(settings.DevnetPrevrandaoFork.Unix()), big.NewInt(settings.DevnetShanghaiFork.Unix()), big.NewInt(settings.DevnetCancunFork.Unix()), big.NewInt(10000)},</span>
<span class="term-fg32">+		{&quot;testnet actual&quot;, &quot;testnet&quot;,</span>
<span class="term-fg32">+			big.NewInt(settings.TestnetPrevrandaoFork.Unix()), big.NewInt(settings.TestnetShanghaiFork.Unix()), big.NewInt(settings.TestnetCancunFork.Unix()), big.NewInt(10000)},</span>
<span class="term-fg32">+		{&quot;testnet actual&quot;, &quot;mainnet&quot;,</span>
<span class="term-fg32">+			big.NewInt(settings.MainnetPrevrandaoFork.Unix()), big.NewInt(settings.MainnetShanghaiFork.Unix()), big.NewInt(settings.MainnetCancunFork.Unix()), big.NewInt(10000)},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	for _, test := range tests {</span>
<span class="term-fg32">+		name := test.name</span>
<span class="term-fg32">+		if name == &quot;&quot; {</span>
<span class="term-fg32">+			name = test.network</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		t.Run(name, func(t *testing.T) {</span>
<span class="term-fg32">+			var genesis Genesis</span>
<span class="term-fg32">+			genesisFilepath := filepath.Join(&quot;..&quot;, &quot;cmd&quot;, &quot;geth&quot;, &quot;immutable&quot;, &quot;settings&quot;, &quot;genesis&quot;, test.network+&quot;.json&quot;)</span>
<span class="term-fg32">+			err := common.LoadJSON(genesisFilepath, &amp;genesis)</span>
<span class="term-fg32">+			if err != nil {</span>
<span class="term-fg32">+				t.Fatalf(&quot;Failed to load genesis file: %v&quot;, err)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			if test.shanghaTimestamp != nil {</span>
<span class="term-fg32">+				ts := test.shanghaTimestamp.Uint64()</span>
<span class="term-fg32">+				genesis.Config.ShanghaiTime = &amp;ts</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			if test.mergeNetSplitBlock != nil {</span>
<span class="term-fg32">+				genesis.Config.MergeNetsplitBlock = test.mergeNetSplitBlock</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			if genesis.Config.CheckConfigForkOrder(); err != nil {</span>
<span class="term-fg32">+				t.Fatalf(&quot;Failed to check config order: %v&quot;, err)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		})</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-18655a58323736b41751bdae" role="button"
                       aria-expanded="false" aria-controls="id-18655a58323736b41751bdae">
                        <code>core/txpool/immutable/accesscontrol/contract_creation_controller_test.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/core/txpool/immutable/accesscontrol/contract_creation_controller_test.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+105</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-18655a58323736b41751bdae"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;txpool&#47;immutable&#47;accesscontrol&#47;contract_creation_controller_test.go immutable-geth&#47;core&#47;txpool&#47;immutable&#47;accesscontrol&#47;contract_creation_controller_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..9c86dea048499c37445ecef00cf54c2dac713470</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;core&#47;txpool&#47;immutable&#47;accesscontrol&#47;contract_creation_controller_test.go</span>
<span class="term-fg36">@@ -0,0 +1,105 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package accesscontrol</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;crypto&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutableAccessControl_ContractCreationController_IsAllowed(t *testing.T) {</span>
<span class="term-fg32">+	key, _ := crypto.GenerateKey()</span>
<span class="term-fg32">+	tests := []struct {</span>
<span class="term-fg32">+		name            string</span>
<span class="term-fg32">+		providers       map[string]AddressProvider</span>
<span class="term-fg32">+		addressToCheck  common.Address</span>
<span class="term-fg32">+		tx              *types.Transaction</span>
<span class="term-fg32">+		isAnAllowList   bool</span>
<span class="term-fg32">+		expectedAllowed bool</span>
<span class="term-fg32">+	}{</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name:          &quot;Address is in block list and tx is of contract creation&quot;,</span>
<span class="term-fg32">+			isAnAllowList: false,</span>
<span class="term-fg32">+			providers: map[string]AddressProvider{</span>
<span class="term-fg32">+				&quot;list&quot;: &amp;MockAddressProvider{</span>
<span class="term-fg32">+					addresses: map[common.Address]struct{}{</span>
<span class="term-fg32">+						common.HexToAddress(&quot;0x1234567890123456789012345678901234567890&quot;): {},</span>
<span class="term-fg32">+					},</span>
<span class="term-fg32">+				},</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			tx:              contractCreation(1234, 123, key),</span>
<span class="term-fg32">+			addressToCheck:  common.HexToAddress(&quot;0x1234567890123456789012345678901234567890&quot;),</span>
<span class="term-fg32">+			expectedAllowed: false,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name:          &quot;Address is in block list and tx is not of contract creation&quot;,</span>
<span class="term-fg32">+			isAnAllowList: false,</span>
<span class="term-fg32">+			providers: map[string]AddressProvider{</span>
<span class="term-fg32">+				&quot;list&quot;: &amp;MockAddressProvider{</span>
<span class="term-fg32">+					addresses: map[common.Address]struct{}{</span>
<span class="term-fg32">+						common.HexToAddress(&quot;0x1234567890123456789012345678901234567890&quot;): {},</span>
<span class="term-fg32">+					},</span>
<span class="term-fg32">+				},</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			tx:              transaction(1234, 123, key),</span>
<span class="term-fg32">+			addressToCheck:  common.HexToAddress(&quot;0x1234567890123456789012345678901234567890&quot;),</span>
<span class="term-fg32">+			expectedAllowed: true,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name:          &quot;Empty blocklist but tx is of contract creation&quot;,</span>
<span class="term-fg32">+			isAnAllowList: false,</span>
<span class="term-fg32">+			providers: map[string]AddressProvider{</span>
<span class="term-fg32">+				&quot;list&quot;: &amp;MockAddressProvider{</span>
<span class="term-fg32">+					addresses: map[common.Address]struct{}{},</span>
<span class="term-fg32">+				},</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			tx:              contractCreation(1234, 123, key),</span>
<span class="term-fg32">+			addressToCheck:  common.HexToAddress(&quot;0x11111111111111111111111111&quot;),</span>
<span class="term-fg32">+			expectedAllowed: true,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name:          &quot;Nil blocklist sets but tx is of contract creation&quot;,</span>
<span class="term-fg32">+			isAnAllowList: false,</span>
<span class="term-fg32">+			providers: map[string]AddressProvider{</span>
<span class="term-fg32">+				&quot;list&quot;: &amp;MockAddressProvider{</span>
<span class="term-fg32">+					addresses: nil,</span>
<span class="term-fg32">+				},</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			tx:              contractCreation(1234, 123, key),</span>
<span class="term-fg32">+			addressToCheck:  common.HexToAddress(&quot;0x11111111111111111111111111&quot;),</span>
<span class="term-fg32">+			expectedAllowed: true,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	for _, test := range tests {</span>
<span class="term-fg32">+		t.Run(test.name, func(t *testing.T) {</span>
<span class="term-fg32">+			controller := &amp;ContractCreation{</span>
<span class="term-fg32">+				providers:     test.providers,</span>
<span class="term-fg32">+				isAnAllowList: test.isAnAllowList,</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+			allowed := controller.IsAllowed(test.addressToCheck, test.tx)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+			if allowed != test.expectedAllowed {</span>
<span class="term-fg32">+				t.Errorf(&quot;Expected allowed=%t, got allowed=%t&quot;, test.expectedAllowed, allowed)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		})</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-75c5f543ee84d806921b6eae" role="button"
                       aria-expanded="false" aria-controls="id-75c5f543ee84d806921b6eae">
                        <code>core/txpool/immutable/accesscontrol/controller_test.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/core/txpool/immutable/accesscontrol/controller_test.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+150</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-75c5f543ee84d806921b6eae"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;txpool&#47;immutable&#47;accesscontrol&#47;controller_test.go immutable-geth&#47;core&#47;txpool&#47;immutable&#47;accesscontrol&#47;controller_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..6840d5f55d44e708f1894e9bbaa5898f3eb13932</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;core&#47;txpool&#47;immutable&#47;accesscontrol&#47;controller_test.go</span>
<span class="term-fg36">@@ -0,0 +1,150 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package accesscontrol</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;crypto&#47;ecdsa&quot;</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;crypto&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; MockAddressProvider is a mock implementation of AddressProvider for testing.</span>
<span class="term-fg32">+type MockAddressProvider struct {</span>
<span class="term-fg32">+	addresses map[common.Address]struct{}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (m *MockAddressProvider) Provide() map[common.Address]struct{} {</span>
<span class="term-fg32">+	return m.addresses</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func contractCreation(nonce uint64, gaslimit uint64, key *ecdsa.PrivateKey) *types.Transaction {</span>
<span class="term-fg32">+	tx, _ := types.SignTx(types.NewContractCreation(nonce, big.NewInt(0), gaslimit, big.NewInt(1), nil), types.NewEIP155Signer(big.NewInt(1337)), key)</span>
<span class="term-fg32">+	return tx</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func transaction(nonce uint64, gaslimit uint64, key *ecdsa.PrivateKey) *types.Transaction {</span>
<span class="term-fg32">+	return pricedTransaction(nonce, gaslimit, big.NewInt(1), key)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func pricedTransaction(nonce uint64, gaslimit uint64, gasprice *big.Int, key *ecdsa.PrivateKey) *types.Transaction {</span>
<span class="term-fg32">+	tx, _ := types.SignTx(types.NewTransaction(nonce, common.Address{}, big.NewInt(100), gaslimit, gasprice, nil), types.NewEIP155Signer(big.NewInt(1337)), key)</span>
<span class="term-fg32">+	return tx</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutableAccessControl_Controller_IsAllowed(t *testing.T) {</span>
<span class="term-fg32">+	tests := []struct {</span>
<span class="term-fg32">+		name            string</span>
<span class="term-fg32">+		providers       map[string]AddressProvider</span>
<span class="term-fg32">+		addressToCheck  common.Address</span>
<span class="term-fg32">+		isAnAllowList   bool</span>
<span class="term-fg32">+		expectedAllowed bool</span>
<span class="term-fg32">+	}{</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name:          &quot;AddressInBlockedAddresses&quot;,</span>
<span class="term-fg32">+			isAnAllowList: false,</span>
<span class="term-fg32">+			providers: map[string]AddressProvider{</span>
<span class="term-fg32">+				&quot;list&quot;: &amp;MockAddressProvider{</span>
<span class="term-fg32">+					addresses: map[common.Address]struct{}{</span>
<span class="term-fg32">+						common.HexToAddress(&quot;0x1234567890123456789012345678901234567890&quot;): {},</span>
<span class="term-fg32">+					},</span>
<span class="term-fg32">+				},</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			addressToCheck:  common.HexToAddress(&quot;0x1234567890123456789012345678901234567890&quot;),</span>
<span class="term-fg32">+			expectedAllowed: false,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name:          &quot;AddressNotInBlockedAddresses&quot;,</span>
<span class="term-fg32">+			isAnAllowList: false,</span>
<span class="term-fg32">+			providers: map[string]AddressProvider{</span>
<span class="term-fg32">+				&quot;list&quot;: &amp;MockAddressProvider{</span>
<span class="term-fg32">+					addresses: map[common.Address]struct{}{},</span>
<span class="term-fg32">+				},</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			addressToCheck:  common.HexToAddress(&quot;0xabcdefabcdefabcdefabcdefabcdefabcdefabcdefab&quot;),</span>
<span class="term-fg32">+			expectedAllowed: true,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name:          &quot;AddressInAllowedAddresses&quot;,</span>
<span class="term-fg32">+			isAnAllowList: true,</span>
<span class="term-fg32">+			providers: map[string]AddressProvider{</span>
<span class="term-fg32">+				&quot;list&quot;: &amp;MockAddressProvider{</span>
<span class="term-fg32">+					addresses: map[common.Address]struct{}{</span>
<span class="term-fg32">+						common.HexToAddress(&quot;0x1234567890123456789012345678901234567890&quot;): {},</span>
<span class="term-fg32">+					},</span>
<span class="term-fg32">+				},</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			addressToCheck:  common.HexToAddress(&quot;0x1234567890123456789012345678901234567890&quot;),</span>
<span class="term-fg32">+			expectedAllowed: true,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name:          &quot;AddressNotInAllowedAddresses&quot;,</span>
<span class="term-fg32">+			isAnAllowList: true,</span>
<span class="term-fg32">+			providers: map[string]AddressProvider{</span>
<span class="term-fg32">+				&quot;list&quot;: &amp;MockAddressProvider{</span>
<span class="term-fg32">+					addresses: map[common.Address]struct{}{</span>
<span class="term-fg32">+						common.HexToAddress(&quot;0x1234567890123456789012345678901234567890&quot;): {},</span>
<span class="term-fg32">+					},</span>
<span class="term-fg32">+				},</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			addressToCheck:  common.HexToAddress(&quot;0x11111111111111111111111111&quot;),</span>
<span class="term-fg32">+			expectedAllowed: false,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name:          &quot;EmptyAddresses&quot;,</span>
<span class="term-fg32">+			isAnAllowList: false,</span>
<span class="term-fg32">+			providers: map[string]AddressProvider{</span>
<span class="term-fg32">+				&quot;list&quot;: &amp;MockAddressProvider{</span>
<span class="term-fg32">+					addresses: map[common.Address]struct{}{},</span>
<span class="term-fg32">+				},</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			addressToCheck:  common.HexToAddress(&quot;0x11111111111111111111111111&quot;),</span>
<span class="term-fg32">+			expectedAllowed: true,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name:          &quot;NilAddresses&quot;,</span>
<span class="term-fg32">+			isAnAllowList: false,</span>
<span class="term-fg32">+			providers: map[string]AddressProvider{</span>
<span class="term-fg32">+				&quot;list&quot;: &amp;MockAddressProvider{</span>
<span class="term-fg32">+					addresses: nil,</span>
<span class="term-fg32">+				},</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			addressToCheck:  common.HexToAddress(&quot;0x11111111111111111111111111&quot;),</span>
<span class="term-fg32">+			expectedAllowed: true,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	for _, test := range tests {</span>
<span class="term-fg32">+		t.Run(test.name, func(t *testing.T) {</span>
<span class="term-fg32">+			controller := &amp;Controller{</span>
<span class="term-fg32">+				providers:     test.providers,</span>
<span class="term-fg32">+				isAnAllowList: test.isAnAllowList,</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+			key, _ := crypto.GenerateKey()</span>
<span class="term-fg32">+			tx := transaction(012, 1234, key)</span>
<span class="term-fg32">+			allowed := controller.IsAllowed(test.addressToCheck, tx)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+			if allowed != test.expectedAllowed {</span>
<span class="term-fg32">+				t.Errorf(&quot;Expected allowed=%t, got allowed=%t&quot;, test.expectedAllowed, allowed)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		})</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-3fe23611a35169ccf7465ae9" role="button"
                       aria-expanded="false" aria-controls="id-3fe23611a35169ccf7465ae9">
                        <code>core/txpool/immutable/accesscontrol/sdn_provider_test.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/core/txpool/immutable/accesscontrol/sdn_provider_test.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+67</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-3fe23611a35169ccf7465ae9"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;txpool&#47;immutable&#47;accesscontrol&#47;sdn_provider_test.go immutable-geth&#47;core&#47;txpool&#47;immutable&#47;accesscontrol&#47;sdn_provider_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..491e76aa7ad62e214e7c0e594a2bc50316693068</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;core&#47;txpool&#47;immutable&#47;accesscontrol&#47;sdn_provider_test.go</span>
<span class="term-fg36">@@ -0,0 +1,67 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package accesscontrol</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;stretchr&#47;testify&#47;require&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutableCSVProvider_load(t *testing.T) {</span>
<span class="term-fg32">+	tests := []struct {</span>
<span class="term-fg32">+		filePath      string</span>
<span class="term-fg32">+		expectedError bool</span>
<span class="term-fg32">+		&#47;&#47; Use string here for better readability&#47;debugging</span>
<span class="term-fg32">+		expectedAddress []string</span>
<span class="term-fg32">+	}{</span>
<span class="term-fg32">+		{&quot;testdata&#47;nonexistent.txt&quot;, true, []string{}},</span>
<span class="term-fg32">+		{&quot;testdata&#47;empty.txt&quot;, true, []string{}},</span>
<span class="term-fg32">+		{&quot;testdata&#47;gibberish.txt&quot;, true, []string{}},</span>
<span class="term-fg32">+		{&quot;testdata&#47;blocklist.txt&quot;, false, []string{</span>
<span class="term-fg32">+			common.HexToAddress(&quot;0x72a5843cc08275C8171E582972Aa4fDa8C397B2A&quot;).String(),</span>
<span class="term-fg32">+			common.HexToAddress(&quot;0x7F19720A857F834887FC9A7bC0a0fBe7Fc7f8102&quot;).String(),</span>
<span class="term-fg32">+			common.HexToAddress(&quot;0x1da5821544e25c636c1417ba96ade4cf6d2f9b5a&quot;).String(),</span>
<span class="term-fg32">+			common.HexToAddress(&quot;0x7Db418b5D567A4e0E8c59Ad71BE1FcE48f3E6107&quot;).String(),</span>
<span class="term-fg32">+		}},</span>
<span class="term-fg32">+		{&quot;testdata&#47;newlines.txt&quot;, false, []string{</span>
<span class="term-fg32">+			common.HexToAddress(&quot;0x72a5843cc08275C8171E582972Aa4fDa8C397B2A&quot;).String(),</span>
<span class="term-fg32">+			common.HexToAddress(&quot;0x7F19720A857F834887FC9A7bC0a0fBe7Fc7f8102&quot;).String(),</span>
<span class="term-fg32">+			common.HexToAddress(&quot;0x1da5821544e25c636c1417ba96ade4cf6d2f9b5a&quot;).String(),</span>
<span class="term-fg32">+			common.HexToAddress(&quot;0x7Db418b5D567A4e0E8c59Ad71BE1FcE48f3E6107&quot;).String(),</span>
<span class="term-fg32">+		}},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	for _, test := range tests {</span>
<span class="term-fg32">+		t.Run(test.filePath, func(t *testing.T) {</span>
<span class="term-fg32">+			sdnProvider, err := newCSVProvider(test.filePath)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+			if test.expectedError &amp;&amp; err == nil {</span>
<span class="term-fg32">+				t.Errorf(&quot;Expected an error, but got none&quot;)</span>
<span class="term-fg32">+			} else if !test.expectedError {</span>
<span class="term-fg32">+				require.NoError(t, err, &quot;Expected no error, but got an error&quot;)</span>
<span class="term-fg32">+				&#47;&#47; Check if the loaded addresses match the expected addresses</span>
<span class="term-fg32">+				loadedAddresses := make([]string, 0, len(sdnProvider.addresses))</span>
<span class="term-fg32">+				for addr := range sdnProvider.addresses {</span>
<span class="term-fg32">+					loadedAddresses = append(loadedAddresses, addr.String())</span>
<span class="term-fg32">+				}</span>
<span class="term-fg32">+				require.ElementsMatch(t, test.expectedAddress, loadedAddresses, &quot;Loaded addresses do not match expected addresses&quot;)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		})</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-ccc449d5a585761322629e29" role="button"
                       aria-expanded="false" aria-controls="id-ccc449d5a585761322629e29">
                        <code>core/txpool/immutable/accesscontrol/testdata/blocklist.txt</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/core/txpool/immutable/accesscontrol/testdata/blocklist.txt" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+1</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-ccc449d5a585761322629e29"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;txpool&#47;immutable&#47;accesscontrol&#47;testdata&#47;blocklist.txt immutable-geth&#47;core&#47;txpool&#47;immutable&#47;accesscontrol&#47;testdata&#47;blocklist.txt</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..482ce1ccbde2edf59ba577a9026ac7ad30697465</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;core&#47;txpool&#47;immutable&#47;accesscontrol&#47;testdata&#47;blocklist.txt</span>
<span class="term-fg36">@@ -0,0 +1 @@</span>
<span class="term-fg32">+0x72a5843cc08275C8171E582972Aa4fDa8C397B2A, 0x7F19720A857F834887FC9A7bC0a0fBe7Fc7f8102, 0x1da5821544e25c636c1417ba96ade4cf6d2f9b5a, 0x7Db418b5D567A4e0E8c59Ad71BE1FcE48f3E6107</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-4607e0981f8969e9bb7ebbe6" role="button"
                       aria-expanded="false" aria-controls="id-4607e0981f8969e9bb7ebbe6">
                        <code>core/txpool/immutable/accesscontrol/testdata/empty.txt</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/core/txpool/immutable/accesscontrol/testdata/empty.txt" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <span class="text-secondary">(binary file)</span>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-4607e0981f8969e9bb7ebbe6"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;txpool&#47;immutable&#47;accesscontrol&#47;testdata&#47;empty.txt immutable-geth&#47;core&#47;txpool&#47;immutable&#47;accesscontrol&#47;testdata&#47;empty.txt</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..e69de29bb2d1d6434b8b29ae775ad8c2e48c5391</span>
<span class="term-fg1">Binary files &#47;dev&#47;null and immutable-geth&#47;core&#47;txpool&#47;immutable&#47;accesscontrol&#47;testdata&#47;empty.txt differ</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-bf9ceecfc941d3642f9cc27b" role="button"
                       aria-expanded="false" aria-controls="id-bf9ceecfc941d3642f9cc27b">
                        <code>core/txpool/immutable/accesscontrol/testdata/gibberish.txt</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/core/txpool/immutable/accesscontrol/testdata/gibberish.txt" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+1</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-bf9ceecfc941d3642f9cc27b"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;txpool&#47;immutable&#47;accesscontrol&#47;testdata&#47;gibberish.txt immutable-geth&#47;core&#47;txpool&#47;immutable&#47;accesscontrol&#47;testdata&#47;gibberish.txt</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..92e9edc911f9ca0d09afabec830edf23a30a7044</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;core&#47;txpool&#47;immutable&#47;accesscontrol&#47;testdata&#47;gibberish.txt</span>
<span class="term-fg36">@@ -0,0 +1 @@</span>
<span class="term-fg32">+Bob</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-9ca9e84474cf169bfb00c35e" role="button"
                       aria-expanded="false" aria-controls="id-9ca9e84474cf169bfb00c35e">
                        <code>core/txpool/immutable/accesscontrol/testdata/newlines.txt</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/core/txpool/immutable/accesscontrol/testdata/newlines.txt" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+5</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-9ca9e84474cf169bfb00c35e"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;txpool&#47;immutable&#47;accesscontrol&#47;testdata&#47;newlines.txt immutable-geth&#47;core&#47;txpool&#47;immutable&#47;accesscontrol&#47;testdata&#47;newlines.txt</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..eb742a97ab29d4232d7f5e0b19cb3dabbcf7332e</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;core&#47;txpool&#47;immutable&#47;accesscontrol&#47;testdata&#47;newlines.txt</span>
<span class="term-fg36">@@ -0,0 +1,5 @@</span>
<span class="term-fg32">+0x72a5843cc08275C8171E582972Aa4fDa8C397B2A,     </span>
<span class="term-fg32">+0x7F19720A857F834887FC9A7bC0a0fBe7Fc7f8102,  </span>
<span class="term-fg32">+0x1da5821544e25c636c1417ba96ade4cf6d2f9b5a,  </span>
<span class="term-fg32">+0x7Db418b5D567A4e0E8c59Ad71BE1FcE48f3E6107,</span>
<span class="term-fg32">+</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-c24c46ed7306ab9467762eee" role="button"
                       aria-expanded="false" aria-controls="id-c24c46ed7306ab9467762eee">
                        <code>core/txpool/legacypool/immmutable_legacypool_test.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/core/txpool/legacypool/immmutable_legacypool_test.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+385</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-c24c46ed7306ab9467762eee"><span class="term-fg1">diff --git go-ethereum&#47;core&#47;txpool&#47;legacypool&#47;immmutable_legacypool_test.go immutable-geth&#47;core&#47;txpool&#47;legacypool&#47;immmutable_legacypool_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..458338819a0a44be05fa02d48f52df8974a7b1ab</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;core&#47;txpool&#47;legacypool&#47;immmutable_legacypool_test.go</span>
<span class="term-fg36">@@ -0,0 +1,385 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package legacypool</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;crypto&#47;ecdsa&quot;</span>
<span class="term-fg32">+	&quot;errors&quot;</span>
<span class="term-fg32">+	&quot;fmt&quot;</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+	&quot;os&quot;</span>
<span class="term-fg32">+	&quot;path&#47;filepath&quot;</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;rawdb&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;state&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;txpool&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;crypto&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;event&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;params&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+type MockAccessController struct {</span>
<span class="term-fg32">+	isBlocklist bool</span>
<span class="term-fg32">+	isAllowed   bool</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (m *MockAccessController) IsBlocklist() bool {</span>
<span class="term-fg32">+	return m.isBlocklist</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (m *MockAccessController) IsAllowed(from common.Address, tx *types.Transaction) bool {</span>
<span class="term-fg32">+	return m.isAllowed</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func contractCreation(nonce uint64, gaslimit uint64, key *ecdsa.PrivateKey) *types.Transaction {</span>
<span class="term-fg32">+	tx, _ := types.SignTx(types.NewContractCreation(nonce, big.NewInt(0), gaslimit, big.NewInt(1), nil), types.HomesteadSigner{}, key)</span>
<span class="term-fg32">+	return tx</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func pricedTransactionTo(nonce uint64, gaslimit uint64, gasprice *big.Int, key *ecdsa.PrivateKey, to common.Address) *types.Transaction {</span>
<span class="term-fg32">+	tx, _ := types.SignTx(types.NewTransaction(nonce, to, big.NewInt(100), gaslimit, gasprice, nil), types.HomesteadSigner{}, key)</span>
<span class="term-fg32">+	return tx</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutableFilterWithError(t *testing.T) {</span>
<span class="term-fg32">+	signer := types.NewEIP155Signer(big.NewInt(1337))</span>
<span class="term-fg32">+	testCases := []struct {</span>
<span class="term-fg32">+		description string</span>
<span class="term-fg32">+		pool        *LegacyPool</span>
<span class="term-fg32">+		expectedErr error</span>
<span class="term-fg32">+	}{</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			description: &quot;Blocked by Blocklist&quot;,</span>
<span class="term-fg32">+			pool: &amp;LegacyPool{</span>
<span class="term-fg32">+				accessControllers: []txpool.AccessController{</span>
<span class="term-fg32">+					&amp;MockAccessController{isBlocklist: true, isAllowed: false},</span>
<span class="term-fg32">+					&amp;MockAccessController{isBlocklist: true, isAllowed: false},</span>
<span class="term-fg32">+				},</span>
<span class="term-fg32">+				signer: signer,</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			expectedErr: txpool.ErrTxIsUnauthorized,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			description: &quot;No access controllers, so it should pass&quot;,</span>
<span class="term-fg32">+			pool: &amp;LegacyPool{</span>
<span class="term-fg32">+				accessControllers: []txpool.AccessController{},</span>
<span class="term-fg32">+				signer:            signer,</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			expectedErr: nil,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			description: &quot;An access controller with only a single block list that allows&quot;,</span>
<span class="term-fg32">+			pool: &amp;LegacyPool{</span>
<span class="term-fg32">+				accessControllers: []txpool.AccessController{</span>
<span class="term-fg32">+					&amp;MockAccessController{isBlocklist: true, isAllowed: true},</span>
<span class="term-fg32">+				},</span>
<span class="term-fg32">+				signer: signer,</span>
<span class="term-fg32">+			},</span>
<span class="term-fg32">+			expectedErr: nil,</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	key, _ := crypto.GenerateKey()</span>
<span class="term-fg32">+	to := common.HexToAddress(&quot;0x1111&quot;)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	tx, err := types.SignTx(types.NewTransaction(uint64(10), to, big.NewInt(1000), params.TxGas, big.NewInt(params.InitialBaseFee), nil), signer, key)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Errorf(&quot;Couldn&#39;t create test transaction: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	for _, tc := range testCases {</span>
<span class="term-fg32">+		t.Run(tc.description, func(t *testing.T) {</span>
<span class="term-fg32">+			err := tc.pool.FilterWithError(tx)</span>
<span class="term-fg32">+			if err != tc.expectedErr {</span>
<span class="term-fg32">+				t.Errorf(&quot;Expected error: %v, got: %v&quot;, tc.expectedErr, err)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		})</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+type filterWithErrorTest struct {</span>
<span class="term-fg32">+	name          string</span>
<span class="term-fg32">+	expectedError error</span>
<span class="term-fg32">+	inputTx       *types.Transaction</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutableFilterWithErrorBlocklist(t *testing.T) {</span>
<span class="term-fg32">+	&#47;&#47; Fixed keys</span>
<span class="term-fg32">+	sdnKey, _ := crypto.GenerateKey()</span>
<span class="term-fg32">+	sdnAddress := crypto.PubkeyToAddress(sdnKey.PublicKey)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	randomKey, _ := crypto.GenerateKey()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	tests := []filterWithErrorTest{</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name:          &quot;BlockedTxBecauseSenderAreInBlocklist&quot;,</span>
<span class="term-fg32">+			expectedError: txpool.ErrTxIsUnauthorized,</span>
<span class="term-fg32">+			inputTx:       pricedDataTransaction(1, 100000, big.NewInt(1), sdnKey, 50),</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name:          &quot;BlockedTxBecauseReceiverInBlocklist&quot;,</span>
<span class="term-fg32">+			expectedError: txpool.ErrTxIsUnauthorized,</span>
<span class="term-fg32">+			inputTx:       pricedTransactionTo(1, 100000, big.NewInt(1), randomKey, sdnAddress),</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name:          &quot;NormalTransaction&quot;,</span>
<span class="term-fg32">+			expectedError: nil,</span>
<span class="term-fg32">+			inputTx:       pricedDataTransaction(1, 100000, big.NewInt(1), randomKey, 50),</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Setup test</span>
<span class="term-fg32">+	statedb, _ := state.New(types.EmptyRootHash, state.NewDatabase(rawdb.NewMemoryDatabase()), nil)</span>
<span class="term-fg32">+	blockchain := newTestBlockChain(params.TestChainConfig, 1000000, statedb, new(event.Feed))</span>
<span class="term-fg32">+	blocklist := filepath.Join(t.TempDir(), &quot;blocklist.txt&quot;)</span>
<span class="term-fg32">+	blocklistFile, err := os.Create(blocklist)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Fatal(&quot;Failed to create temporary blocklist&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	_, err = blocklistFile.WriteString(crypto.PubkeyToAddress(sdnKey.PublicKey).Hex())</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Fatal(&quot;Failed to write to blocklist file&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	config := testTxPoolConfig</span>
<span class="term-fg32">+	config.BlockListFilePaths = []string{blocklist}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	pool := New(config, blockchain)</span>
<span class="term-fg32">+	pool.Init(config.PriceLimit, blockchain.CurrentBlock(), makeAddressReserver())</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	for _, tc := range tests {</span>
<span class="term-fg32">+		t.Run(tc.name, func(t *testing.T) {</span>
<span class="term-fg32">+			if err := pool.FilterWithError(tc.inputTx); err != tc.expectedError {</span>
<span class="term-fg32">+				t.Errorf(&quot;Test %s: expected error %v, got %v&quot;, tc.name, tc.expectedError, err)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		})</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutableACLFileWithNewLinesShouldBeBlocked(t *testing.T) {</span>
<span class="term-fg32">+	statedb, _ := state.New(types.EmptyRootHash, state.NewDatabase(rawdb.NewMemoryDatabase()), nil)</span>
<span class="term-fg32">+	blockchain := newTestBlockChain(params.TestChainConfig, 1000000, statedb, new(event.Feed))</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	key, _ := crypto.GenerateKey()</span>
<span class="term-fg32">+	key2, _ := crypto.GenerateKey()</span>
<span class="term-fg32">+	key3, _ := crypto.GenerateKey()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	keys := []*ecdsa.PrivateKey{key, key2, key3}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	addresses := []any{</span>
<span class="term-fg32">+		crypto.PubkeyToAddress(key.PublicKey).Hex(),</span>
<span class="term-fg32">+		crypto.PubkeyToAddress(key2.PublicKey).Hex(),</span>
<span class="term-fg32">+		crypto.PubkeyToAddress(key3.PublicKey).Hex(),</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	blocklist := filepath.Join(t.TempDir(), &quot;blocklist.txt&quot;)</span>
<span class="term-fg32">+	file, err := os.Create(blocklist)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Fatal(&quot;Failed to create temporary file&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	_, err = fmt.Fprintf(file, &quot;%s,\n%s,\n%s&quot;, addresses...)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Fatal(&quot;Failed to write to file&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	config := testTxPoolConfig</span>
<span class="term-fg32">+	config.BlockListFilePaths = []string{blocklist}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	pool := New(config, blockchain)</span>
<span class="term-fg32">+	pool.Init(config.PriceLimit, blockchain.CurrentBlock(), makeAddressReserver())</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	for _, key := range keys {</span>
<span class="term-fg32">+		tx := contractCreation(1, 100000, key)</span>
<span class="term-fg32">+		if err := pool.FilterWithError(tx); err != txpool.ErrTxIsUnauthorized {</span>
<span class="term-fg32">+			t.Fatalf(&quot;Transaction was not blocked: %v&quot;, err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutableFilterWithErrorBlockedTransaction(t *testing.T) {</span>
<span class="term-fg32">+	statedb, _ := state.New(types.EmptyRootHash, state.NewDatabase(rawdb.NewMemoryDatabase()), nil)</span>
<span class="term-fg32">+	blockchain := newTestBlockChain(params.TestChainConfig, 1000000, statedb, new(event.Feed))</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	key, _ := crypto.GenerateKey()</span>
<span class="term-fg32">+	address := crypto.PubkeyToAddress(key.PublicKey)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	blocklist := filepath.Join(t.TempDir(), &quot;blocklist.txt&quot;)</span>
<span class="term-fg32">+	file, err := os.Create(blocklist)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Fatal(&quot;Failed to create temporary file&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	_, err = file.WriteString(address.Hex())</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Fatal(&quot;Failed to write to file&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	config := testTxPoolConfig</span>
<span class="term-fg32">+	config.BlockListFilePaths = []string{blocklist}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	pool := New(config, blockchain)</span>
<span class="term-fg32">+	pool.Init(config.PriceLimit, blockchain.CurrentBlock(), makeAddressReserver())</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	tx := contractCreation(1, 100000, key)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if err := pool.FilterWithError(tx); err != txpool.ErrTxIsUnauthorized {</span>
<span class="term-fg32">+		t.Fatalf(&quot;Transaction was not blocked: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutableMinGasPriceEnforced(t *testing.T) {</span>
<span class="term-fg32">+	t.Parallel()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Create the pool to test the pricing enforcement with</span>
<span class="term-fg32">+	statedb, _ := state.New(types.EmptyRootHash, state.NewDatabase(rawdb.NewMemoryDatabase()), nil)</span>
<span class="term-fg32">+	blockchain := newTestBlockChain(eip1559Config, 10000000, statedb, new(event.Feed))</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	txPoolConfig := DefaultConfig</span>
<span class="term-fg32">+	txPoolConfig.NoLocals = true</span>
<span class="term-fg32">+	pool := New(txPoolConfig, blockchain)</span>
<span class="term-fg32">+	pool.Init(txPoolConfig.PriceLimit, blockchain.CurrentBlock(), makeAddressReserver())</span>
<span class="term-fg32">+	defer pool.Close()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	key, _ := crypto.GenerateKey()</span>
<span class="term-fg32">+	testAddBalance(pool, crypto.PubkeyToAddress(key.PublicKey), big.NewInt(1000000))</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	tx := pricedTransaction(0, 100000, big.NewInt(2), key)</span>
<span class="term-fg32">+	pool.SetGasTip(big.NewInt(tx.GasPrice().Int64() + 1))</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if err := pool.addLocal(tx); !errors.Is(err, txpool.ErrUnderpriced) {</span>
<span class="term-fg32">+		t.Fatalf(&quot;Min tip not enforced&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if err := pool.Add([]*types.Transaction{tx}, true, false)[0]; !errors.Is(err, txpool.ErrUnderpriced) {</span>
<span class="term-fg32">+		t.Fatalf(&quot;Min tip not enforced&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	tx = dynamicFeeTx(0, 100000, big.NewInt(3), big.NewInt(2), key)</span>
<span class="term-fg32">+	pool.SetGasTip(big.NewInt(tx.GasTipCap().Int64() + 1))</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if err := pool.addLocal(tx); !errors.Is(err, txpool.ErrUnderpriced) {</span>
<span class="term-fg32">+		t.Fatalf(&quot;Min tip not enforced&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if err := pool.Add([]*types.Transaction{tx}, true, false)[0]; !errors.Is(err, txpool.ErrUnderpriced) {</span>
<span class="term-fg32">+		t.Fatalf(&quot;Min tip not enforced&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Make sure the tx is accepted if locals are enabled</span>
<span class="term-fg32">+	pool.config.NoLocals = false</span>
<span class="term-fg32">+	if err := pool.Add([]*types.Transaction{tx}, true, false)[0]; err != nil {</span>
<span class="term-fg32">+		t.Fatalf(&quot;Min tip enforced with locals enabled, error: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutableRebroadcasting(t *testing.T) {</span>
<span class="term-fg32">+	t.Parallel()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Create a test account and fund it</span>
<span class="term-fg32">+	pool, key := setupPool()</span>
<span class="term-fg32">+	defer pool.Close()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	account := crypto.PubkeyToAddress(key.PublicKey)</span>
<span class="term-fg32">+	testAddBalance(pool, account, big.NewInt(1000000))</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Keep track of transaction events to ensure all executables get announced</span>
<span class="term-fg32">+	events := make(chan core.NewTxsEvent, testTxPoolConfig.AccountQueue+5)</span>
<span class="term-fg32">+	sub := pool.txFeed.Subscribe(events)</span>
<span class="term-fg32">+	defer sub.Unsubscribe()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Create 2 pending transactions and 1 queued transaction. pending txs should be broadcast</span>
<span class="term-fg32">+	pool.addRemotesSync([]*types.Transaction{</span>
<span class="term-fg32">+		transaction(0, 100000, key),</span>
<span class="term-fg32">+		transaction(1, 100000, key),</span>
<span class="term-fg32">+		transaction(4, 100000, key),</span>
<span class="term-fg32">+	})</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	pending, queued := pool.Stats()</span>
<span class="term-fg32">+	if pending != 2 {</span>
<span class="term-fg32">+		t.Fatalf(&quot;pending transactions mismatched: have %d, want %d&quot;, pending, 2)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if queued != 1 {</span>
<span class="term-fg32">+		t.Fatalf(&quot;queued transactions mismatched: have %d, want %d&quot;, queued, 1)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if err := validateEvents(events, 2); err != nil {</span>
<span class="term-fg32">+		t.Fatalf(&quot;add tx event firing failed: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if err := validatePoolInternals(pool); err != nil {</span>
<span class="term-fg32">+		t.Fatalf(&quot;pool internal state corrupted: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Reset is called by txpool.go when a new block is received.</span>
<span class="term-fg32">+	&#47;&#47; We simulate &#39;a new block&#39; by calling it here</span>
<span class="term-fg32">+	pool.Reset(nil, nil)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	pending, queued = pool.Stats()</span>
<span class="term-fg32">+	if pending != 2 {</span>
<span class="term-fg32">+		t.Fatalf(&quot;pending transactions mismatched: have %d, want %d&quot;, pending, 2)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if queued != 1 {</span>
<span class="term-fg32">+		t.Fatalf(&quot;queued transactions mismatched: have %d, want %d&quot;, queued, 1)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; The pending transactions should be rebroadcast. Queued transactions should not.</span>
<span class="term-fg32">+	if err := validateEvents(events, 2); err != nil {</span>
<span class="term-fg32">+		t.Fatalf(&quot;rebroadcast event firing failed: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if err := validatePoolInternals(pool); err != nil {</span>
<span class="term-fg32">+		t.Fatalf(&quot;pool internal state corrupted: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Adding a new pending transaction should only result in the new transaction being broadcast,</span>
<span class="term-fg32">+	&#47;&#47; since there was no new block</span>
<span class="term-fg32">+	pool.addRemotesSync([]*types.Transaction{</span>
<span class="term-fg32">+		transaction(2, 100000, key),</span>
<span class="term-fg32">+	})</span>
<span class="term-fg32">+	pending, queued = pool.Stats()</span>
<span class="term-fg32">+	if pending != 3 {</span>
<span class="term-fg32">+		t.Fatalf(&quot;pending transactions mismatched: have %d, want %d&quot;, pending, 3)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if queued != 1 {</span>
<span class="term-fg32">+		t.Fatalf(&quot;queued transactions mismatched: have %d, want %d&quot;, queued, 1)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Only the new transaction should be broadcast</span>
<span class="term-fg32">+	if err := validateEvents(events, 1); err != nil {</span>
<span class="term-fg32">+		t.Fatalf(&quot;add tx event firing failed: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if err := validatePoolInternals(pool); err != nil {</span>
<span class="term-fg32">+		t.Fatalf(&quot;pool internal state corrupted: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; A new block should result in rebroadcast of all 3 pending transactions</span>
<span class="term-fg32">+	pool.Reset(nil, nil)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	pending, queued = pool.Stats()</span>
<span class="term-fg32">+	if pending != 3 {</span>
<span class="term-fg32">+		t.Fatalf(&quot;pending transactions mismatched: have %d, want %d&quot;, pending, 3)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if queued != 1 {</span>
<span class="term-fg32">+		t.Fatalf(&quot;queued transactions mismatched: have %d, want %d&quot;, queued, 1)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; The pending transactions should be rebroadcast. Queued transactions should not.</span>
<span class="term-fg32">+	if err := validateEvents(events, 3); err != nil {</span>
<span class="term-fg32">+		t.Fatalf(&quot;rebroadcast event firing failed: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if err := validatePoolInternals(pool); err != nil {</span>
<span class="term-fg32">+		t.Fatalf(&quot;pool internal state corrupted: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-dfa3bfdcb82f95ea6a52a0d0" role="button"
                       aria-expanded="false" aria-controls="id-dfa3bfdcb82f95ea6a52a0d0">
                        <code>eth/fetcher/block_fetcher_test.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/eth/fetcher/block_fetcher_test.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/eth/fetcher/block_fetcher_test.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+2</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-2</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-dfa3bfdcb82f95ea6a52a0d0"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;fetcher&#47;block_fetcher_test.go immutable-geth&#47;eth&#47;fetcher&#47;block_fetcher_test.go</span>
<span class="term-fg1">index cb7cbaf79edc86dde7b3131d4de497237ba61d69..a55e5ca880c6435ddf541b1b1c920b824805e350 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;fetcher&#47;block_fetcher_test.go</span>
<span class="term-fg1">+++ immutable-geth&#47;eth&#47;fetcher&#47;block_fetcher_test.go</span>
<span class="term-fg36">@@ -880,7 +880,7 @@</span> 			tester.fetcher.Notify(&quot;valid&quot;, hashes[len(hashes)-2-i], uint64(i+1), time.Now(), validHeaderFetcher, validBodyFetcher)
 		}
 		tester.fetcher.Notify(&quot;attacker&quot;, attack[i], 1 &#47;* don&#39;t distance drop *&#47;, time.Now(), attackerHeaderFetcher, attackerBodyFetcher)
 	}
<span class="term-fg31">-	if count := announces.Load(); count != hashLimit+maxQueueDist {</span>
<span class="term-fg32">+	if count := announces.Load(); count != hashLimit+int32(maxQueueDist) {</span>
 		t.Fatalf(&quot;queued announce count mismatch: have %d, want %d&quot;, count, hashLimit+maxQueueDist)
 	}
 	&#47;&#47; Wait for fetches to complete
<span class="term-fg36">@@ -933,7 +933,7 @@</span> 	for i := 0; i &lt; maxQueueDist-1; i++ {
 		tester.fetcher.Enqueue(&quot;valid&quot;, blocks[hashes[len(hashes)-3-i]])
 	}
 	time.Sleep(100 * time.Millisecond)
<span class="term-fg31">-	if queued := enqueued.Load(); queued != blockLimit+maxQueueDist-1 {</span>
<span class="term-fg32">+	if queued := enqueued.Load(); queued != blockLimit+int32(maxQueueDist)-1 {</span>
 		t.Fatalf(&quot;queued block count mismatch: have %d, want %d&quot;, queued, blockLimit+maxQueueDist-1)
 	}
 	&#47;&#47; Insert the missing piece (and sanity check the import)</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-51d8918498b97edf40b32973" role="button"
                       aria-expanded="false" aria-controls="id-51d8918498b97edf40b32973">
                        <code>eth/gasprice/immutable_gasprice_test.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/eth/gasprice/immutable_gasprice_test.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+242</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-51d8918498b97edf40b32973"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;gasprice&#47;immutable_gasprice_test.go immutable-geth&#47;eth&#47;gasprice&#47;immutable_gasprice_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..335a957812dcc366fef7b558036a46507ca3e4cd</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;eth&#47;gasprice&#47;immutable_gasprice_test.go</span>
<span class="term-fg36">@@ -0,0 +1,242 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package gasprice</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;context&quot;</span>
<span class="term-fg32">+	&quot;math&quot;</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;settings&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;consensus&#47;ethash&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;rawdb&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;vm&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;crypto&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;event&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;params&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;rpc&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+type testImmutableBackend struct {</span>
<span class="term-fg32">+	chain   *core.BlockChain</span>
<span class="term-fg32">+	pending bool &#47;&#47; pending block available</span>
<span class="term-fg32">+	latest  int64</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (b *testImmutableBackend) HeaderByNumber(ctx context.Context, number rpc.BlockNumber) (*types.Header, error) {</span>
<span class="term-fg32">+	if number &gt; testHead {</span>
<span class="term-fg32">+		return nil, nil</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if number == rpc.EarliestBlockNumber {</span>
<span class="term-fg32">+		number = 0</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if number == rpc.FinalizedBlockNumber {</span>
<span class="term-fg32">+		return b.chain.CurrentFinalBlock(), nil</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if number == rpc.SafeBlockNumber {</span>
<span class="term-fg32">+		return b.chain.CurrentSafeBlock(), nil</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if number == rpc.LatestBlockNumber {</span>
<span class="term-fg32">+		number = rpc.BlockNumber(b.latest)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if number == rpc.PendingBlockNumber {</span>
<span class="term-fg32">+		if b.pending {</span>
<span class="term-fg32">+			number = rpc.BlockNumber(b.latest) + 1</span>
<span class="term-fg32">+		} else {</span>
<span class="term-fg32">+			return nil, nil</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return b.chain.GetHeaderByNumber(uint64(number)), nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (b *testImmutableBackend) BlockByNumber(ctx context.Context, number rpc.BlockNumber) (*types.Block, error) {</span>
<span class="term-fg32">+	if number &gt; rpc.BlockNumber(b.latest) {</span>
<span class="term-fg32">+		return nil, nil</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if number == rpc.EarliestBlockNumber {</span>
<span class="term-fg32">+		number = 0</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if number == rpc.FinalizedBlockNumber {</span>
<span class="term-fg32">+		number = rpc.BlockNumber(b.chain.CurrentFinalBlock().Number.Uint64())</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if number == rpc.SafeBlockNumber {</span>
<span class="term-fg32">+		number = rpc.BlockNumber(b.chain.CurrentSafeBlock().Number.Uint64())</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if number == rpc.LatestBlockNumber {</span>
<span class="term-fg32">+		number = rpc.BlockNumber(b.latest)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if number == rpc.PendingBlockNumber {</span>
<span class="term-fg32">+		if b.pending {</span>
<span class="term-fg32">+			number = rpc.BlockNumber(b.latest) + 1</span>
<span class="term-fg32">+		} else {</span>
<span class="term-fg32">+			return nil, nil</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return b.chain.GetBlockByNumber(uint64(number)), nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (b *testImmutableBackend) GetReceipts(ctx context.Context, hash common.Hash) (types.Receipts, error) {</span>
<span class="term-fg32">+	return b.chain.GetReceiptsByHash(hash), nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (b *testImmutableBackend) PendingBlockAndReceipts() (*types.Block, types.Receipts) {</span>
<span class="term-fg32">+	if b.pending {</span>
<span class="term-fg32">+		block := b.chain.GetBlockByNumber(uint64(b.latest) + 1)</span>
<span class="term-fg32">+		return block, b.chain.GetReceiptsByHash(block.Hash())</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return nil, nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (b *testImmutableBackend) ChainConfig() *params.ChainConfig {</span>
<span class="term-fg32">+	return b.chain.Config()</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (b *testImmutableBackend) SubscribeChainHeadEvent(ch chan&lt;- core.ChainHeadEvent) event.Subscription {</span>
<span class="term-fg32">+	return nil</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (b *testImmutableBackend) CurrentHeader() *types.Header {</span>
<span class="term-fg32">+	return b.chain.CurrentHeader()</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (b *testImmutableBackend) GetBlockByNumber(number uint64) *types.Block {</span>
<span class="term-fg32">+	return b.chain.GetBlockByNumber(number)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func (b *testImmutableBackend) teardown() {</span>
<span class="term-fg32">+	b.chain.Stop()</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func newTestImmutableBackend(t *testing.T, pending bool, height int, head int, txns map[uint64]*types.DynamicFeeTx) *testImmutableBackend {</span>
<span class="term-fg32">+	var (</span>
<span class="term-fg32">+		key, _ = crypto.HexToECDSA(&quot;b71c71a67e1177ad4e901695e1b4b9ee17ae16c6668d313eac2f96dbcda3f291&quot;)</span>
<span class="term-fg32">+		addr   = crypto.PubkeyToAddress(key.PublicKey)</span>
<span class="term-fg32">+		config = *params.TestChainConfig &#47;&#47; needs copy because it is modified below</span>
<span class="term-fg32">+		gspec  = &amp;core.Genesis{</span>
<span class="term-fg32">+			Config:  &amp;config,</span>
<span class="term-fg32">+			Alloc:   types.GenesisAlloc{addr: {Balance: big.NewInt(math.MaxInt64)}},</span>
<span class="term-fg32">+			BaseFee: big.NewInt(49),</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	)</span>
<span class="term-fg32">+	config.ChainID = big.NewInt(settings.TestnetNetworkID)</span>
<span class="term-fg32">+	signer := types.LatestSigner(gspec.Config)</span>
<span class="term-fg32">+	londonBlock := big.NewInt(0)</span>
<span class="term-fg32">+	config.LondonBlock = londonBlock</span>
<span class="term-fg32">+	config.ArrowGlacierBlock = londonBlock</span>
<span class="term-fg32">+	config.GrayGlacierBlock = londonBlock</span>
<span class="term-fg32">+	never := uint64(100000000000000000)</span>
<span class="term-fg32">+	config.PrevrandaoTime = &amp;never</span>
<span class="term-fg32">+	config.ShanghaiTime = nil &#47;&#47; Cannot have shanghai in genesis (withdrawals header)</span>
<span class="term-fg32">+	engine := ethash.NewFaker()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	_, blocks, _ := core.GenerateChainWithGenesis(gspec, engine, height, func(i int, b *core.BlockGen) {</span>
<span class="term-fg32">+		b.SetCoinbase(common.Address{1})</span>
<span class="term-fg32">+		txdata, ok := txns[b.Number().Uint64()]</span>
<span class="term-fg32">+		if ok {</span>
<span class="term-fg32">+			b.AddTx(types.MustSignNewTx(key, signer, &amp;types.DynamicFeeTx{</span>
<span class="term-fg32">+				ChainID:   gspec.Config.ChainID,</span>
<span class="term-fg32">+				Nonce:     b.TxNonce(addr),</span>
<span class="term-fg32">+				To:        &amp;common.Address{},</span>
<span class="term-fg32">+				Gas:       30000,</span>
<span class="term-fg32">+				GasFeeCap: txdata.GasFeeCap,</span>
<span class="term-fg32">+				GasTipCap: txdata.GasTipCap,</span>
<span class="term-fg32">+				Data:      []byte{},</span>
<span class="term-fg32">+			}))</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	})</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Construct testing chain</span>
<span class="term-fg32">+	chain, err := core.NewBlockChain(rawdb.NewMemoryDatabase(), &amp;core.CacheConfig{TrieCleanNoPrefetch: true}, gspec, nil, engine, vm.Config{}, nil, nil)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Fatalf(&quot;Failed to create local chain, %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	chain.InsertChain(blocks)</span>
<span class="term-fg32">+	chain.SetFinalized(chain.GetBlockByNumber(uint64(head)).Header())</span>
<span class="term-fg32">+	chain.SetSafe(chain.GetBlockByNumber(uint64(head)).Header())</span>
<span class="term-fg32">+	return &amp;testImmutableBackend{chain: chain, pending: pending, latest: int64(head)}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutablePriceLimitFloor(t *testing.T) {</span>
<span class="term-fg32">+	priceData := make(map[uint64]*types.DynamicFeeTx, 0)</span>
<span class="term-fg32">+	for i := 0; i &lt;= 100; i++ {</span>
<span class="term-fg32">+		priceData[uint64(i)] = &amp;types.DynamicFeeTx{</span>
<span class="term-fg32">+			GasFeeCap: big.NewInt(10 * params.GWei),</span>
<span class="term-fg32">+			GasTipCap: big.NewInt(10 * params.GWei),</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	config := Config{</span>
<span class="term-fg32">+		Blocks:     20,</span>
<span class="term-fg32">+		Percentile: 60,</span>
<span class="term-fg32">+		Default:    big.NewInt(params.GWei),</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	backend := newTestImmutableBackend(t, false, 101, 100, priceData)</span>
<span class="term-fg32">+	oracle := NewOracle(backend, config)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	got, err := oracle.SuggestTipCap(context.Background())</span>
<span class="term-fg32">+	backend.teardown()</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Fatalf(&quot;Failed to retrieve recommended gas price: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	expected := big.NewInt(settings.PriceLimit)</span>
<span class="term-fg32">+	if got.Cmp(expected) != 0 {</span>
<span class="term-fg32">+		t.Fatalf(&quot;Gas price mismatch, want %d, got %d&quot;, expected, got)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutableHandleEmptyBlocks(t *testing.T) {</span>
<span class="term-fg32">+	priceData := make(map[uint64]*types.DynamicFeeTx, 0)</span>
<span class="term-fg32">+	for i := 0; i &lt;= 50; i++ {</span>
<span class="term-fg32">+		priceData[uint64(i)] = &amp;types.DynamicFeeTx{</span>
<span class="term-fg32">+			GasFeeCap: big.NewInt(550 * params.GWei),</span>
<span class="term-fg32">+			GasTipCap: big.NewInt(500 * params.GWei),</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	config := Config{</span>
<span class="term-fg32">+		Blocks:     20,</span>
<span class="term-fg32">+		Percentile: 60,</span>
<span class="term-fg32">+		Default:    big.NewInt(params.GWei),</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	var cases = []struct {</span>
<span class="term-fg32">+		head   *big.Int &#47;&#47; Head number</span>
<span class="term-fg32">+		expect *big.Int &#47;&#47; Expected gasprice suggestion</span>
<span class="term-fg32">+	}{</span>
<span class="term-fg32">+		&#47;&#47; Past 20 blocks all 500 gweis, so expect tip of 500 Gwei</span>
<span class="term-fg32">+		{big.NewInt(50), big.NewInt(params.GWei * int64(500))},</span>
<span class="term-fg32">+		&#47;&#47; Past 20 blocks are all empty, so pull 40 blocks, 23 prices have 10 Gwei and 17 prices have 500 Gwei. 60% is top 17 prices, which is 500 Gwei.</span>
<span class="term-fg32">+		{big.NewInt(73), big.NewInt(params.GWei * int64(500))},</span>
<span class="term-fg32">+		&#47;&#47; Past 20 blocks are all empty, so pull 40 blocks, 24 prices have 10 Gwei and 16 prices have 500 Gwei. 60% is top 17 prices, which is 10 Gwei.</span>
<span class="term-fg32">+		{big.NewInt(74), big.NewInt(params.GWei * int64(10))},</span>
<span class="term-fg32">+		{big.NewInt(75), big.NewInt(params.GWei * int64(10))},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	for _, c := range cases {</span>
<span class="term-fg32">+		backend := newTestImmutableBackend(t, false, int(c.head.Int64())+1, int(c.head.Int64()), priceData)</span>
<span class="term-fg32">+		oracle := NewOracle(backend, config)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		got, err := oracle.SuggestTipCap(context.Background())</span>
<span class="term-fg32">+		backend.teardown()</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			t.Fatalf(&quot;Failed to retrieve recommended gas price: %v&quot;, err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if got.Cmp(c.expect) != 0 {</span>
<span class="term-fg32">+			t.Fatalf(&quot;Gas price mismatch, want %d, got %d&quot;, c.expect, got)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-b2ae9f0cd451d548b5e28d7d" role="button"
                       aria-expanded="false" aria-controls="id-b2ae9f0cd451d548b5e28d7d">
                        <code>eth/peerset_test.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/eth/peerset_test.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+38</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-b2ae9f0cd451d548b5e28d7d"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;peerset_test.go immutable-geth&#47;eth&#47;peerset_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..c3749510d231213a29d584c7c5f00b6e686e8584</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;eth&#47;peerset_test.go</span>
<span class="term-fg36">@@ -0,0 +1,38 @@</span>
<span class="term-fg32">+package eth</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;eth&#47;protocols&#47;eth&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;p2p&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestAllPeers_EmptyPeerSet_ZeroPeers(t *testing.T) {</span>
<span class="term-fg32">+	t.Parallel()</span>
<span class="term-fg32">+	testPeerSet := newPeerSet()</span>
<span class="term-fg32">+	peers := testPeerSet.allPeers()</span>
<span class="term-fg32">+	if len(peers) != 0 {</span>
<span class="term-fg32">+		t.Fatalf(&quot;expected 0 peers but got %d&quot;, len(peers))</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestAllPeers_NonEmptyPeerset_NonZeroPeers(t *testing.T) {</span>
<span class="term-fg32">+	t.Parallel()</span>
<span class="term-fg32">+	testPeerSet := newPeerSet()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; create peers</span>
<span class="term-fg32">+	expectedNumPeers := 10</span>
<span class="term-fg32">+	for i := 0; i &lt; expectedNumPeers; i++ {</span>
<span class="term-fg32">+		p2pPeer := p2p.NewPeer([32]byte{byte(i)}, &quot;&quot;, []p2p.Cap{})</span>
<span class="term-fg32">+		peer := eth.NewPeer(1, p2pPeer, nil, nil)</span>
<span class="term-fg32">+		err := testPeerSet.registerPeer(peer, nil)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			t.Fatalf(err.Error())</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	peers := testPeerSet.allPeers()</span>
<span class="term-fg32">+	if len(peers) != expectedNumPeers {</span>
<span class="term-fg32">+		t.Fatalf(&quot;expected %d peers but got %d&quot;, expectedNumPeers, len(peers))</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-92867fe7bc97ce20c965c406" role="button"
                       aria-expanded="false" aria-controls="id-92867fe7bc97ce20c965c406">
                        <code>eth/protocols/snap/gentrie_test.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/eth/protocols/snap/gentrie_test.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/eth/protocols/snap/gentrie_test.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+2</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-1</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-92867fe7bc97ce20c965c406"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;protocols&#47;snap&#47;gentrie_test.go immutable-geth&#47;eth&#47;protocols&#47;snap&#47;gentrie_test.go</span>
<span class="term-fg1">index 1fb2dbce7568def31422913f761e53f73b59ed44..dce8ae3e479aeddede551f9e59ff5bbb68346b72 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;protocols&#47;snap&#47;gentrie_test.go</span>
<span class="term-fg1">+++ immutable-geth&#47;eth&#47;protocols&#47;snap&#47;gentrie_test.go</span>
<span class="term-fg36">@@ -19,8 +19,9 @@</span>
 import (
 	&quot;bytes&quot;
 	&quot;math&#47;rand&quot;
<span class="term-fg31">-	&quot;slices&quot;</span>
 	&quot;testing&quot;
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;golang.org&#47;x&#47;exp&#47;slices&quot;</span>
&nbsp;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;
 	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;rawdb&quot;</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-bdc6bda44326e4e67754abb1" role="button"
                       aria-expanded="false" aria-controls="id-bdc6bda44326e4e67754abb1">
                        <code>eth/tracers/api_test.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/eth/tracers/api_test.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/eth/tracers/api_test.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+1</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-1</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-bdc6bda44326e4e67754abb1"><span class="term-fg1">diff --git go-ethereum&#47;eth&#47;tracers&#47;api_test.go immutable-geth&#47;eth&#47;tracers&#47;api_test.go</span>
<span class="term-fg1">index d8e4b9a4ef3d21c431b624efc589227d345d683b..fc2ba47e2408c3f96ffd70f04501a520ad9dd4a2 100644</span>
<span class="term-fg1">--- go-ethereum&#47;eth&#47;tracers&#47;api_test.go</span>
<span class="term-fg1">+++ immutable-geth&#47;eth&#47;tracers&#47;api_test.go</span>
<span class="term-fg36">@@ -172,7 +172,7 @@</span> 	signer := types.MakeSigner(b.chainConfig, block.Number(), block.Time())
 	for idx, tx := range block.Transactions() {
 		msg, _ := core.TransactionToMessage(tx, signer, block.BaseFee())
 		txContext := core.NewEVMTxContext(msg)
<span class="term-fg31">-		context := core.NewEVMBlockContext(block.Header(), b.chain, nil)</span>
<span class="term-fg32">+		context := core.NewEVMBlockContext(block.Header(), b.chain, nil, b.chainConfig)</span>
 		if idx == txIndex {
 			return msg, context, statedb, release, nil
 		}</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-d5cd80bbb7ec7c79f8f568c9" role="button"
                       aria-expanded="false" aria-controls="id-d5cd80bbb7ec7c79f8f568c9">
                        <code>go.mod</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/go.mod" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/go.mod" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+34</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-16</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-d5cd80bbb7ec7c79f8f568c9"><span class="term-fg1">diff --git go-ethereum&#47;go.mod immutable-geth&#47;go.mod</span>
<span class="term-fg1">index 7a54b1ff7ca902bb92f91baf6308f851f6e7aa89..ec0d698c973204187e50f72e5d2238e2674f70a2 100644</span>
<span class="term-fg1">--- go-ethereum&#47;go.mod</span>
<span class="term-fg1">+++ immutable-geth&#47;go.mod</span>
<span class="term-fg36">@@ -6,7 +6,8 @@</span> require (
 	github.com&#47;Azure&#47;azure-sdk-for-go&#47;sdk&#47;storage&#47;azblob v1.2.0
 	github.com&#47;Microsoft&#47;go-winio v0.6.1
 	github.com&#47;VictoriaMetrics&#47;fastcache v1.12.1
<span class="term-fg31">-	github.com&#47;aws&#47;aws-sdk-go-v2 v1.21.2</span>
<span class="term-fg32">+	github.com&#47;aws&#47;aws-sdk-go v1.50.31</span>
<span class="term-fg32">+	github.com&#47;aws&#47;aws-sdk-go-v2 v1.25.2</span>
 	github.com&#47;aws&#47;aws-sdk-go-v2&#47;config v1.18.45
 	github.com&#47;aws&#47;aws-sdk-go-v2&#47;credentials v1.13.43
 	github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;route53 v1.30.2
<span class="term-fg36">@@ -51,11 +52,15 @@</span> 	github.com&#47;kylelemons&#47;godebug v1.1.0
 	github.com&#47;mattn&#47;go-colorable v0.1.13
 	github.com&#47;mattn&#47;go-isatty v0.0.17
 	github.com&#47;naoina&#47;toml v0.1.2-0.20170918210437-9fafd6967416
<span class="term-fg32">+	github.com&#47;newrelic&#47;go-agent&#47;v3 v3.26.0</span>
<span class="term-fg32">+	github.com&#47;newrelic&#47;go-agent&#47;v3&#47;integrations&#47;nrlogrus v1.0.1</span>
 	github.com&#47;olekukonko&#47;tablewriter v0.0.5
 	github.com&#47;peterh&#47;liner v1.1.1-0.20190123174540-a2c9a5303de7
 	github.com&#47;protolambda&#47;bls12-381-util v0.0.0-20220416220906-d8552aa452c7
 	github.com&#47;rs&#47;cors v1.7.0
<span class="term-fg32">+	github.com&#47;sethvargo&#47;go-retry v0.2.4</span>
 	github.com&#47;shirou&#47;gopsutil v3.21.4-0.20210419000835-c7a38de76ee5+incompatible
<span class="term-fg32">+	github.com&#47;sirupsen&#47;logrus v1.9.0</span>
 	github.com&#47;status-im&#47;keycard-go v0.2.0
 	github.com&#47;stretchr&#47;testify v1.8.4
 	github.com&#47;supranational&#47;blst v0.3.11
<span class="term-fg36">@@ -63,10 +68,10 @@</span> 	github.com&#47;syndtr&#47;goleveldb v1.0.1-0.20210819022825-2ae1ddf74ef7
 	github.com&#47;tyler-smith&#47;go-bip39 v1.1.0
 	github.com&#47;urfave&#47;cli&#47;v2 v2.25.7
 	go.uber.org&#47;automaxprocs v1.5.2
<span class="term-fg31">-	golang.org&#47;x&#47;crypto v0.17.0</span>
<span class="term-fg32">+	golang.org&#47;x&#47;crypto v0.19.0</span>
 	golang.org&#47;x&#47;exp v0.0.0-20231110203233-9a3e6036ecaa
 	golang.org&#47;x&#47;sync v0.5.0
<span class="term-fg31">-	golang.org&#47;x&#47;sys v0.16.0</span>
<span class="term-fg32">+	golang.org&#47;x&#47;sys v0.17.0</span>
 	golang.org&#47;x&#47;text v0.14.0
 	golang.org&#47;x&#47;time v0.3.0
 	golang.org&#47;x&#47;tools v0.15.0
<span class="term-fg36">@@ -75,8 +80,21 @@</span> 	gopkg.in&#47;yaml.v3 v3.0.1
 )
&nbsp;
 require (
<span class="term-fg31">-	github.com&#47;Azure&#47;azure-sdk-for-go&#47;sdk&#47;azcore v1.7.0 &#47;&#47; indirect</span>
<span class="term-fg31">-	github.com&#47;Azure&#47;azure-sdk-for-go&#47;sdk&#47;internal v1.3.0 &#47;&#47; indirect</span>
<span class="term-fg32">+	github.com&#47;BurntSushi&#47;toml v1.3.2 &#47;&#47; indirect</span>
<span class="term-fg32">+	github.com&#47;andybalholm&#47;brotli v1.0.5 &#47;&#47; indirect</span>
<span class="term-fg32">+	github.com&#47;getsentry&#47;sentry-go v0.27.0 &#47;&#47; indirect</span>
<span class="term-fg32">+	github.com&#47;ilyakaznacheev&#47;cleanenv v1.5.0 &#47;&#47; indirect</span>
<span class="term-fg32">+	github.com&#47;joho&#47;godotenv v1.5.1 &#47;&#47; indirect</span>
<span class="term-fg32">+	github.com&#47;onsi&#47;gomega v1.27.6 &#47;&#47; indirect</span>
<span class="term-fg32">+	google.golang.org&#47;genproto v0.0.0-20230227214838-9b19f0bdc514 &#47;&#47; indirect</span>
<span class="term-fg32">+	google.golang.org&#47;grpc v1.54.0 &#47;&#47; indirect</span>
<span class="term-fg32">+	gopkg.in&#47;yaml.v2 v2.4.0 &#47;&#47; indirect</span>
<span class="term-fg32">+	olympos.io&#47;encoding&#47;edn v0.0.0-20201019073823-d3554ca0b0a3 &#47;&#47; indirect</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+require (</span>
<span class="term-fg32">+	github.com&#47;Azure&#47;azure-sdk-for-go&#47;sdk&#47;azcore v1.10.0 &#47;&#47; indirect</span>
<span class="term-fg32">+	github.com&#47;Azure&#47;azure-sdk-for-go&#47;sdk&#47;internal v1.5.2 &#47;&#47; indirect</span>
 	github.com&#47;DataDog&#47;zstd v1.4.5 &#47;&#47; indirect
 	github.com&#47;StackExchange&#47;wmi v1.2.1 &#47;&#47; indirect
 	github.com&#47;aws&#47;aws-sdk-go-v2&#47;feature&#47;ec2&#47;imds v1.13.13 &#47;&#47; indirect
<span class="term-fg36">@@ -87,14 +105,13 @@</span> 	github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;internal&#47;presigned-url v1.9.37 &#47;&#47; indirect
 	github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;sso v1.15.2 &#47;&#47; indirect
 	github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;ssooidc v1.17.3 &#47;&#47; indirect
 	github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;sts v1.23.2 &#47;&#47; indirect
<span class="term-fg31">-	github.com&#47;aws&#47;smithy-go v1.15.0 &#47;&#47; indirect</span>
<span class="term-fg32">+	github.com&#47;aws&#47;smithy-go v1.20.1 &#47;&#47; indirect</span>
 	github.com&#47;beorn7&#47;perks v1.0.1 &#47;&#47; indirect
 	github.com&#47;bits-and-blooms&#47;bitset v1.10.0 &#47;&#47; indirect
 	github.com&#47;cespare&#47;xxhash&#47;v2 v2.2.0 &#47;&#47; indirect
<span class="term-fg31">-	github.com&#47;cockroachdb&#47;errors v1.8.1 &#47;&#47; indirect</span>
<span class="term-fg31">-	github.com&#47;cockroachdb&#47;logtags v0.0.0-20190617123548-eb05cc24525f &#47;&#47; indirect</span>
<span class="term-fg31">-	github.com&#47;cockroachdb&#47;redact v1.0.8 &#47;&#47; indirect</span>
<span class="term-fg31">-	github.com&#47;cockroachdb&#47;sentry-go v0.6.1-cockroachdb.2 &#47;&#47; indirect</span>
<span class="term-fg32">+	github.com&#47;cockroachdb&#47;errors v1.11.1 &#47;&#47; indirect</span>
<span class="term-fg32">+	github.com&#47;cockroachdb&#47;logtags v0.0.0-20230118201751-21c54148d20b &#47;&#47; indirect</span>
<span class="term-fg32">+	github.com&#47;cockroachdb&#47;redact v1.1.5 &#47;&#47; indirect</span>
 	github.com&#47;cockroachdb&#47;tokenbucket v0.0.0-20230807174530-cc333fc44b06 &#47;&#47; indirect
 	github.com&#47;consensys&#47;bavard v0.1.13 &#47;&#47; indirect
 	github.com&#47;cpuguy83&#47;go-md2man&#47;v2 v2.0.2 &#47;&#47; indirect
<span class="term-fg36">@@ -106,7 +123,7 @@</span> 	github.com&#47;go-ole&#47;go-ole v1.3.0 &#47;&#47; indirect
 	github.com&#47;go-sourcemap&#47;sourcemap v2.1.3+incompatible &#47;&#47; indirect
 	github.com&#47;goccy&#47;go-json v0.10.2 &#47;&#47; indirect
 	github.com&#47;gogo&#47;protobuf v1.3.2 &#47;&#47; indirect
<span class="term-fg31">-	github.com&#47;google&#47;go-cmp v0.5.9 &#47;&#47; indirect</span>
<span class="term-fg32">+	github.com&#47;google&#47;go-cmp v0.5.9</span>
 	github.com&#47;google&#47;go-querystring v1.1.0 &#47;&#47; indirect
 	github.com&#47;google&#47;pprof v0.0.0-20230207041349-798e818bf904 &#47;&#47; indirect
 	github.com&#47;hashicorp&#47;go-cleanhttp v0.5.2 &#47;&#47; indirect
<span class="term-fg36">@@ -114,7 +131,7 @@</span> 	github.com&#47;hashicorp&#47;go-retryablehttp v0.7.4 &#47;&#47; indirect
 	github.com&#47;influxdata&#47;line-protocol v0.0.0-20200327222509-2487e7298839 &#47;&#47; indirect
 	github.com&#47;jmespath&#47;go-jmespath v0.4.0 &#47;&#47; indirect
 	github.com&#47;kilic&#47;bls12-381 v0.1.0 &#47;&#47; indirect
<span class="term-fg31">-	github.com&#47;klauspost&#47;compress v1.15.15 &#47;&#47; indirect</span>
<span class="term-fg32">+	github.com&#47;klauspost&#47;compress v1.16.3 &#47;&#47; indirect</span>
 	github.com&#47;klauspost&#47;cpuid&#47;v2 v2.0.9 &#47;&#47; indirect
 	github.com&#47;kr&#47;pretty v0.3.1 &#47;&#47; indirect
 	github.com&#47;kr&#47;text v0.2.0 &#47;&#47; indirect
<span class="term-fg36">@@ -133,14 +150,15 @@</span> 	github.com&#47;prometheus&#47;client_model v0.2.1-0.20210607210712-147c58e9608a &#47;&#47; indirect
 	github.com&#47;prometheus&#47;common v0.32.1 &#47;&#47; indirect
 	github.com&#47;prometheus&#47;procfs v0.7.3 &#47;&#47; indirect
 	github.com&#47;rivo&#47;uniseg v0.2.0 &#47;&#47; indirect
<span class="term-fg31">-	github.com&#47;rogpeppe&#47;go-internal v1.9.0 &#47;&#47; indirect</span>
<span class="term-fg32">+	github.com&#47;rogpeppe&#47;go-internal v1.10.0 &#47;&#47; indirect</span>
 	github.com&#47;russross&#47;blackfriday&#47;v2 v2.1.0 &#47;&#47; indirect
 	github.com&#47;tklauser&#47;go-sysconf v0.3.12 &#47;&#47; indirect
 	github.com&#47;tklauser&#47;numcpus v0.6.1 &#47;&#47; indirect
<span class="term-fg32">+	github.com&#47;valyala&#47;bytebufferpool v1.0.0 &#47;&#47; indirect</span>
<span class="term-fg32">+	github.com&#47;valyala&#47;fasthttp v1.49.0 &#47;&#47; indirect</span>
 	github.com&#47;xrash&#47;smetrics v0.0.0-20201216005158-039620a65673 &#47;&#47; indirect
 	golang.org&#47;x&#47;mod v0.14.0 &#47;&#47; indirect
<span class="term-fg31">-	golang.org&#47;x&#47;net v0.18.0 &#47;&#47; indirect</span>
<span class="term-fg31">-	google.golang.org&#47;protobuf v1.27.1 &#47;&#47; indirect</span>
<span class="term-fg31">-	gopkg.in&#47;yaml.v2 v2.4.0 &#47;&#47; indirect</span>
<span class="term-fg32">+	golang.org&#47;x&#47;net v0.21.0 &#47;&#47; indirect</span>
<span class="term-fg32">+	google.golang.org&#47;protobuf v1.30.0 &#47;&#47; indirect</span>
 	rsc.io&#47;tmplfunc v0.0.3 &#47;&#47; indirect
 )</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-04a78631fd5a0fc39fb82e49" role="button"
                       aria-expanded="false" aria-controls="id-04a78631fd5a0fc39fb82e49">
                        <code>go.sum</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/go.sum" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/go.sum" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+256</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-140</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-04a78631fd5a0fc39fb82e49"><span class="term-fg1">diff --git go-ethereum&#47;go.sum immutable-geth&#47;go.sum</span>
<span class="term-fg1">index bb4ded5c2ff7632cc07b48a7ac2ee75df0325bb1..adbbab7ae00cbb1e20e1005aecf3eb82305cdae3 100644</span>
<span class="term-fg1">--- go-ethereum&#47;go.sum</span>
<span class="term-fg1">+++ immutable-geth&#47;go.sum</span>
<span class="term-fg36">@@ -13,51 +13,177 @@</span> cloud.google.com&#47;go v0.56.0&#47;go.mod h1:jr7tqZxxKOVYizybht9+26Z&#47;gUq7tiRzu+ACVAMbKVk=
 cloud.google.com&#47;go v0.57.0&#47;go.mod h1:oXiQ6Rzq3RAkkY7N6t3TcE6jE+CIBBbA36lwQ1JyzZs=
 cloud.google.com&#47;go v0.62.0&#47;go.mod h1:jmCYTdRCQuc1PHIIJ&#47;maLInMho30T&#47;Y0M4hTdTShOYc=
 cloud.google.com&#47;go v0.65.0&#47;go.mod h1:O5N8zS7uWy9vkA9vayVHs65eM1ubvY4h553ofrNHObY=
<span class="term-fg32">+cloud.google.com&#47;go v0.110.0&#47;go.mod h1:SJnCLqQ0FCFGSZMUNUf84MV3Aia54kn7pi8st7tMzaY=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;accessapproval v1.6.0&#47;go.mod h1:R0EiYnwV5fsRFiKZkPHr6mwyk2wxUJ30nL4j2pcFY2E=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;accesscontextmanager v1.6.0&#47;go.mod h1:8XCvZWfYw3K&#47;ji0iVnp+6pu7huxoQTLmxAbVjbloTtM=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;aiplatform v1.35.0&#47;go.mod h1:7MFT&#47;vCaOyZT&#47;4IIFfxH4ErVg&#47;4ku6lKv3w0+tFTgXQ=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;analytics v0.17.0&#47;go.mod h1:WXFa3WSym4IZ+JiKmavYdJwGG&#47;CvpqiqczmL59bTD9M=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;apigateway v1.5.0&#47;go.mod h1:GpnZR3Q4rR7LVu5951qfXPJCHquZt02jf7xQx7kpqN8=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;apigeeconnect v1.5.0&#47;go.mod h1:KFaCqvBRU6idyhSNyn3vlHXc8VMDJdRmwDF6JyFRqZ8=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;apigeeregistry v0.5.0&#47;go.mod h1:YR5+s0BVNZfVOUkMa5pAR2xGd0A473vA5M7j247o1wM=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;apikeys v0.5.0&#47;go.mod h1:5aQfwY4D+ewMMWScd3hm2en3hCj+BROlyrt3ytS7KLI=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;appengine v1.6.0&#47;go.mod h1:hg6i0J&#47;BD2cKmDJbaFSYHFyZkgBEfQrDg&#47;X0V5fJn84=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;area120 v0.7.0&#47;go.mod h1:a3+8EUD1SX5RUcCs3MY5YasiO1z6yLiNLRiFrykbynY=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;artifactregistry v1.11.1&#47;go.mod h1:lLYghw+Itq9SONbCa1YWBoWs1nOucMH0pwXN1rOBZFI=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;asset v1.11.1&#47;go.mod h1:fSwLhbRvC9p9CXQHJ3BgFeQNM4c9x10lqlrdEUYXlJo=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;assuredworkloads v1.10.0&#47;go.mod h1:kwdUQuXcedVdsIaKgKTp9t0UJkE5+PAVNhdQm4ZVq2E=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;automl v1.12.0&#47;go.mod h1:tWDcHDp86aMIuHmyvjuKeeHEGq76lD7ZqfGLN6B0NuU=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;baremetalsolution v0.5.0&#47;go.mod h1:dXGxEkmR9BMwxhzBhV0AioD0ULBmuLZI8CdwalUxuss=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;batch v0.7.0&#47;go.mod h1:vLZN95s6teRUqRQ4s3RLDsH8PvboqBK+rn1oevL159g=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;beyondcorp v0.4.0&#47;go.mod h1:3ApA0mbhHx6YImmuubf5pyW8srKnCEPON32&#47;5hj+RmM=</span>
 cloud.google.com&#47;go&#47;bigquery v1.0.1&#47;go.mod h1:i&#47;xbL2UlR5RvWAURpBYZTtm&#47;cXjCha9lbfbpx4poX+o=
 cloud.google.com&#47;go&#47;bigquery v1.3.0&#47;go.mod h1:PjpwJnslEMmckchkHFfq+HTD2DmtT67aNFKH1&#47;VBDHE=
 cloud.google.com&#47;go&#47;bigquery v1.4.0&#47;go.mod h1:S8dzgnTigyfTmLBfrtrhyYhwRxG72rYxvftPBK2Dvzc=
 cloud.google.com&#47;go&#47;bigquery v1.5.0&#47;go.mod h1:snEHRnqQbz117VIFhE8bmtwIDY80NLUZUMb4Nv6dBIg=
 cloud.google.com&#47;go&#47;bigquery v1.7.0&#47;go.mod h1:&#47;&#47;okPTzCYNXSlb24MZs83e2Do+h+VXtc4gLoIoXIAPc=
 cloud.google.com&#47;go&#47;bigquery v1.8.0&#47;go.mod h1:J5hqkt3O0uAFnINi6JXValWIb1v0goeZM77hZzJN&#47;fQ=
<span class="term-fg32">+cloud.google.com&#47;go&#47;bigquery v1.47.0&#47;go.mod h1:sA9XOgy0A8vQK9+MWhEQTY6Tix87M&#47;ZurWFIxmF9I&#47;E=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;billing v1.12.0&#47;go.mod h1:yKrZio&#47;eu+okO&#47;2McZEbch17O5CB5NpZhhXG6Z766ss=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;binaryauthorization v1.5.0&#47;go.mod h1:OSe4OU1nN&#47;VswXKRBmciKpo9LulY41gch5c68htf3&#47;Q=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;certificatemanager v1.6.0&#47;go.mod h1:3Hh64rCKjRAX8dXgRAyOcY5vQ&#47;fE1sh8o+Mdd6KPgY8=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;channel v1.11.0&#47;go.mod h1:IdtI0uWGqhEeatSB62VOoJ8FSUhJ9&#47;+iGkJVqp74CGE=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;cloudbuild v1.6.0&#47;go.mod h1:UIbc&#47;w9QCbH12xX+ezUsgblrWv+Cv4Tw83GiSMHOn9M=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;clouddms v1.5.0&#47;go.mod h1:QSxQnhikCLUw13iAbffF2CZxAER3xDGNHjsTAkQJcQA=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;cloudtasks v1.9.0&#47;go.mod h1:w+EyLsVkLWHcOaqNEyvcKAsWp9p29dL6uL9Nst1cI7Y=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;compute v1.18.0&#47;go.mod h1:1X7yHxec2Ga+Ss6jPyjxRxpu2uu7PLgsOVXvgU0yacs=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;compute&#47;metadata v0.2.3&#47;go.mod h1:VAV5nSsACxMJvgaAuX6Pk2AawlZn8kiOGuCv6gTkwuA=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;contactcenterinsights v1.6.0&#47;go.mod h1:IIDlT6CLcDoyv79kDv8iWxMSTZhLxSCofVV5W6YFM&#47;w=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;container v1.13.1&#47;go.mod h1:6wgbMPeQRw9rSnKBCAJXnds3Pzj03C4JHamr8asWKy4=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;containeranalysis v0.7.0&#47;go.mod h1:9aUL+&#47;vZ55P2CXfuZjS4UjQ9AgXoSw8Ts6lemfmxBxI=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;datacatalog v1.12.0&#47;go.mod h1:CWae8rFkfp6LzLumKOnmVh4+Zle4A3NXLzVJ1d1mRm0=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;dataflow v0.8.0&#47;go.mod h1:Rcf5YgTKPtQyYz8bLYhFoIV&#47;vP39eL7fWNcSOyFfLJE=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;dataform v0.6.0&#47;go.mod h1:QPflImQy33e29VuapFdf19oPbE4aYTJxr31OAPV+ulA=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;datafusion v1.6.0&#47;go.mod h1:WBsMF8F1RhSXvVM8rCV3AeyWVxcC2xY6vith3iw3S+8=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;datalabeling v0.7.0&#47;go.mod h1:WPQb1y08RJbmpM3ww0CSUAGweL0SxByuW2E+FU+wXcM=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;dataplex v1.5.2&#47;go.mod h1:cVMgQHsmfRoI5KFYq4JtIBEUbYwc3c7tXmIDhRmNNVQ=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;dataproc v1.12.0&#47;go.mod h1:zrF3aX0uV3ikkMz6z4uBbIKyhRITnxvr4i3IjKsKrw4=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;dataqna v0.7.0&#47;go.mod h1:Lx9OcIIeqCrw1a6KdO3&#47;5KMP1wAmTc0slZWwP12Qq3c=</span>
 cloud.google.com&#47;go&#47;datastore v1.0.0&#47;go.mod h1:LXYbyblFSglQ5pkeyhO+Qmw7ukd3C+pD7TKLgZqpHYE=
 cloud.google.com&#47;go&#47;datastore v1.1.0&#47;go.mod h1:umbIZjpQpHh4hmRpGhH4tLFup+FVzqBi1b3c64qFpCk=
<span class="term-fg32">+cloud.google.com&#47;go&#47;datastore v1.10.0&#47;go.mod h1:PC5UzAmDEkAmkfaknstTYbNpgE49HAgW2J1gcgUfmdM=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;datastream v1.6.0&#47;go.mod h1:6LQSuswqLa7S4rPAOZFVjHIG3wJIjZcZrw8JDEDJuIs=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;deploy v1.6.0&#47;go.mod h1:f9PTHehG&#47;DjCom3QH0cntOVRm93uGBDt2vKzAPwpXQI=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;dialogflow v1.31.0&#47;go.mod h1:cuoUccuL1Z+HADhyIA7dci3N5zUssgpBJmCzI6fNRB4=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;dlp v1.9.0&#47;go.mod h1:qdgmqgTyReTz5&#47;YNSSuueR8pl7hO0o9bQ39ZhtgkWp4=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;documentai v1.16.0&#47;go.mod h1:o0o0DLTEZ+YnJZ+J4wNfTxmDVyrkzFvttBXXtYRMHkM=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;domains v0.8.0&#47;go.mod h1:M9i3MMDzGFXsydri9&#47;vW+EWz9sWb4I6WyHqdlAk0idE=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;edgecontainer v0.3.0&#47;go.mod h1:FLDpP4nykgwwIfcLt6zInhprzw0lEi2P1fjO6Ie0qbc=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;errorreporting v0.3.0&#47;go.mod h1:xsP2yaAp+OAW4OIm60An2bbLpqIhKXdWR&#47;tawvl7QzU=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;essentialcontacts v1.5.0&#47;go.mod h1:ay29Z4zODTuwliK7SnX8E86aUF2CTzdNtvv42niCX0M=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;eventarc v1.10.0&#47;go.mod h1:u3R35tmZ9HvswGRBnF48IlYgYeBcPUCjkr4BTdem2Kw=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;filestore v1.5.0&#47;go.mod h1:FqBXDWBp4YLHqRnVGveOkHDf8svj9r5+mUDLupOWEDs=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;firestore v1.9.0&#47;go.mod h1:HMkjKHNTtRyZNiMzu7YAsLr9K3X2udY2AMwDaMEQiiE=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;functions v1.10.0&#47;go.mod h1:0D3hEOe3DbEvCXtYOZHQZmD+SzYsi1YbI7dGvHfldXw=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;gaming v1.9.0&#47;go.mod h1:Fc7kEmCObylSWLO334NcO+O9QMDyz+TKC4v1D7X+Bc0=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;gkebackup v0.4.0&#47;go.mod h1:byAyBGUwYGEEww7xsbnUTBHIYcOPy&#47;PgUWUtOeRm9Vg=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;gkeconnect v0.7.0&#47;go.mod h1:SNfmVqPkaEi3bF&#47;B3CNZOAYPYdg7sU+obZ+QTky2Myw=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;gkehub v0.11.0&#47;go.mod h1:JOWHlmN+GHyIbuWQPl47&#47;C2RFhnFKH38jH9Ascu3n0E=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;gkemulticloud v0.5.0&#47;go.mod h1:W0JDkiyi3Tqh0TJr&#47;&#47;y19wyb1yf8llHVto2Htf2Ja3Y=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;gsuiteaddons v1.5.0&#47;go.mod h1:TFCClYLd64Eaa12sFVmUyG62tk4mdIsI7pAnSXRkcFo=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;iam v0.12.0&#47;go.mod h1:knyHGviacl11zrtZUoDuYpDgLjvr28sLQaG0YB2GYAY=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;iap v1.6.0&#47;go.mod h1:NSuvI9C&#47;j7UdjGjIde7t7HBz+QTwBcapPE07+sSRcLk=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;ids v1.3.0&#47;go.mod h1:JBdTYwANikFKaDP6LtW5JAi4gubs57SVNQjemdt6xV4=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;iot v1.5.0&#47;go.mod h1:mpz5259PDl3XJthEmh9+ap0affn&#47;MqNSP4My77Qql9o=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;kms v1.8.0&#47;go.mod h1:4xFEhYFqvW+4VMELtZyxomGSYtSQKzM178ylFW4jMAg=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;language v1.9.0&#47;go.mod h1:Ns15WooPM5Ad&#47;5no&#47;0n81yUetis74g3zrbeJBE+ptUY=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;lifesciences v0.8.0&#47;go.mod h1:lFxiEOMqII6XggGbOnKiyZ7IBwoIqA84ClvoezaA&#47;bo=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;logging v1.7.0&#47;go.mod h1:3xjP2CjkM3ZkO73aj4ASA5wRPGGCRrPIAeNqVNkzY8M=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;longrunning v0.4.1&#47;go.mod h1:4iWDqhBZ70CvZ6BfETbvam3T8FMvLK+eFj0E6AaRQTo=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;managedidentities v1.5.0&#47;go.mod h1:+dWcZ0JlUmpuxpIDfyP5pP5y0bLdRwOS4Lp7gMni&#47;LA=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;maps v0.6.0&#47;go.mod h1:o6DAMMfb+aINHz&#47;p&#47;jbcY+mYeXBoZoxTfdSQ8VAJaCw=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;mediatranslation v0.7.0&#47;go.mod h1:LCnB&#47;gZr90ONOIQLgSXagp8XUW1ODs2UmUMvcgMfI2I=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;memcache v1.9.0&#47;go.mod h1:8oEyzXCu+zo9RzlEaEjHl4KkgjlNDaXbCQeQWlzNFJM=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;metastore v1.10.0&#47;go.mod h1:fPEnH3g4JJAk+gMRnrAnoqyv2lpUCqJPWOodSaf45Eo=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;monitoring v1.12.0&#47;go.mod h1:yx8Jj2fZNEkL&#47;GYZyTLS4ZtZEZN8WtDEiEqG4kLK50w=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;networkconnectivity v1.10.0&#47;go.mod h1:UP4O4sWXJG13AqrTdQCD9TnLGEbtNRqjuaaA7bNjF5E=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;networkmanagement v1.6.0&#47;go.mod h1:5pKPqyXjB&#47;sgtvB5xqOemumoQNB7y95Q7S+4rjSOPYY=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;networksecurity v0.7.0&#47;go.mod h1:mAnzoxx&#47;8TBSyXEeESMy9OOYwo1v+gZ5eMRnsT5bC8k=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;notebooks v1.7.0&#47;go.mod h1:PVlaDGfJgj1fl1S3dUwhFMXFgfYGhYQt2164xOMONmE=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;optimization v1.3.1&#47;go.mod h1:IvUSefKiwd1a5p0RgHDbWCIbDFgKuEdB+fPPuP0IDLI=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;orchestration v1.6.0&#47;go.mod h1:M62Bevp7pkxStDfFfTuCOaXgaaqRAga1yKyoMtEoWPQ=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;orgpolicy v1.10.0&#47;go.mod h1:w1fo8b7rRqlXlIJbVhOMPrwVljyuW5mqssvBtU18ONc=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;osconfig v1.11.0&#47;go.mod h1:aDICxrur2ogRd9zY5ytBLV89KEgT2MKB2L&#47;n6x1ooPw=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;oslogin v1.9.0&#47;go.mod h1:HNavntnH8nzrn8JCTT5fj18FuJLFJc4NaZJtBnQtKFs=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;phishingprotection v0.7.0&#47;go.mod h1:8qJI4QKHoda&#47;sb&#47;7&#47;YmMQ2omRLSLYSu9bU0EKCNI+Lk=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;policytroubleshooter v1.5.0&#47;go.mod h1:Rz1WfV+1oIpPdN2VvvuboLVRsB1Hclg3CKQ53j9l8vw=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;privatecatalog v0.7.0&#47;go.mod h1:2s5ssIFO69F5csTXcwBP7NPFTZvps26xGzvQ2PQaBYg=</span>
 cloud.google.com&#47;go&#47;pubsub v1.0.1&#47;go.mod h1:R0Gpsv3s54REJCy4fxDixWD93lHJMoZTyQ2kNxGRt3I=
 cloud.google.com&#47;go&#47;pubsub v1.1.0&#47;go.mod h1:EwwdRX2sKPjnvnqCa270oGRyludottCI76h+R3AArQw=
 cloud.google.com&#47;go&#47;pubsub v1.2.0&#47;go.mod h1:jhfEVHT8odbXTkndysNHCcx0awwzvfOlguIAii9o8iA=
 cloud.google.com&#47;go&#47;pubsub v1.3.1&#47;go.mod h1:i+ucay31+CNRpDW4Lu78I4xXG+O1r&#47;MAHgjpRVR+TSU=
<span class="term-fg32">+cloud.google.com&#47;go&#47;pubsub v1.28.0&#47;go.mod h1:vuXFpwaVoIPQMGXqRyUQigu&#47;AX1S3IWugR9xznmcXX8=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;pubsublite v1.6.0&#47;go.mod h1:1eFCS0U11xlOuMFV&#47;0iBqw3zP12kddMeCbj&#47;F3FSj9k=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;recaptchaenterprise&#47;v2 v2.6.0&#47;go.mod h1:RPauz9jeLtB3JVzg6nCbe12qNoaa8pXc4d&#47;YukAmcnA=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;recommendationengine v0.7.0&#47;go.mod h1:1reUcE3GIu6MeBz&#47;h5xZJqNLuuVjNg1lmWMPyjatzac=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;recommender v1.9.0&#47;go.mod h1:PnSsnZY7q+VL1uax2JWkt&#47;UegHssxjUVVCrX52CuEmQ=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;redis v1.11.0&#47;go.mod h1:&#47;X6eicana+BWcUda5PpwZC48o37SiFVTFSs0fWAJ7uQ=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;resourcemanager v1.5.0&#47;go.mod h1:eQoXNAiAvCf5PXxWxXjhKQoTMaUSNrEfg+6qdf&#47;wots=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;resourcesettings v1.5.0&#47;go.mod h1:+xJF7QSG6undsQDfsCJyqWXyBwUoJLhetkRMDRnIoXA=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;retail v1.12.0&#47;go.mod h1:UMkelN&#47;0Z8XvKymXFbD4EhFJlYKRx1FGhQkVPU5kF14=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;run v0.8.0&#47;go.mod h1:VniEnuBwqjigv0A7ONfQUaEItaiCRVujlMqerPPiktM=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;scheduler v1.8.0&#47;go.mod h1:TCET+Y5Gp1YgHT8py4nlg2Sew8nUHMqcpousDgXJVQc=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;secretmanager v1.10.0&#47;go.mod h1:MfnrdvKMPNra9aZtQFvBcvRU54hbPD8&#47;HayQdlUgJpU=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;security v1.12.0&#47;go.mod h1:rV6EhrpbNHrrxqlvW0BWAIawFWq3X90SduMJdFwtLB8=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;securitycenter v1.18.1&#47;go.mod h1:0&#47;25gAzCM&#47;9OL9vVx4ChPeM&#47;+DlfGQJDwBy&#47;UC8AKK0=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;servicecontrol v1.10.0&#47;go.mod h1:pQvyvSRh7YzUF2efw7H87V92mxU8FnFDawMClGCNuAA=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;servicedirectory v1.8.0&#47;go.mod h1:srXodfhY1GFIPvltunswqXpVxFPpZjf8nkKQT7XcXaY=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;servicemanagement v1.6.0&#47;go.mod h1:aWns7EeeCOtGEX4OvZUWCCJONRZeFKiptqKf1D0l&#47;Jc=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;serviceusage v1.5.0&#47;go.mod h1:w8U1JvqUqwJNPEOTQjrMHkw3IaIFLoLsPLvsE3xueec=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;shell v1.6.0&#47;go.mod h1:oHO8QACS90luWgxP3N9iZVuEiSF84zNyLytb+qE2f9A=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;spanner v1.44.0&#47;go.mod h1:G8XIgYdOK+Fbcpbs7p2fiprDw4CaZX63whnSMLVBxjk=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;speech v1.14.1&#47;go.mod h1:gEosVRPJ9waG7zqqnsHpYTOoAS4KouMRLDFMekpJ0J0=</span>
 cloud.google.com&#47;go&#47;storage v1.0.0&#47;go.mod h1:IhtSnM&#47;ZTZV8YYJWCY8RULGVqBDmpoyjwiyrjsg+URw=
 cloud.google.com&#47;go&#47;storage v1.5.0&#47;go.mod h1:tpKbwo567HUNpVclU5sGELwQWBDZ8gh0ZeosJ0Rtdos=
 cloud.google.com&#47;go&#47;storage v1.6.0&#47;go.mod h1:N7U0C8pVQ&#47;+NIKOBQyamJIeKQKkZ+mxpohlUTyfDhBk=
 cloud.google.com&#47;go&#47;storage v1.8.0&#47;go.mod h1:Wv1Oy7z6Yz3DshWRJFhqM&#47;UCfaWIRTdp0RXyy7KQOVs=
 cloud.google.com&#47;go&#47;storage v1.10.0&#47;go.mod h1:FLPqc6j+Ki4BU591ie1oL6qBQGu2Bl&#47;tZ9ullr3+Kg0=
<span class="term-fg32">+cloud.google.com&#47;go&#47;storagetransfer v1.7.0&#47;go.mod h1:8Giuj1QNb1kfLAiWM1bN6dHzfdlDAVC9rv9abHot2W4=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;talent v1.5.0&#47;go.mod h1:G+ODMj9bsasAEJkQSzO2uHQWXHHXUomArjWQQYkqK6c=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;texttospeech v1.6.0&#47;go.mod h1:YmwmFT8pj1aBblQOI3TfKmwibnsfvhIBzPXcW4EBovc=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;tpu v1.5.0&#47;go.mod h1:8zVo1rYDFuW2l4yZVY0R0fb&#47;v44xLh3llq7RuV61fPM=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;trace v1.8.0&#47;go.mod h1:zH7vcsbAhklH8hWFig58HvxcxyQbaIqMarMg9hn5ECA=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;translate v1.5.0&#47;go.mod h1:29YDSYveqqpA1CQFD7NQuP49xymq17RXNaUDdc0mNu0=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;video v1.12.0&#47;go.mod h1:MLQew95eTuaNDEGriQdcYn0dTwf9oWiA4uYebxM5kdg=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;videointelligence v1.10.0&#47;go.mod h1:LHZngX1liVtUhZvi2uNS0VQuOzNi2TkY1OakiuoUOjU=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;vision&#47;v2 v2.6.0&#47;go.mod h1:158Hes0MvOS9Z&#47;bDMSFpjwsUrZ5fPrdwuyyvKSGAGMY=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;vmmigration v1.5.0&#47;go.mod h1:E4YQ8q7&#47;4W9gobHjQg4JJSgXXSgY21nA5r8swQV+Xxc=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;vmwareengine v0.2.2&#47;go.mod h1:sKdctNJxb3KLZkE&#47;6Oui94iw&#47;xs9PRNC2wnNLXsHvH8=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;vpcaccess v1.6.0&#47;go.mod h1:wX2ILaNhe7TlVa4vC5xce1bCnqE3AeH27RV31lnmZes=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;webrisk v1.8.0&#47;go.mod h1:oJPDuamzHXgUc+b8SiHRcVInZQuybnvEW72PqTc7sSg=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;websecurityscanner v1.5.0&#47;go.mod h1:Y6xdCPy81yi0SQnDY1xdNTNpfY1oAgXUlcfN3B3eSng=</span>
<span class="term-fg32">+cloud.google.com&#47;go&#47;workflows v1.10.0&#47;go.mod h1:fZ8LmRmZQWacon9UCX1r&#47;g&#47;DfAXx5VcPALq2CxzdePw=</span>
 dmitri.shuralyov.com&#47;gpu&#47;mtl v0.0.0-20190408044501-666a987793e9&#47;go.mod h1:H6x&#47;&#47;7gZCb22OMCxBHrMx7a5I7Hp++hsVxbQ4BYO7hU=
<span class="term-fg31">-github.com&#47;AndreasBriese&#47;bbloom v0.0.0-20190306092124-e2d15f34fcf9&#47;go.mod h1:bOvUY6CB00SOBii9&#47;FifXqc0awNKxLFCL&#47;+pkDPuyl8=</span>
<span class="term-fg31">-github.com&#47;Azure&#47;azure-sdk-for-go&#47;sdk&#47;azcore v1.7.0 h1:8q4SaHjFsClSvuVne0ID&#47;5Ka8u3fcIHyqkLjcFpNRHQ=</span>
<span class="term-fg31">-github.com&#47;Azure&#47;azure-sdk-for-go&#47;sdk&#47;azcore v1.7.0&#47;go.mod h1:bjGvMhVMb+EEm3VRNQawDMUyMMjo+S5ewNjflkep&#47;0Q=</span>
<span class="term-fg32">+github.com&#47;Azure&#47;azure-sdk-for-go&#47;sdk&#47;azcore v1.10.0 h1:n1DH8TPV4qqPTje2RcUBYwtrTWlabVp4n46+74X2pn4=</span>
<span class="term-fg32">+github.com&#47;Azure&#47;azure-sdk-for-go&#47;sdk&#47;azcore v1.10.0&#47;go.mod h1:HDcZnuGbiyppErN6lB+idp4CKhjbc8gwjto6OPpyggM=</span>
 github.com&#47;Azure&#47;azure-sdk-for-go&#47;sdk&#47;azidentity v1.3.0 h1:vcYCAze6p19qBW7MhZybIsqD8sMV8js0NyQM8JDnVtg=
<span class="term-fg31">-github.com&#47;Azure&#47;azure-sdk-for-go&#47;sdk&#47;internal v1.3.0 h1:sXr+ck84g&#47;ZlZUOZiNELInmMgOsuGwdjjVkEIde0OtY=</span>
<span class="term-fg31">-github.com&#47;Azure&#47;azure-sdk-for-go&#47;sdk&#47;internal v1.3.0&#47;go.mod h1:okt5dMMTOFjX&#47;aovMlrjvvXoPMBVSPzk9185BT0+eZM=</span>
<span class="term-fg32">+github.com&#47;Azure&#47;azure-sdk-for-go&#47;sdk&#47;azidentity v1.3.0&#47;go.mod h1:OQeznEEkTZ9OrhHJoDD8ZDq51FHgXjqtP9z6bEwBq9U=</span>
<span class="term-fg32">+github.com&#47;Azure&#47;azure-sdk-for-go&#47;sdk&#47;internal v1.5.2 h1:LqbJ&#47;WzJUwBf8UiaSzgX7aMclParm9&#47;5Vgp+TY51uBQ=</span>
<span class="term-fg32">+github.com&#47;Azure&#47;azure-sdk-for-go&#47;sdk&#47;internal v1.5.2&#47;go.mod h1:yInRyqWXAuaPrgI7p70+lDDgh3mlBohis29jGMISnmc=</span>
 github.com&#47;Azure&#47;azure-sdk-for-go&#47;sdk&#47;resourcemanager&#47;storage&#47;armstorage v1.2.0 h1:Ma67P&#47;GGprNwsslzEH6+Kb8nybI8jpDTm4Wmzu2ReK8=
<span class="term-fg32">+github.com&#47;Azure&#47;azure-sdk-for-go&#47;sdk&#47;resourcemanager&#47;storage&#47;armstorage v1.2.0&#47;go.mod h1:c+Lifp3EDEamAkPVzMooRNOK6CZjNSdEnf1A7jsI9u4=</span>
 github.com&#47;Azure&#47;azure-sdk-for-go&#47;sdk&#47;storage&#47;azblob v1.2.0 h1:gggzg0SUMs6SQbEw+3LoSsYf9YMjkupeAnHMX8O9mmY=
 github.com&#47;Azure&#47;azure-sdk-for-go&#47;sdk&#47;storage&#47;azblob v1.2.0&#47;go.mod h1:+6KLcKIVgxoBDMqMO&#47;Nvy7bZ9a0nbU3I1DtFQK3YvB4=
 github.com&#47;AzureAD&#47;microsoft-authentication-library-for-go v1.0.0 h1:OBhqkivkhkMqLPymWEppkm7vgPQY2XsHoEkaMQ0AdZY=
<span class="term-fg32">+github.com&#47;AzureAD&#47;microsoft-authentication-library-for-go v1.0.0&#47;go.mod h1:kgDmCTgBzIEPFElEF+FK0SdjAor06dRq2Go927dnQ6o=</span>
 github.com&#47;BurntSushi&#47;toml v0.3.1&#47;go.mod h1:xHWCNGjB5oqiDr8zfno3MHue2Ht5sIBksp03qcyfWMU=
<span class="term-fg32">+github.com&#47;BurntSushi&#47;toml v1.2.1&#47;go.mod h1:CxXYINrC8qIiEnFrOxCa7Jy5BFHlXnUU2pbicEuybxQ=</span>
 github.com&#47;BurntSushi&#47;toml v1.3.2 h1:o7IhLm0Msx3BaB+n3Ag7L8EVlByGnpq14C4YWiu&#47;gL8=
<span class="term-fg32">+github.com&#47;BurntSushi&#47;toml v1.3.2&#47;go.mod h1:CxXYINrC8qIiEnFrOxCa7Jy5BFHlXnUU2pbicEuybxQ=</span>
 github.com&#47;BurntSushi&#47;xgb v0.0.0-20160522181843-27f122750802&#47;go.mod h1:IVnqGOEym&#47;WlBOVXweHU+Q+&#47;VP0lqqI8lqeDx9IjBqo=
<span class="term-fg31">-github.com&#47;CloudyKit&#47;fastprinter v0.0.0-20170127035650-74b38d55f37a&#47;go.mod h1:EFZQ978U7x8IRnstaskI3IysnWY5Ao3QgZUKOXlsAdw=</span>
<span class="term-fg31">-github.com&#47;CloudyKit&#47;jet v2.1.3-0.20180809161101-62edd43e4f88+incompatible&#47;go.mod h1:HPYO+50pSWkPoj9Q&#47;eq0aRGByCL6ScRlUmiEX5Zgm+w=</span>
<span class="term-fg32">+github.com&#47;CloudyKit&#47;fastprinter v0.0.0-20200109182630-33d98a066a53&#47;go.mod h1:+3IMCy2vIlbG1XG&#47;0ggNQv0SvxCAIpPM5b1nCz56Xno=</span>
<span class="term-fg32">+github.com&#47;CloudyKit&#47;jet&#47;v6 v6.2.0&#47;go.mod h1:d3ypHeIRNo2+XyqnGA8s+aphtcVpjP5hPwP&#47;Lzo7Ro4=</span>
 github.com&#47;DataDog&#47;zstd v1.4.5 h1:EndNeuB0l9syBZhut0wns3gV1hL8zX8LIu6ZiVHWLIQ=
 github.com&#47;DataDog&#47;zstd v1.4.5&#47;go.mod h1:1jcaCB&#47;ufaK+sKp1NBhlGmpz41jOoPQ35bpF36t7BBo=
<span class="term-fg31">-github.com&#47;Joker&#47;hpp v1.0.0&#47;go.mod h1:8x5n+M1Hp5hC0g8okX3sR3vFQwynaX&#47;UgSOM9MeBKzY=</span>
<span class="term-fg31">-github.com&#47;Joker&#47;jade v1.0.1-0.20190614124447-d475f43051e7&#47;go.mod h1:6E6s8o2AE4KhCrqr6GRJjdC&#47;gNfTdxkIXvuGZZda2VM=</span>
<span class="term-fg32">+github.com&#47;HdrHistogram&#47;hdrhistogram-go v1.1.2&#47;go.mod h1:yDgFjdqOqDEKOvasDdhWNXYg9BVp4O+o5f6V&#47;ehm6Oo=</span>
<span class="term-fg32">+github.com&#47;Joker&#47;jade v1.1.3&#47;go.mod h1:T+2WLyt7VH6Lp0TRxQrUYEs64nRc83wkMQrfeIQKduM=</span>
 github.com&#47;Microsoft&#47;go-winio v0.6.1 h1:9&#47;kr64B9VUZrLm5YYwbGtUJnMgqWVOdUAXu6Migciow=
 github.com&#47;Microsoft&#47;go-winio v0.6.1&#47;go.mod h1:LRdKpFKfdobln8UmuiYcKPot9D2v6svN5+sAH+4kjUM=
<span class="term-fg31">-github.com&#47;Shopify&#47;goreferrer v0.0.0-20181106222321-ec9c9a553398&#47;go.mod h1:a1uqRtAwp2Xwc6WNPJEufxJ7fx3npB4UV&#47;JOLmbu5I0=</span>
<span class="term-fg32">+github.com&#47;Shopify&#47;goreferrer v0.0.0-20220729165902-8cddb4f5de06&#47;go.mod h1:7erjKLwalezA0k99cWs5L11HWOAPNjdUZ6RxH1BXbbM=</span>
 github.com&#47;StackExchange&#47;wmi v1.2.1 h1:VIkavFPXSjcnS+O8yTq7NI32k0R5Aj+v39y29VYDOSA=
 github.com&#47;StackExchange&#47;wmi v1.2.1&#47;go.mod h1:rcmrprowKIVzvc+NUiLncP2uuArMWLCbu9SBzvHz7e8=
 github.com&#47;VictoriaMetrics&#47;fastcache v1.12.1 h1:i0mICQuojGDL3KblA7wUNlY5lOK6a4bwt3uRKnkZU40=
 github.com&#47;VictoriaMetrics&#47;fastcache v1.12.1&#47;go.mod h1:tX04vaqcNoQeGLD+ra5pU5sWkuxnzWhEzLwhP9w653o=
<span class="term-fg31">-github.com&#47;ajg&#47;form v1.5.1&#47;go.mod h1:uL1WgH+h2mgNtvBq0339dVnzXdBETtL2LeUXaIv25UY=</span>
<span class="term-fg32">+github.com&#47;aclements&#47;go-moremath v0.0.0-20210112150236-f10218a38794&#47;go.mod h1:7e+I0LQFUI9AXWxOfsQROs9xPhoJtbsyWcjJqDd4KPY=</span>
 github.com&#47;alecthomas&#47;template v0.0.0-20160405071501-a0175ee3bccc&#47;go.mod h1:LOuyumcjzFXgccqObfd&#47;Ljyb9UuFJ6TxHnclSeseNhc=
 github.com&#47;alecthomas&#47;template v0.0.0-20190718012654-fb15b899a751&#47;go.mod h1:LOuyumcjzFXgccqObfd&#47;Ljyb9UuFJ6TxHnclSeseNhc=
 github.com&#47;alecthomas&#47;units v0.0.0-20151022065526-2efee857e7cf&#47;go.mod h1:ybxpYRFXyAe+OPACYpWeL0wqObRcbAqCMya13uyzqw0=
<span class="term-fg36">@@ -65,9 +191,13 @@</span> github.com&#47;alecthomas&#47;units v0.0.0-20190717042225-c3de453c63f4&#47;go.mod h1:ybxpYRFXyAe+OPACYpWeL0wqObRcbAqCMya13uyzqw0=
 github.com&#47;alecthomas&#47;units v0.0.0-20190924025748-f65c72e2690d&#47;go.mod h1:rBZYJk541a8SKzHPHnH3zbiI+7dagKZ0cgpgrD7Fyho=
 github.com&#47;allegro&#47;bigcache v1.2.1-0.20190218064605-e24eb225f156 h1:eMwmnE&#47;GDgah4HI848JfFxHt+iPb26b4zyfspmqY0&#47;8=
 github.com&#47;allegro&#47;bigcache v1.2.1-0.20190218064605-e24eb225f156&#47;go.mod h1:Cb&#47;ax3seSYIx7SuZdm2G2xzfwmv3TPSk2ucNfQESPXM=
<span class="term-fg31">-github.com&#47;armon&#47;consul-api v0.0.0-20180202201655-eb2c6b5be1b6&#47;go.mod h1:grANhF5doyWs3UAsr3K4I6qtAmlQcZDesFNEHPZAzj8=</span>
<span class="term-fg31">-github.com&#47;aws&#47;aws-sdk-go-v2 v1.21.2 h1:+LXZ0sgo8quN9UOKXXzAWRT3FWd4NxeXWOZom9pE7GA=</span>
<span class="term-fg32">+github.com&#47;andybalholm&#47;brotli v1.0.5 h1:8uQZIdzKmjc&#47;iuPu7O2ioW48L81FgatrcpfFmiq&#47;cCs=</span>
<span class="term-fg32">+github.com&#47;andybalholm&#47;brotli v1.0.5&#47;go.mod h1:fO7iG3H7G2nSZ7m0zPUDn85XEX2GTukHGRSepvi9Eig=</span>
<span class="term-fg32">+github.com&#47;aws&#47;aws-sdk-go v1.50.31 h1:gx2NRLLEDUmQFC4YUsfMUKkGCwpXVO8ijUecq&#47;nOQGA=</span>
<span class="term-fg32">+github.com&#47;aws&#47;aws-sdk-go v1.50.31&#47;go.mod h1:LF8svs817+Nz+DmiMQKTO3ubZ&#47;6IaTpq3TjupRn3Eqk=</span>
 github.com&#47;aws&#47;aws-sdk-go-v2 v1.21.2&#47;go.mod h1:ErQhvNuEMhJjweavOYhxVkn2RUx7kQXVATHrjKtxIpM=
<span class="term-fg32">+github.com&#47;aws&#47;aws-sdk-go-v2 v1.25.2 h1:&#47;uiG1avJRgLGiQM9X3qJM8+Qa6KRGK5rRPuXE0HUM+w=</span>
<span class="term-fg32">+github.com&#47;aws&#47;aws-sdk-go-v2 v1.25.2&#47;go.mod h1:Evoc5AsmtveRt1komDwIsjHFyrP5tDuF1D1U+6z6pNo=</span>
 github.com&#47;aws&#47;aws-sdk-go-v2&#47;config v1.18.45 h1:Aka9bI7n8ysuwPeFdm77nfbyHCAKQ3z9ghB3S&#47;38zes=
 github.com&#47;aws&#47;aws-sdk-go-v2&#47;config v1.18.45&#47;go.mod h1:ZwDUgFnQgsazQTnWfeLWk5GjeqTQTL8lMkoE1UXzxdE=
 github.com&#47;aws&#47;aws-sdk-go-v2&#47;credentials v1.13.43 h1:LU8vo40zBlo3R7bAvBVy&#47;ku4nxGEyZe9N8MqAeFTzF8=
<span class="term-fg36">@@ -90,9 +220,10 @@</span> github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;ssooidc v1.17.3 h1:HFiiRkf1SdaAmV3&#47;BHOFZ9DjFynPHj8G&#47;UIO1lQS+fk=
 github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;ssooidc v1.17.3&#47;go.mod h1:a7bHA82fyUXOm+ZSWKU6PIoBxrjSprdLoM8xPYvzYVg=
 github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;sts v1.23.2 h1:0BkLfgeDjfZnZ+MhB3ONb01u9pwFYTCZVhlsSSBvlbU=
 github.com&#47;aws&#47;aws-sdk-go-v2&#47;service&#47;sts v1.23.2&#47;go.mod h1:Eows6e1uQEsc4ZaHANmsPRzAKcVDrcmjjWiih2+HUUQ=
<span class="term-fg31">-github.com&#47;aws&#47;smithy-go v1.15.0 h1:PS&#47;durmlzvAFpQHDs4wi4sNNP9ExsqZh6IlfdHXgKK8=</span>
 github.com&#47;aws&#47;smithy-go v1.15.0&#47;go.mod h1:Tg+OJXh4MB2R&#47;uN61Ko2f6hTZwB&#47;ZYGOtib8J3gBHzA=
<span class="term-fg31">-github.com&#47;aymerick&#47;raymond v2.0.3-0.20180322193309-b565731e1464+incompatible&#47;go.mod h1:osfaiScAUVup+UC9Nfq76eWqDhXlp+4UYaA8uhTBO6g=</span>
<span class="term-fg32">+github.com&#47;aws&#47;smithy-go v1.20.1 h1:4SZlSlMr36UEqC7XOyRVb27XMeZubNcBNN+9IgEPIQw=</span>
<span class="term-fg32">+github.com&#47;aws&#47;smithy-go v1.20.1&#47;go.mod h1:krry+ya&#47;rV9RDcV&#47;Q16kpu6ypI4K2czasz0NC3qS14E=</span>
<span class="term-fg32">+github.com&#47;aymerick&#47;douceur v0.2.0&#47;go.mod h1:wlT5vV2O3h55X9m7iVYN0TBM0NH&#47;MmbLnd30&#47;FjWUq4=</span>
 github.com&#47;beorn7&#47;perks v0.0.0-20180321164747-3a771d992973&#47;go.mod h1:Dwedo&#47;Wpr24TaqPxmxbtue+5NUziq4I4S80YR8gNf3Q=
 github.com&#47;beorn7&#47;perks v1.0.0&#47;go.mod h1:KWe93zE9D1o94FZ5RNwFwVgaQK1VOXiVxmqh+CedLV8=
 github.com&#47;beorn7&#47;perks v1.0.1 h1:VlbKKnNfV8bJzeqoa4cOKqO6bYr3WgKZxO8Z16+hsOM=
<span class="term-fg36">@@ -102,7 +233,9 @@</span> github.com&#47;bits-and-blooms&#47;bitset v1.10.0&#47;go.mod h1:7hO7Gc7Pp1vODcmWvKMRA9BNmbv6a&#47;7QIWpPxHddWR8=
 github.com&#47;btcsuite&#47;btcd&#47;btcec&#47;v2 v2.2.0 h1:fzn1qaOt32TuLjFlkzYSsBC35Q3KUjT1SwPxiMSCF5k=
 github.com&#47;btcsuite&#47;btcd&#47;btcec&#47;v2 v2.2.0&#47;go.mod h1:U7MHm051Al6XmscBQ0BoNydpOTsFAn707034b5nY8zU=
 github.com&#47;btcsuite&#47;btcd&#47;chaincfg&#47;chainhash v1.0.1 h1:q0rUy8C&#47;TYNBQS1+CGKw68tLOFYSNEs0TFnxxnS9+4U=
<span class="term-fg32">+github.com&#47;btcsuite&#47;btcd&#47;chaincfg&#47;chainhash v1.0.1&#47;go.mod h1:7SFka0XMvUgj3hfZtydOrQY2mwhPclbT2snogU7SQQc=</span>
 github.com&#47;census-instrumentation&#47;opencensus-proto v0.2.1&#47;go.mod h1:f6KPmirojxKA12rnyqOA5BBL4O983OfeGPqjHWSTneU=
<span class="term-fg32">+github.com&#47;census-instrumentation&#47;opencensus-proto v0.4.1&#47;go.mod h1:4T9NM4+4Vw91VeyqjLS6ao50K5bOcLKN6Q42XnYaRYw=</span>
 github.com&#47;cespare&#47;cp v0.1.0 h1:SE+dxFebS7Iik5LK0tsi1k9ZCxEaFX4AjQmoyA+1dJk=
 github.com&#47;cespare&#47;cp v0.1.0&#47;go.mod h1:SOGHArjBr4JWaSDEVpWpo&#47;hNg6RoKrls6Oh40hiwW+s=
 github.com&#47;cespare&#47;xxhash&#47;v2 v2.1.1&#47;go.mod h1:VGX0DQ3Q6kWi7AoAeZDth3&#47;j3BFtOZR5XLFGgcrjCOs=
<span class="term-fg36">@@ -119,18 +252,18 @@</span> github.com&#47;client9&#47;misspell v0.3.4&#47;go.mod h1:qj6jICC3Q7zFZvVWo7KLAzC3yx5G7kyvSDkc90ppPyw=
 github.com&#47;cloudflare&#47;cloudflare-go v0.79.0 h1:ErwCYDjFCYppDJlDJ&#47;5WhsSmzegAUe2+K9qgFyQDg3M=
 github.com&#47;cloudflare&#47;cloudflare-go v0.79.0&#47;go.mod h1:gkHQf9xEubaQPEuerBuoinR9P8bf8a05Lq0X6WKy1Oc=
 github.com&#47;cncf&#47;udpa&#47;go v0.0.0-20191209042840-269d4d468f6f&#47;go.mod h1:M8M6+tZqaGXZJjfX53e64911xZQV5JYwmTeXPW+k8Sc=
<span class="term-fg31">-github.com&#47;cockroachdb&#47;datadriven v1.0.0&#47;go.mod h1:5Ib8Meh+jk1RlHIXej6Pzevx&#47;NLlNvQB9pmSBZErGA4=</span>
<span class="term-fg32">+github.com&#47;cncf&#47;udpa&#47;go v0.0.0-20220112060539-c52dc94e7fbe&#47;go.mod h1:6pvJx4me5XPnfI9Z40ddWsdw2W&#47;uZgQLFXToKeRcDiI=</span>
<span class="term-fg32">+github.com&#47;cncf&#47;xds&#47;go v0.0.0-20230105202645-06c439db220b&#47;go.mod h1:eXthEFrGJvWHgFFCl3hGmgk+&#47;aYT6PnTQLykKQRLhEs=</span>
 github.com&#47;cockroachdb&#47;datadriven v1.0.3-0.20230413201302-be42291fc80f h1:otljaYPt5hWxV3MUfO5dFPFiOXg9CyG5&#47;kCfayTqsJ4=
<span class="term-fg31">-github.com&#47;cockroachdb&#47;errors v1.6.1&#47;go.mod h1:tm6FTP5G81vwJ5lC0SizQo374JNCOPrHyXGitRJoDqM=</span>
<span class="term-fg31">-github.com&#47;cockroachdb&#47;errors v1.8.1 h1:A5+txlVZfOqFBDa4mGz2bUWSp0aHElvHX2bKkdbQu+Y=</span>
<span class="term-fg31">-github.com&#47;cockroachdb&#47;errors v1.8.1&#47;go.mod h1:qGwQn6JmZ+oMjuLwjWzUNqblqk0xl4CVV3SQbGwK7Ac=</span>
<span class="term-fg31">-github.com&#47;cockroachdb&#47;logtags v0.0.0-20190617123548-eb05cc24525f h1:o&#47;kfcElHqOiXqcou5a3rIlMc7oJbMQkeLk0VQJ7zgqY=</span>
<span class="term-fg31">-github.com&#47;cockroachdb&#47;logtags v0.0.0-20190617123548-eb05cc24525f&#47;go.mod h1:i&#47;u985jwjWRlyHXQbwatDASoW0RMlZ&#47;3i9yJHE2xLkI=</span>
<span class="term-fg32">+github.com&#47;cockroachdb&#47;datadriven v1.0.3-0.20230413201302-be42291fc80f&#47;go.mod h1:a9RdTaap04u637JoCzcUoIcDmvwSUtcUFtT&#47;C3kJlTU=</span>
<span class="term-fg32">+github.com&#47;cockroachdb&#47;errors v1.11.1 h1:xSEW75zKaKCWzR3OfxXUxgrk&#47;NtT4G1MiOv5lWZazG8=</span>
<span class="term-fg32">+github.com&#47;cockroachdb&#47;errors v1.11.1&#47;go.mod h1:8MUxA3Gi6b25tYlFEBGLf+D8aISL+M4MIpiWMSNRfxw=</span>
<span class="term-fg32">+github.com&#47;cockroachdb&#47;logtags v0.0.0-20230118201751-21c54148d20b h1:r6VH0faHjZeQy818SGhaone5OnYfxFR&#47;+AzdY3sf5aE=</span>
<span class="term-fg32">+github.com&#47;cockroachdb&#47;logtags v0.0.0-20230118201751-21c54148d20b&#47;go.mod h1:Vz9DsVWQQhf3vs21MhPMZpMGSht7O&#47;2vFW2xusFUVOs=</span>
 github.com&#47;cockroachdb&#47;pebble v0.0.0-20230928194634-aa077af62593 h1:aPEJyR4rPBvDmeyi+l&#47;FS&#47;VtA00IWvjeFvjen1m1l1A=
 github.com&#47;cockroachdb&#47;pebble v0.0.0-20230928194634-aa077af62593&#47;go.mod h1:6hk1eMY&#47;u5t+Cf18q5lFMUA1Rc+Sm5I6Ra1QuPyxXCo=
<span class="term-fg31">-github.com&#47;cockroachdb&#47;redact v1.0.8 h1:8QG&#47;764wK+vmEYoOlfobpe12EQcS81ukx&#47;a4hdVMxNw=</span>
<span class="term-fg31">-github.com&#47;cockroachdb&#47;redact v1.0.8&#47;go.mod h1:BVNblN9mBWFyMyqK1k3AAiSxhvhfK2oOZZ2lK+dpvRg=</span>
<span class="term-fg31">-github.com&#47;cockroachdb&#47;sentry-go v0.6.1-cockroachdb.2 h1:IKgmqgMQlVJIZj19CdocBeSfSaiCbEBZGKODaixqtHM=</span>
<span class="term-fg32">+github.com&#47;cockroachdb&#47;redact v1.1.5 h1:u1PMllDkdFfPWaNGMyLD1+so+aq3uUItthCFqzwPJ30=</span>
<span class="term-fg32">+github.com&#47;cockroachdb&#47;redact v1.1.5&#47;go.mod h1:BVNblN9mBWFyMyqK1k3AAiSxhvhfK2oOZZ2lK+dpvRg=</span>
 github.com&#47;cockroachdb&#47;sentry-go v0.6.1-cockroachdb.2&#47;go.mod h1:8BT+cPK6xvFOcRlk0R8eg+OTkcqI6baNH4xAkpiYVvQ=
 github.com&#47;cockroachdb&#47;tokenbucket v0.0.0-20230807174530-cc333fc44b06 h1:zuQyyAKVxetITBuuhv3BI9cMrmStnpT18zmgmTxunpo=
 github.com&#47;cockroachdb&#47;tokenbucket v0.0.0-20230807174530-cc333fc44b06&#47;go.mod h1:7nc4anLGjupUW&#47;PeY5qiNYsdNXj7zopG+eqsS7To5IQ=
<span class="term-fg36">@@ -139,10 +272,6 @@</span> github.com&#47;consensys&#47;bavard v0.1.13 h1:oLhMLOFGTLdlda&#47;kma4VOJazblc7IM5y5QPd2A&#47;YjhQ=
 github.com&#47;consensys&#47;bavard v0.1.13&#47;go.mod h1:9ItSMtA&#47;dXMAiL7BG6bqW2m3NdSEObYWoH223nGHukI=
 github.com&#47;consensys&#47;gnark-crypto v0.12.1 h1:lHH39WuuFgVHONRl3J0LRBtuYdQTumFSDtJF7HpyG8M=
 github.com&#47;consensys&#47;gnark-crypto v0.12.1&#47;go.mod h1:v2Gy7L&#47;4ZRosZ7Ivs+9SfUDr0f5UlG+EM5t7MPHiLuY=
<span class="term-fg31">-github.com&#47;coreos&#47;etcd v3.3.10+incompatible&#47;go.mod h1:uF7uidLiAD3TWHmW31ZFd&#47;JWoc32PjwdhPthX9715RE=</span>
<span class="term-fg31">-github.com&#47;coreos&#47;go-etcd v2.0.0+incompatible&#47;go.mod h1:Jez6KQU2B&#47;sWsbdaef3ED8NzMklzPG4d5KIOhIy30Tk=</span>
<span class="term-fg31">-github.com&#47;coreos&#47;go-semver v0.2.0&#47;go.mod h1:nnelYz7RCh+5ahJtPPxZlU+153eP4D4r3EedlOD2RNk=</span>
<span class="term-fg31">-github.com&#47;cpuguy83&#47;go-md2man v1.0.10&#47;go.mod h1:SmD6nW6nTyfqj6ABTjUi3V3JVMnlJmwcJI5acqYI6dE=</span>
 github.com&#47;cpuguy83&#47;go-md2man&#47;v2 v2.0.2 h1:p1EgwI&#47;C7NhT0JmVkwCD2ZBK8j4aeHQX2pMHHBfMQ6w=
 github.com&#47;cpuguy83&#47;go-md2man&#47;v2 v2.0.2&#47;go.mod h1:tgQtvFlXSQOSOSIRvRPT7W67SCa46tRHOmNcaadrF8o=
 github.com&#47;crate-crypto&#47;go-ipa v0.0.0-20231025140028-3c0104f4b233 h1:d28BXYi+wUpz1KBmiF9bWrjEMacUEREV6MBi2ODnrfQ=
<span class="term-fg36">@@ -162,28 +291,26 @@</span> github.com&#47;decred&#47;dcrd&#47;dcrec&#47;secp256k1&#47;v4 v4.0.1 h1:YLtO71vCjJRCBcrPMtQ9nqBsqpA1m5sE92cU+pd5Mcc=
 github.com&#47;decred&#47;dcrd&#47;dcrec&#47;secp256k1&#47;v4 v4.0.1&#47;go.mod h1:hyedUtir6IdtD&#47;7lIxGeCxkaw7y45JueMRL4DIyJDKs=
 github.com&#47;deepmap&#47;oapi-codegen v1.6.0 h1:w&#47;d1ntwh91XI0b&#47;8ja7+u5SvA4IFfM0UNNLmiDR1gg0=
 github.com&#47;deepmap&#47;oapi-codegen v1.6.0&#47;go.mod h1:ryDa9AgbELGeB+YEXE1dR53yAjHwFvE9iAUlWl9Al3M=
<span class="term-fg31">-github.com&#47;dgraph-io&#47;badger v1.6.0&#47;go.mod h1:zwt7syl517jmP8s94KqSxTlM6IMsdhYy6psNgSztDR4=</span>
 github.com&#47;dgrijalva&#47;jwt-go v3.2.0+incompatible&#47;go.mod h1:E3ru+11k8xSBh+hMPgOLZmtrrCbhqsmaPHjLKYnJCaQ=
<span class="term-fg31">-github.com&#47;dgryski&#47;go-farm v0.0.0-20190423205320-6a90982ecee2&#47;go.mod h1:SqUrOPUnsFjfmXRMNPybcSiG0BgUW2AuFH8PAnS2iTw=</span>
 github.com&#47;dlclark&#47;regexp2 v1.4.1-0.20201116162257-a2a8dda75c91&#47;go.mod h1:2pZnwuY&#47;m+8K6iRw6wQdMtk+rH5tNGR1i55kozfMjCc=
 github.com&#47;dlclark&#47;regexp2 v1.7.0 h1:7lJfhqlPssTb1WQx4yvTHN0uElPEv52sbaECrAQxjAo=
 github.com&#47;dlclark&#47;regexp2 v1.7.0&#47;go.mod h1:DHkYz0B9wPfa6wondMfaivmHpzrQ3v9q8cnmRbL6yW8=
 github.com&#47;dnaeon&#47;go-vcr v1.2.0 h1:zHCHvJYTMh1N7xnV7zf1m1GPBF9Ad0Jk&#47;whtQ1663qI=
<span class="term-fg32">+github.com&#47;dnaeon&#47;go-vcr v1.2.0&#47;go.mod h1:R4UdLID7HZT3taECzJs4YgbbH6PIGXB6W&#47;sc5OLb6RQ=</span>
 github.com&#47;dop251&#47;goja v0.0.0-20211022113120-dc8c55024d06&#47;go.mod h1:R9ET47fwRVRPZnOGvHxxhuZcbrMCuiqOz3Rlrh4KSnk=
 github.com&#47;dop251&#47;goja v0.0.0-20230806174421-c933cf95e127 h1:qwcF+vdFrvPSEUDSX5RVoRccG8a5DhOdWdQ4zN62zzo=
 github.com&#47;dop251&#47;goja v0.0.0-20230806174421-c933cf95e127&#47;go.mod h1:QMWlm50DNe14hD7t24KEqZuUdC9sOTy8W6XbCU1mlw4=
 github.com&#47;dop251&#47;goja_nodejs v0.0.0-20210225215109-d91c329300e7&#47;go.mod h1:hn7BA7c8pLvoGndExHudxTDKZ84Pyvv+90pbBjbTz0Y=
 github.com&#47;dop251&#47;goja_nodejs v0.0.0-20211022123610-8dd9abb0616d&#47;go.mod h1:DngW8aVqWbuLRMHItjPUyqdj+HWPvnQe8V8y1nDpIbM=
<span class="term-fg31">-github.com&#47;dustin&#47;go-humanize v1.0.0&#47;go.mod h1:HtrtbFcZ19U5GC7JDqmcUSB87Iq5E25KnS6fMYU6eOk=</span>
 github.com&#47;eknkc&#47;amber v0.0.0-20171010120322-cdade1c07385&#47;go.mod h1:0vRUJqYpeSZifjYj7uP3BG&#47;gKcuzL9xWVV&#47;Y+cK33KM=
 github.com&#47;envoyproxy&#47;go-control-plane v0.9.0&#47;go.mod h1:YTl&#47;9mNaCwkRvm6d1a2C3ymFceY&#47;DCBVvsKhRF0iEA4=
 github.com&#47;envoyproxy&#47;go-control-plane v0.9.1-0.20191026205805-5f8ba28d4473&#47;go.mod h1:YTl&#47;9mNaCwkRvm6d1a2C3ymFceY&#47;DCBVvsKhRF0iEA4=
 github.com&#47;envoyproxy&#47;go-control-plane v0.9.4&#47;go.mod h1:6rpuAdCZL397s3pYoYcLgu1mIlRU8Am5FuJP05cCM98=
<span class="term-fg32">+github.com&#47;envoyproxy&#47;go-control-plane v0.10.3&#47;go.mod h1:fJJn&#47;j26vwOu972OllsvAgJJM&#47;&#47;w9BV6Fxbg2LuVd34=</span>
 github.com&#47;envoyproxy&#47;protoc-gen-validate v0.1.0&#47;go.mod h1:iSmxcyjqTsJpI2R4NaDN7+kN2VEUnK&#47;pcBlmesArF7c=
<span class="term-fg31">-github.com&#47;etcd-io&#47;bbolt v1.3.3&#47;go.mod h1:ZF2nL25h33cCyBtcyWeZ2&#47;I3HQOfTP+0PIEvHjkjCrw=</span>
<span class="term-fg32">+github.com&#47;envoyproxy&#47;protoc-gen-validate v0.9.1&#47;go.mod h1:OKNgG7TCp5pF4d6XftA0++PMirau2&#47;yoOwVac3AbF2w=</span>
 github.com&#47;ethereum&#47;c-kzg-4844 v0.4.0 h1:3MS1s4JtA868KpJxroZoepdV0ZKBp3u&#47;O5HcZ7R3nlY=
 github.com&#47;ethereum&#47;c-kzg-4844 v0.4.0&#47;go.mod h1:VewdlzQmpT5QSrVhbBuGoCdFJkpaJlO1aQputP83wc0=
<span class="term-fg31">-github.com&#47;fasthttp-contrib&#47;websocket v0.0.0-20160511215533-1f3b11f56072&#47;go.mod h1:duJ4Jxv5lDcvg4QuQr0oowTf7dz4&#47;CR8NtyCooz9HL8=</span>
 github.com&#47;fatih&#47;color v1.13.0 h1:8LOYc1KYPPmyKMuN8QV2DNRWNbLo6LZ0iLs8+mlH53w=
 github.com&#47;fatih&#47;color v1.13.0&#47;go.mod h1:kLAiJbzzSOZDVNGyDpeOxJ47H46qBXwg5ILebYFFOfk=
 github.com&#47;fatih&#47;structs v1.1.0&#47;go.mod h1:9NiDSp5zOcgEDl+j00MP&#47;WkGVPOlPRLejGD8Ga6PJ7M=
<span class="term-fg36">@@ -193,26 +320,27 @@</span> github.com&#47;fjl&#47;gencodec v0.0.0-20230517082657-f9840df7b83e h1:bBLctRc7kr01YGvaDfgLbTwjFNW5jdp5y5rj8XXBHfY=
 github.com&#47;fjl&#47;gencodec v0.0.0-20230517082657-f9840df7b83e&#47;go.mod h1:AzA8Lj6YtixmJWL+wkKoBGsLWy9gFrAzi4g+5bCKwpY=
 github.com&#47;fjl&#47;memsize v0.0.2 h1:27txuSD9or+NZlnOWdKUxeBzTAUkWCVh+4Gf2dWFOzA=
 github.com&#47;fjl&#47;memsize v0.0.2&#47;go.mod h1:VvhXpOYNQvB+uIk2RvXzuaQtkQJzzIx6lSBe1xv7hi0=
<span class="term-fg31">-github.com&#47;flosch&#47;pongo2 v0.0.0-20190707114632-bbf5a6c351f4&#47;go.mod h1:T9YF2M40nIgbVgp3rreNmTged+9HrbNTIQf1PsaIiTA=</span>
<span class="term-fg32">+github.com&#47;flosch&#47;pongo2&#47;v4 v4.0.2&#47;go.mod h1:B5ObFANs&#47;36VwxxlgKpdchIJHMvHB562PW+BWPhwZD8=</span>
 github.com&#47;fsnotify&#47;fsnotify v1.4.7&#47;go.mod h1:jwhsz4b93w&#47;PPRr&#47;qN1Yymfu8t87LnFCMoQvtojpjFo=
 github.com&#47;fsnotify&#47;fsnotify v1.4.9&#47;go.mod h1:znqG4EE+3YCdAaPaxE2ZRY&#47;06pZUdp0tY4IgpuI1SZQ=
 github.com&#47;fsnotify&#47;fsnotify v1.6.0 h1:n+5WquG0fcWoWp6xPWfHdbskMCQaFnG6PfBrh1Ky4HY=
 github.com&#47;fsnotify&#47;fsnotify v1.6.0&#47;go.mod h1:sl3t1tCWJFWoRz9R8WJCbQihKKwmorjAbSClcnxKAGw=
 github.com&#47;garslo&#47;gogen v0.0.0-20170306192744-1d203ffc1f61 h1:IZqZOB2fydHte3kUgxrzK5E1fW7RQGeDwE8F&#47;ZZnUYc=
 github.com&#47;garslo&#47;gogen v0.0.0-20170306192744-1d203ffc1f61&#47;go.mod h1:Q0X6pkwTILDlzrGEckF6HKjXe48EgsY&#47;l7K7vhY4MW8=
<span class="term-fg31">-github.com&#47;gavv&#47;httpexpect v2.0.0+incompatible&#47;go.mod h1:x+9tiU1YnrOvnB725RkpoLv1M62hOWzwo5OXotisrKc=</span>
 github.com&#47;gballet&#47;go-libpcsclite v0.0.0-20190607065134-2772fd86a8ff h1:tY80oXqGNY4FhTFhk+o9oFHGINQ&#47;+vhlm8HFzi6znCI=
 github.com&#47;gballet&#47;go-libpcsclite v0.0.0-20190607065134-2772fd86a8ff&#47;go.mod h1:x7DCsMOv1taUwEWCzT4cmDeAkigA5&#47;QCwUodaVOe8Ww=
 github.com&#47;gballet&#47;go-verkle v0.1.1-0.20231031103413-a67434b50f46 h1:BAIP2GihuqhwdILrV+7GJel5lyPV3u1+PgzrWLc0TkE=
 github.com&#47;gballet&#47;go-verkle v0.1.1-0.20231031103413-a67434b50f46&#47;go.mod h1:QNpY22eby74jVhqH4WhDLDwxc&#47;vqsern6pW+u2kbkpc=
 github.com&#47;getkin&#47;kin-openapi v0.53.0&#47;go.mod h1:7Yn5whZr5kJi6t+kShccXS8ae1APpYTW6yheSwk8Yi4=
<span class="term-fg32">+github.com&#47;getsentry&#47;sentry-go v0.27.0 h1:Pv98CIbtB3LkMWmXi4Joa5OOcwbmnX88sF5qbK3r3Ps=</span>
<span class="term-fg32">+github.com&#47;getsentry&#47;sentry-go v0.27.0&#47;go.mod h1:lc76E2QywIyW8WuBnwl8Lc4bkmQH4+w1gwTf25trprY=</span>
<span class="term-fg32">+github.com&#47;ghemawat&#47;stream v0.0.0-20171120220530-696b145b53b9&#47;go.mod h1:106OIgooyS7OzLDOpUGgm9fA3bQENb&#47;cFSyyBmMoJDs=</span>
 github.com&#47;ghodss&#47;yaml v1.0.0&#47;go.mod h1:4dBDuWmgqj2HViK6kFavaiC9ZROes6MMH2rRYeMEF04=
<span class="term-fg31">-github.com&#47;gin-contrib&#47;sse v0.0.0-20190301062529-5545eab6dad3&#47;go.mod h1:VJ0WA2NBN22VlZ2dKZQPAPnyWw5XTlK1KymzLKsr59s=</span>
<span class="term-fg31">-github.com&#47;gin-gonic&#47;gin v1.4.0&#47;go.mod h1:OW2EZn3DO8Ln9oIKOvM++LBO+5UPHJJDH72&#47;q&#47;3rZdM=</span>
<span class="term-fg31">-github.com&#47;go-check&#47;check v0.0.0-20180628173108-788fd7840127&#47;go.mod h1:9ES+weclKsC9YodN5RgxqK&#47;VD9HM9JsCSh7rNhMZE98=</span>
<span class="term-fg32">+github.com&#47;gin-contrib&#47;sse v0.1.0&#47;go.mod h1:RHrZQHXnP2xjPF+u1gW&#47;2HnVO7nvIa9PG3Gm+fLHvGI=</span>
<span class="term-fg32">+github.com&#47;gin-gonic&#47;gin v1.8.1&#47;go.mod h1:ji8BvRH1azfM+SYow9zQ6SZMvR8qOMZHmsCuWR9tTTk=</span>
 github.com&#47;go-chi&#47;chi&#47;v5 v5.0.0&#47;go.mod h1:BBug9lr0cqtdAhsu6R4AAdvufI0&#47;XBzAQSsUqJpoZOs=
<span class="term-fg31">-github.com&#47;go-errors&#47;errors v1.0.1 h1:LUHzmkK3GUKUrL&#47;1gfBUxAHzcev3apQlezX&#47;+O7ma6w=</span>
<span class="term-fg31">-github.com&#47;go-errors&#47;errors v1.0.1&#47;go.mod h1:f4zRHt4oKfwPJE5k8C9vpYG+aDHdBFUsgrm6&#47;TyX73Q=</span>
<span class="term-fg32">+github.com&#47;go-errors&#47;errors v1.4.2 h1:J6MZopCL4uSllY1OfXM374weqZFFItUbrImctkmUxIA=</span>
<span class="term-fg32">+github.com&#47;go-errors&#47;errors v1.4.2&#47;go.mod h1:sIVyrIiJhuEF+Pj9Ebtd6P&#47;rEYROXFi3BopGUQ5a5Og=</span>
 github.com&#47;go-gl&#47;glfw v0.0.0-20190409004039-e6da0acd62b1&#47;go.mod h1:vR7hzQXu2zJy9AVAgeJqvqgH9Q5CA+iKCZ2gyEVpxRU=
 github.com&#47;go-gl&#47;glfw&#47;v3.3&#47;glfw v0.0.0-20191125211704-12ad95a8df72&#47;go.mod h1:tQ2UAYgL5IevRw8kRxooKSPJfGvJ9fJQFa0TUsXzTg8=
 github.com&#47;go-gl&#47;glfw&#47;v3.3&#47;glfw v0.0.0-20200222043503-6f7a984d4dc4&#47;go.mod h1:tQ2UAYgL5IevRw8kRxooKSPJfGvJ9fJQFa0TUsXzTg8=
<span class="term-fg36">@@ -222,32 +350,34 @@</span> github.com&#47;go-kit&#47;log v0.1.0&#47;go.mod h1:zbhenjAZHb184qTLMA9ZjW7ThYL0H2mk7Q6pNt4vbaY=
 github.com&#47;go-logfmt&#47;logfmt v0.3.0&#47;go.mod h1:Qt1PoO58o5twSAckw1HlFXLmHsOX5&#47;0LbT9GBnD5lWE=
 github.com&#47;go-logfmt&#47;logfmt v0.4.0&#47;go.mod h1:3RMwSq7FuexP4Kalkev3ejPJsZTpXXBr9+V4qmtdjCk=
 github.com&#47;go-logfmt&#47;logfmt v0.5.0&#47;go.mod h1:wCYkCAKZfumFQihp8CzCvQ3paCTfi41vtzG1KdI&#47;P7A=
<span class="term-fg32">+github.com&#47;go-logr&#47;logr v1.2.3&#47;go.mod h1:jdQByPbusPIv2&#47;zmleS9BjJVeZ6kBagPoEUsqbVz&#47;1A=</span>
 github.com&#47;go-martini&#47;martini v0.0.0-20170121215854-22fa46961aab&#47;go.mod h1:&#47;P9AEU963A2AYjv4d1V5eVL1CQbEJq6aCNHDDjibzu8=
 github.com&#47;go-ole&#47;go-ole v1.2.5&#47;go.mod h1:pprOEPIfldk&#47;42T2oK7lQ4v4JSDwmV0As9GaiUsvbm0=
 github.com&#47;go-ole&#47;go-ole v1.3.0 h1:Dt6ye7+vXGIKZ7Xtk4s6&#47;xVdGDQynvom7xCFEdWr6uE=
 github.com&#47;go-ole&#47;go-ole v1.3.0&#47;go.mod h1:5LS6F96DhAwUc7C+1HLexzMXY1xGRSryjyPPKW6zv78=
 github.com&#47;go-openapi&#47;jsonpointer v0.19.5&#47;go.mod h1:Pl9vOtqEWErmShwVjC8pYs9cog34VGT37dQOVbmoatg=
 github.com&#47;go-openapi&#47;swag v0.19.5&#47;go.mod h1:POnQmlKehdgb5mhVOsnJFsivZCEZ&#47;vjK9gh66Z9tfKk=
<span class="term-fg32">+github.com&#47;go-playground&#47;locales v0.14.0&#47;go.mod h1:sawfccIbzZTqEDETgFXqTho0QybSa7l++s0DH+LDiLs=</span>
<span class="term-fg32">+github.com&#47;go-playground&#47;universal-translator v0.18.0&#47;go.mod h1:UvRDBj+xPUEGrFYl+lu&#47;H90nyDXpg0fqeB&#47;AQUGNTVA=</span>
<span class="term-fg32">+github.com&#47;go-playground&#47;validator&#47;v10 v10.11.1&#47;go.mod h1:i+3WkQ1FvaUjjxh1kSvIA4dMGDBiPU55YFDl0WbKdWU=</span>
 github.com&#47;go-sourcemap&#47;sourcemap v2.1.3+incompatible h1:W1iEw64niKVGogNgBN3ePyLFfuisuzeidWPMPWmECqU=
 github.com&#47;go-sourcemap&#47;sourcemap v2.1.3+incompatible&#47;go.mod h1:F8jJfvm2KbVjc5NqelyYJmf&#47;v5J0dwNLS2mL4sNA1Jg=
 github.com&#47;go-stack&#47;stack v1.8.0&#47;go.mod h1:v0f6uXyyMGvRgIKkXu+yp6POWl0qKG85gN&#47;melR3HDY=
<span class="term-fg31">-github.com&#47;gobwas&#47;httphead v0.0.0-20180130184737-2c6c146eadee&#47;go.mod h1:L0fX3K22YWvt&#47;FAX9NnzrNzcI4wNYi9Yku4O0LKYflo=</span>
<span class="term-fg31">-github.com&#47;gobwas&#47;pool v0.2.0&#47;go.mod h1:q8bcK0KcYlCgd9e7WYLm9LpyS+YeLd8JVDW6WezmKEw=</span>
<span class="term-fg31">-github.com&#47;gobwas&#47;ws v1.0.2&#47;go.mod h1:szmBTxLgaFppYjEmNtny&#47;v3w89xOydFnnZMcgRRu&#47;EM=</span>
<span class="term-fg32">+github.com&#47;go-stack&#47;stack v1.8.1&#47;go.mod h1:dcoOX6HbPZSZptuspn9bctJ+N&#47;CnF5gGygcUP3XYfe4=</span>
<span class="term-fg32">+github.com&#47;go-task&#47;slim-sprig v0.0.0-20230315185526-52ccab3ef572&#47;go.mod h1:9Pwr4B2jHnOSGXyyzV8ROjYa2ojvAY6HCGYYfMoC3Ls=</span>
 github.com&#47;goccy&#47;go-json v0.10.2 h1:CrxCmQqYDkv1z7lO7Wbh2HN93uovUHgrECaO5ZrCXAU=
 github.com&#47;goccy&#47;go-json v0.10.2&#47;go.mod h1:6MelG93GURQebXPDq3khkgXZkazVtN9CRI+MGFi0w8I=
 github.com&#47;gofrs&#47;flock v0.8.1 h1:+gYjHKf32LDeiEEFhQaotPbLuUXjY5ZqxKgXy7n59aw=
 github.com&#47;gofrs&#47;flock v0.8.1&#47;go.mod h1:F1TvTiK9OcQqauNUHlbJvyl9Qa1QvF&#47;gOUDKA14jxHU=
<span class="term-fg31">-github.com&#47;gogo&#47;googleapis v0.0.0-20180223154316-0cd9801be74a&#47;go.mod h1:gf4bu3Q80BeJ6H1S1vYPm8&#47;ELATdvryBaNFGgqEef3s=</span>
<span class="term-fg32">+github.com&#47;gogo&#47;googleapis v1.4.1&#47;go.mod h1:2lpHqI5OcWCtVElxXnPt+s8oJvMpySlOyM6xDCrzib4=</span>
 github.com&#47;gogo&#47;protobuf v1.1.1&#47;go.mod h1:r8qH&#47;GZQm5c6nD&#47;R0oafs1akxWv10x8SbQlK7atdtwQ=
<span class="term-fg31">-github.com&#47;gogo&#47;protobuf v1.2.0&#47;go.mod h1:r8qH&#47;GZQm5c6nD&#47;R0oafs1akxWv10x8SbQlK7atdtwQ=</span>
<span class="term-fg31">-github.com&#47;gogo&#47;protobuf v1.3.1&#47;go.mod h1:SlYgWuQ5SjCEi6WLHjHCa1yvBfUnHcTbrrZtXPKa29o=</span>
 github.com&#47;gogo&#47;protobuf v1.3.2 h1:Ov1cvc58UF3b5XjBnZv7+opcTcQFZebYjWzi34vdm4Q=
 github.com&#47;gogo&#47;protobuf v1.3.2&#47;go.mod h1:P1XiOD3dCwIKUDQYPy72D8LYyHL2YPYrpS2s69NZV8Q=
 github.com&#47;gogo&#47;status v1.1.0&#47;go.mod h1:BFv9nrluPLmrS0EmGVvLaPNmRosr9KapBYd5&#47;hpY1WM=
 github.com&#47;golang-jwt&#47;jwt&#47;v4 v4.5.0 h1:7cYmW1XlMY7h7ii7UhUyChSgS5wUJEnm9uZVTGqOWzg=
 github.com&#47;golang-jwt&#47;jwt&#47;v4 v4.5.0&#47;go.mod h1:m21LjoU+eqJr34lmDMbreY2eSTRJ1cv77w39&#47;MY0Ch0=
 github.com&#47;golang&#47;glog v0.0.0-20160126235308-23def4e6c14b&#47;go.mod h1:SBH7ygxi8pfUlaOkMMuAQtPIUF8ecWP5IEl&#47;CR7VP2Q=
<span class="term-fg32">+github.com&#47;golang&#47;glog v1.0.0&#47;go.mod h1:EWib&#47;APOK0SL3dFbYqvxE3UYd8E6s1ouQ7iEp&#47;0LWV4=</span>
 github.com&#47;golang&#47;groupcache v0.0.0-20190702054246-869f871628b6&#47;go.mod h1:cIg4eruTrX1D+g88fzRXU5OdNfaM+9IcxsU14FzY7Hc=
 github.com&#47;golang&#47;groupcache v0.0.0-20191227052852-215e87163ea7&#47;go.mod h1:cIg4eruTrX1D+g88fzRXU5OdNfaM+9IcxsU14FzY7Hc=
 github.com&#47;golang&#47;groupcache v0.0.0-20200121045136-8c9f03a8e57e&#47;go.mod h1:cIg4eruTrX1D+g88fzRXU5OdNfaM+9IcxsU14FzY7Hc=
<span class="term-fg36">@@ -280,7 +410,6 @@</span> github.com&#47;golang&#47;snappy v0.0.4&#47;go.mod h1:&#47;XxbfmMg8lxefKM7IXC3fBNl&#47;7bRcc72aCRzEWrmP2Q=
 github.com&#47;golang&#47;snappy v0.0.5-0.20220116011046-fa5810519dcb h1:PBC98N2aIaM3XXiurYmW7fx4GZkL8feAMVq7nEjURHk=
 github.com&#47;golang&#47;snappy v0.0.5-0.20220116011046-fa5810519dcb&#47;go.mod h1:&#47;XxbfmMg8lxefKM7IXC3fBNl&#47;7bRcc72aCRzEWrmP2Q=
 github.com&#47;golangci&#47;lint-1 v0.0.0-20181222135242-d2cdd8c08219&#47;go.mod h1:&#47;X8TswGSh1pIozq4ZwCfxS0WA5JGXguxk94ar&#47;4c87Y=
<span class="term-fg31">-github.com&#47;gomodule&#47;redigo v1.7.1-0.20190724094224-574c33c3df38&#47;go.mod h1:B4C85qUVwatsJoIUNIfCRsp7qO0iAmpGFZ4EELWSbC4=</span>
 github.com&#47;google&#47;btree v0.0.0-20180813153112-4030bb1f1f0c&#47;go.mod h1:lNA+9X1NB3Zf8V7Ke586lFgjr2dZNuvo3lPJSGZ5JPQ=
 github.com&#47;google&#47;btree v1.0.0&#47;go.mod h1:lNA+9X1NB3Zf8V7Ke586lFgjr2dZNuvo3lPJSGZ5JPQ=
 github.com&#47;google&#47;go-cmp v0.2.0&#47;go.mod h1:oXzfMopK8JAjlY9xF4vHSVASa0yLyX7SntLO5aqRK0M=
<span class="term-fg36">@@ -296,7 +425,6 @@</span> github.com&#47;google&#47;go-cmp v0.5.5&#47;go.mod h1:v8dTdLbMG2kIc&#47;vJvl+f65V22dbkXbowE6jgT&#47;gNBxE=
 github.com&#47;google&#47;go-cmp v0.5.8&#47;go.mod h1:17dUlkBOakJ0+DkrSSNjCkIjxS6bF9zb3elmeNGIjoY=
 github.com&#47;google&#47;go-cmp v0.5.9 h1:O2Tfq5qg4qc4AmwVlvv0oLiVAGB7enBSJ2x2DqQFi38=
 github.com&#47;google&#47;go-cmp v0.5.9&#47;go.mod h1:17dUlkBOakJ0+DkrSSNjCkIjxS6bF9zb3elmeNGIjoY=
<span class="term-fg31">-github.com&#47;google&#47;go-querystring v1.0.0&#47;go.mod h1:odCYkC5MyYFN7vkCjXpyrEuKhc&#47;BUO6wN&#47;zVPAxq5ck=</span>
 github.com&#47;google&#47;go-querystring v1.1.0 h1:AnCroh3fv4ZBgVIf1Iwtovgjaw&#47;GiKJo8M8yD&#47;fhyJ8=
 github.com&#47;google&#47;go-querystring v1.1.0&#47;go.mod h1:Kcdr2DB4koayq7X8pmAG4sNG59So17icRSOU623lUBU=
 github.com&#47;google&#47;gofuzz v1.0.0&#47;go.mod h1:dBl0BpW6vV&#47;+mYPU4Po3pmUjxk6FQPldtuIdl&#47;M65Eg=
<span class="term-fg36">@@ -319,25 +447,24 @@</span> github.com&#47;google&#47;uuid v1.3.0 h1:t6JiXgmwXMjEs8VusXIJk2BXHsn+wx8BZdTaoZ5fu7I=
 github.com&#47;google&#47;uuid v1.3.0&#47;go.mod h1:TIyPZe4MgqvfeYDBFedMoGGpEw&#47;LqOeaOT+nhxU+yHo=
 github.com&#47;googleapis&#47;gax-go&#47;v2 v2.0.4&#47;go.mod h1:0Wqv26UfaUD9n4G6kQubkQ+KchISgw+vpHVxEJEs9eg=
 github.com&#47;googleapis&#47;gax-go&#47;v2 v2.0.5&#47;go.mod h1:DWXyrwAJ9X0FpwwEdw+IPEYBICEFu5mhpdKc&#47;us6bOk=
<span class="term-fg31">-github.com&#47;gopherjs&#47;gopherjs v0.0.0-20181017120253-0766667cb4d1&#47;go.mod h1:wJfORRmW1u3UXTncJ5qlYoELFm8eSnnEO6hX4iZ3EWY=</span>
<span class="term-fg32">+github.com&#47;gorilla&#47;css v1.0.0&#47;go.mod h1:Dn721qIggHpt4+EFCcTLTU&#47;vk5ySda2ReITrtgBl60c=</span>
 github.com&#47;gorilla&#47;mux v1.8.0&#47;go.mod h1:DVbg23sWSpFRCP0SfiEN6jmj59UnW&#47;n46BH5rLB71So=
<span class="term-fg31">-github.com&#47;gorilla&#47;websocket v1.4.0&#47;go.mod h1:E7qHFY5m1UJ88s3WnNqhKjPHQ0heANvMoAMk2YaljkQ=</span>
 github.com&#47;gorilla&#47;websocket v1.4.2 h1:+&#47;TMaTYc4QFitKJxsQ7Yye35DkWvkdLcvGKqM+x0Ufc=
 github.com&#47;gorilla&#47;websocket v1.4.2&#47;go.mod h1:YR8l580nyteQvAITg2hZ9XVh4b55+EU&#47;adAjf1fMHhE=
 github.com&#47;graph-gophers&#47;graphql-go v1.3.0 h1:Eb9x&#47;q6MFpCLz7jBCiP&#47;WTxjSDrYLR1QY41SORZyNJ0=
 github.com&#47;graph-gophers&#47;graphql-go v1.3.0&#47;go.mod h1:9CQHMSxwO4MprSdzoIEobiHpoLtHm77vfxsvsIN5Vuc=
<span class="term-fg32">+github.com&#47;guptarohit&#47;asciigraph v0.5.5&#47;go.mod h1:dYl5wwK4gNsnFf9Zp+l06rFiDZ5YtXM6x7SRWZ3KGag=</span>
 github.com&#47;hashicorp&#47;go-bexpr v0.1.10 h1:9kuI5PFotCboP3dkDYFr&#47;wi0gg0QVbSNz5oFRpxn4uE=
 github.com&#47;hashicorp&#47;go-bexpr v0.1.10&#47;go.mod h1:oxlubA2vC&#47;gFVfX1A6JGp7ls7uCDlfJn732ehYYg+g0=
 github.com&#47;hashicorp&#47;go-cleanhttp v0.5.2 h1:035FKYIWjmULyFRBKPs8TBQoi0x6d9G4xc9neXJWAZQ=
 github.com&#47;hashicorp&#47;go-cleanhttp v0.5.2&#47;go.mod h1:kO&#47;YDlP8L1346E6Sodw+PrpBSV4&#47;SoxCXGY6BqNFT48=
 github.com&#47;hashicorp&#47;go-hclog v0.9.2&#47;go.mod h1:5CU+agLiy3J7N7QjHK5d05KxGsuXiQLrjA0H7acj2lQ=
 github.com&#47;hashicorp&#47;go-hclog v1.2.0 h1:La19f8d7WIlm4ogzNHB0JGqs5AUDAZ2UfCY4sJXcJdM=
<span class="term-fg32">+github.com&#47;hashicorp&#47;go-hclog v1.2.0&#47;go.mod h1:whpDNt7SSdeAju8AWKIWsul05p54N&#47;39EeqMAyrmvFQ=</span>
 github.com&#47;hashicorp&#47;go-retryablehttp v0.7.4 h1:ZQgVdpTdAL7WpMIwLzCfbalOcSUdkDZnpUv3&#47;+BxzFA=
 github.com&#47;hashicorp&#47;go-retryablehttp v0.7.4&#47;go.mod h1:Jy&#47;gPYAdjqffZ&#47;yFGCFV2doI5wjtH1ewM9u8iYVjtX8=
<span class="term-fg31">-github.com&#47;hashicorp&#47;go-version v1.2.0&#47;go.mod h1:fltr4n8CU8Ke44wwGCBoEymUuxUHl09ZGVZPK5anwXA=</span>
 github.com&#47;hashicorp&#47;golang-lru v0.5.0&#47;go.mod h1:&#47;m3WP610KZHVQ1SGc6re&#47;UDhFvYD7pJ4Ao+sR&#47;qLZy8=
 github.com&#47;hashicorp&#47;golang-lru v0.5.1&#47;go.mod h1:&#47;m3WP610KZHVQ1SGc6re&#47;UDhFvYD7pJ4Ao+sR&#47;qLZy8=
<span class="term-fg31">-github.com&#47;hashicorp&#47;hcl v1.0.0&#47;go.mod h1:E5yfLk+7swimpb2L&#47;Alb&#47;PJmXilQ&#47;rhwaUYs4T20WEQ=</span>
 github.com&#47;holiman&#47;billy v0.0.0-20240216141850-2abb0c79d3c4 h1:X4egAf&#47;gcS1zATw6wn4Ej8vjuVGxeHdan+bRb2ebyv4=
 github.com&#47;holiman&#47;billy v0.0.0-20240216141850-2abb0c79d3c4&#47;go.mod h1:5GuXa7vkL8u9FkFuWdVvfR5ix8hRB7DbOAaYULamFpc=
 github.com&#47;holiman&#47;bloomfilter&#47;v2 v2.0.3 h1:73e0e&#47;V0tCydx14a0SCYS&#47;EWCxgwLZ18CZcZKVu0fao=
<span class="term-fg36">@@ -347,10 +474,11 @@</span> github.com&#47;holiman&#47;uint256 v1.2.4&#47;go.mod h1:EOMSn4q6Nyt9P6efbI3bueV4e1b3dGlUCXeiRV4ng7E=
 github.com&#47;hpcloud&#47;tail v1.0.0&#47;go.mod h1:ab1qPbhIpdTxEkNHXyeSf5vhxWSCs&#47;tWer42PpOxQnU=
 github.com&#47;huin&#47;goupnp v1.3.0 h1:UvLUlWDNpoUdYzb2TCn+MuTWtcjXKSza2n6CBdQ0xXc=
 github.com&#47;huin&#47;goupnp v1.3.0&#47;go.mod h1:gnGPsThkYa7bFi&#47;KWmEysQRf48l2dvR5bxr2OFckNX8=
<span class="term-fg31">-github.com&#47;hydrogen18&#47;memlistener v0.0.0-20141126152155-54553eb933fb&#47;go.mod h1:qEIFzExnS6016fRpRfxrExeVn2gbClQA99gQhnIcdhE=</span>
<span class="term-fg32">+github.com&#47;hydrogen18&#47;memlistener v1.0.0&#47;go.mod h1:qEIFzExnS6016fRpRfxrExeVn2gbClQA99gQhnIcdhE=</span>
 github.com&#47;ianlancetaylor&#47;demangle v0.0.0-20181102032728-5e5cf60278f6&#47;go.mod h1:aSSvb&#47;t6k1mPoxDqO4vJh6VOCGPwU4O0C2&#47;Eqndh1Sc=
 github.com&#47;ianlancetaylor&#47;demangle v0.0.0-20220319035150-800ac71e25c2&#47;go.mod h1:aYm2&#47;VgdVmcIU8iMfdMvDMsRAQjcfZSKFby6HOFvi&#47;w=
<span class="term-fg31">-github.com&#47;imkira&#47;go-interpol v1.1.0&#47;go.mod h1:z0h2&#47;2T3XF8kyEPpRgJ3kmNv+C43p+I&#47;CoI+jC3w2iA=</span>
<span class="term-fg32">+github.com&#47;ilyakaznacheev&#47;cleanenv v1.5.0 h1:0VNZXggJE2OYdXE87bfSSwGxeiGt9moSR2lOrsHHvr4=</span>
<span class="term-fg32">+github.com&#47;ilyakaznacheev&#47;cleanenv v1.5.0&#47;go.mod h1:a5aDzaJrLCQZsazHol1w8InnDcOX0OColm64SlIi6gk=</span>
 github.com&#47;inconshreveable&#47;mousetrap v1.0.0&#47;go.mod h1:PxqpIevigyE2G7u3NXJIT2ANytuPF1OarO4DADm73n8=
 github.com&#47;influxdata&#47;influxdb-client-go&#47;v2 v2.4.0 h1:HGBfZYStlx3Kqvsv1h2pJixbCl&#47;jhnFtxpKFAv9Tu5k=
 github.com&#47;influxdata&#47;influxdb-client-go&#47;v2 v2.4.0&#47;go.mod h1:vLNHdxTJkIf2mSLvGrpj8TCcISApPoXkaxP8g9uRlW8=
<span class="term-fg36">@@ -358,10 +486,7 @@</span> github.com&#47;influxdata&#47;influxdb1-client v0.0.0-20220302092344-a9ab5670611c h1:qSHzRbhzK8RdXOsAdfDgO49TtqC1oZ+acxPrkfTxcCs=
 github.com&#47;influxdata&#47;influxdb1-client v0.0.0-20220302092344-a9ab5670611c&#47;go.mod h1:qj24IKcXYK6Iy9ceXlo3Tc+vtHo9lIhSX5JddghvEPo=
 github.com&#47;influxdata&#47;line-protocol v0.0.0-20200327222509-2487e7298839 h1:W9WBk7wlPfJLvMCdtV4zPulc4uCPrlywQOmbFOhgQNU=
 github.com&#47;influxdata&#47;line-protocol v0.0.0-20200327222509-2487e7298839&#47;go.mod h1:xaLFMmpvUxqXtVkUJfg9QmT88cDaCJ3ZKgdZ78oO8Qo=
<span class="term-fg31">-github.com&#47;iris-contrib&#47;blackfriday v2.0.0+incompatible&#47;go.mod h1:UzZ2bDEoaSGPbkg6SAB4att1aAwTmVIx&#47;5gCVqeyUdI=</span>
<span class="term-fg31">-github.com&#47;iris-contrib&#47;go.uuid v2.0.0+incompatible&#47;go.mod h1:iz2lgM&#47;1UnEf1kP0L&#47;+fafWORmlnuysV2EMP8MW+qe0=</span>
<span class="term-fg31">-github.com&#47;iris-contrib&#47;i18n v0.0.0-20171121225848-987a633949d0&#47;go.mod h1:pMCz62A0xJL6I+umB2YTlFRwWXaDFA0jy+5HzGiJjqI=</span>
<span class="term-fg31">-github.com&#47;iris-contrib&#47;schema v0.0.1&#47;go.mod h1:urYA3uvUNG1TIIjOSCzHr9&#47;LmbQo8LrOcOqfqxa4hXw=</span>
<span class="term-fg32">+github.com&#47;iris-contrib&#47;schema v0.0.6&#47;go.mod h1:iYszG0IOsuIsfzjymw1kMzTL8YQcCWlm65f3wX8J5iA=</span>
 github.com&#47;jackpal&#47;go-nat-pmp v1.0.2 h1:KzKSgb7qkJvOUTqYl9&#47;Hg&#47;me3pWgBmERKrTGD7BdWus=
 github.com&#47;jackpal&#47;go-nat-pmp v1.0.2&#47;go.mod h1:QPH045xvCAeXUZOxsnwmrtiCoxIr9eob+4orBN1SBKc=
 github.com&#47;jedisct1&#47;go-minisign v0.0.0-20230811132847-661be99b8267 h1:TMtDYDHKYY15rFihtRfck&#47;bfFqNfvcabqvXAFQfAUpY=
<span class="term-fg36">@@ -370,6 +495,9 @@</span> github.com&#47;jmespath&#47;go-jmespath v0.4.0 h1:BEgLn5cpjn8UN1mAw4NjwDrS35OdebyEtFe+9YPoQUg=
 github.com&#47;jmespath&#47;go-jmespath v0.4.0&#47;go.mod h1:T8mJZnbsbmF+m6zOOFylbeCJqk5+pHWvzYPziyZiYoo=
 github.com&#47;jmespath&#47;go-jmespath&#47;internal&#47;testify v1.5.1 h1:shLQSRRSCCPj3f2gpwzGwWFoC7ycTf1rcQZHOlsJ6N8=
 github.com&#47;jmespath&#47;go-jmespath&#47;internal&#47;testify v1.5.1&#47;go.mod h1:L3OGu8Wl2&#47;fWfCI6z80xFu9LTZmf1ZRjMHUOPmWr69U=
<span class="term-fg32">+github.com&#47;joho&#47;godotenv v1.5.1 h1:7eLL&#47;+HRGLY0ldzfGMeQkb7vMd0as4CfYvUVzLqw0N0=</span>
<span class="term-fg32">+github.com&#47;joho&#47;godotenv v1.5.1&#47;go.mod h1:f4LDr5Voq0i2e&#47;R5DDNOoa2zzDfwtkZa6DnEwAbqwq4=</span>
<span class="term-fg32">+github.com&#47;josharian&#47;intern v1.0.0&#47;go.mod h1:5DoeVV0s6jJacbCEi61lwdGj&#47;aVlrQvzHFFd8Hwg&#47;&#47;Y=</span>
 github.com&#47;jpillora&#47;backoff v1.0.0&#47;go.mod h1:J&#47;6gKK9jxlEcS3zixgDgUAsiuZ7yrSoa&#47;FX5e0EB2j4=
 github.com&#47;json-iterator&#47;go v1.1.6&#47;go.mod h1:+SdeFBvtyEkXs7REEP0seUULqWtbJapLOCVDaaPEHmU=
 github.com&#47;json-iterator&#47;go v1.1.10&#47;go.mod h1:KdQUCv79m&#47;52Kvf8AW2vK1V8akMuk1QjK&#47;uOdHXbAo4=
<span class="term-fg36">@@ -377,33 +505,27 @@</span> github.com&#47;json-iterator&#47;go v1.1.11&#47;go.mod h1:KdQUCv79m&#47;52Kvf8AW2vK1V8akMuk1QjK&#47;uOdHXbAo4=
 github.com&#47;json-iterator&#47;go v1.1.12&#47;go.mod h1:e30LSqwooZae&#47;UwlEbR2852Gd8hjQvJoHmT4TnhNGBo=
 github.com&#47;jstemmer&#47;go-junit-report v0.0.0-20190106144839-af01ea7f8024&#47;go.mod h1:6v2b51hI&#47;fHJwM22ozAgKL4VKDeJcHhJFhtBdhmNjmU=
 github.com&#47;jstemmer&#47;go-junit-report v0.9.1&#47;go.mod h1:Brl9GWCQeLvo8nXZwPNNblvFj&#47;XSXhF0NWZEnDohbsk=
<span class="term-fg31">-github.com&#47;jtolds&#47;gls v4.20.0+incompatible&#47;go.mod h1:QJZ7F&#47;aHp+rZTRtaJ1ow&#47;lLfFfVYBRgL+9YlvaHOwJU=</span>
<span class="term-fg31">-github.com&#47;juju&#47;errors v0.0.0-20181118221551-089d3ea4e4d5&#47;go.mod h1:W54LbzXuIE0boCoNJfwqpmkKJ1O4TCTZMetAt6jGk7Q=</span>
<span class="term-fg31">-github.com&#47;juju&#47;loggo v0.0.0-20180524022052-584905176618&#47;go.mod h1:vgyd7OREkbtVEN&#47;8IXZe5Ooef3LQePvuBm9UWj6ZL8U=</span>
<span class="term-fg31">-github.com&#47;juju&#47;testing v0.0.0-20180920084828-472a3e8b2073&#47;go.mod h1:63prj8cnj0tU0S9OHjGJn+b1h0ZghCndfnbQolrYTwA=</span>
 github.com&#47;julienschmidt&#47;httprouter v1.2.0&#47;go.mod h1:SYymIcj16QtmaHHD7aYtjjsJG7VTCxuUUipMqKk8s4w=
 github.com&#47;julienschmidt&#47;httprouter v1.3.0 h1:U0609e9tgbseu3rBINet9P48AI&#47;D3oJs4dN7jwJOQ1U=
 github.com&#47;julienschmidt&#47;httprouter v1.3.0&#47;go.mod h1:JR6WtHb+2LUe8TCKY3cZOxFyyO8IZAc4RVcycCCAKdM=
<span class="term-fg31">-github.com&#47;k0kubun&#47;colorstring v0.0.0-20150214042306-9440f1994b88&#47;go.mod h1:3w7q1U84EfirKl04SVQ&#47;s7nPm1ZPhiXd34z40TNz36k=</span>
 github.com&#47;karalabe&#47;usb v0.0.2 h1:M6QQBNxF+CQ8OFvxrT90BA0qBOXymndZnk5q235mFc4=
 github.com&#47;karalabe&#47;usb v0.0.2&#47;go.mod h1:Od972xHfMJowv7NGVDiWVxk2zxnWgjLlJzE+F4F7AGU=
<span class="term-fg31">-github.com&#47;kataras&#47;golog v0.0.9&#47;go.mod h1:12HJgwBIZFNGL0EJnMRhmvGA0PQGx8VFwrZtM4CqbAk=</span>
<span class="term-fg31">-github.com&#47;kataras&#47;iris&#47;v12 v12.0.1&#47;go.mod h1:udK4vLQKkdDqMGJJVd&#47;msuMtN6hpYJhg&#47;lSzuxjhO+U=</span>
<span class="term-fg31">-github.com&#47;kataras&#47;neffos v0.0.10&#47;go.mod h1:ZYmJC07hQPW67eKuzlfY7SO3bC0mw83A3j6im82hfqw=</span>
<span class="term-fg31">-github.com&#47;kataras&#47;pio v0.0.0-20190103105442-ea782b38602d&#47;go.mod h1:NV88laa9UiiDuX9AhMbDPkGYSPugBOV6yTZB1l2K9Z0=</span>
<span class="term-fg32">+github.com&#47;kataras&#47;blocks v0.0.7&#47;go.mod h1:UJIU97CluDo0f+zEjbnbkeMRlvYORtmc1304EeyXf4I=</span>
<span class="term-fg32">+github.com&#47;kataras&#47;golog v0.1.8&#47;go.mod h1:rGPAin4hYROfk1qT9wZP6VY2rsb4zzc37QpdPjdkqVw=</span>
<span class="term-fg32">+github.com&#47;kataras&#47;iris&#47;v12 v12.2.0&#47;go.mod h1:BLzBpEunc41GbE68OUaQlqX4jzi791mx5HU04uPb90Y=</span>
<span class="term-fg32">+github.com&#47;kataras&#47;pio v0.0.11&#47;go.mod h1:38hH6SWH6m4DKSYmRhlrCJ5WItwWgCVrTNU62XZyUvI=</span>
<span class="term-fg32">+github.com&#47;kataras&#47;sitemap v0.0.6&#47;go.mod h1:dW4dOCNs896OR1HmG+dMLdT7JjDk7mYBzoIRwuj5jA4=</span>
<span class="term-fg32">+github.com&#47;kataras&#47;tunnel v0.0.4&#47;go.mod h1:9FkU4LaeifdMWqZu7o20ojmW4B7hdhv2CMLwfnHGpYw=</span>
 github.com&#47;kilic&#47;bls12-381 v0.1.0 h1:encrdjqKMEvabVQ7qYOKu1OvhqpK4s47wDYtNiPtlp4=
 github.com&#47;kilic&#47;bls12-381 v0.1.0&#47;go.mod h1:vDTTHJONJ6G+P2R74EhnyotQDTliQDnFEwhdmfzw1ig=
<span class="term-fg31">-github.com&#47;kisielk&#47;errcheck v1.2.0&#47;go.mod h1:&#47;BMXB+zMLi60iA8Vv6Ksmxu&#47;1UDYcXs4uQLJ+jE2L00=</span>
 github.com&#47;kisielk&#47;errcheck v1.5.0&#47;go.mod h1:pFxgyoBC7bSaBwPgfKdkLd5X25qrDl4LWUI2bnpBCr8=
 github.com&#47;kisielk&#47;gotool v1.0.0&#47;go.mod h1:XhKaO+MFFWcvkIS&#47;tQcRk01m1F5IRFswLeQ+oQHNcck=
<span class="term-fg31">-github.com&#47;klauspost&#47;compress v1.8.2&#47;go.mod h1:RyIbtBH6LamlWaDj8nUwkbUhJ87Yi3uG0guNDohfE1A=</span>
<span class="term-fg31">-github.com&#47;klauspost&#47;compress v1.9.0&#47;go.mod h1:RyIbtBH6LamlWaDj8nUwkbUhJ87Yi3uG0guNDohfE1A=</span>
<span class="term-fg31">-github.com&#47;klauspost&#47;compress v1.15.15 h1:EF27CXIuDsYJ6mmvtBRlEuB2UVOqHG1tAXgZ7yIO+lw=</span>
<span class="term-fg31">-github.com&#47;klauspost&#47;compress v1.15.15&#47;go.mod h1:ZcK2JAFqKOpnBlxcLsJzYfrS9X1akm9fHZNnD9+Vo&#47;4=</span>
<span class="term-fg31">-github.com&#47;klauspost&#47;cpuid v1.2.1&#47;go.mod h1:Pj4uuM528wm8OyEC2QMXAi2YiTZ96dNQPGgoMS4s3ek=</span>
<span class="term-fg32">+github.com&#47;klauspost&#47;compress v1.16.3 h1:XuJt9zzcnaz6a16&#47;OU53ZjWp&#47;v7&#47;42WcR5t2a0PcNQY=</span>
<span class="term-fg32">+github.com&#47;klauspost&#47;compress v1.16.3&#47;go.mod h1:ntbaceVETuRiXiv4DpjP66DpAtAGkEQskQzEyD&#47;&#47;IeE=</span>
 github.com&#47;klauspost&#47;cpuid&#47;v2 v2.0.4&#47;go.mod h1:FInQzS24&#47;EEf25PyTYn52gqo7WaD8xa0213Md&#47;qVLRg=
 github.com&#47;klauspost&#47;cpuid&#47;v2 v2.0.9 h1:lgaqFMSdTdQYdZ04uHyN2d&#47;eKdOMyi2YLSvlQIBFYa4=
 github.com&#47;klauspost&#47;cpuid&#47;v2 v2.0.9&#47;go.mod h1:FInQzS24&#47;EEf25PyTYn52gqo7WaD8xa0213Md&#47;qVLRg=
<span class="term-fg32">+github.com&#47;konsorten&#47;go-windows-terminal-sequences v0.0.0-20180402223658-b729f2633dfe&#47;go.mod h1:T0+1ngSBFLxvqU3pZ+m&#47;2kptfBszLMUkC4ZK&#47;EgS&#47;cQ=</span>
 github.com&#47;konsorten&#47;go-windows-terminal-sequences v1.0.1&#47;go.mod h1:T0+1ngSBFLxvqU3pZ+m&#47;2kptfBszLMUkC4ZK&#47;EgS&#47;cQ=
 github.com&#47;konsorten&#47;go-windows-terminal-sequences v1.0.3&#47;go.mod h1:T0+1ngSBFLxvqU3pZ+m&#47;2kptfBszLMUkC4ZK&#47;EgS&#47;cQ=
 github.com&#47;kr&#47;logfmt v0.0.0-20140226030751-b84e30acd515&#47;go.mod h1:+0opPa2QZZtGFBFZlji&#47;RkVcI2GknAs&#47;DXo4wKdlNEc=
<span class="term-fg36">@@ -418,13 +540,17 @@</span> github.com&#47;kr&#47;text v0.2.0 h1:5Nx0Ya0ZqY2ygV366QzturHI13Jq95ApcVaJBhpS+AY=
 github.com&#47;kr&#47;text v0.2.0&#47;go.mod h1:eLer722TekiGuMkidMxC&#47;pM04lWEeraHUUmBw8l2grE=
 github.com&#47;kylelemons&#47;godebug v1.1.0 h1:RPNrshWIDI6G2gRW9EHilWtl7Z6Sb1BR0xunSBf0SNc=
 github.com&#47;kylelemons&#47;godebug v1.1.0&#47;go.mod h1:9&#47;0rRGxNHcop5bhtWyNeEfOS8JIWk580+fNqagV&#47;RAw=
<span class="term-fg31">-github.com&#47;labstack&#47;echo&#47;v4 v4.1.11&#47;go.mod h1:i541M3Fj6f76NZtHSj7TXnyM8n2gaodfvfxNnFqi74g=</span>
 github.com&#47;labstack&#47;echo&#47;v4 v4.2.1&#47;go.mod h1:AA49e0DZ8kk5jTOOCKNuPR6oTnBS0dYiM4FW1e6jwpg=
<span class="term-fg32">+github.com&#47;labstack&#47;echo&#47;v4 v4.10.0&#47;go.mod h1:S&#47;T&#47;5fy&#47;GigaXnHTkh0ZGe4LpkkQysvRjFMSUTkDRNQ=</span>
 github.com&#47;labstack&#47;gommon v0.3.0&#47;go.mod h1:MULnywXg0yavhxWKc+lOruYdAhDwPK9wf0OL7NoOu+k=
<span class="term-fg32">+github.com&#47;labstack&#47;gommon v0.4.0&#47;go.mod h1:uW6kP17uPlLJsD3ijUYn3&#47;M5bAxtlZhMI6m3MFxTMTM=</span>
 github.com&#47;leanovate&#47;gopter v0.2.9 h1:fQjYxZaynp97ozCzfOyOuAGOU4aU&#47;z37zf&#47;tOujFk7c=
<span class="term-fg31">-github.com&#47;magiconair&#47;properties v1.8.0&#47;go.mod h1:PppfXfuXeibc&#47;6YijjN8zIbojt8czPbwD3XqdrwzmxQ=</span>
<span class="term-fg32">+github.com&#47;leanovate&#47;gopter v0.2.9&#47;go.mod h1:U2L&#47;78B+KVFIx2VmW6onHJQzXtFb+p5y3y2Sh+Jxxv8=</span>
<span class="term-fg32">+github.com&#47;leodido&#47;go-urn v1.2.1&#47;go.mod h1:zt4jvISO2HfUBqxjfIshjdMTYS56ZS&#47;qv49ictyFfxY=</span>
<span class="term-fg32">+github.com&#47;mailgun&#47;raymond&#47;v2 v2.0.48&#47;go.mod h1:lsgvL50kgt1ylcFJYZiULi5fjPBkkhNfj4KA0W54Z18=</span>
 github.com&#47;mailru&#47;easyjson v0.0.0-20190614124828-94de47d64c63&#47;go.mod h1:C1wdFJiN94OJF2b5HbByQZoLdCWB1Yqtg26g4irojpc=
 github.com&#47;mailru&#47;easyjson v0.0.0-20190626092158-b2ccc519800e&#47;go.mod h1:C1wdFJiN94OJF2b5HbByQZoLdCWB1Yqtg26g4irojpc=
<span class="term-fg32">+github.com&#47;mailru&#47;easyjson v0.7.7&#47;go.mod h1:xzfreul335JAWq5oZzymOObrkdz5UnU4kGfJJLY9Nlc=</span>
 github.com&#47;matryer&#47;moq v0.0.0-20190312154309-6cfb0558e1bd&#47;go.mod h1:9ELz6aaclSIGnZBoaSLZ3NAl1VTufbOrXBPvtcy6WiQ=
 github.com&#47;mattn&#47;go-colorable v0.1.2&#47;go.mod h1:U0ppj6V5qS13XJ6of8GYAs25YV2eR4EVcfRqFIhoBtE=
 github.com&#47;mattn&#47;go-colorable v0.1.7&#47;go.mod h1:u6P&#47;XSegPjTcexA+o6vUJrdnUu04hMope9wVRipJSqc=
<span class="term-fg36">@@ -432,7 +558,6 @@</span> github.com&#47;mattn&#47;go-colorable v0.1.8&#47;go.mod h1:u6P&#47;XSegPjTcexA+o6vUJrdnUu04hMope9wVRipJSqc=
 github.com&#47;mattn&#47;go-colorable v0.1.9&#47;go.mod h1:u6P&#47;XSegPjTcexA+o6vUJrdnUu04hMope9wVRipJSqc=
 github.com&#47;mattn&#47;go-colorable v0.1.13 h1:fFA4WZxdEF4tXPZVKMLwD8oUnCTTo08duU7wxecdEvA=
 github.com&#47;mattn&#47;go-colorable v0.1.13&#47;go.mod h1:7S9&#47;ev0klgBDR4GtXTXX8a3vIGJpMovkB8vQcUbaXHg=
<span class="term-fg31">-github.com&#47;mattn&#47;go-isatty v0.0.7&#47;go.mod h1:Iq45c&#47;XA43vh69&#47;j3iqttzPXn0bhXyGjM0Hdxcsrc5s=</span>
 github.com&#47;mattn&#47;go-isatty v0.0.8&#47;go.mod h1:Iq45c&#47;XA43vh69&#47;j3iqttzPXn0bhXyGjM0Hdxcsrc5s=
 github.com&#47;mattn&#47;go-isatty v0.0.9&#47;go.mod h1:YNRxwqDuOph6SZLI9vUUz6OYw3QyUt7WiY2yME+cCiQ=
 github.com&#47;mattn&#47;go-isatty v0.0.12&#47;go.mod h1:cbi8OIDigv2wuxKPP5vlRcQ1OAZbq2CE4Kysco4FUpU=
<span class="term-fg36">@@ -444,17 +569,12 @@</span> github.com&#47;mattn&#47;go-runewidth v0.0.3&#47;go.mod h1:LwmH8dsx7+W8Uxz3IHJYH5QSwggIsqBzpuz5H&#47;&#47;U1FU=
 github.com&#47;mattn&#47;go-runewidth v0.0.9&#47;go.mod h1:H031xJmbD&#47;WCDINGzjvQ9THkh0rPKHF+m2gUSrubnMI=
 github.com&#47;mattn&#47;go-runewidth v0.0.13 h1:lTGmDsbAYt5DmK6OnoV7EuIF1wEIFAcxld6ypU4OSgU=
 github.com&#47;mattn&#47;go-runewidth v0.0.13&#47;go.mod h1:Jdepj2loyihRzMpdS35Xk&#47;zdY8IAYHsh153qUoGf23w=
<span class="term-fg31">-github.com&#47;mattn&#47;goveralls v0.0.2&#47;go.mod h1:8d1ZMHsd7fW6IRPKQh46F2WRpyib5&#47;X4FOpevwGNQEw=</span>
 github.com&#47;matttproud&#47;golang_protobuf_extensions v1.0.1&#47;go.mod h1:D8He9yQNgCq6Z5Ld7szi9bcBfOoFv&#47;3dc6xSMkL2PC0=
 github.com&#47;matttproud&#47;golang_protobuf_extensions v1.0.2-0.20181231171920-c182affec369 h1:I0XW9+e1XWDxdcEniV4rQAIOPUGDq67JSCiRCgGCZLI=
 github.com&#47;matttproud&#47;golang_protobuf_extensions v1.0.2-0.20181231171920-c182affec369&#47;go.mod h1:BSXmuO+STAnVfrANrmjBb36TMTDstsz7MSK+HVaYKv4=
<span class="term-fg31">-github.com&#47;mediocregopher&#47;mediocre-go-lib v0.0.0-20181029021733-cb65787f37ed&#47;go.mod h1:dSsfyI2zABAdhcbvkXqgxOxrCsbYeHCPgrZkku60dSg=</span>
<span class="term-fg31">-github.com&#47;mediocregopher&#47;radix&#47;v3 v3.3.0&#47;go.mod h1:EmfVyvspXz1uZEyPBMyGK+kjWiKQGvsUt6O3Pj+LDCQ=</span>
<span class="term-fg31">-github.com&#47;microcosm-cc&#47;bluemonday v1.0.2&#47;go.mod h1:iVP4YcDBq+n&#47;5fb23BhYFvIMq&#47;leAFZyRl6bYmGDlGc=</span>
<span class="term-fg32">+github.com&#47;microcosm-cc&#47;bluemonday v1.0.23&#47;go.mod h1:mN70sk7UkkF8TUr2IGBpNN0jAgStuPzlK76QuruE&#47;z4=</span>
 github.com&#47;minio&#47;sha256-simd v1.0.0 h1:v1ta+49hkWZyvaKwrQB8elexRqm6Y0aMLjCNsrYxo6g=
 github.com&#47;minio&#47;sha256-simd v1.0.0&#47;go.mod h1:OuYzVNI5vcoYIAmbIvHPl3N3jUzVedXbKy5RFepssQM=
<span class="term-fg31">-github.com&#47;mitchellh&#47;go-homedir v1.1.0&#47;go.mod h1:SfyaCUpYCn1Vlf4IUYiD9fPX4A5wJrkLzIz1N1q0pr0=</span>
<span class="term-fg31">-github.com&#47;mitchellh&#47;mapstructure v1.1.2&#47;go.mod h1:FVVH3fgwuzCH5S8UJGiWEs2h04kUh9fWfEaFds41c1Y=</span>
 github.com&#47;mitchellh&#47;mapstructure v1.4.1 h1:CpVNEelQCZBooIPDn+AR3NpivK&#47;TIKU8bDxdASFVQag=
 github.com&#47;mitchellh&#47;mapstructure v1.4.1&#47;go.mod h1:bFUtVrKA4DC2yAKiSyO&#47;QUcy7e+RRV2QTWOzhPopBRo=
 github.com&#47;mitchellh&#47;pointerstructure v1.2.0 h1:O+i9nHnXS3l&#47;9Wu7r4NrEdwA2VFTicjUEN1uBnDo34A=
<span class="term-fg36">@@ -467,36 +587,39 @@</span> github.com&#47;modern-go&#47;concurrent v0.0.0-20180306012644-bacd9c7ef1dd&#47;go.mod h1:6dJC0mAP4ikYIbvyc7fijjWJddQyLn8Ig3JB5CqoB9Q=
 github.com&#47;modern-go&#47;reflect2 v0.0.0-20180701023420-4b7aa43c6742&#47;go.mod h1:bx2lNnkwVCuqBIxFjflWJWanXIb3RllmbCylyMrvgv0=
 github.com&#47;modern-go&#47;reflect2 v1.0.1&#47;go.mod h1:bx2lNnkwVCuqBIxFjflWJWanXIb3RllmbCylyMrvgv0=
 github.com&#47;modern-go&#47;reflect2 v1.0.2&#47;go.mod h1:yWuevngMOJpCy52FWWMvUC8ws7m&#47;LJsjYzDa0&#47;r8luk=
<span class="term-fg31">-github.com&#47;moul&#47;http2curl v1.0.0&#47;go.mod h1:8UbvGypXm98wA&#47;IqH45anm5Y2Z6ep6O31QGOAZ3H0fQ=</span>
 github.com&#47;mwitkow&#47;go-conntrack v0.0.0-20161129095857-cc309e4a2223&#47;go.mod h1:qRWi+5nqEBWmkhHvq77mSJWrCKwh8bxhgT7d&#47;eI7P4U=
 github.com&#47;mwitkow&#47;go-conntrack v0.0.0-20190716064945-2f068394615f&#47;go.mod h1:qRWi+5nqEBWmkhHvq77mSJWrCKwh8bxhgT7d&#47;eI7P4U=
 github.com&#47;naoina&#47;go-stringutil v0.1.0 h1:rCUeRUHjBjGTSHl0VC00jUPLz8&#47;F9dDzYI70Hzifhks=
 github.com&#47;naoina&#47;go-stringutil v0.1.0&#47;go.mod h1:XJ2SJL9jCtBh+P9q5btrd&#47;Ylo8XwT&#47;h1USek5+NqSA0=
 github.com&#47;naoina&#47;toml v0.1.2-0.20170918210437-9fafd6967416 h1:shk&#47;vn9oCoOTmwcouEdwIeOtOGA&#47;ELRUw&#47;GwvxwfT+0=
 github.com&#47;naoina&#47;toml v0.1.2-0.20170918210437-9fafd6967416&#47;go.mod h1:NBIhNtsFMo3G2szEBne+bO4gS192HuIYRqfvOWb4i1E=
<span class="term-fg31">-github.com&#47;nats-io&#47;nats.go v1.8.1&#47;go.mod h1:BrFz9vVn0fU3AcH9Vn4Kd7W0NpJ651tD5omQ3M8LwxM=</span>
<span class="term-fg31">-github.com&#47;nats-io&#47;nkeys v0.0.2&#47;go.mod h1:dab7URMsZm6Z&#47;jp9Z5UGa87Uutgc2mVpXLC4B7TDb&#47;4=</span>
<span class="term-fg31">-github.com&#47;nats-io&#47;nuid v1.0.1&#47;go.mod h1:19wcPz3Ph3q0Jbyiqsd0kePYG7A95tJPxeL+1OSON2c=</span>
<span class="term-fg32">+github.com&#47;newrelic&#47;go-agent&#47;v3 v3.0.0&#47;go.mod h1:H28zDNUC0U&#47;b7kLoY4EFOhuth10Xu&#47;9dchozUiOseQQ=</span>
<span class="term-fg32">+github.com&#47;newrelic&#47;go-agent&#47;v3 v3.26.0 h1:xJkqiQgLtC3ys5zoBxD91ITm7sVHZNEF+7&#47;mqmFjnl0=</span>
<span class="term-fg32">+github.com&#47;newrelic&#47;go-agent&#47;v3 v3.26.0&#47;go.mod h1:sE2WdlLF3B&#47;xI5HUuIHTa7Aht1gpcIY65pzaUoN1pJs=</span>
<span class="term-fg32">+github.com&#47;newrelic&#47;go-agent&#47;v3&#47;integrations&#47;nrlogrus v1.0.1 h1:Tv985B4QriX&#47;KxNw5ugvTEOMQgpcq&#47;RpZgO+XqhQJQU=</span>
<span class="term-fg32">+github.com&#47;newrelic&#47;go-agent&#47;v3&#47;integrations&#47;nrlogrus v1.0.1&#47;go.mod h1:JpiVn2lqR9Vk6Iq7mYGQPJhKEnthbba4QqM8Jb1JTW0=</span>
 github.com&#47;nxadm&#47;tail v1.4.4 h1:DQuhQpB1tVlglWS2hLQ5OV6B5r8aGxSrPc5Qo6uTN78=
 github.com&#47;nxadm&#47;tail v1.4.4&#47;go.mod h1:kenIhsEOeOJmVchQTgglprH7qJGnHDVpk1VPCcaMI8A=
 github.com&#47;olekukonko&#47;tablewriter v0.0.5 h1:P2Ga83D34wi1o9J6Wh1mRuqd4mF&#47;x&#47;lgBS7N7AbDhec=
 github.com&#47;olekukonko&#47;tablewriter v0.0.5&#47;go.mod h1:hPp6KlRPjbx+hW8ykQs1w3UBbZlj6HuIJcUGPhkA7kY=
 github.com&#47;onsi&#47;ginkgo v1.6.0&#47;go.mod h1:lLunBs&#47;Ym6LB5Z9jYTR76FiuTmxDTDusOGeTQH+WWjE=
 github.com&#47;onsi&#47;ginkgo v1.12.1&#47;go.mod h1:zj2OWP4+oCPe1qIXoGWkgMRwljMUYCdkwsT2108oapk=
<span class="term-fg31">-github.com&#47;onsi&#47;ginkgo v1.13.0&#47;go.mod h1:+REjRxOmWfHCjfv9TTWB1jD1Frx4XydAD3zm1lskyM0=</span>
 github.com&#47;onsi&#47;ginkgo v1.14.0 h1:2mOpI4JVVPBN+WQRa0WKH2eXR+Ey+uK4n7Zj0aYpIQA=
 github.com&#47;onsi&#47;ginkgo v1.14.0&#47;go.mod h1:iSB4RoI2tjJc9BBv4NKIKWKya62Rps+oPG&#47;Lv9klQyY=
<span class="term-fg32">+github.com&#47;onsi&#47;ginkgo&#47;v2 v2.9.2&#47;go.mod h1:WHcJJG2dIlcCqVfBAwUCrJxSPFb6v4azBwgxeMeDuts=</span>
 github.com&#47;onsi&#47;gomega v1.7.1&#47;go.mod h1:XdKZgCCFLUoM&#47;7CFJVPcG8C1xQ1AJ0vpAezJrB7JYyY=
<span class="term-fg31">-github.com&#47;onsi&#47;gomega v1.10.1 h1:o0+MgICZLuZ7xjH7Vx6zS&#47;zcu93&#47;BEp1VwkIW1mEXCE=</span>
 github.com&#47;onsi&#47;gomega v1.10.1&#47;go.mod h1:iN09h71vgCQne3DLsj+A5owkum+a2tYe+TOCB1ybHNo=
<span class="term-fg32">+github.com&#47;onsi&#47;gomega v1.27.6 h1:ENqfyGeS5AX&#47;rlXDd&#47;ETokDz93u0YufY1Pgxuy&#47;PvWE=</span>
<span class="term-fg32">+github.com&#47;onsi&#47;gomega v1.27.6&#47;go.mod h1:PIQNjfQwkP3aQAH7lf7j87O&#47;5FiNr+ZR8+ipb+qQlhg=</span>
 github.com&#47;opentracing&#47;opentracing-go v1.1.0 h1:pWlfV3Bxv7k65HYwkikxat0+s3pV4bsqf19k25Ur8rU=
 github.com&#47;opentracing&#47;opentracing-go v1.1.0&#47;go.mod h1:UkNAQd3GIcIGf0SeVgPpRdFStlNbqXla1AfSYxPUl2o=
<span class="term-fg31">-github.com&#47;pelletier&#47;go-toml v1.2.0&#47;go.mod h1:5z9KED0ma1S8pY6P1sdut58dfprrGBbd&#47;94hg7ilaic=</span>
<span class="term-fg32">+github.com&#47;pelletier&#47;go-toml&#47;v2 v2.0.5&#47;go.mod h1:OMHamSCAODeSsVrwwvcJOaoN0LIUIaFVNZzmWyNfXas=</span>
 github.com&#47;peterh&#47;liner v1.1.1-0.20190123174540-a2c9a5303de7 h1:oYW+YCJ1pachXTQmzR3rNLYGGz4g&#47;UgFcjb28p&#47;viDM=
 github.com&#47;peterh&#47;liner v1.1.1-0.20190123174540-a2c9a5303de7&#47;go.mod h1:CRroGNssyjTd&#47;qIG2FyxByd2S8JEAZXBl4qUrZf8GS0=
 github.com&#47;pingcap&#47;errors v0.11.4 h1:lFuQV&#47;oaUMGcD2tqt+01ROSmJs75VG1ToEOkZIZ4nE4=
 github.com&#47;pingcap&#47;errors v0.11.4&#47;go.mod h1:Oi8TUi2kEtXXLMJk9l1cGmz20kV3TaQ0usTwv5KuLY8=
 github.com&#47;pkg&#47;browser v0.0.0-20210911075715-681adbf594b8 h1:KoWmjvw+nsYOo29YJK9vDA65RGE3NrOnUtO7a+RF9HU=
<span class="term-fg32">+github.com&#47;pkg&#47;browser v0.0.0-20210911075715-681adbf594b8&#47;go.mod h1:HKlIX3XHQyzLZPlr7++PzdhaXEj94dEiJgZDTsxEqUI=</span>
 github.com&#47;pkg&#47;diff v0.0.0-20210226163009-20ebb0f2a09e&#47;go.mod h1:pJLUxLENpZxwdsKMEsNbx1VGcRFpLqf3715MtcvvzbA=
 github.com&#47;pkg&#47;errors v0.8.0&#47;go.mod h1:bwawxfHBFNV+L2hUp1rHADufV3IMtnDRdf1r5NINEl0=
 github.com&#47;pkg&#47;errors v0.8.1&#47;go.mod h1:bwawxfHBFNV+L2hUp1rHADufV3IMtnDRdf1r5NINEl0=
<span class="term-fg36">@@ -505,6 +628,7 @@</span> github.com&#47;pkg&#47;errors v0.9.1&#47;go.mod h1:bwawxfHBFNV+L2hUp1rHADufV3IMtnDRdf1r5NINEl0=
 github.com&#47;pmezard&#47;go-difflib v1.0.0 h1:4DBwDE0NGyQoBHbLQYPwSUPoCMWR5BEzIk&#47;f1lZbAQM=
 github.com&#47;pmezard&#47;go-difflib v1.0.0&#47;go.mod h1:iKH77koFhYxTK1pcRnkKkqfTogsbg7gZNVY4sRDYZ&#47;4=
 github.com&#47;prashantv&#47;gostub v1.1.0 h1:BTyx3RfQjRHnUWaGF9oQos79AlQ5k8WNktv7VGvVH4g=
<span class="term-fg32">+github.com&#47;prashantv&#47;gostub v1.1.0&#47;go.mod h1:A5zLQHz7ieHGG7is6LLXLz7I8+3LZzsrV0P1IAHhP5U=</span>
 github.com&#47;prometheus&#47;client_golang v0.9.1&#47;go.mod h1:7SWBe2y4D6OKWSNQJUaRYU&#47;AaXPKyh&#47;dDVn+NZz0KFw=
 github.com&#47;prometheus&#47;client_golang v1.0.0&#47;go.mod h1:db9x61etRT2tGnBNRi70OPL5FsnadC4Ky3P0J6CfImo=
 github.com&#47;prometheus&#47;client_golang v1.7.1&#47;go.mod h1:PY5Wy2awLA44sXw4AOSfFBetzPP4j5+D6mVACh+pe2M=
<span class="term-fg36">@@ -531,38 +655,36 @@</span> github.com&#47;prometheus&#47;procfs v0.7.3&#47;go.mod h1:cz+aTbrPOrUb4q7XlbU9ygM+&#47;jj0fzG6c1xBZuNvfVA=
 github.com&#47;protolambda&#47;bls12-381-util v0.0.0-20220416220906-d8552aa452c7 h1:cZC+usqsYgHtlBaGulVnZ1hfKAi8iWtujBnRLQE698c=
 github.com&#47;protolambda&#47;bls12-381-util v0.0.0-20220416220906-d8552aa452c7&#47;go.mod h1:IToEjHuttnUzwZI5KBSM&#47;LOOW3qLbbrHOEfp3SbECGY=
 github.com&#47;prysmaticlabs&#47;gohashtree v0.0.1-alpha.0.20220714111606-acbb2962fb48 h1:cSo6&#47;vk8YpvkLbk9v3FO97cakNmUoxwi2KMP8hd5WIw=
<span class="term-fg32">+github.com&#47;prysmaticlabs&#47;gohashtree v0.0.1-alpha.0.20220714111606-acbb2962fb48&#47;go.mod h1:4pWaT30XoEx1j8KNJf3TV+E3mQkaufn7mf+jRNb&#47;Fuk=</span>
 github.com&#47;rivo&#47;uniseg v0.2.0 h1:S1pD9weZBuJdFmowNwbpi7BJ8TNftyUImj&#47;0WQi72jY=
 github.com&#47;rivo&#47;uniseg v0.2.0&#47;go.mod h1:J6wj4VEh+S6ZtnVlnTBMWIodfgj8LQOQFoIToxlJtxc=
 github.com&#47;rogpeppe&#47;go-internal v1.3.0&#47;go.mod h1:M8bDsm7K2OlrFYOpmOWEs&#47;qY81heoFRclV5y23lUDJ4=
 github.com&#47;rogpeppe&#47;go-internal v1.6.1&#47;go.mod h1:xXDCJY+GAPziupqXw64V24skbSoqbTEfhy4qGm1nDQc=
<span class="term-fg31">-github.com&#47;rogpeppe&#47;go-internal v1.9.0 h1:73kH8U+JUqXU8lRuOHeVHaa&#47;SZPifC7BkcraZVejAe8=</span>
 github.com&#47;rogpeppe&#47;go-internal v1.9.0&#47;go.mod h1:WtVeX8xhTBvf0smdhujwtBcq4Qrzq&#47;fJaraNFVN+nFs=
<span class="term-fg32">+github.com&#47;rogpeppe&#47;go-internal v1.10.0 h1:TMyTOH3F&#47;DB16zRVcYyreMH6GnZZrwQVAoYjRBZyWFQ=</span>
<span class="term-fg32">+github.com&#47;rogpeppe&#47;go-internal v1.10.0&#47;go.mod h1:UQnix2H7Ngw&#47;k4C5ijL5+65zddjncjaFoBhdsK&#47;akog=</span>
 github.com&#47;rs&#47;cors v1.7.0 h1:+88SsELBHx5r+hZ8TCkggzSstaWNbDvThkVK8H6f9ik=
 github.com&#47;rs&#47;cors v1.7.0&#47;go.mod h1:gFx+x8UowdsKA9AchylcLynDq+nNFfI8FkUZdN&#47;jGCU=
<span class="term-fg31">-github.com&#47;russross&#47;blackfriday v1.5.2&#47;go.mod h1:JO&#47;DiYxRf+HjHt06OyowR9PTA263kcR&#47;rfWxYHBV53g=</span>
 github.com&#47;russross&#47;blackfriday&#47;v2 v2.1.0 h1:JIOH55&#47;0cWyOuilr9&#47;qlrm0BSXldqnqwMsf35Ld67mk=
 github.com&#47;russross&#47;blackfriday&#47;v2 v2.1.0&#47;go.mod h1:+Rmxgy9KzJVeS9&#47;2gXHxylqXiyQDYRxCVz55jmeOWTM=
<span class="term-fg31">-github.com&#47;ryanuber&#47;columnize v2.1.0+incompatible&#47;go.mod h1:sm1tb6uqfes&#47;u+d4ooFouqFdy9&#47;2g9QGwK3SQygK0Ts=</span>
<span class="term-fg31">-github.com&#47;sclevine&#47;agouti v3.0.0+incompatible&#47;go.mod h1:b4WX9W9L1sfQKXeJf1mUTLZKJ48R1S7H23Ji7oFO5Bw=</span>
<span class="term-fg31">-github.com&#47;sergi&#47;go-diff v1.1.0&#47;go.mod h1:STckp+ISIX8hZLjrqAeVduY0gWCT9IjLuqbuNXdaHfM=</span>
<span class="term-fg32">+github.com&#47;schollz&#47;closestmatch v2.1.0+incompatible&#47;go.mod h1:RtP1ddjLong6gTkbtmuhtR2uUrrJOpYzYRvbcPAid+g=</span>
<span class="term-fg32">+github.com&#47;sethvargo&#47;go-retry v0.2.4 h1:T+jHEQy&#47;zKJf5s95UkguisicE0zuF9y7+&#47;vgz08Ocec=</span>
<span class="term-fg32">+github.com&#47;sethvargo&#47;go-retry v0.2.4&#47;go.mod h1:1afjQuvh7s4gflMObvjLPaWgluLLyhA1wmVZ6KLpICw=</span>
 github.com&#47;shirou&#47;gopsutil v3.21.4-0.20210419000835-c7a38de76ee5+incompatible h1:Bn1aCHHRnjv4Bl16T8rcaFjYSrGrIZvpiGO6P3Q4GpU=
 github.com&#47;shirou&#47;gopsutil v3.21.4-0.20210419000835-c7a38de76ee5+incompatible&#47;go.mod h1:5b4v6he4MtMOwMlS0TUMTu2PcXUg8+E1lC7eC3UO&#47;RA=
<span class="term-fg31">-github.com&#47;shurcooL&#47;sanitized_anchor_name v1.0.0&#47;go.mod h1:1NzhyTcUVG4SuEtjjoZeVRXNmyL&#47;1OwPU0+IJeTBvfc=</span>
<span class="term-fg32">+github.com&#47;sirupsen&#47;logrus v1.1.0&#47;go.mod h1:zrgwTnHtNr00buQ1vSptGe8m1f&#47;BbgsPukg8qsT7A+A=</span>
 github.com&#47;sirupsen&#47;logrus v1.2.0&#47;go.mod h1:LxeOpSwHxABJmUn&#47;MG1IvRgCAasNZTLOkJPxbbu5VWo=
 github.com&#47;sirupsen&#47;logrus v1.4.2&#47;go.mod h1:tLMulIdttU9McNUspp0xgXVQah82FyeX6MwdIuYE2rE=
 github.com&#47;sirupsen&#47;logrus v1.6.0&#47;go.mod h1:7uNnSEd1DgxDLC74fIahvMZmmYsHGZGEOFrfsX&#47;uA88=
<span class="term-fg31">-github.com&#47;smartystreets&#47;assertions v0.0.0-20180927180507-b2de0cb4f26d&#47;go.mod h1:OnSkiWE9lh6wB0YB77sQom3nweQdgAjqCqsofrRNTgc=</span>
<span class="term-fg31">-github.com&#47;smartystreets&#47;goconvey v1.6.4&#47;go.mod h1:syvi0&#47;a8iFYH4r&#47;RixwvyeAJjdLS9QV7WQ&#47;tjFTllLA=</span>
<span class="term-fg31">-github.com&#47;spf13&#47;afero v1.1.2&#47;go.mod h1:j4pytiNVoe2o6bmDsKpLACNPDBIoEAkihy7loJ1B0CQ=</span>
<span class="term-fg31">-github.com&#47;spf13&#47;cast v1.3.0&#47;go.mod h1:Qx5cxh0v+4UWYiBimWS+eyWzqEqokIECu5etghLkUJE=</span>
<span class="term-fg31">-github.com&#47;spf13&#47;cobra v0.0.5&#47;go.mod h1:3K3wKZymM7VvHMDS9+Akkh4K60UwM26emMESw8tLCHU=</span>
<span class="term-fg31">-github.com&#47;spf13&#47;jwalterweatherman v1.0.0&#47;go.mod h1:cQK4TGJAtQXfYWX+Ddv3mKDzgVb68N+wFjFa4jdeBTo=</span>
<span class="term-fg31">-github.com&#47;spf13&#47;pflag v1.0.3&#47;go.mod h1:DYY7MBk1bdzusC3SYhjObp+wFpr4gzcvqqNjLnInEg4=</span>
<span class="term-fg31">-github.com&#47;spf13&#47;viper v1.3.2&#47;go.mod h1:ZiWeW+zYFKm7srdB9IoDzzZXaJaI5eL9QjNiN&#47;DMA2s=</span>
<span class="term-fg32">+github.com&#47;sirupsen&#47;logrus v1.9.0 h1:trlNQbNUG3OdDrDil03MCb1H2o9nJ1x4&#47;5LYw7byDE0=</span>
<span class="term-fg32">+github.com&#47;sirupsen&#47;logrus v1.9.0&#47;go.mod h1:naHLuLoDiP4jHNo9R0sCBMtWGeIprob74mVsIT4qYEQ=</span>
<span class="term-fg32">+github.com&#47;spf13&#47;cobra v1.5.0&#47;go.mod h1:dWXEIy2H428czQCjInthrTRUg7yKbok+2Qi&#47;yBIJoUM=</span>
<span class="term-fg32">+github.com&#47;spf13&#47;pflag v1.0.5&#47;go.mod h1:McXfInJRrz4CZXVZOBLb0bTZqETkiAhM9Iw0y3An2Bg=</span>
 github.com&#47;status-im&#47;keycard-go v0.2.0 h1:QDLFswOQu1r5jsycloeQh3bVU8n&#47;NatHHaZobtDnDzA=
 github.com&#47;status-im&#47;keycard-go v0.2.0&#47;go.mod h1:wlp8ZLbsmrF6g6WjugPAx+IzoLrkdf9+mHxBEeo3Hbg=
 github.com&#47;stretchr&#47;objx v0.1.0&#47;go.mod h1:HFkY916IF+rwdDfMAkV7OtwuqBVzrE8GR6GFx+wExME=
 github.com&#47;stretchr&#47;objx v0.1.1&#47;go.mod h1:HFkY916IF+rwdDfMAkV7OtwuqBVzrE8GR6GFx+wExME=
<span class="term-fg32">+github.com&#47;stretchr&#47;objx v0.5.0&#47;go.mod h1:Yh+to48EsGEfYuaHDzXPcE3xhTkx73EhmCGUpEOglKo=</span>
 github.com&#47;stretchr&#47;testify v1.2.2&#47;go.mod h1:a8OnRcib4nhh0OaRAV+Yts87kKdq0PP7pXfy6kDkUVs=
 github.com&#47;stretchr&#47;testify v1.3.0&#47;go.mod h1:M5WIy9Dh21IEIfnGCwXGc5bZfKNJtfHm1UVUgZn+9EI=
 github.com&#47;stretchr&#47;testify v1.4.0&#47;go.mod h1:j7eGeouHqKxXV5pUuKE4zz7dFj8WfuZ+81PSLYec5m4=
<span class="term-fg36">@@ -574,32 +696,31 @@</span> github.com&#47;supranational&#47;blst v0.3.11 h1:LyU6FolezeWAhvQk0k6O&#47;d49jqgO52MSDDfYgbeoEm4=
 github.com&#47;supranational&#47;blst v0.3.11&#47;go.mod h1:jZJtfjgudtNl4en1tzwPIV3KjUnQUvG3&#47;j+w+fVonLw=
 github.com&#47;syndtr&#47;goleveldb v1.0.1-0.20210819022825-2ae1ddf74ef7 h1:epCh84lMvA70Z7CTTCmYQn2CKbY8j86K7&#47;FAIr141uY=
 github.com&#47;syndtr&#47;goleveldb v1.0.1-0.20210819022825-2ae1ddf74ef7&#47;go.mod h1:q4W45IWZaF22tdD+VEXcAWRA037jwmWEB5VWYORlTpc=
<span class="term-fg32">+github.com&#47;tdewolff&#47;minify&#47;v2 v2.12.4&#47;go.mod h1:h+SRvSIX3kwgwTFOpSckvSxgax3uy8kZTSF1Ojrr3bk=</span>
<span class="term-fg32">+github.com&#47;tdewolff&#47;parse&#47;v2 v2.6.4&#47;go.mod h1:woz0cgbLwFdtbjJu8PIKxhW05KplTFQkOdX78o+Jgrs=</span>
 github.com&#47;tklauser&#47;go-sysconf v0.3.12 h1:0QaGUFOdQaIVdPgfITYzaTegZvdCjmYO52cSFAEVmqU=
 github.com&#47;tklauser&#47;go-sysconf v0.3.12&#47;go.mod h1:Ho14jnntGE1fpdOqQEEaiKRpvIavV0hSfmBq8nJbHYI=
 github.com&#47;tklauser&#47;numcpus v0.6.1 h1:ng9scYS7az0Bk4OZLvrNXNSAO2Pxr1XXRAPyjhIx+Fk=
 github.com&#47;tklauser&#47;numcpus v0.6.1&#47;go.mod h1:1XfjsgE2zo8GVw7POkMbHENHzVg3GzmoZ9fESEdAacY=
 github.com&#47;tyler-smith&#47;go-bip39 v1.1.0 h1:5eUemwrMargf3BSLRRCalXT93Ns6pQJIjYQN2nyfOP8=
 github.com&#47;tyler-smith&#47;go-bip39 v1.1.0&#47;go.mod h1:gUYDtqQw1JS3ZJ8UWVcGTGqqr6YIN3CWg+kkNaLt55U=
<span class="term-fg31">-github.com&#47;ugorji&#47;go v1.1.4&#47;go.mod h1:uQMGLiO92mf5W77hV&#47;PUCpI3pbzQx3CRekS0kk+RGrc=</span>
<span class="term-fg31">-github.com&#47;ugorji&#47;go&#47;codec v0.0.0-20181204163529-d75b2dcb6bc8&#47;go.mod h1:VFNgLljTbGfSG7qAOspJ7OScBnGdDN&#47;yBr0sguwnwf0=</span>
<span class="term-fg32">+github.com&#47;ugorji&#47;go&#47;codec v1.2.7&#47;go.mod h1:WGN1fab3R1fzQlVQTkfxVtIBhWDRqOviHU95kRgeqEY=</span>
 github.com&#47;urfave&#47;cli&#47;v2 v2.25.7 h1:VAzn5oq403l5pHjc4OhD54+XGO9cdKVL&#47;7lDjF+iKUs=
 github.com&#47;urfave&#47;cli&#47;v2 v2.25.7&#47;go.mod h1:8qnjx1vcq5s2&#47;wpsqoZFndg2CE5tNFyrTvS6SinrnYQ=
 github.com&#47;urfave&#47;negroni v1.0.0&#47;go.mod h1:Meg73S6kFm&#47;4PpbYdq35yYWoCZ9mS&#47;YSx+lKnmiohz4=
<span class="term-fg32">+github.com&#47;valyala&#47;bytebufferpool v1.0.0 h1:GqA5TC&#47;0021Y&#47;b9FG4Oi9Mr3q7XYx6KllzawFIhcdPw=</span>
 github.com&#47;valyala&#47;bytebufferpool v1.0.0&#47;go.mod h1:6bBcMArwyJ5K&#47;AmCkWv1jt77kVWyCJ6HpOuEn7z0Csc=
<span class="term-fg31">-github.com&#47;valyala&#47;fasthttp v1.6.0&#47;go.mod h1:FstJa9V+Pj9vQ7OJie2qMHdwemEDaDiSdBnvPM1Su9w=</span>
<span class="term-fg32">+github.com&#47;valyala&#47;fasthttp v1.49.0 h1:9FdvCpmxB74LH4dPb7IJ1cOSsluR07XG3I1txXWwJpE=</span>
<span class="term-fg32">+github.com&#47;valyala&#47;fasthttp v1.49.0&#47;go.mod h1:k2zXd82h&#47;7UZc3VOdJ2WaUqt1uZ&#47;XpXAfE9i+HBC3lA=</span>
 github.com&#47;valyala&#47;fasttemplate v1.0.1&#47;go.mod h1:UQGH1tvbgY+Nz5t2n7tXsz52dQxojPUpymEIMZ47gx8=
 github.com&#47;valyala&#47;fasttemplate v1.2.1&#47;go.mod h1:KHLXt3tVN2HBp8eijSv&#47;kGJopbvo7S+qRAEEKiv+SiQ=
<span class="term-fg31">-github.com&#47;valyala&#47;tcplisten v0.0.0-20161114210144-ceec8f93295a&#47;go.mod h1:v3UYOV9WzVtRmSR+PDvWpU&#47;qWl4Wa5LApYYX4ZtKbio=</span>
<span class="term-fg31">-github.com&#47;xeipuuv&#47;gojsonpointer v0.0.0-20180127040702-4e3ac2762d5f&#47;go.mod h1:N2zxlSyiKSe5eX1tZViRH5QA0qijqEDrYZiPEAiq3wU=</span>
<span class="term-fg31">-github.com&#47;xeipuuv&#47;gojsonreference v0.0.0-20180127040603-bd5ef7bd5415&#47;go.mod h1:GwrjFmJcFw6At&#47;Gs6z4yjiIwzuJ1&#47;+UwLxMQDVQXShQ=</span>
<span class="term-fg31">-github.com&#47;xeipuuv&#47;gojsonschema v1.2.0&#47;go.mod h1:anYRn&#47;JVcOK2ZgGU+IjEV4nwlhoK5sQluxsYJ78Id3Y=</span>
<span class="term-fg31">-github.com&#47;xordataexchange&#47;crypt v0.0.3-0.20170626215501-b2862e3d0a77&#47;go.mod h1:aYKd&#47;&#47;L2LvnjZzWKhF00oedf4jCCReLcmhLdhm1A27Q=</span>
<span class="term-fg32">+github.com&#47;valyala&#47;fasttemplate v1.2.2&#47;go.mod h1:KHLXt3tVN2HBp8eijSv&#47;kGJopbvo7S+qRAEEKiv+SiQ=</span>
<span class="term-fg32">+github.com&#47;valyala&#47;tcplisten v1.0.0&#47;go.mod h1:T0xQ8SeCZGxckz9qRXTfG43PvQ&#47;mcWh7FwZEA7Ioqkc=</span>
<span class="term-fg32">+github.com&#47;vmihailenco&#47;msgpack&#47;v5 v5.3.5&#47;go.mod h1:7xyJ9e+0+9SaZT0Wt1RGleJXzli6Q&#47;V5KbhBonMG9jc=</span>
<span class="term-fg32">+github.com&#47;vmihailenco&#47;tagparser&#47;v2 v2.0.0&#47;go.mod h1:Wri+At7QHww0WTrCBeu4J6bNtoV6mEfg5OIWRZA9qds=</span>
 github.com&#47;xrash&#47;smetrics v0.0.0-20201216005158-039620a65673 h1:bAn7&#47;zixMGCfxrRTfdpNzjtPYqr8smhKouy9mxVdGPU=
 github.com&#47;xrash&#47;smetrics v0.0.0-20201216005158-039620a65673&#47;go.mod h1:N3UwUGtsrSj3ccvlPHLoLsHnpR27oXr4ZE984MbSER8=
<span class="term-fg31">-github.com&#47;yalp&#47;jsonpath v0.0.0-20180802001716-5cc68e5049a0&#47;go.mod h1:&#47;LWChgwKmvncFJFHJ7Gvn9wZArjbV5&#47;FppcK2fKk&#47;tI=</span>
<span class="term-fg31">-github.com&#47;yudai&#47;gojsondiff v1.0.0&#47;go.mod h1:AY32+k2cwILAkW1fbgxQ5mUmMiZFgLIV+FBNExI05xg=</span>
<span class="term-fg31">-github.com&#47;yudai&#47;golcs v0.0.0-20170316035057-ecda9a501e82&#47;go.mod h1:lgjkn3NuSvDfVJdfcVVdX+jpBxNmX4rDAzaS45IcYoM=</span>
<span class="term-fg31">-github.com&#47;yudai&#47;pp v2.0.1+incompatible&#47;go.mod h1:PuxR&#47;8QJ7cyCkFp&#47;aUDS+JY727OFEZkTdatxwunjIkc=</span>
<span class="term-fg32">+github.com&#47;yosssi&#47;ace v0.0.5&#47;go.mod h1:ALfIzm2vT7t5ZE7uoIZqF3TQ7SAOyupFZnkrF5id+K0=</span>
 github.com&#47;yuin&#47;goldmark v1.1.25&#47;go.mod h1:3hX8gzYuyVAZsxl0MRgGTJEmQBFcNTphYh9decYSb74=
 github.com&#47;yuin&#47;goldmark v1.1.27&#47;go.mod h1:3hX8gzYuyVAZsxl0MRgGTJEmQBFcNTphYh9decYSb74=
 github.com&#47;yuin&#47;goldmark v1.1.32&#47;go.mod h1:3hX8gzYuyVAZsxl0MRgGTJEmQBFcNTphYh9decYSb74=
<span class="term-fg36">@@ -613,18 +734,16 @@</span> go.opencensus.io v0.22.4&#47;go.mod h1:yxeiOL68Rb0Xd1ddK5vPZ&#47;oVn4vY4Ynel7k9FzqtOIw=
 go.uber.org&#47;automaxprocs v1.5.2 h1:2LxUOGiR3O6tw8ui5sZa2LAaHnsviZdVOUZw4fvbnME=
 go.uber.org&#47;automaxprocs v1.5.2&#47;go.mod h1:eRbA25aqJrxAbsLO0xy5jVwPt7FQnRgjW+efnwa1WM0=
 golang.org&#47;x&#47;crypto v0.0.0-20180904163835-0709b304e793&#47;go.mod h1:6SG95UA2DQfeDnfUPMdvaQW0Q7yPrPDi9nlGo2tz2b4=
<span class="term-fg31">-golang.org&#47;x&#47;crypto v0.0.0-20181203042331-505ab145d0a9&#47;go.mod h1:6SG95UA2DQfeDnfUPMdvaQW0Q7yPrPDi9nlGo2tz2b4=</span>
 golang.org&#47;x&#47;crypto v0.0.0-20190308221718-c2843e01d9a2&#47;go.mod h1:djNgcEr1&#47;C05ACkg1iLfiJU5Ep61QUkGW8qpdssI0+w=
 golang.org&#47;x&#47;crypto v0.0.0-20190510104115-cbcb75029529&#47;go.mod h1:yigFU9vqHzYiE8UmvKecakEJjdnWj3jj499lnFckfCI=
 golang.org&#47;x&#47;crypto v0.0.0-20190605123033-f99c8df09eb5&#47;go.mod h1:yigFU9vqHzYiE8UmvKecakEJjdnWj3jj499lnFckfCI=
<span class="term-fg31">-golang.org&#47;x&#47;crypto v0.0.0-20190701094942-4def268fd1a4&#47;go.mod h1:yigFU9vqHzYiE8UmvKecakEJjdnWj3jj499lnFckfCI=</span>
 golang.org&#47;x&#47;crypto v0.0.0-20191011191535-87dc89f01550&#47;go.mod h1:yigFU9vqHzYiE8UmvKecakEJjdnWj3jj499lnFckfCI=
 golang.org&#47;x&#47;crypto v0.0.0-20200622213623-75b288015ac9&#47;go.mod h1:LzIPMQfyMNhhGPhUkYOs5KpL4U8rLKemX1yGLhDgUto=
 golang.org&#47;x&#47;crypto v0.0.0-20200820211705-5c72a883971a&#47;go.mod h1:LzIPMQfyMNhhGPhUkYOs5KpL4U8rLKemX1yGLhDgUto=
 golang.org&#47;x&#47;crypto v0.0.0-20201221181555-eec23a3978ad&#47;go.mod h1:jdWPYTVW3xRLrWPugEBEK3UY2ZEsg3UU495nc5E+M+I=
 golang.org&#47;x&#47;crypto v0.0.0-20210921155107-089bfa567519&#47;go.mod h1:GvvjBRRGRdwPK5ydBHafDWAxML&#47;pGHZbMvKqRZ5+Abc=
<span class="term-fg31">-golang.org&#47;x&#47;crypto v0.17.0 h1:r8bRNjWL3GshPW3gkd+RpvzWrZAwPS49OmTGZ&#47;uhM4k=</span>
<span class="term-fg31">-golang.org&#47;x&#47;crypto v0.17.0&#47;go.mod h1:gCAAfMLgwOJRpTjQ2zCCt2OcSfYMTeZVSRtQlPC7Nq4=</span>
<span class="term-fg32">+golang.org&#47;x&#47;crypto v0.19.0 h1:ENy+Az&#47;9Y1vSrlrvBSyna3PITt4tiZLf7sgCjZBX7Wo=</span>
<span class="term-fg32">+golang.org&#47;x&#47;crypto v0.19.0&#47;go.mod h1:Iy9bg&#47;ha4yyC70EfRS8jz+B6ybOBKMaSxLj6P6oBDfU=</span>
 golang.org&#47;x&#47;exp v0.0.0-20190121172915-509febef88a4&#47;go.mod h1:CJ0aWSM057203Lf6IL+f9T1iT9GByDxfZKAQTCR3kQA=
 golang.org&#47;x&#47;exp v0.0.0-20190306152737-a1d7652674e8&#47;go.mod h1:CJ0aWSM057203Lf6IL+f9T1iT9GByDxfZKAQTCR3kQA=
 golang.org&#47;x&#47;exp v0.0.0-20190510132918-efd6b22b2522&#47;go.mod h1:ZjyILWgesfNpC6sMxTJOJm9Kp84zZh5NQWvqDGG3Qr8=
<span class="term-fg36">@@ -664,11 +783,9 @@</span> golang.org&#47;x&#47;net v0.0.0-20180724234803-3673e40ba225&#47;go.mod h1:mL1N&#47;T3taQHkDXs73rZJwtUhF3w3ftmwwsq0BUmARs4=
 golang.org&#47;x&#47;net v0.0.0-20180826012351-8a410e7b638d&#47;go.mod h1:mL1N&#47;T3taQHkDXs73rZJwtUhF3w3ftmwwsq0BUmARs4=
 golang.org&#47;x&#47;net v0.0.0-20180906233101-161cd47e91fd&#47;go.mod h1:mL1N&#47;T3taQHkDXs73rZJwtUhF3w3ftmwwsq0BUmARs4=
 golang.org&#47;x&#47;net v0.0.0-20181114220301-adae6a3d119a&#47;go.mod h1:mL1N&#47;T3taQHkDXs73rZJwtUhF3w3ftmwwsq0BUmARs4=
<span class="term-fg31">-golang.org&#47;x&#47;net v0.0.0-20181220203305-927f97764cc3&#47;go.mod h1:mL1N&#47;T3taQHkDXs73rZJwtUhF3w3ftmwwsq0BUmARs4=</span>
 golang.org&#47;x&#47;net v0.0.0-20190108225652-1e06a53dbb7e&#47;go.mod h1:mL1N&#47;T3taQHkDXs73rZJwtUhF3w3ftmwwsq0BUmARs4=
 golang.org&#47;x&#47;net v0.0.0-20190213061140-3a22650c66bd&#47;go.mod h1:mL1N&#47;T3taQHkDXs73rZJwtUhF3w3ftmwwsq0BUmARs4=
 golang.org&#47;x&#47;net v0.0.0-20190311183353-d8887717615a&#47;go.mod h1:t9HGtf8HONx5eT2rtn7q6eTqICYqUVnKs3thJo3Qplg=
<span class="term-fg31">-golang.org&#47;x&#47;net v0.0.0-20190327091125-710a502c58a2&#47;go.mod h1:t9HGtf8HONx5eT2rtn7q6eTqICYqUVnKs3thJo3Qplg=</span>
 golang.org&#47;x&#47;net v0.0.0-20190404232315-eb5bcb51f2a3&#47;go.mod h1:t9HGtf8HONx5eT2rtn7q6eTqICYqUVnKs3thJo3Qplg=
 golang.org&#47;x&#47;net v0.0.0-20190501004415-9ce7a6920f09&#47;go.mod h1:t9HGtf8HONx5eT2rtn7q6eTqICYqUVnKs3thJo3Qplg=
 golang.org&#47;x&#47;net v0.0.0-20190503192946-f4e77d36d62c&#47;go.mod h1:t9HGtf8HONx5eT2rtn7q6eTqICYqUVnKs3thJo3Qplg=
<span class="term-fg36">@@ -677,7 +794,6 @@</span> golang.org&#47;x&#47;net v0.0.0-20190613194153-d28f0bde5980&#47;go.mod h1:z5CRVTTTmAJ677TzLLGU+0bjPO0LkuOLi4&#47;5GtJWs&#47;s=
 golang.org&#47;x&#47;net v0.0.0-20190620200207-3b0461eec859&#47;go.mod h1:z5CRVTTTmAJ677TzLLGU+0bjPO0LkuOLi4&#47;5GtJWs&#47;s=
 golang.org&#47;x&#47;net v0.0.0-20190628185345-da137c7871d7&#47;go.mod h1:z5CRVTTTmAJ677TzLLGU+0bjPO0LkuOLi4&#47;5GtJWs&#47;s=
 golang.org&#47;x&#47;net v0.0.0-20190724013045-ca1201d0de80&#47;go.mod h1:z5CRVTTTmAJ677TzLLGU+0bjPO0LkuOLi4&#47;5GtJWs&#47;s=
<span class="term-fg31">-golang.org&#47;x&#47;net v0.0.0-20190827160401-ba9fcec4b297&#47;go.mod h1:z5CRVTTTmAJ677TzLLGU+0bjPO0LkuOLi4&#47;5GtJWs&#47;s=</span>
 golang.org&#47;x&#47;net v0.0.0-20191209160850-c0dbc17a3553&#47;go.mod h1:z5CRVTTTmAJ677TzLLGU+0bjPO0LkuOLi4&#47;5GtJWs&#47;s=
 golang.org&#47;x&#47;net v0.0.0-20200114155413-6afb5195e5aa&#47;go.mod h1:z5CRVTTTmAJ677TzLLGU+0bjPO0LkuOLi4&#47;5GtJWs&#47;s=
 golang.org&#47;x&#47;net v0.0.0-20200202094626-16171245cfb2&#47;go.mod h1:z5CRVTTTmAJ677TzLLGU+0bjPO0LkuOLi4&#47;5GtJWs&#47;s=
<span class="term-fg36">@@ -699,14 +815,16 @@</span> golang.org&#47;x&#47;net v0.0.0-20210119194325-5f4716e94777&#47;go.mod h1:m0MpNAwzfU5UDzcl9v0D8zg8gWTRqZa9RBIspLL5mdg=
 golang.org&#47;x&#47;net v0.0.0-20210226172049-e18ecbb05110&#47;go.mod h1:m0MpNAwzfU5UDzcl9v0D8zg8gWTRqZa9RBIspLL5mdg=
 golang.org&#47;x&#47;net v0.0.0-20210525063256-abc453219eb5&#47;go.mod h1:9nx3DQGgdP8bBQD5qxJ1jj9UTztislL4KSBs9R2vV5Y=
 golang.org&#47;x&#47;net v0.0.0-20220722155237-a158d28d115b&#47;go.mod h1:XRhObCWvk6IyKnWLug+ECip1KBveYUHfp+8e9klMJ9c=
<span class="term-fg31">-golang.org&#47;x&#47;net v0.18.0 h1:mIYleuAkSbHh0tCv7RvjL3F6ZVbLjq4+R7zbOn3Kokg=</span>
<span class="term-fg31">-golang.org&#47;x&#47;net v0.18.0&#47;go.mod h1:&#47;czyP5RqHAH4odGYxBJ1qz0+CE5WZ+2j1YgoEo8F2jQ=</span>
<span class="term-fg32">+golang.org&#47;x&#47;net v0.21.0 h1:AQyQV4dYCvJ7vGmJyKki9+PBdyvhkSd8EIx&#47;qb0AYv4=</span>
<span class="term-fg32">+golang.org&#47;x&#47;net v0.21.0&#47;go.mod h1:bIjVDfnllIU7BJ2DNgfnXvpSvtn8VRwhlsaeUTyUS44=</span>
 golang.org&#47;x&#47;oauth2 v0.0.0-20180821212333-d2e6202438be&#47;go.mod h1:N&#47;0e6XlmueqKjAGxoOufVs8QHGRruUQn6yWY3a++T0U=
 golang.org&#47;x&#47;oauth2 v0.0.0-20190226205417-e64efc72b421&#47;go.mod h1:gOpvHmFTYa4IltrdGE7lF6nIHvwfUNPOp7c8zoXwtLw=
 golang.org&#47;x&#47;oauth2 v0.0.0-20190604053449-0f29369cfe45&#47;go.mod h1:gOpvHmFTYa4IltrdGE7lF6nIHvwfUNPOp7c8zoXwtLw=
 golang.org&#47;x&#47;oauth2 v0.0.0-20191202225959-858c2ad4c8b6&#47;go.mod h1:gOpvHmFTYa4IltrdGE7lF6nIHvwfUNPOp7c8zoXwtLw=
 golang.org&#47;x&#47;oauth2 v0.0.0-20200107190931-bf48bf16ab8d&#47;go.mod h1:gOpvHmFTYa4IltrdGE7lF6nIHvwfUNPOp7c8zoXwtLw=
 golang.org&#47;x&#47;oauth2 v0.0.0-20210514164344-f6687ab2804c&#47;go.mod h1:KelEdhl1UZF7XfJ4dDtk6s++YSgaE7mD&#47;BuKKDLBl4A=
<span class="term-fg32">+golang.org&#47;x&#47;oauth2 v0.4.0&#47;go.mod h1:RznEsdpjGAINPTOF0UH&#47;t+xJ75L18YO3Ho6Pyn+uRec=</span>
<span class="term-fg32">+golang.org&#47;x&#47;perf v0.0.0-20230113213139-801c7ef9e5c5&#47;go.mod h1:UBKtEnL8aqnd+0JHqZ+2qoMDwtuy6cYhhKNoHLBiTQc=</span>
 golang.org&#47;x&#47;sync v0.0.0-20180314180146-1d60e4601c6f&#47;go.mod h1:RxMgew5VJxzue5&#47;jJTE5uejpjVlOe&#47;izrB70Jof72aM=
 golang.org&#47;x&#47;sync v0.0.0-20181108010431-42b317875d0f&#47;go.mod h1:RxMgew5VJxzue5&#47;jJTE5uejpjVlOe&#47;izrB70Jof72aM=
 golang.org&#47;x&#47;sync v0.0.0-20181221193216-37e7f081c4d4&#47;go.mod h1:RxMgew5VJxzue5&#47;jJTE5uejpjVlOe&#47;izrB70Jof72aM=
<span class="term-fg36">@@ -725,7 +843,6 @@</span> golang.org&#47;x&#47;sys v0.0.0-20180830151530-49385e6e1522&#47;go.mod h1:STP8DvDyc&#47;dI5b8T5hshtkjS+E42TnysNCUPdjciGhY=
 golang.org&#47;x&#47;sys v0.0.0-20180905080454-ebe1bf3edb33&#47;go.mod h1:STP8DvDyc&#47;dI5b8T5hshtkjS+E42TnysNCUPdjciGhY=
 golang.org&#47;x&#47;sys v0.0.0-20180909124046-d0be0721c37e&#47;go.mod h1:STP8DvDyc&#47;dI5b8T5hshtkjS+E42TnysNCUPdjciGhY=
 golang.org&#47;x&#47;sys v0.0.0-20181116152217-5ac8a444bdc5&#47;go.mod h1:STP8DvDyc&#47;dI5b8T5hshtkjS+E42TnysNCUPdjciGhY=
<span class="term-fg31">-golang.org&#47;x&#47;sys v0.0.0-20181205085412-a5c9d58dba9a&#47;go.mod h1:STP8DvDyc&#47;dI5b8T5hshtkjS+E42TnysNCUPdjciGhY=</span>
 golang.org&#47;x&#47;sys v0.0.0-20190215142949-d0b11bdaac8a&#47;go.mod h1:STP8DvDyc&#47;dI5b8T5hshtkjS+E42TnysNCUPdjciGhY=
 golang.org&#47;x&#47;sys v0.0.0-20190222072716-a9d3bda3a223&#47;go.mod h1:STP8DvDyc&#47;dI5b8T5hshtkjS+E42TnysNCUPdjciGhY=
 golang.org&#47;x&#47;sys v0.0.0-20190312061237-fead79001313&#47;go.mod h1:h1NjWce9XRLGQEsW7wpKNCjG9DtNlClVuFLEZdDNbEs=
<span class="term-fg36">@@ -735,7 +852,6 @@</span> golang.org&#47;x&#47;sys v0.0.0-20190502145724-3ef323f4f1fd&#47;go.mod h1:h1NjWce9XRLGQEsW7wpKNCjG9DtNlClVuFLEZdDNbEs=
 golang.org&#47;x&#47;sys v0.0.0-20190507160741-ecd444e8653b&#47;go.mod h1:h1NjWce9XRLGQEsW7wpKNCjG9DtNlClVuFLEZdDNbEs=
 golang.org&#47;x&#47;sys v0.0.0-20190606165138-5da285871e9c&#47;go.mod h1:h1NjWce9XRLGQEsW7wpKNCjG9DtNlClVuFLEZdDNbEs=
 golang.org&#47;x&#47;sys v0.0.0-20190624142023-c5567b49c5d0&#47;go.mod h1:h1NjWce9XRLGQEsW7wpKNCjG9DtNlClVuFLEZdDNbEs=
<span class="term-fg31">-golang.org&#47;x&#47;sys v0.0.0-20190626221950-04f50cda93cb&#47;go.mod h1:h1NjWce9XRLGQEsW7wpKNCjG9DtNlClVuFLEZdDNbEs=</span>
 golang.org&#47;x&#47;sys v0.0.0-20190726091711-fc99dfbffb4e&#47;go.mod h1:h1NjWce9XRLGQEsW7wpKNCjG9DtNlClVuFLEZdDNbEs=
 golang.org&#47;x&#47;sys v0.0.0-20190813064441-fde4db37ae7a&#47;go.mod h1:h1NjWce9XRLGQEsW7wpKNCjG9DtNlClVuFLEZdDNbEs=
 golang.org&#47;x&#47;sys v0.0.0-20190904154756-749cb33beabd&#47;go.mod h1:h1NjWce9XRLGQEsW7wpKNCjG9DtNlClVuFLEZdDNbEs=
<span class="term-fg36">@@ -777,6 +893,7 @@</span> golang.org&#47;x&#47;sys v0.0.0-20210630005230-0f9fa26af87c&#47;go.mod h1:oPkhp1MJrh7nUepCBck5+mAzfO9JrbApNNgaTdGDITg=
 golang.org&#47;x&#47;sys v0.0.0-20220114195835-da31bd327af9&#47;go.mod h1:oPkhp1MJrh7nUepCBck5+mAzfO9JrbApNNgaTdGDITg=
 golang.org&#47;x&#47;sys v0.0.0-20220310020820-b874c991c1a5&#47;go.mod h1:oPkhp1MJrh7nUepCBck5+mAzfO9JrbApNNgaTdGDITg=
 golang.org&#47;x&#47;sys v0.0.0-20220520151302-bc2c85ada10a&#47;go.mod h1:oPkhp1MJrh7nUepCBck5+mAzfO9JrbApNNgaTdGDITg=
<span class="term-fg32">+golang.org&#47;x&#47;sys v0.0.0-20220715151400-c0bba94af5f8&#47;go.mod h1:oPkhp1MJrh7nUepCBck5+mAzfO9JrbApNNgaTdGDITg=</span>
 golang.org&#47;x&#47;sys v0.0.0-20220722155257-8c9f86f7a55f&#47;go.mod h1:oPkhp1MJrh7nUepCBck5+mAzfO9JrbApNNgaTdGDITg=
 golang.org&#47;x&#47;sys v0.0.0-20220811171246-fbc7d0a398ab&#47;go.mod h1:oPkhp1MJrh7nUepCBck5+mAzfO9JrbApNNgaTdGDITg=
 golang.org&#47;x&#47;sys v0.0.0-20220908164124-27713097b956&#47;go.mod h1:oPkhp1MJrh7nUepCBck5+mAzfO9JrbApNNgaTdGDITg=
<span class="term-fg36">@@ -784,11 +901,12 @@</span> golang.org&#47;x&#47;sys v0.1.0&#47;go.mod h1:oPkhp1MJrh7nUepCBck5+mAzfO9JrbApNNgaTdGDITg=
 golang.org&#47;x&#47;sys v0.5.0&#47;go.mod h1:oPkhp1MJrh7nUepCBck5+mAzfO9JrbApNNgaTdGDITg=
 golang.org&#47;x&#47;sys v0.8.0&#47;go.mod h1:oPkhp1MJrh7nUepCBck5+mAzfO9JrbApNNgaTdGDITg=
 golang.org&#47;x&#47;sys v0.11.0&#47;go.mod h1:oPkhp1MJrh7nUepCBck5+mAzfO9JrbApNNgaTdGDITg=
<span class="term-fg31">-golang.org&#47;x&#47;sys v0.16.0 h1:xWw16ngr6ZMtmxDyKyIgsE93KNKz5HKmMa3b8ALHidU=</span>
<span class="term-fg31">-golang.org&#47;x&#47;sys v0.16.0&#47;go.mod h1:&#47;VUhepiaJMQUp4+oa&#47;7Zr1D23ma6VTLIYjOOTFZPUcA=</span>
<span class="term-fg32">+golang.org&#47;x&#47;sys v0.17.0 h1:25cE3gD+tdBA7lp7QfhuV+rJiE9YXTcS3VG1SqssI&#47;Y=</span>
<span class="term-fg32">+golang.org&#47;x&#47;sys v0.17.0&#47;go.mod h1:&#47;VUhepiaJMQUp4+oa&#47;7Zr1D23ma6VTLIYjOOTFZPUcA=</span>
 golang.org&#47;x&#47;term v0.0.0-20201117132131-f5c789dd3221&#47;go.mod h1:Nr5EML6q2oocZ2LXRh80K7BxOlk5&#47;8JxuGnuhpl+muw=
 golang.org&#47;x&#47;term v0.0.0-20201126162022-7de9c90e9dd1&#47;go.mod h1:bj7SfCRtBDWHUb9snDiAeCFNEtKQo2Wmx5Cou7ajbmo=
 golang.org&#47;x&#47;term v0.0.0-20210927222741-03fcf44c2211&#47;go.mod h1:jbD1KX2456YbFQfuXm&#47;mYQcufACuNUgVhRMnK&#47;tPxf8=
<span class="term-fg32">+golang.org&#47;x&#47;term v0.17.0&#47;go.mod h1:lLRBjIVuehSbZlaOtGMbcMncT+aqLLLmKrsjNrUguwk=</span>
 golang.org&#47;x&#47;text v0.0.0-20170915032832-14c0d48ead0c&#47;go.mod h1:NqM8EUOU14njkJ3fqMW+pc6Ldnwhi&#47;IjpwHt7yyuwOQ=
 golang.org&#47;x&#47;text v0.3.0&#47;go.mod h1:NqM8EUOU14njkJ3fqMW+pc6Ldnwhi&#47;IjpwHt7yyuwOQ=
 golang.org&#47;x&#47;text v0.3.1-0.20180807135948-17ff2d5776d2&#47;go.mod h1:NqM8EUOU14njkJ3fqMW+pc6Ldnwhi&#47;IjpwHt7yyuwOQ=
<span class="term-fg36">@@ -808,15 +926,11 @@</span> golang.org&#47;x&#47;time v0.0.0-20210220033141-f8bda1e9f3ba&#47;go.mod h1:tRJNPiyCQ0inRvYxbN9jk5I+vvW&#47;OXSQhTDSoE431IQ=
 golang.org&#47;x&#47;time v0.3.0 h1:rg5rLMjNzMS1RkNLzCG38eapWhnYLFYXDXj2gOlr8j4=
 golang.org&#47;x&#47;time v0.3.0&#47;go.mod h1:tRJNPiyCQ0inRvYxbN9jk5I+vvW&#47;OXSQhTDSoE431IQ=
 golang.org&#47;x&#47;tools v0.0.0-20180917221912-90fa682c2a6e&#47;go.mod h1:n7NCudcB&#47;nEzxVGmLbDWY5pfWTLqBcC2KZ6jyYvM4mQ=
<span class="term-fg31">-golang.org&#47;x&#47;tools v0.0.0-20181030221726-6c7e314b6563&#47;go.mod h1:n7NCudcB&#47;nEzxVGmLbDWY5pfWTLqBcC2KZ6jyYvM4mQ=</span>
<span class="term-fg31">-golang.org&#47;x&#47;tools v0.0.0-20181221001348-537d06c36207&#47;go.mod h1:n7NCudcB&#47;nEzxVGmLbDWY5pfWTLqBcC2KZ6jyYvM4mQ=</span>
 golang.org&#47;x&#47;tools v0.0.0-20190114222345-bf090417da8b&#47;go.mod h1:n7NCudcB&#47;nEzxVGmLbDWY5pfWTLqBcC2KZ6jyYvM4mQ=
 golang.org&#47;x&#47;tools v0.0.0-20190226205152-f727befe758c&#47;go.mod h1:9Yl7xja0Znq3iFh3HoIrodX9oNMXvdceNzlUR8zjMvY=
 golang.org&#47;x&#47;tools v0.0.0-20190311212946-11955173bddd&#47;go.mod h1:LCzVGOaR6xXOjkQ3onu1FJEFr0SW1gC7cKk1uF8kGRs=
 golang.org&#47;x&#47;tools v0.0.0-20190312151545-0bb0c0a6e846&#47;go.mod h1:LCzVGOaR6xXOjkQ3onu1FJEFr0SW1gC7cKk1uF8kGRs=
 golang.org&#47;x&#47;tools v0.0.0-20190312170243-e65039ee4138&#47;go.mod h1:LCzVGOaR6xXOjkQ3onu1FJEFr0SW1gC7cKk1uF8kGRs=
<span class="term-fg31">-golang.org&#47;x&#47;tools v0.0.0-20190327201419-c70d86f8b7cf&#47;go.mod h1:LCzVGOaR6xXOjkQ3onu1FJEFr0SW1gC7cKk1uF8kGRs=</span>
<span class="term-fg31">-golang.org&#47;x&#47;tools v0.0.0-20190328211700-ab21143f2384&#47;go.mod h1:LCzVGOaR6xXOjkQ3onu1FJEFr0SW1gC7cKk1uF8kGRs=</span>
 golang.org&#47;x&#47;tools v0.0.0-20190425150028-36563e24a262&#47;go.mod h1:RgjU9mgBXZiqYHBnxXauZ1Gv1EHHAz9KjViQ78xBX0Q=
 golang.org&#47;x&#47;tools v0.0.0-20190506145303-2d16b83fe98c&#47;go.mod h1:RgjU9mgBXZiqYHBnxXauZ1Gv1EHHAz9KjViQ78xBX0Q=
 golang.org&#47;x&#47;tools v0.0.0-20190524140312-2c0ae7006135&#47;go.mod h1:RgjU9mgBXZiqYHBnxXauZ1Gv1EHHAz9KjViQ78xBX0Q=
<span class="term-fg36">@@ -859,7 +973,6 @@</span> golang.org&#47;x&#47;tools v0.15.0&#47;go.mod h1:hpksKq4dtpQWS1uQ61JkdqWM3LscIS6Slf+VVkm+wQk=
 golang.org&#47;x&#47;xerrors v0.0.0-20190717185122-a985d3407aa7&#47;go.mod h1:I&#47;5z698sn9Ka8TeJc9MKroUUfqBBauWjQqLJ2OPfmY0=
 golang.org&#47;x&#47;xerrors v0.0.0-20191011141410-1b5146add898&#47;go.mod h1:I&#47;5z698sn9Ka8TeJc9MKroUUfqBBauWjQqLJ2OPfmY0=
 golang.org&#47;x&#47;xerrors v0.0.0-20191204190536-9bdfabe68543&#47;go.mod h1:I&#47;5z698sn9Ka8TeJc9MKroUUfqBBauWjQqLJ2OPfmY0=
<span class="term-fg31">-golang.org&#47;x&#47;xerrors v0.0.0-20200804184101-5ec99f83aff1 h1:go1bK&#47;D&#47;BFZV2I8cIQd1NKEZ+0owSTG1fDTci4IqFcE=</span>
 golang.org&#47;x&#47;xerrors v0.0.0-20200804184101-5ec99f83aff1&#47;go.mod h1:I&#47;5z698sn9Ka8TeJc9MKroUUfqBBauWjQqLJ2OPfmY0=
 google.golang.org&#47;api v0.4.0&#47;go.mod h1:8k5glujaEP+g9n7WNsDg8QP6cUVNI86fCNMcbazEtwE=
 google.golang.org&#47;api v0.7.0&#47;go.mod h1:WtwebWUNSVBH&#47;HAw79HIFXZNqEvBhG+Ra+ax0hx3E3M=
<span class="term-fg36">@@ -883,7 +996,7 @@</span> google.golang.org&#47;appengine v1.5.0&#47;go.mod h1:xpcJRLb0r&#47;rnEns0DIKYYv+WjYCduHsrkT7&#47;EB5XEv4=
 google.golang.org&#47;appengine v1.6.1&#47;go.mod h1:i06prIuMbXzDqacNJfV5OdTW448YApPu5ww&#47;cMBSeb0=
 google.golang.org&#47;appengine v1.6.5&#47;go.mod h1:8WjMMxjGQR8xUklV&#47;ARdw2HLXBOI7O7uCIDZVag1xfc=
 google.golang.org&#47;appengine v1.6.6&#47;go.mod h1:8WjMMxjGQR8xUklV&#47;ARdw2HLXBOI7O7uCIDZVag1xfc=
<span class="term-fg31">-google.golang.org&#47;genproto v0.0.0-20180518175338-11a468237815&#47;go.mod h1:JiN7NxoALGmiZfu7CAH4rXhgtRTLTxftemlI0sWmxmc=</span>
<span class="term-fg32">+google.golang.org&#47;appengine v1.6.7&#47;go.mod h1:8WjMMxjGQR8xUklV&#47;ARdw2HLXBOI7O7uCIDZVag1xfc=</span>
 google.golang.org&#47;genproto v0.0.0-20180817151627-c66870c02cf8&#47;go.mod h1:JiN7NxoALGmiZfu7CAH4rXhgtRTLTxftemlI0sWmxmc=
 google.golang.org&#47;genproto v0.0.0-20190307195333-5fe7a883aa19&#47;go.mod h1:VzzqZJRnGkLBvHegQrXjBqPurQTc5&#47;KpmUdxsrq26oE=
 google.golang.org&#47;genproto v0.0.0-20190418145605-e7d98fc518a7&#47;go.mod h1:VzzqZJRnGkLBvHegQrXjBqPurQTc5&#47;KpmUdxsrq26oE=
<span class="term-fg36">@@ -913,7 +1026,8 @@</span> google.golang.org&#47;genproto v0.0.0-20200618031413-b414f8b61790&#47;go.mod h1:jDfRM7FcilCzHH&#47;e9qn6dsT145K34l5v+OpcnNgKAAA=
 google.golang.org&#47;genproto v0.0.0-20200729003335-053ba62fc06f&#47;go.mod h1:FWY&#47;as6DDZQgahTzZj3fqbO1CbirC29ZNUFHwi0&#47;+no=
 google.golang.org&#47;genproto v0.0.0-20200804131852-c06518451d9c&#47;go.mod h1:FWY&#47;as6DDZQgahTzZj3fqbO1CbirC29ZNUFHwi0&#47;+no=
 google.golang.org&#47;genproto v0.0.0-20200825200019-8632dd797987&#47;go.mod h1:FWY&#47;as6DDZQgahTzZj3fqbO1CbirC29ZNUFHwi0&#47;+no=
<span class="term-fg31">-google.golang.org&#47;grpc v1.12.0&#47;go.mod h1:yo6s7OP7yaDglbqo1J04qKzAhqBH6lvTonzMVmEdcZw=</span>
<span class="term-fg32">+google.golang.org&#47;genproto v0.0.0-20230227214838-9b19f0bdc514 h1:rtNKfB++wz5mtDY2t5C8TXlU5y52ojSu7tZo0z7u8eQ=</span>
<span class="term-fg32">+google.golang.org&#47;genproto v0.0.0-20230227214838-9b19f0bdc514&#47;go.mod h1:TvhZT5f700eVlTNwND1xoEZQeWTB2RY&#47;65kplwl&#47;bFA=</span>
 google.golang.org&#47;grpc v1.19.0&#47;go.mod h1:mqu4LbDTu4XGKhr4mRzUsmM4RtVoemTSY81AxZiDr8c=
 google.golang.org&#47;grpc v1.20.1&#47;go.mod h1:10oTOabMzJvdu6&#47;UiuZezV6QK5dSlG84ov&#47;aaiqXj38=
 google.golang.org&#47;grpc v1.21.1&#47;go.mod h1:oYelfM1adQP15Ek0mdvEgi9Df8B9CZIaU1084ijfRaM=
<span class="term-fg36">@@ -926,6 +1040,8 @@</span> google.golang.org&#47;grpc v1.28.0&#47;go.mod h1:rpkK4SK4GF4Ach&#47;+MFLZUBavHOvF2JJB5uozKKal+60=
 google.golang.org&#47;grpc v1.29.1&#47;go.mod h1:itym6AZVZYACWQqET3MqgPpjcuV5QH3BxFS3IjizoKk=
 google.golang.org&#47;grpc v1.30.0&#47;go.mod h1:N36X2cJ7JwdamYAgDz+s+rVMFjt3numwzf&#47;HckM8pak=
 google.golang.org&#47;grpc v1.31.0&#47;go.mod h1:N36X2cJ7JwdamYAgDz+s+rVMFjt3numwzf&#47;HckM8pak=
<span class="term-fg32">+google.golang.org&#47;grpc v1.54.0 h1:EhTqbhiYeixwWQtAEZAxmV9MGqcjEU2mFx52xCzNyag=</span>
<span class="term-fg32">+google.golang.org&#47;grpc v1.54.0&#47;go.mod h1:PUSEXI6iWghWaB6lXM4knEgpJNu2qUcKfDtNci3EC2g=</span>
 google.golang.org&#47;protobuf v0.0.0-20200109180630-ec00e32a8dfd&#47;go.mod h1:DFci5gLYBciE7Vtevhsrf46CRTquxDuWsQurQQe4oz8=
 google.golang.org&#47;protobuf v0.0.0-20200221191635-4d8936d0db64&#47;go.mod h1:kwYJMbMJ01Woi6D6+Kah6886xMZcty6N08ah7+eCXa0=
 google.golang.org&#47;protobuf v0.0.0-20200228230310-ab0ca4ff8a60&#47;go.mod h1:cfTl7dwQJ+fmap5saPgwCLgHXTUD7jkjRqWcaiX5VyM=
<span class="term-fg36">@@ -938,8 +1054,8 @@</span> google.golang.org&#47;protobuf v1.24.0&#47;go.mod h1:r&#47;3tXBNzIEhYS9I1OUVjXDlt8tc493IdKGjtUeSXeh4=
 google.golang.org&#47;protobuf v1.25.0&#47;go.mod h1:9JNX74DMeImyA3h4bdi1ymwjUzf21&#47;xIlbajtzgsN7c=
 google.golang.org&#47;protobuf v1.26.0-rc.1&#47;go.mod h1:jlhhOSvTdKEhbULTjvd4ARK9grFBp09yW+WbY&#47;TyQbw=
 google.golang.org&#47;protobuf v1.26.0&#47;go.mod h1:9q0QmTI4eRPtz6boOQmLYwt+qCgq0jsYwAQnmE0givc=
<span class="term-fg31">-google.golang.org&#47;protobuf v1.27.1 h1:SnqbnDw1V7RiZcXPx5MEeqPv2s79L9i7BJUlG&#47;+RurQ=</span>
<span class="term-fg31">-google.golang.org&#47;protobuf v1.27.1&#47;go.mod h1:9q0QmTI4eRPtz6boOQmLYwt+qCgq0jsYwAQnmE0givc=</span>
<span class="term-fg32">+google.golang.org&#47;protobuf v1.30.0 h1:kPPoIgf3TsEvrm0PFe15JQ+570QVxYzEvvHqChK+cng=</span>
<span class="term-fg32">+google.golang.org&#47;protobuf v1.30.0&#47;go.mod h1:HV8QOd&#47;L58Z+nl8r43ehVNZIU&#47;HEI6OcFqwMG9pJV4I=</span>
 gopkg.in&#47;alecthomas&#47;kingpin.v2 v2.2.6&#47;go.mod h1:FMv+mEhP44yOT+4EoQTLFTRgOQ1FBLkstjWtayDeSgw=
 gopkg.in&#47;check.v1 v0.0.0-20161208181325-20d25e280405&#47;go.mod h1:Co6ibVJAznAaIkqp8huTwlJQCZ016jof&#47;cbN4VW5Yz0=
 gopkg.in&#47;check.v1 v1.0.0-20180628173108-788fd7840127&#47;go.mod h1:Co6ibVJAznAaIkqp8huTwlJQCZ016jof&#47;cbN4VW5Yz0=
<span class="term-fg36">@@ -948,9 +1064,7 @@</span> gopkg.in&#47;check.v1 v1.0.0-20201130134442-10cb98267c6c h1:Hei&#47;4ADfdWqJk1ZMxUNpqntNwaWcugrBjAiHlqqRiVk=
 gopkg.in&#47;check.v1 v1.0.0-20201130134442-10cb98267c6c&#47;go.mod h1:JHkPIbrfpd72SG&#47;EVd6muEfDQjcINNoR0C8j2r3qZ4Q=
 gopkg.in&#47;errgo.v2 v2.1.0&#47;go.mod h1:hNsd1EY+bozCKY1Ytp96fpM3vjJbqLJn88ws8XvfDNI=
 gopkg.in&#47;fsnotify.v1 v1.4.7&#47;go.mod h1:Tz8NjZHkW78fSQdbUxIjBTcgA1z1m8ZHf0WmKUhAMys=
<span class="term-fg31">-gopkg.in&#47;go-playground&#47;assert.v1 v1.2.1&#47;go.mod h1:9RXL0bg&#47;zibRAgZUYszZSwO&#47;z8Y&#47;a8bDuhia5mkpMnE=</span>
<span class="term-fg31">-gopkg.in&#47;go-playground&#47;validator.v8 v8.18.2&#47;go.mod h1:RX2a&#47;7Ha8BgOhfk7j780h4&#47;u&#47;RRjR0eouCJSH80&#47;M2Y=</span>
<span class="term-fg31">-gopkg.in&#47;mgo.v2 v2.0.0-20180705113604-9856a29383ce&#47;go.mod h1:yeKp02qBN3iKW1OzL3MGk2IdtZzaj7SFntXj72NppTA=</span>
<span class="term-fg32">+gopkg.in&#47;ini.v1 v1.67.0&#47;go.mod h1:pNLf8WUiyNEtQjuu5G5vTm06TEv9tsIgeAvK8hOrP4k=</span>
 gopkg.in&#47;natefinch&#47;lumberjack.v2 v2.0.0 h1:1Lc07Kr7qY4U2YPouBjpCLxpiyxIVoxqXgkXLknAOE8=
 gopkg.in&#47;natefinch&#47;lumberjack.v2 v2.0.0&#47;go.mod h1:l0ndWWf7gzL7RNwBG7wST&#47;UCcT4T24xpD6X8LsfU&#47;+k=
 gopkg.in&#47;tomb.v1 v1.0.0-20141024135613-dd632973f1e7 h1:uRGJdciOHaEIrze2W8Q3AKkepLTh2hOroT7a+7czfdQ=
<span class="term-fg36">@@ -973,6 +1087,8 @@</span> honnef.co&#47;go&#47;tools v0.0.0-20190523083050-ea95bdfd59fc&#47;go.mod h1:rf3lG4BRIbNafJWhAfAdb&#47;ePZxsR&#47;4RtNHQocxwk9r4=
 honnef.co&#47;go&#47;tools v0.0.1-2019.2.3&#47;go.mod h1:a3bituU0lyd329TUQxRnasdCoJDkEUEAqEt0JzvZhAg=
 honnef.co&#47;go&#47;tools v0.0.1-2020.1.3&#47;go.mod h1:X&#47;FiERA&#47;W4tHapMX5mGpAtMSVEeEUOyHaw9vFzvIQ3k=
 honnef.co&#47;go&#47;tools v0.0.1-2020.1.4&#47;go.mod h1:X&#47;FiERA&#47;W4tHapMX5mGpAtMSVEeEUOyHaw9vFzvIQ3k=
<span class="term-fg32">+olympos.io&#47;encoding&#47;edn v0.0.0-20201019073823-d3554ca0b0a3 h1:slmdOY3vp8a7KQbHkL+FLbvbkgMqmXojpFUO&#47;jENuqQ=</span>
<span class="term-fg32">+olympos.io&#47;encoding&#47;edn v0.0.0-20201019073823-d3554ca0b0a3&#47;go.mod h1:oVgVk4OWVDi43qWBEyGhXgYxt7+ED4iYNpTngSLX2Iw=</span>
 rsc.io&#47;binaryregexp v0.2.0&#47;go.mod h1:qTv7&#47;COck+e2FymRvadv62gMdZztPaShugOCi3I+8D8=
 rsc.io&#47;quote&#47;v3 v3.1.0&#47;go.mod h1:yEA65RcK8LyAZtP9Kv3t0HmxON59tX3rD+tICJqUlj0=
 rsc.io&#47;sampler v1.3.0&#47;go.mod h1:T1hPZKmBbMNahiBKFy5HrXp6adAjACjK9JXDnKaTXpA=</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-9d0d3995ab530e8423371578" role="button"
                       aria-expanded="false" aria-controls="id-9d0d3995ab530e8423371578">
                        <code>internal/ethapi/api_test.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/internal/ethapi/api_test.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/internal/ethapi/api_test.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+1</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-1</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-9d0d3995ab530e8423371578"><span class="term-fg1">diff --git go-ethereum&#47;internal&#47;ethapi&#47;api_test.go immutable-geth&#47;internal&#47;ethapi&#47;api_test.go</span>
<span class="term-fg1">index a6f7405eb3637aa180406ffdac374e62c0b12c28..9517b08bab6cb7caf9edf4b6428a00ebc6c7a35d 100644</span>
<span class="term-fg1">--- go-ethereum&#47;internal&#47;ethapi&#47;api_test.go</span>
<span class="term-fg1">+++ immutable-geth&#47;internal&#47;ethapi&#47;api_test.go</span>
<span class="term-fg36">@@ -567,7 +567,7 @@</span> 	if vmConfig == nil {
 		vmConfig = b.chain.GetVMConfig()
 	}
 	txContext := core.NewEVMTxContext(msg)
<span class="term-fg31">-	context := core.NewEVMBlockContext(header, b.chain, nil)</span>
<span class="term-fg32">+	context := core.NewEVMBlockContext(header, b.chain, nil, b.ChainConfig())</span>
 	if blockContext != nil {
 		context = *blockContext
 	}</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-34df4ac756a6ee565c4fba5a" role="button"
                       aria-expanded="false" aria-controls="id-34df4ac756a6ee565c4fba5a">
                        <code>node/immutable_newrelic_test.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/node/immutable_newrelic_test.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+56</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-34df4ac756a6ee565c4fba5a"><span class="term-fg1">diff --git go-ethereum&#47;node&#47;immutable_newrelic_test.go immutable-geth&#47;node&#47;immutable_newrelic_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..4c5c0bbee82a1c9e3d06dfbb23693df5b5bda2e0</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;node&#47;immutable_newrelic_test.go</span>
<span class="term-fg36">@@ -0,0 +1,56 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package node</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;bytes&quot;</span>
<span class="term-fg32">+	&quot;errors&quot;</span>
<span class="term-fg32">+	&quot;io&quot;</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestLimitedTeeReader_Undersized(t *testing.T) {</span>
<span class="term-fg32">+	body := []byte(&quot;xxxxxxx&quot;)</span>
<span class="term-fg32">+	limitBytes := int64(len(body)) * 2</span>
<span class="term-fg32">+	oldReader := io.NopCloser(bytes.NewReader(body))</span>
<span class="term-fg32">+	content, newReader, err := limitedTeeRead(oldReader, limitBytes)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Fatalf(&quot;unexpected error: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if !bytes.Equal(content, body) {</span>
<span class="term-fg32">+		t.Fatalf(&quot;expected content to be the same, got: %v&quot;, content)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	readContent, err := io.ReadAll(newReader)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		t.Fatalf(&quot;unexpected error: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	if !bytes.Equal(readContent, body) {</span>
<span class="term-fg32">+		t.Fatalf(&quot;expected read content to be the same, got: %v&quot;, readContent)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestLimitedTeeReader_Oversized(t *testing.T) {</span>
<span class="term-fg32">+	first := []byte(&quot;xxxxxxx&quot;)</span>
<span class="term-fg32">+	second := []byte(&quot;yyyyyyy&quot;)</span>
<span class="term-fg32">+	body := append(first, second...)</span>
<span class="term-fg32">+	limitBytes := int64(len(first))</span>
<span class="term-fg32">+	readCloser := io.NopCloser(bytes.NewReader(body))</span>
<span class="term-fg32">+	_, _, err := limitedTeeRead(readCloser, limitBytes)</span>
<span class="term-fg32">+	if !errors.Is(err, errBodySizeExceedsLimit) {</span>
<span class="term-fg32">+		t.Fatalf(&quot;expected error specific error, got: %v&quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-10a5d8d452ff2b1fcc2a3890" role="button"
                       aria-expanded="false" aria-controls="id-10a5d8d452ff2b1fcc2a3890">
                        <code>node/rpcstack_test.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/node/rpcstack_test.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/node/rpcstack_test.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+2</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-2</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-10a5d8d452ff2b1fcc2a3890"><span class="term-fg1">diff --git go-ethereum&#47;node&#47;rpcstack_test.go immutable-geth&#47;node&#47;rpcstack_test.go</span>
<span class="term-fg1">index e41cc51ad318d49528403d1e037ce96ac1957574..0ab828828803e436b9a2428f247d0f8dea05be0e 100644</span>
<span class="term-fg1">--- go-ethereum&#47;node&#47;rpcstack_test.go</span>
<span class="term-fg1">+++ immutable-geth&#47;node&#47;rpcstack_test.go</span>
<span class="term-fg36">@@ -242,9 +242,9 @@</span> 	if timeouts == nil {
 		timeouts = &amp;rpc.DefaultHTTPTimeouts
 	}
 	srv := newHTTPServer(testlog.Logger(t, log.LvlDebug), *timeouts)
<span class="term-fg31">-	assert.NoError(t, srv.enableRPC(apis(), *conf))</span>
<span class="term-fg32">+	assert.NoError(t, srv.enableRPC(nil, apis(), *conf))</span>
 	if ws {
<span class="term-fg31">-		assert.NoError(t, srv.enableWS(nil, *wsConf))</span>
<span class="term-fg32">+		assert.NoError(t, srv.enableWS(nil, nil, *wsConf))</span>
 	}
 	assert.NoError(t, srv.setListenAddr(&quot;localhost&quot;, 0))
 	assert.NoError(t, srv.start())</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-941ff50073a17525f29f5b18" role="button"
                       aria-expanded="false" aria-controls="id-941ff50073a17525f29f5b18">
                        <code>params/immutable_config_test.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/params/immutable_config_test.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+78</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-941ff50073a17525f29f5b18"><span class="term-fg1">diff --git go-ethereum&#47;params&#47;immutable_config_test.go immutable-geth&#47;params&#47;immutable_config_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..04fe4965d41a9ed6d035cfa9abb27dd6a3aa1052</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;params&#47;immutable_config_test.go</span>
<span class="term-fg36">@@ -0,0 +1,78 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2017 The go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package params</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;settings&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutableConfig_ForkChecks_Valid(t *testing.T) {</span>
<span class="term-fg32">+	tests := []struct {</span>
<span class="term-fg32">+		name                string</span>
<span class="term-fg32">+		chainID             *big.Int</span>
<span class="term-fg32">+		shanghaiTimestamp   uint64</span>
<span class="term-fg32">+		prevrandaoTimestamp uint64</span>
<span class="term-fg32">+		cancunTimestamp     uint64</span>
<span class="term-fg32">+	}{</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name:                &quot;mainnet&quot;,</span>
<span class="term-fg32">+			chainID:             big.NewInt(settings.MainnetNetworkID),</span>
<span class="term-fg32">+			shanghaiTimestamp:   uint64(settings.MainnetShanghaiFork.Unix()),</span>
<span class="term-fg32">+			prevrandaoTimestamp: uint64(settings.MainnetPrevrandaoFork.Unix()),</span>
<span class="term-fg32">+			cancunTimestamp:     uint64(settings.MainnetCancunFork.Unix()),</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name:                &quot;testnet&quot;,</span>
<span class="term-fg32">+			chainID:             big.NewInt(settings.TestnetNetworkID),</span>
<span class="term-fg32">+			shanghaiTimestamp:   uint64(settings.TestnetShanghaiFork.Unix()),</span>
<span class="term-fg32">+			prevrandaoTimestamp: uint64(settings.TestnetPrevrandaoFork.Unix()),</span>
<span class="term-fg32">+			cancunTimestamp:     uint64(settings.TestnetCancunFork.Unix()),</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+		{</span>
<span class="term-fg32">+			name:                &quot;devnet&quot;,</span>
<span class="term-fg32">+			chainID:             big.NewInt(settings.DevnetNetworkID),</span>
<span class="term-fg32">+			shanghaiTimestamp:   uint64(settings.DevnetShanghaiFork.Unix()),</span>
<span class="term-fg32">+			prevrandaoTimestamp: uint64(settings.DevnetPrevrandaoFork.Unix()),</span>
<span class="term-fg32">+			cancunTimestamp:     uint64(settings.DevnetCancunFork.Unix()),</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	for _, tt := range tests {</span>
<span class="term-fg32">+		t.Run(tt.name, func(t *testing.T) {</span>
<span class="term-fg32">+			c := ChainConfig{</span>
<span class="term-fg32">+				ChainID:        tt.chainID,</span>
<span class="term-fg32">+				ShanghaiTime:   &amp;tt.shanghaiTimestamp,</span>
<span class="term-fg32">+				PrevrandaoTime: &amp;tt.prevrandaoTimestamp,</span>
<span class="term-fg32">+				LondonBlock:    big.NewInt(0),</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			if !c.IsImmutableZKEVMShanghai(c.LondonBlock, tt.shanghaiTimestamp) {</span>
<span class="term-fg32">+				t.Errorf(&quot;expected %v to be shanghai&quot;, tt.shanghaiTimestamp)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			if c.IsImmutableZKEVMShanghai(c.LondonBlock, tt.shanghaiTimestamp-10) {</span>
<span class="term-fg32">+				t.Errorf(&quot;expected %v to not be shanghai&quot;, tt.shanghaiTimestamp-10)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			if !c.IsImmutableZKEVMPrevrandao(tt.prevrandaoTimestamp) {</span>
<span class="term-fg32">+				t.Errorf(&quot;expected %v to be prevrandao&quot;, tt.prevrandaoTimestamp)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			if c.IsImmutableZKEVMPrevrandao(tt.prevrandaoTimestamp - 10) {</span>
<span class="term-fg32">+				t.Errorf(&quot;expected %v to not be prevrandao&quot;, tt.prevrandaoTimestamp-10)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		})</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-03bc850886c9cd3fd112d455" role="button"
                       aria-expanded="false" aria-controls="id-03bc850886c9cd3fd112d455">
                        <code>tests/immutable/acl_test.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/acl_test.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+165</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-03bc850886c9cd3fd112d455"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;acl_test.go immutable-geth&#47;tests&#47;immutable&#47;acl_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..e7fba2f8e8116f383915aea5c2398c8b879db39e</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;acl_test.go</span>
<span class="term-fg36">@@ -0,0 +1,165 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package test</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;context&quot;</span>
<span class="term-fg32">+	&quot;crypto&#47;ecdsa&quot;</span>
<span class="term-fg32">+	&quot;fmt&quot;</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+	&quot;time&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&#47;abi&#47;bind&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;settings&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;txpool&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;crypto&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;ethclient&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;tests&#47;immutable&#47;erc20&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;tests&#47;immutable&#47;evm&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;stretchr&#47;testify&#47;require&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func dynamicTx(</span>
<span class="term-fg32">+	t *testing.T,</span>
<span class="term-fg32">+	ctx context.Context,</span>
<span class="term-fg32">+	client *ethclient.Client,</span>
<span class="term-fg32">+	value *big.Int,</span>
<span class="term-fg32">+	keyFrom *ecdsa.PrivateKey,</span>
<span class="term-fg32">+	to common.Address,</span>
<span class="term-fg32">+) *types.Transaction {</span>
<span class="term-fg32">+	t.Helper()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	chainID, err := client.ChainID(ctx)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	addrFrom := crypto.PubkeyToAddress(keyFrom.PublicKey)</span>
<span class="term-fg32">+	nonce, err := client.PendingNonceAt(ctx, addrFrom)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	tx := types.MustSignNewTx(keyFrom,</span>
<span class="term-fg32">+		types.NewLondonSigner(chainID),</span>
<span class="term-fg32">+		&amp;types.DynamicFeeTx{</span>
<span class="term-fg32">+			Nonce:     nonce,</span>
<span class="term-fg32">+			Gas:       22000,</span>
<span class="term-fg32">+			To:        &amp;to,</span>
<span class="term-fg32">+			Value:     value,</span>
<span class="term-fg32">+			GasTipCap: big.NewInt(settings.PriceLimit),</span>
<span class="term-fg32">+			GasFeeCap: big.NewInt(settings.PriceLimit),</span>
<span class="term-fg32">+		})</span>
<span class="term-fg32">+	return tx</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutableACL_BlockedTransaction_ExpectedToReturnUnathorizedError(t *testing.T) {</span>
<span class="term-fg32">+	if config.blockedUser == nil {</span>
<span class="term-fg32">+		t.Skip(&quot;blockedUser&#47;blockedprivkey was not set and is nil&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	ctx, cancel := context.WithTimeout(context.Background(), 60*time.Second)</span>
<span class="term-fg32">+	defer cancel()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	client, xerr := evm.NewClient(ctx, config.rpcURL, 1, 1)</span>
<span class="term-fg32">+	require.NoError(t, xerr)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Simple deploy ERC20 test</span>
<span class="term-fg32">+	_, _, _, err := erc20.DeployERC20(legacyTxOpts(t, ctx, client.EthClient(), config.blockedUser), client.EthClient())</span>
<span class="term-fg32">+	require.Error(t, err)</span>
<span class="term-fg32">+	require.Equal(t,</span>
<span class="term-fg32">+		txpool.ErrTxIsUnauthorized.Error(),</span>
<span class="term-fg32">+		err.Error(),</span>
<span class="term-fg32">+		fmt.Sprintf(&quot;unexpected error: %v, should be: %v&quot;, err, txpool.ErrTxIsUnauthorized))</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutableACL_Blocklist(t *testing.T) {</span>
<span class="term-fg32">+	if config.blockedUser == nil {</span>
<span class="term-fg32">+		t.Skip(&quot;blockedUser&#47;blockedprivkey was not set and is nil&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	ctx, cancel := context.WithTimeout(context.Background(), 60*time.Second)</span>
<span class="term-fg32">+	defer cancel()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	client, err := evm.NewClient(ctx, config.rpcURL, 1, 1)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Simple deploy ERC20 test with blocked address should fail</span>
<span class="term-fg32">+	_, _, _, err = erc20.DeployERC20(legacyTxOpts(t, ctx, client.EthClient(), config.blockedUser), client.EthClient())</span>
<span class="term-fg32">+	require.Error(t, err)</span>
<span class="term-fg32">+	require.Equal(t,</span>
<span class="term-fg32">+		txpool.ErrTxIsUnauthorized.Error(),</span>
<span class="term-fg32">+		err.Error(),</span>
<span class="term-fg32">+		fmt.Sprintf(&quot;unexpected error: %v, should be: %v&quot;, err, txpool.ErrTxIsUnauthorized))</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	t.Log(&quot;Deploy with blockeduser - should fail - Done&quot;)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Simple deploy ERC20 test with not blocked address should pass</span>
<span class="term-fg32">+	txOpts := legacyTxOpts(t, ctx, client.EthClient(), config.testUser)</span>
<span class="term-fg32">+	_, deployTx, coin, err := erc20.DeployERC20(txOpts, client.EthClient())</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	deployReceipt, err := bind.WaitMined(ctx, client, deployTx)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	require.Equal(t, deployReceipt.Status, uint64(1))</span>
<span class="term-fg32">+	t.Logf(&quot;ERC20 Deployed to address %s with TX Hash %s&quot;, deployReceipt.ContractAddress.String(), deployTx.Hash().String())</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Simple transfer test should also pass</span>
<span class="term-fg32">+	aliceKey, _ := crypto.GenerateKey()</span>
<span class="term-fg32">+	alice := crypto.PubkeyToAddress(aliceKey.PublicKey)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	xferTx, err := coin.Transfer(txOpts, alice, big.NewInt(1))</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	_, err = bind.WaitMined(ctx, client, xferTx)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	t.Log(&quot;Transfer to alice - Done&quot;)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Simple native transfer from testuser to alice</span>
<span class="term-fg32">+	aliceTx := dynamicTx(t, ctx, client.EthClient(), big.NewInt(1), config.testUser.key, alice)</span>
<span class="term-fg32">+	err = client.EthClient().SendTransaction(ctx, aliceTx)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	t.Log(&quot;Transfer native to alice - should pass - Done&quot;)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Simple native transfer from testuser to blocked user</span>
<span class="term-fg32">+	tx := dynamicTx(t, ctx, client.EthClient(), big.NewInt(1), config.testUser.key, config.blockedUser.address)</span>
<span class="term-fg32">+	err = client.EthClient().SendTransaction(ctx, tx)</span>
<span class="term-fg32">+	require.Error(t, err)</span>
<span class="term-fg32">+	require.Equal(t,</span>
<span class="term-fg32">+		txpool.ErrTxIsUnauthorized.Error(),</span>
<span class="term-fg32">+		err.Error(),</span>
<span class="term-fg32">+		fmt.Sprintf(&quot;unexpected error: %v, should be: %v&quot;, err, txpool.ErrTxIsUnauthorized),</span>
<span class="term-fg32">+	)</span>
<span class="term-fg32">+	t.Log(&quot;Transfer to blockeduser - should fail - Done&quot;)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutableACL_SimpleTransferTest(t *testing.T) {</span>
<span class="term-fg32">+	ctx, cancel := context.WithTimeout(context.Background(), 60*time.Second)</span>
<span class="term-fg32">+	defer cancel()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	client, xerr := evm.NewClient(ctx, config.rpcURL, 1, 1)</span>
<span class="term-fg32">+	require.NoError(t, xerr)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Simple transfer test should also pass</span>
<span class="term-fg32">+	aliceKey, _ := crypto.GenerateKey()</span>
<span class="term-fg32">+	alice := crypto.PubkeyToAddress(aliceKey.PublicKey)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Simple native transfer from testuser to alice</span>
<span class="term-fg32">+	aliceTx := dynamicTx(t, ctx, client.EthClient(), big.NewInt(1), config.testUser.key, alice)</span>
<span class="term-fg32">+	err := client.EthClient().SendTransaction(ctx, aliceTx)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	t.Log(&quot;Transfer native to alice - should pass&quot;, aliceTx.Hash())</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	_, err = bind.WaitMined(ctx, client, aliceTx)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	t.Log(&quot;Transfer native to alice - should pass - Done&quot;)</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-64060393a6bf7bc2dfb46025" role="button"
                       aria-expanded="false" aria-controls="id-64060393a6bf7bc2dfb46025">
                        <code>tests/immutable/cancun_test.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/cancun_test.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+327</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-64060393a6bf7bc2dfb46025"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;cancun_test.go immutable-geth&#47;tests&#47;immutable&#47;cancun_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..57f3e7196541b5126feccb35aa2896329387e594</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;cancun_test.go</span>
<span class="term-fg36">@@ -0,0 +1,327 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package test</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;context&quot;</span>
<span class="term-fg32">+	&quot;crypto&#47;sha256&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+	&quot;time&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;core&#47;types&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;crypto&#47;kzg4844&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;params&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;holiman&#47;uint256&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&#47;abi&#47;bind&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;tests&#47;immutable&#47;cancun&#47;blobbasefee&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;tests&#47;immutable&#47;cancun&#47;blobhash&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;tests&#47;immutable&#47;cancun&#47;mcopy&quot;</span>
<span class="term-fg32">+	selfdestructconstructor &quot;github.com&#47;ethereum&#47;go-ethereum&#47;tests&#47;immutable&#47;cancun&#47;selfdestruct&#47;constructor&quot;</span>
<span class="term-fg32">+	selfdestructfunction &quot;github.com&#47;ethereum&#47;go-ethereum&#47;tests&#47;immutable&#47;cancun&#47;selfdestruct&#47;function&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;tests&#47;immutable&#47;cancun&#47;transientstorage&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;tests&#47;immutable&#47;evm&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;stretchr&#47;testify&#47;require&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutable_Cancun_4844TransactionsDisabled(t *testing.T) {</span>
<span class="term-fg32">+	if skipCancun(t) {</span>
<span class="term-fg32">+		return</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Context and client</span>
<span class="term-fg32">+	ctx, cancel := context.WithTimeout(context.Background(), 60*time.Second)</span>
<span class="term-fg32">+	defer cancel()</span>
<span class="term-fg32">+	client, err := evm.NewClient(ctx, config.rpcURL, 1, 1)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Construct empty block txn</span>
<span class="term-fg32">+	emptyBlob := kzg4844.Blob{}</span>
<span class="term-fg32">+	emptyBlobCommit, err := kzg4844.BlobToCommitment(emptyBlob)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	emptyBlobProof, err := kzg4844.ComputeBlobProof(emptyBlob, emptyBlobCommit)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	emptyBlobVHash := kzg4844.CalcBlobHashV1(sha256.New(), &amp;emptyBlobCommit)</span>
<span class="term-fg32">+	blobTx := types.BlobTx{</span>
<span class="term-fg32">+		Gas:        21000,</span>
<span class="term-fg32">+		BlobHashes: []common.Hash{emptyBlobVHash},</span>
<span class="term-fg32">+		Value:      uint256.NewInt(100),</span>
<span class="term-fg32">+		Sidecar: &amp;types.BlobTxSidecar{</span>
<span class="term-fg32">+			Blobs:       []kzg4844.Blob{emptyBlob},</span>
<span class="term-fg32">+			Commitments: []kzg4844.Commitment{emptyBlobCommit},</span>
<span class="term-fg32">+			Proofs:      []kzg4844.Proof{emptyBlobProof},</span>
<span class="term-fg32">+		},</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Send request and expect rejection</span>
<span class="term-fg32">+	err = client.EthClient().SendTransaction(ctx, types.NewTx(&amp;blobTx))</span>
<span class="term-fg32">+	require.Error(t, err)</span>
<span class="term-fg32">+	require.Equal(t, &quot;transaction type not supported: type 3 rejected, blob transactions not supported&quot;, err.Error())</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutable_Cancun_4844BlobHashInstruction_ValidateOpCodeAndValue(t *testing.T) {</span>
<span class="term-fg32">+	if skipCancun(t) {</span>
<span class="term-fg32">+		return</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Context and client</span>
<span class="term-fg32">+	ctx, cancel := context.WithTimeout(context.Background(), 10*time.Second)</span>
<span class="term-fg32">+	defer cancel()</span>
<span class="term-fg32">+	client, err := evm.NewClient(ctx, config.rpcURL, 1, 1)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Deploy the contract</span>
<span class="term-fg32">+	txOpts := EIP1559TxOpts(t, ctx, client.EthClient(), config.testUser)</span>
<span class="term-fg32">+	_, deployTx, contract, err := blobhash.DeployBlobhash(txOpts, client.EthClient())</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	deployReceipt, err := bind.WaitMined(ctx, client, deployTx)</span>
<span class="term-fg32">+	require.Equal(t, deployReceipt.Status, uint64(1))</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	t.Logf(&quot;Contract deployed to address %s with TX Hash %s&quot;, deployReceipt.ContractAddress.String(), deployTx.Hash().String())</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Transact</span>
<span class="term-fg32">+	opts := &amp;bind.CallOpts{Context: ctx}</span>
<span class="term-fg32">+	blobHash, err := contract.BlobHash(opts, big.NewInt(1))</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	require.Equal(t, [32]byte{}, blobHash)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutable_Cancun_BlockHeaders(t *testing.T) {</span>
<span class="term-fg32">+	if skipCancun(t) {</span>
<span class="term-fg32">+		return</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Context and client</span>
<span class="term-fg32">+	ctx, cancel := context.WithTimeout(context.Background(), 60*time.Second)</span>
<span class="term-fg32">+	defer cancel()</span>
<span class="term-fg32">+	client, err := evm.NewClient(ctx, config.rpcURL, 1, 1)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Get latest block</span>
<span class="term-fg32">+	latestBlock, err := client.EthClient().BlockByNumber(ctx, nil)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	require.NotNil(t, latestBlock)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Check beacon root</span>
<span class="term-fg32">+	require.NotNil(t, latestBlock.BeaconRoot())</span>
<span class="term-fg32">+	require.Equal(t, common.MinHash.String(), latestBlock.BeaconRoot().String())</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Check blob fields</span>
<span class="term-fg32">+	require.NotNil(t, latestBlock.BlobGasUsed())</span>
<span class="term-fg32">+	require.Equal(t, uint64(0), *latestBlock.BlobGasUsed())</span>
<span class="term-fg32">+	require.NotNil(t, latestBlock.ExcessBlobGas())</span>
<span class="term-fg32">+	require.Equal(t, uint64(0), *latestBlock.ExcessBlobGas())</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Check withdrawals hash and list</span>
<span class="term-fg32">+	require.NotNil(t, latestBlock.Header().WithdrawalsHash)</span>
<span class="term-fg32">+	require.Equal(t, types.EmptyWithdrawalsHash.String(), latestBlock.Header().WithdrawalsHash.String())</span>
<span class="term-fg32">+	require.NotNil(t, latestBlock.Withdrawals())</span>
<span class="term-fg32">+	require.Empty(t, latestBlock.Withdrawals())</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutable_Cancun_1153TransientStorage_ValidatesTstoreAndTLoad(t *testing.T) {</span>
<span class="term-fg32">+	if skipCancun(t) {</span>
<span class="term-fg32">+		return</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Context and client</span>
<span class="term-fg32">+	ctx, cancel := context.WithTimeout(context.Background(), 60*time.Second)</span>
<span class="term-fg32">+	defer cancel()</span>
<span class="term-fg32">+	client, err := evm.NewClient(ctx, config.rpcURL, 1, 1)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	txOpts := EIP1559TxOpts(t, ctx, client.EthClient(), config.testUser)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Deploy the contract</span>
<span class="term-fg32">+	_, deployTx, contract, err := transientstorage.DeployTransientStorage(txOpts, client.EthClient())</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	deployReceipt, err := bind.WaitMined(ctx, client, deployTx)</span>
<span class="term-fg32">+	require.Equal(t, deployReceipt.Status, uint64(1))</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	t.Logf(&quot;Contract deployed to address %s with TX Hash %s&quot;, deployReceipt.ContractAddress.String(), deployTx.Hash().String())</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Transact</span>
<span class="term-fg32">+	key := big.NewInt(1)</span>
<span class="term-fg32">+	val := big.NewInt(2)</span>
<span class="term-fg32">+	tx, err := contract.TStoreLoad(txOpts, key, val)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	receipt, err := bind.WaitMined(ctx, client, tx)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	require.Equal(t, receipt.Status, uint64(1))</span>
<span class="term-fg32">+	log, err := contract.ParseValue(*receipt.Logs[0])</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	require.Equal(t, val, log.Value)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutable_Cancun_7516BlobBaseFee_ValidateOpCodeAndValue(t *testing.T) {</span>
<span class="term-fg32">+	if skipCancun(t) {</span>
<span class="term-fg32">+		return</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Context and client</span>
<span class="term-fg32">+	ctx, cancel := context.WithTimeout(context.Background(), 20*time.Second)</span>
<span class="term-fg32">+	defer cancel()</span>
<span class="term-fg32">+	client, err := evm.NewClient(ctx, config.rpcURL, 1, 1)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	txOpts := EIP1559TxOpts(t, ctx, client.EthClient(), config.testUser)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Deploy the contract</span>
<span class="term-fg32">+	_, deployTx, contract, err := blobbasefee.DeployBlobBaseFee(txOpts, client.EthClient())</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	deployReceipt, err := bind.WaitMined(ctx, client, deployTx)</span>
<span class="term-fg32">+	require.Equal(t, deployReceipt.Status, uint64(1))</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	t.Logf(&quot;Contract deployed to address %s with TX Hash %s&quot;, deployReceipt.ContractAddress.String(), deployTx.Hash().String())</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Transact</span>
<span class="term-fg32">+	opts := &amp;bind.CallOpts{Context: ctx}</span>
<span class="term-fg32">+	blobBaseFee, err := contract.BlobBaseFee(opts)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	require.NotNil(t, blobBaseFee)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Validate value as per default params</span>
<span class="term-fg32">+	require.Equal(t, uint64(params.BlobTxMinBlobGasprice), blobBaseFee.Uint64())</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutable_Cancun_5656Mcopy_ValidateOpCodeAndValue(t *testing.T) {</span>
<span class="term-fg32">+	if skipCancun(t) {</span>
<span class="term-fg32">+		return</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Context and client</span>
<span class="term-fg32">+	ctx, cancel := context.WithTimeout(context.Background(), 20*time.Second)</span>
<span class="term-fg32">+	defer cancel()</span>
<span class="term-fg32">+	client, err := evm.NewClient(ctx, config.rpcURL, 1, 1)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	txOpts := EIP1559TxOpts(t, ctx, client.EthClient(), config.testUser)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Deploy the contract</span>
<span class="term-fg32">+	_, deployTx, contract, err := mcopy.DeployMcopy(txOpts, client.EthClient())</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	deployReceipt, err := bind.WaitMined(ctx, client, deployTx)</span>
<span class="term-fg32">+	require.Equal(t, deployReceipt.Status, uint64(1))</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	t.Logf(&quot;Contract deployed to address %s with TX Hash %s&quot;, deployReceipt.ContractAddress.String(), deployTx.Hash().String())</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Transact</span>
<span class="term-fg32">+	opts := &amp;bind.CallOpts{Context: ctx}</span>
<span class="term-fg32">+	mem, err := contract.MemoryCopy(opts)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	require.NotNil(t, mem)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Validate memory as per cancun&#47;mcopy&#47;mcopy.sol</span>
<span class="term-fg32">+	expected := [32]byte{}</span>
<span class="term-fg32">+	expected[31] = 0x50</span>
<span class="term-fg32">+	require.Equal(t, expected, mem)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutable_Cancun_6780SelfDestruct_ValidateConstructorBehaviour(t *testing.T) {</span>
<span class="term-fg32">+	if skipCancun(t) {</span>
<span class="term-fg32">+		return</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Context and client</span>
<span class="term-fg32">+	ctx, cancel := context.WithTimeout(context.Background(), 20*time.Second)</span>
<span class="term-fg32">+	defer cancel()</span>
<span class="term-fg32">+	client, err := evm.NewClient(ctx, config.rpcURL, 1, 1)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	txOpts := EIP1559TxOpts(t, ctx, client.EthClient(), config.testUser)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Recipient of self destruct</span>
<span class="term-fg32">+	recipient := genRandPubKey(t)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Set tx value</span>
<span class="term-fg32">+	txOpts.Value = big.NewInt(1)</span>
<span class="term-fg32">+	preBal, err := client.EthClient().BalanceAt(ctx, recipient, nil)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Deploy the contract</span>
<span class="term-fg32">+	addr, deployTx, _, err := selfdestructconstructor.DeploySelfDestructConstructor(txOpts, client.EthClient(), recipient)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	deployReceipt, err := bind.WaitMined(ctx, client, deployTx)</span>
<span class="term-fg32">+	require.Equal(t, deployReceipt.Status, uint64(1))</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	t.Logf(&quot;Contract deployed to address %s with TX Hash %s&quot;, addr.String(), deployTx.Hash().String())</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Check balance of recipient</span>
<span class="term-fg32">+	balance, err := client.EthClient().BalanceAt(ctx, recipient, nil)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	require.Equal(t, new(big.Int).Add(preBal, txOpts.Value), balance)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Check balance of contract</span>
<span class="term-fg32">+	balance, err = client.EthClient().BalanceAt(ctx, addr, nil)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	require.Equal(t, int64(0), balance.Int64())</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Check code of contract is now empty</span>
<span class="term-fg32">+	code, err := client.EthClient().CodeAt(ctx, addr, nil)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	require.Empty(t, code)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutable_Cancun_6780SelfDestruct_ValidateFunctionBehaviour(t *testing.T) {</span>
<span class="term-fg32">+	if skipCancun(t) {</span>
<span class="term-fg32">+		return</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Context and client</span>
<span class="term-fg32">+	ctx, cancel := context.WithTimeout(context.Background(), 20*time.Second)</span>
<span class="term-fg32">+	defer cancel()</span>
<span class="term-fg32">+	client, err := evm.NewClient(ctx, config.rpcURL, 1, 1)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	txOpts := EIP1559TxOpts(t, ctx, client.EthClient(), config.testUser)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Recipient of self destruct</span>
<span class="term-fg32">+	recipient := genRandPubKey(t)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Deploy the contract</span>
<span class="term-fg32">+	addr, deployTx, contract, err := selfdestructfunction.DeploySelfDestructFunction(txOpts, client.EthClient())</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	deployReceipt, err := bind.WaitMined(ctx, client, deployTx)</span>
<span class="term-fg32">+	require.Equal(t, deployReceipt.Status, uint64(1))</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Fund the contract</span>
<span class="term-fg32">+	fundAmt := big.NewInt(1)</span>
<span class="term-fg32">+	tx := dynamicTx(t, ctx, client.EthClient(), fundAmt, config.testUser.key, addr)</span>
<span class="term-fg32">+	err = client.EthClient().SendTransaction(ctx, tx)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	receipt, err := bind.WaitMined(ctx, client, tx)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	require.Equal(t, receipt.Status, uint64(1))</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Assert balance</span>
<span class="term-fg32">+	balance, err := client.EthClient().BalanceAt(ctx, addr, nil)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	require.Equal(t, fundAmt, balance)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Self destruct</span>
<span class="term-fg32">+	tx, err = contract.SelfDestruct(txOpts, recipient)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	receipt, err = bind.WaitMined(ctx, client, tx)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	require.Equal(t, receipt.Status, uint64(1))</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Check balance of contract</span>
<span class="term-fg32">+	balance, err = client.EthClient().BalanceAt(ctx, addr, nil)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	require.Equal(t, int64(0), balance.Int64())</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Check balance of recipient</span>
<span class="term-fg32">+	balance, err = client.EthClient().BalanceAt(ctx, recipient, nil)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	require.Equal(t, big.NewInt(1), balance)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Check that code is not empty</span>
<span class="term-fg32">+	code, err := client.EthClient().CodeAt(ctx, addr, nil)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	require.NotEmpty(t, code)</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-613ab67319c6346146090af7" role="button"
                       aria-expanded="false" aria-controls="id-613ab67319c6346146090af7">
                        <code>tests/immutable/cliqueclient_test.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/cliqueclient_test.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+69</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-613ab67319c6346146090af7"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;cliqueclient_test.go immutable-geth&#47;tests&#47;immutable&#47;cliqueclient_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..3a4d6998f92e89c958314e5c27305f4e9d3dcd92</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;cliqueclient_test.go</span>
<span class="term-fg36">@@ -0,0 +1,69 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package test</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;context&quot;</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+	&quot;time&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;ethclient&#47;gethclient&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;log&quot;</span>
<span class="term-fg32">+	gethrpc &quot;github.com&#47;ethereum&#47;go-ethereum&#47;rpc&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;stretchr&#47;testify&#47;require&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestCliqueClient_AddSigner(t *testing.T) {</span>
<span class="term-fg32">+	if config.skipVoting {</span>
<span class="term-fg32">+		t.Skip(&quot;Skipping Test as per command-line flag&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	ctx, cancel := context.WithTimeout(context.Background(), 60*time.Second)</span>
<span class="term-fg32">+	defer cancel()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	rpcClient, err := gethrpc.DialContext(ctx, config.validatorURL.String())</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	gethClient := gethclient.New(rpcClient)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	signers, err := gethClient.GetSigners(ctx, nil)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Should have 1 validator by default</span>
<span class="term-fg32">+	require.Equal(t, 1, len(signers), &quot;expected 1 signer&quot;)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Propose a new validator</span>
<span class="term-fg32">+	newSigner := common.HexToAddress(&quot;0x7442eD1e3c9FD421F47d12A2742AfF5DaFBf43f8&quot;)</span>
<span class="term-fg32">+	err = gethClient.Propose(ctx, newSigner, true)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Wait a few seconds for a block</span>
<span class="term-fg32">+	log.Warn(&quot;Waiting 10s for voting to propagate&quot;)</span>
<span class="term-fg32">+	time.Sleep(10 * time.Second)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	signers, err = gethClient.GetSigners(ctx, nil)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	require.Equal(t, 2, len(signers), &quot;expected 2 signers&quot;)</span>
<span class="term-fg32">+	if signers[0].Cmp(newSigner) != 0 &amp;&amp; signers[1].Cmp(newSigner) != 0 {</span>
<span class="term-fg32">+		t.Fatalf(&quot;unexpected new signer. expected %s, got %s and %s&quot;,</span>
<span class="term-fg32">+			newSigner.String(),</span>
<span class="term-fg32">+			signers[0].String(),</span>
<span class="term-fg32">+			signers[1].String(),</span>
<span class="term-fg32">+		)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-ba9615d70d47e0369358aa90" role="button"
                       aria-expanded="false" aria-controls="id-ba9615d70d47e0369358aa90">
                        <code>tests/immutable/erc20_test.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/erc20_test.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+113</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-ba9615d70d47e0369358aa90"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;erc20_test.go immutable-geth&#47;tests&#47;immutable&#47;erc20_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..893624d8594a97e0ad2963397d1cd38a30905093</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;erc20_test.go</span>
<span class="term-fg36">@@ -0,0 +1,113 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package test</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;context&quot;</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+	&quot;time&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&#47;abi&#47;bind&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;ethclient&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;tests&#47;immutable&#47;erc20&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;tests&#47;immutable&#47;evm&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;stretchr&#47;testify&#47;require&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutableLegacyERC20_CreateAndTransfer(t *testing.T) {</span>
<span class="term-fg32">+	ctx, cancel := context.WithTimeout(context.Background(), 60*time.Second)</span>
<span class="term-fg32">+	defer cancel()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	client, err := evm.NewClient(ctx, config.rpcURL, 1, 1)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	testERC20(t, ctx, client.EthClient(), legacyTxOpts(t, ctx, client.EthClient(), config.testUser))</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutableEIP1559ERC20_CreateAndTransfer(t *testing.T) {</span>
<span class="term-fg32">+	ctx, cancel := context.WithTimeout(context.Background(), 60*time.Second)</span>
<span class="term-fg32">+	defer cancel()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	client, err := evm.NewClient(ctx, config.rpcURL, 1, 1)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	testERC20(t, ctx, client.EthClient(), EIP1559TxOpts(t, ctx, client.EthClient(), config.testUser))</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func testERC20(t *testing.T, ctx context.Context, client *ethclient.Client, txOpts *bind.TransactOpts) {</span>
<span class="term-fg32">+	t.Helper()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	alice := txOpts.From</span>
<span class="term-fg32">+	bob := common.BigToAddress(common.Big1)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Deploy a contract</span>
<span class="term-fg32">+	_, deployTx, coin, err := erc20.DeployERC20(txOpts, client)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	t.Log(&quot;Deploy tx&quot;, deployTx.Hash().String())</span>
<span class="term-fg32">+	deployReceipt, err := bind.WaitMined(ctx, client, deployTx)</span>
<span class="term-fg32">+	require.Equal(t, deployReceipt.Status, uint64(1))</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	t.Logf(&quot;ERC20 Deployed to address %s with TX Hash %s&quot;, deployReceipt.ContractAddress.String(), deployTx.Hash().String())</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Check total supply non zero</span>
<span class="term-fg32">+	opts := &amp;bind.CallOpts{Context: ctx}</span>
<span class="term-fg32">+	total, err := coin.TotalSupply(opts)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	require.Greater(t, total.Uint64(), uint64(0))</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Get symbol</span>
<span class="term-fg32">+	symbol, err := coin.Symbol(opts)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	t.Logf(&quot;Coin: %s&quot;, symbol)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Transfer from owner to alice</span>
<span class="term-fg32">+	xferTx, err := coin.Transfer(txOpts, alice, total)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	receipt, err := bind.WaitMined(ctx, client, xferTx)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	t.Logf(&quot;Transfer complete with TX Hash: %s, Block: %d&quot;, receipt.TxHash.String(), receipt.BlockNumber.Uint64())</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Check balance</span>
<span class="term-fg32">+	bal, err := coin.BalanceOf(opts, alice)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	require.Greater(t, bal.Uint64(), uint64(0))</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Approve alice</span>
<span class="term-fg32">+	approveTx, err := coin.Approve(txOpts, alice, total)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	receipt, err = bind.WaitMined(ctx, client, approveTx)</span>
<span class="term-fg32">+	require.NotNil(t, receipt)</span>
<span class="term-fg32">+	t.Logf(&quot;Approval complete with TX Hash: %s, Block: %d&quot;, receipt.TxHash.String(), receipt.BlockNumber.Uint64())</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	half := total.Div(total, common.Big2)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Transfer from alice to bob</span>
<span class="term-fg32">+	xferTx, err = coin.TransferFrom(txOpts, alice, bob, half)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	receipt, err = bind.WaitMined(ctx, client, xferTx)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	t.Logf(&quot;Transfer complete with TX Hash: %s, Block: %d&quot;, receipt.TxHash.String(), receipt.BlockNumber.Uint64())</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Check balances after transfer</span>
<span class="term-fg32">+	balAlice, err := coin.BalanceOf(opts, alice)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	require.LessOrEqual(t, balAlice.Uint64(), half.Uint64())</span>
<span class="term-fg32">+	balBob, err := coin.BalanceOf(opts, bob)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	require.Equal(t, half.Uint64(), balBob.Uint64())</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-0b7bca0ec0d5ebdf5d8a6023" role="button"
                       aria-expanded="false" aria-controls="id-0b7bca0ec0d5ebdf5d8a6023">
                        <code>tests/immutable/erc721_test.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/erc721_test.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+90</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-0b7bca0ec0d5ebdf5d8a6023"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;erc721_test.go immutable-geth&#47;tests&#47;immutable&#47;erc721_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..c5d33d633de00af30deb709d8dc8683d4478efca</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;erc721_test.go</span>
<span class="term-fg36">@@ -0,0 +1,90 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package test</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;context&quot;</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+	&quot;time&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&#47;abi&#47;bind&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;common&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;ethclient&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;tests&#47;immutable&#47;erc721&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;tests&#47;immutable&#47;evm&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;stretchr&#47;testify&#47;require&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutableLegacyERC721_CreateMintAndTransfer_Successful(t *testing.T) {</span>
<span class="term-fg32">+	ctx, cancel := context.WithTimeout(context.Background(), 60*time.Second)</span>
<span class="term-fg32">+	defer cancel()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	client, err := evm.NewClient(ctx, config.rpcURL, 1, 1)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	testERC721(t, ctx, client.EthClient(), legacyTxOpts(t, ctx, client.EthClient(), config.testUser))</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutableEIP1559ERC721_CreateMintAndTransfer(t *testing.T) {</span>
<span class="term-fg32">+	ctx, cancel := context.WithTimeout(context.Background(), 60*time.Second)</span>
<span class="term-fg32">+	defer cancel()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	client, err := evm.NewClient(ctx, config.rpcURL, 1, 1)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	testERC721(t, ctx, client.EthClient(), EIP1559TxOpts(t, ctx, client.EthClient(), config.testUser))</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func testERC721(t *testing.T, ctx context.Context, client *ethclient.Client, txOpts *bind.TransactOpts) {</span>
<span class="term-fg32">+	t.Helper()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	alice := txOpts.From</span>
<span class="term-fg32">+	bob := common.BigToAddress(common.Big1)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Deploy a contract</span>
<span class="term-fg32">+	_, tx, nft, err := erc721.DeployERC721(txOpts, client, &quot;bored apes&quot;, &quot;BAYC&quot;)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	deployReceipt, err := bind.WaitMined(ctx, client, tx)</span>
<span class="term-fg32">+	require.Equal(t, deployReceipt.Status, uint64(1))</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	t.Logf(&quot;ERC721 Deployed to address %s with TX Hash %s&quot;, deployReceipt.ContractAddress.String(), tx.Hash().String())</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Mint tokens</span>
<span class="term-fg32">+	nftIDs := []*big.Int{common.Big1, common.Big2}</span>
<span class="term-fg32">+	for _, id := range nftIDs {</span>
<span class="term-fg32">+		tx, err := nft.MintNFT(txOpts, alice, id)</span>
<span class="term-fg32">+		require.NoError(t, err)</span>
<span class="term-fg32">+		receipt, err := bind.WaitMined(ctx, client, tx)</span>
<span class="term-fg32">+		require.NoError(t, err)</span>
<span class="term-fg32">+		t.Logf(&quot;Mint complete with TX Hash: %s, Block: %d&quot;, receipt.TxHash.String(), receipt.BlockNumber.Uint64())</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Transfer token</span>
<span class="term-fg32">+	for _, id := range nftIDs {</span>
<span class="term-fg32">+		tx, err := nft.TransferFrom(txOpts, alice, bob, id)</span>
<span class="term-fg32">+		require.NoError(t, err)</span>
<span class="term-fg32">+		receipt, err := bind.WaitMined(ctx, client, tx)</span>
<span class="term-fg32">+		require.NoError(t, err)</span>
<span class="term-fg32">+		t.Logf(&quot;Transfer complete with TX Hash: %s, Block: %d&quot;, receipt.TxHash.String(), receipt.BlockNumber.Uint64())</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Bad transfer</span>
<span class="term-fg32">+	_, err = nft.TransferFrom(txOpts, alice, bob, nftIDs[0])</span>
<span class="term-fg32">+	require.Error(t, err)</span>
<span class="term-fg32">+	require.Contains(t, err.Error(), &quot;caller is not token owner or approved&quot;)</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-0065d8b426fa15cb6912d54e" role="button"
                       aria-expanded="false" aria-controls="id-0065d8b426fa15cb6912d54e">
                        <code>tests/immutable/evm/client_test.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/evm/client_test.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+57</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-0065d8b426fa15cb6912d54e"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;evm&#47;client_test.go immutable-geth&#47;tests&#47;immutable&#47;evm&#47;client_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..3e54ed6895b2dc02454f2ea8e8dbc04e854853e7</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;evm&#47;client_test.go</span>
<span class="term-fg36">@@ -0,0 +1,57 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package evm</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;context&quot;</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+	&quot;net&#47;url&quot;</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+	&quot;time&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;stretchr&#47;testify&#47;assert&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;stretchr&#47;testify&#47;require&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutableNewEVMClient_ValidArgs_Success(t *testing.T) {</span>
<span class="term-fg32">+	u, err := url.Parse(&quot;https:&#47;&#47;testurl&quot;)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	_, err = NewClient(context.Background(), u, 5, time.Second*2)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutableNewEVMClient_ZeroRetryCount_Success(t *testing.T) {</span>
<span class="term-fg32">+	u, err := url.Parse(&quot;https:&#47;&#47;testurl&quot;)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	_, err = NewClient(context.Background(), u, 0, time.Second*2)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutableEVMClient_FixedEstimator_ShouldReturn1GWEI(t *testing.T) {</span>
<span class="term-fg32">+	u, err := url.Parse(&quot;https:&#47;&#47;testurl&quot;)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	ctx := context.Background()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	client, err := NewClient(ctx, u, 5, time.Second*2)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	tip, err := client.SuggestGasTipCap(ctx)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	assert.Equal(t, big.NewInt(1000000000), tip)</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-2826cd7cf71f050e1365f4da" role="button"
                       aria-expanded="false" aria-controls="id-2826cd7cf71f050e1365f4da">
                        <code>tests/immutable/evm/tip_estimator_test.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/evm/tip_estimator_test.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+36</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-2826cd7cf71f050e1365f4da"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;evm&#47;tip_estimator_test.go immutable-geth&#47;tests&#47;immutable&#47;evm&#47;tip_estimator_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..53765ad89a40df183e3a663cb5a2e2b9932a68e4</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;evm&#47;tip_estimator_test.go</span>
<span class="term-fg36">@@ -0,0 +1,36 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package evm</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;context&quot;</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;ethclient&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;stretchr&#47;testify&#47;assert&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;stretchr&#47;testify&#47;require&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutableFixedEstimator_ShouldReturnFixedAmount(t *testing.T) {</span>
<span class="term-fg32">+	estimator := NewFixedGasTipEstimator(big.NewInt(42))</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	tip, err := estimator.SuggestGasTipCap(context.Background(), &amp;ethclient.Client{})</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	assert.Equal(t, big.NewInt(42), tip)</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-976758d74de21cbc237d44b2" role="button"
                       aria-expanded="false" aria-controls="id-976758d74de21cbc237d44b2">
                        <code>tests/immutable/flag_test.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/flag_test.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+196</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-976758d74de21cbc237d44b2"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;flag_test.go immutable-geth&#47;tests&#47;immutable&#47;flag_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..953ea3520b826807bd4cac7a38f8ec7d0530c5ac</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;flag_test.go</span>
<span class="term-fg36">@@ -0,0 +1,196 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package test</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;context&quot;</span>
<span class="term-fg32">+	&quot;errors&quot;</span>
<span class="term-fg32">+	&quot;fmt&quot;</span>
<span class="term-fg32">+	&quot;os&quot;</span>
<span class="term-fg32">+	&quot;path&quot;</span>
<span class="term-fg32">+	&quot;strings&quot;</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;rpc&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;stretchr&#47;testify&#47;require&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutable_RPCDisableFlag(t *testing.T) {</span>
<span class="term-fg32">+	&#47;&#47; Flags are set under cmd&#47;geth&#47;immutable_local.go</span>
<span class="term-fg32">+	rpcMethods := []string{</span>
<span class="term-fg32">+		&#47;&#47; Debug</span>
<span class="term-fg32">+		&quot;debug_startGoTrace&quot;,</span>
<span class="term-fg32">+		&quot;debug_stopGoTrace&quot;,</span>
<span class="term-fg32">+		&quot;debug_blockProfile&quot;,</span>
<span class="term-fg32">+		&quot;debug_setBlockProfileRate&quot;,</span>
<span class="term-fg32">+		&quot;debug_writeBlockProfile&quot;,</span>
<span class="term-fg32">+		&quot;debug_mutexProfile&quot;,</span>
<span class="term-fg32">+		&quot;debug_setMutexProfileFraction&quot;,</span>
<span class="term-fg32">+		&quot;debug_writeMutexProfile&quot;,</span>
<span class="term-fg32">+		&quot;debug_writeMemProfile&quot;,</span>
<span class="term-fg32">+		&quot;debug_traceBlock&quot;,</span>
<span class="term-fg32">+		&quot;debug_traceBlockFromFile&quot;,</span>
<span class="term-fg32">+		&quot;debug_traceBadBlock&quot;,</span>
<span class="term-fg32">+		&quot;debug_standardTraceBadBlockToFile&quot;,</span>
<span class="term-fg32">+		&quot;debug_intermediateRoots&quot;,</span>
<span class="term-fg32">+		&quot;debug_standardTraceBlockToFile&quot;,</span>
<span class="term-fg32">+		&quot;debug_traceBlockByNumber&quot;,</span>
<span class="term-fg32">+		&quot;debug_traceBlockByHash&quot;,</span>
<span class="term-fg32">+		&quot;debug_traceTransaction&quot;,</span>
<span class="term-fg32">+		&quot;debug_traceCall&quot;,</span>
<span class="term-fg32">+		&quot;debug_preimage&quot;,</span>
<span class="term-fg32">+		&quot;debug_getBadBlocks&quot;,</span>
<span class="term-fg32">+		&quot;debug_storageRangeAt&quot;,</span>
<span class="term-fg32">+		&quot;debug_getModifiedAccountsByNumber&quot;,</span>
<span class="term-fg32">+		&quot;debug_getModifiedAccountsByHash&quot;,</span>
<span class="term-fg32">+		&quot;debug_freezeClient&quot;,</span>
<span class="term-fg32">+		&quot;debug_getAccessibleState&quot;,</span>
<span class="term-fg32">+		&quot;debug_dbGet&quot;,</span>
<span class="term-fg32">+		&quot;debug_dbAncient&quot;,</span>
<span class="term-fg32">+		&quot;debug_dbAncients&quot;,</span>
<span class="term-fg32">+		&quot;debug_setTrieFlushInterval&quot;,</span>
<span class="term-fg32">+		&quot;debug_getTrieFlushInterval&quot;,</span>
<span class="term-fg32">+		&quot;debug_accountRange&quot;,</span>
<span class="term-fg32">+		&quot;debug_printBlock&quot;,</span>
<span class="term-fg32">+		&quot;debug_getRawHeader&quot;,</span>
<span class="term-fg32">+		&quot;debug_getRawBlock&quot;,</span>
<span class="term-fg32">+		&quot;debug_getRawReceipts&quot;,</span>
<span class="term-fg32">+		&quot;debug_getRawTransaction&quot;,</span>
<span class="term-fg32">+		&quot;debug_setHead&quot;,</span>
<span class="term-fg32">+		&quot;debug_seedHash&quot;,</span>
<span class="term-fg32">+		&quot;debug_dumpBlock&quot;,</span>
<span class="term-fg32">+		&quot;debug_chaindbProperty&quot;,</span>
<span class="term-fg32">+		&quot;debug_chaindbCompact&quot;,</span>
<span class="term-fg32">+		&quot;debug_verbosity&quot;,</span>
<span class="term-fg32">+		&quot;debug_vmodule&quot;,</span>
<span class="term-fg32">+		&quot;debug_backtraceAt&quot;,</span>
<span class="term-fg32">+		&quot;debug_stacks&quot;,</span>
<span class="term-fg32">+		&quot;debug_freeOSMemory&quot;,</span>
<span class="term-fg32">+		&quot;debug_setGCPercent&quot;,</span>
<span class="term-fg32">+		&quot;debug_memStats&quot;,</span>
<span class="term-fg32">+		&quot;debug_gcStats&quot;,</span>
<span class="term-fg32">+		&quot;debug_cpuProfile&quot;,</span>
<span class="term-fg32">+		&quot;debug_startCPUProfile&quot;,</span>
<span class="term-fg32">+		&quot;debug_stopCPUProfile&quot;,</span>
<span class="term-fg32">+		&quot;debug_goTrace&quot;,</span>
<span class="term-fg32">+		&#47;&#47; Tx pool</span>
<span class="term-fg32">+		&quot;txpool_content&quot;,</span>
<span class="term-fg32">+		&quot;txpool_inspect&quot;,</span>
<span class="term-fg32">+		&quot;txpool_status&quot;,</span>
<span class="term-fg32">+		&quot;txpool_contentFrom&quot;,</span>
<span class="term-fg32">+		&#47;&#47; Clique</span>
<span class="term-fg32">+		&quot;clique_getSnapshot&quot;,</span>
<span class="term-fg32">+		&quot;clique_getSnapshotAtHash&quot;,</span>
<span class="term-fg32">+		&quot;clique_getSigner&quot;,</span>
<span class="term-fg32">+		&quot;clique_getSigners&quot;,</span>
<span class="term-fg32">+		&quot;clique_getSignersAtHash&quot;,</span>
<span class="term-fg32">+		&quot;clique_proposals&quot;,</span>
<span class="term-fg32">+		&quot;clique_propose&quot;,</span>
<span class="term-fg32">+		&quot;clique_discard&quot;,</span>
<span class="term-fg32">+		&quot;clique_status&quot;,</span>
<span class="term-fg32">+		&#47;&#47; Miner</span>
<span class="term-fg32">+		&quot;miner_getHashrate&quot;,</span>
<span class="term-fg32">+		&quot;miner_setExtra&quot;,</span>
<span class="term-fg32">+		&quot;miner_setGasPrice&quot;,</span>
<span class="term-fg32">+		&quot;miner_setRecommitInterval&quot;,</span>
<span class="term-fg32">+		&quot;miner_start&quot;,</span>
<span class="term-fg32">+		&quot;miner_stop&quot;,</span>
<span class="term-fg32">+		&quot;miner_setEtherbase&quot;,</span>
<span class="term-fg32">+		&quot;miner_setGasLimit&quot;,</span>
<span class="term-fg32">+		&#47;&#47; Personal</span>
<span class="term-fg32">+		&quot;personal_listAccounts&quot;,</span>
<span class="term-fg32">+		&quot;personal_deriveAccount&quot;,</span>
<span class="term-fg32">+		&quot;personal_ecRecover&quot;,</span>
<span class="term-fg32">+		&quot;personal_importRawKey&quot;,</span>
<span class="term-fg32">+		&quot;personal_listWallets&quot;,</span>
<span class="term-fg32">+		&quot;personal_newAccount&quot;,</span>
<span class="term-fg32">+		&quot;personal_openWallet&quot;,</span>
<span class="term-fg32">+		&quot;personal_sendTransaction&quot;,</span>
<span class="term-fg32">+		&quot;personal_sign&quot;,</span>
<span class="term-fg32">+		&quot;personal_signTransaction&quot;,</span>
<span class="term-fg32">+		&quot;personal_unlockAccount&quot;,</span>
<span class="term-fg32">+		&quot;personal_lockAccount&quot;,</span>
<span class="term-fg32">+		&quot;personal_unpair&quot;,</span>
<span class="term-fg32">+		&quot;personal_initializeWallet&quot;,</span>
<span class="term-fg32">+		&quot;personal_initializeWallets&quot;,</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	client, err := rpc.DialContext(context.Background(), config.rpcURL.String())</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	for _, rpcMethod := range rpcMethods {</span>
<span class="term-fg32">+		t.Run(fmt.Sprintf(&quot;RPCDisabled_%s&quot;, rpcMethod), func(t *testing.T) {</span>
<span class="term-fg32">+			var res string</span>
<span class="term-fg32">+			err = client.Call(&amp;res, rpcMethod)</span>
<span class="term-fg32">+			require.Error(t, err)</span>
<span class="term-fg32">+			&#47;&#47;</span>
<span class="term-fg32">+			require.Equal(t, fmt.Sprintf(&quot;the method %s does not exist&#47;is not available&quot;, rpcMethod), err.Error())</span>
<span class="term-fg32">+		})</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutable_RPCDisableFlagsOmitted(t *testing.T) {</span>
<span class="term-fg32">+	&#47;&#47; Some of these flags are disabled in remote environments but not for local tests but</span>
<span class="term-fg32">+	&#47;&#47; it is to check locally the counter when the disabled flags are omitted</span>
<span class="term-fg32">+	isLocalhost := strings.Contains(config.rpcURL.String(), &quot;localhost&quot;) || strings.Contains(config.rpcURL.String(), &quot;127.0.0.1&quot;)</span>
<span class="term-fg32">+	if !isLocalhost {</span>
<span class="term-fg32">+		t.Skip(&quot;Skipping this test because this test is only applicable to localhost setup&quot;)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	fileName := &quot;1&quot;</span>
<span class="term-fg32">+	&#47;&#47; This tests outputs material, defer func to clean it up to avoid duplicate write errors</span>
<span class="term-fg32">+	defer func() {</span>
<span class="term-fg32">+		&#47;&#47; Tests will be run from tests&#47;immutable, file will be saved at root</span>
<span class="term-fg32">+		relPath := path.Join(&quot;..&#47;..&#47;&quot;, fileName)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+		_, err := os.Stat(relPath)</span>
<span class="term-fg32">+		if err == nil {</span>
<span class="term-fg32">+			&#47;&#47; Rm the test file</span>
<span class="term-fg32">+			err := os.Remove(relPath)</span>
<span class="term-fg32">+			if err != nil {</span>
<span class="term-fg32">+				t.Fatal(err)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			if errors.Is(err, os.ErrNotExist) {</span>
<span class="term-fg32">+				t.Fatalf(&quot;Test file %s does not exist, expected test to write test file&quot;, fileName)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+			t.Fatal(err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	rpcMethods := map[string][]interface{}{</span>
<span class="term-fg32">+		&quot;admin_exportChain&quot;: {fileName},</span>
<span class="term-fg32">+		&quot;admin_nodeInfo&quot;:    {}, &#47;&#47; No arguments required</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	client, err := rpc.DialContext(context.Background(), config.rpcURL.String())</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	for rpcMethod, args := range rpcMethods {</span>
<span class="term-fg32">+		t.Run(fmt.Sprintf(&quot;RPCEnabled_%s&quot;, rpcMethod), func(t *testing.T) {</span>
<span class="term-fg32">+			var res interface{}</span>
<span class="term-fg32">+			if len(args) &gt; 0 {</span>
<span class="term-fg32">+				err = client.Call(&amp;res, rpcMethod, args...)</span>
<span class="term-fg32">+			} else {</span>
<span class="term-fg32">+				err = client.Call(&amp;res, rpcMethod)</span>
<span class="term-fg32">+			}</span>
<span class="term-fg32">+			require.NoError(t, err)</span>
<span class="term-fg32">+		})</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-18b16d44913887347cfd2849" role="button"
                       aria-expanded="false" aria-controls="id-18b16d44913887347cfd2849">
                        <code>tests/immutable/main_test.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/main_test.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+122</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-18b16d44913887347cfd2849"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;main_test.go immutable-geth&#47;tests&#47;immutable&#47;main_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..7659580f2e8f9bd602f140e8b5d61301695ca3be</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;main_test.go</span>
<span class="term-fg36">@@ -0,0 +1,122 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package test</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;flag&quot;</span>
<span class="term-fg32">+	&quot;log&quot;</span>
<span class="term-fg32">+	&quot;net&#47;url&quot;</span>
<span class="term-fg32">+	&quot;os&quot;</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+	&quot;time&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;settings&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; flags constitutes flag inputs</span>
<span class="term-fg32">+var flags struct {</span>
<span class="term-fg32">+	PrivKeyFilepath        string</span>
<span class="term-fg32">+	BlockedPrivKeyFilepath string</span>
<span class="term-fg32">+	RPCURLStr              string</span>
<span class="term-fg32">+	ValidatorAdminURLStr   string</span>
<span class="term-fg32">+	SkipVoting             bool</span>
<span class="term-fg32">+	NetworkForks           string</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; config is rendered from env and flags</span>
<span class="term-fg32">+var config struct {</span>
<span class="term-fg32">+	rpcURL       *url.URL</span>
<span class="term-fg32">+	validatorURL *url.URL</span>
<span class="term-fg32">+	testUser     *Wallet</span>
<span class="term-fg32">+	blockedUser  *Wallet</span>
<span class="term-fg32">+	skipVoting   bool</span>
<span class="term-fg32">+	cancun       *settings.Fork</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func skipCancun(t *testing.T) bool {</span>
<span class="term-fg32">+	t.Helper()</span>
<span class="term-fg32">+	if config.cancun != nil &amp;&amp; !config.cancun.IsEnabledAt(time.Now().Unix()) {</span>
<span class="term-fg32">+		t.Logf(&quot;Skipping test because now (%v) is before the Cancun fork (%v)&quot;, time.Now().UTC(), config.cancun.Time.UTC())</span>
<span class="term-fg32">+		return true</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	return false</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestMain(m *testing.M) {</span>
<span class="term-fg32">+	&#47;&#47; Read flags</span>
<span class="term-fg32">+	flag.StringVar(&amp;flags.RPCURLStr, &quot;rpc&quot;, &quot;http:&#47;&#47;localhost:8545&quot;, &quot;RPC URL of the node&quot;)</span>
<span class="term-fg32">+	flag.StringVar(&amp;flags.ValidatorAdminURLStr, &quot;validatoradmin&quot;, &quot;http:&#47;&#47;localhost:8550&quot;, &quot;RPC URL of the validator admin endpoint&quot;)</span>
<span class="term-fg32">+	flag.StringVar(&amp;flags.PrivKeyFilepath, &quot;privkey&quot;, &quot;&quot;, &quot;Filepath to private key to use for sending txs&quot;)</span>
<span class="term-fg32">+	flag.StringVar(&amp;flags.BlockedPrivKeyFilepath, &quot;blockedprivkey&quot;, &quot;&quot;, &quot;Filepath to bloccked private key to use for simulating blocked user&quot;)</span>
<span class="term-fg32">+	flag.BoolVar(&amp;flags.SkipVoting, &quot;skipvoting&quot;, true, &quot;If true, voting tests will be skipped&quot;)</span>
<span class="term-fg32">+	flag.StringVar(&amp;flags.NetworkForks, &quot;forks&quot;, &quot;&quot;, &quot;If (devnet, testnet, mainnet) is set, the test will skip forks before the timestamp of the network&quot;)</span>
<span class="term-fg32">+	flag.Parse()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Load the wallet</span>
<span class="term-fg32">+	var user *Wallet</span>
<span class="term-fg32">+	var err error</span>
<span class="term-fg32">+	if flags.PrivKeyFilepath != &quot;&quot; {</span>
<span class="term-fg32">+		user, err = loadWalletFromFile(flags.PrivKeyFilepath)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			log.Fatal(err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	} else {</span>
<span class="term-fg32">+		privKeyHex := os.Getenv(&quot;PRIV_KEY&quot;)</span>
<span class="term-fg32">+		if privKeyHex == &quot;&quot; {</span>
<span class="term-fg32">+			log.Fatal(&quot;-privkey flag and PRIV_KEY env var not set&quot;)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		user, err = loadWallet(privKeyHex)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			log.Fatal(err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	config.testUser = user</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	if flags.BlockedPrivKeyFilepath != &quot;&quot; {</span>
<span class="term-fg32">+		blockedUser, err := loadWalletFromFile(flags.BlockedPrivKeyFilepath)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			log.Fatal(err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		config.blockedUser = blockedUser</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Render the rpc url</span>
<span class="term-fg32">+	url, err := url.Parse(flags.RPCURLStr)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		log.Fatal(&quot;failed to parse RPC URL: &quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	config.rpcURL = url</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Render the validator admin url</span>
<span class="term-fg32">+	valurl, err := url.Parse(flags.ValidatorAdminURLStr)</span>
<span class="term-fg32">+	if err != nil {</span>
<span class="term-fg32">+		log.Fatal(&quot;failed to parse Validator Admin URL: &quot;, err)</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	config.validatorURL = valurl</span>
<span class="term-fg32">+	config.skipVoting = flags.SkipVoting</span>
<span class="term-fg32">+	if flags.NetworkForks != &quot;&quot; {</span>
<span class="term-fg32">+		network, err := settings.NewNetwork(flags.NetworkForks)</span>
<span class="term-fg32">+		if err != nil {</span>
<span class="term-fg32">+			log.Fatal(err)</span>
<span class="term-fg32">+		}</span>
<span class="term-fg32">+		cancun := network.Cancun()</span>
<span class="term-fg32">+		config.cancun = &amp;cancun</span>
<span class="term-fg32">+	}</span>
<span class="term-fg32">+	&#47;&#47; Run the tests</span>
<span class="term-fg32">+	os.Exit(m.Run())</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-c1eafe50d053acf3c6d103bd" role="button"
                       aria-expanded="false" aria-controls="id-c1eafe50d053acf3c6d103bd">
                        <code>tests/immutable/price_test.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/price_test.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+119</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-c1eafe50d053acf3c6d103bd"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;price_test.go immutable-geth&#47;tests&#47;immutable&#47;price_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..6c89a7c8c007b7114697c72933d1f3d1f62445bf</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;price_test.go</span>
<span class="term-fg36">@@ -0,0 +1,119 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package test</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;context&quot;</span>
<span class="term-fg32">+	&quot;math&#47;big&quot;</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+	&quot;time&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&#47;abi&#47;bind&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;cmd&#47;geth&#47;immutable&#47;settings&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;tests&#47;immutable&#47;erc20&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;tests&#47;immutable&#47;evm&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;stretchr&#47;testify&#47;require&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+var (</span>
<span class="term-fg32">+	priceLimit      = big.NewInt(0).SetUint64(settings.PriceLimit)</span>
<span class="term-fg32">+	underPriceLimit = big.NewInt(0).SetUint64(settings.PriceLimit - 1)</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutablePriceLimit_SuggestTipCap_IsAbovePriceLimit(t *testing.T) {</span>
<span class="term-fg32">+	ctx, cancel := context.WithTimeout(context.Background(), 60*time.Second)</span>
<span class="term-fg32">+	defer cancel()</span>
<span class="term-fg32">+	client, err := evm.NewClient(ctx, config.rpcURL, 1, 1)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	tipCap, err := client.EthClient().SuggestGasTipCap(ctx)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	require.Equal(t, priceLimit.Uint64(), tipCap.Uint64())</span>
<span class="term-fg32">+	t.Log(&quot;Suggested tip cap:&quot;, tipCap)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutablePriceLimit_PricedAboveLimit(t *testing.T) {</span>
<span class="term-fg32">+	ctx, cancel := context.WithTimeout(context.Background(), 60*time.Second)</span>
<span class="term-fg32">+	defer cancel()</span>
<span class="term-fg32">+	client, err := evm.NewClient(ctx, config.rpcURL, 1, 1)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Check that base fee is below price limit</span>
<span class="term-fg32">+	block, err := client.BlockNumber(ctx)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	feeHistory, err := client.EthClient().FeeHistory(ctx, 1, new(big.Int).SetUint64(block), nil)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	require.NotEmpty(t, feeHistory.BaseFee)</span>
<span class="term-fg32">+	require.Less(t, feeHistory.BaseFee[0].Uint64(), priceLimit.Uint64())</span>
<span class="term-fg32">+	t.Log(&quot;Base fee:&quot;, feeHistory.BaseFee[0].Uint64())</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Dynamic tx above price limit but below price limit + basefee</span>
<span class="term-fg32">+	txOpts := EIP1559TxOpts(t, ctx, client.EthClient(), config.testUser)</span>
<span class="term-fg32">+	txOpts.GasFeeCap = priceLimit</span>
<span class="term-fg32">+	txOpts.GasTipCap = priceLimit</span>
<span class="term-fg32">+	t.Log(&quot;Sending priced 1559 tx&quot;)</span>
<span class="term-fg32">+	testPricedTx(t, ctx, client, txOpts)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Legacy tx above price limit but below price limit + basefee</span>
<span class="term-fg32">+	txOpts = legacyTxOpts(t, ctx, client.EthClient(), config.testUser)</span>
<span class="term-fg32">+	txOpts.GasPrice = priceLimit</span>
<span class="term-fg32">+	t.Log(&quot;Sending priced legacy tx&quot;)</span>
<span class="term-fg32">+	testPricedTx(t, ctx, client, txOpts)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutablePriceLimit_PricedBelowLimit(t *testing.T) {</span>
<span class="term-fg32">+	ctx, cancel := context.WithTimeout(context.Background(), 60*time.Second)</span>
<span class="term-fg32">+	defer cancel()</span>
<span class="term-fg32">+	client, err := evm.NewClient(ctx, config.rpcURL, 1, 1)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Dynamic tx below price limit</span>
<span class="term-fg32">+	txOpts := EIP1559TxOpts(t, ctx, client.EthClient(), config.testUser)</span>
<span class="term-fg32">+	txOpts.GasFeeCap = priceLimit</span>
<span class="term-fg32">+	txOpts.GasTipCap = underPriceLimit</span>
<span class="term-fg32">+	t.Log(&quot;Sending underpriced 1559 tx&quot;)</span>
<span class="term-fg32">+	testUnderPricedTx(t, ctx, client, txOpts)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Legacy tx below price limit</span>
<span class="term-fg32">+	txOpts = legacyTxOpts(t, ctx, client.EthClient(), config.testUser)</span>
<span class="term-fg32">+	txOpts.GasPrice = underPriceLimit</span>
<span class="term-fg32">+	t.Log(&quot;Sending underpriced legacy tx&quot;)</span>
<span class="term-fg32">+	testUnderPricedTx(t, ctx, client, txOpts)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; testPricedTx verifies that a tx is accepted by RPC and mined</span>
<span class="term-fg32">+func testPricedTx(t *testing.T, ctx context.Context, client *evm.Client, txOpts *bind.TransactOpts) {</span>
<span class="term-fg32">+	t.Helper()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Send tx</span>
<span class="term-fg32">+	_, deployTx, _, err := erc20.DeployERC20(txOpts, client.EthClient())</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Wait for tx to be mined</span>
<span class="term-fg32">+	_, err = bind.WaitMined(ctx, client, deployTx)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+}</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+&#47;&#47; testUnderPricedTx verifies that a tx is rejected by RPC</span>
<span class="term-fg32">+func testUnderPricedTx(t *testing.T, ctx context.Context, client *evm.Client, txOpts *bind.TransactOpts) {</span>
<span class="term-fg32">+	t.Helper()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Send tx</span>
<span class="term-fg32">+	_, _, _, err := erc20.DeployERC20(txOpts, client.EthClient())</span>
<span class="term-fg32">+	require.Error(t, err)</span>
<span class="term-fg32">+	require.Contains(t, err.Error(), &quot;transaction underpriced&quot;)</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-1077567b4bd8395ec988c634" role="button"
                       aria-expanded="false" aria-controls="id-1077567b4bd8395ec988c634">
                        <code>tests/immutable/randao_test.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/randao_test.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+56</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-1077567b4bd8395ec988c634"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;randao_test.go immutable-geth&#47;tests&#47;immutable&#47;randao_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..4a2d112e63442f4420f413975b74e810a53cd2ca</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;randao_test.go</span>
<span class="term-fg36">@@ -0,0 +1,56 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package test</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;context&quot;</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+	&quot;time&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&#47;abi&#47;bind&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;tests&#47;immutable&#47;evm&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;tests&#47;immutable&#47;randao&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;stretchr&#47;testify&#47;require&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutable_RandaoOpCode_ShouldDeployAndReturnZero(t *testing.T) {</span>
<span class="term-fg32">+	ctx, cancel := context.WithTimeout(context.Background(), 60*time.Second)</span>
<span class="term-fg32">+	defer cancel()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Client and 1559</span>
<span class="term-fg32">+	client, err := evm.NewClient(ctx, config.rpcURL, 1, 1)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	txOpts := EIP1559TxOpts(t, ctx, client.EthClient(), config.testUser)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Deploy Contract</span>
<span class="term-fg32">+	_, deployTx, contract, err := randao.DeployRandao(txOpts, client.EthClient())</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	deployReceipt, err := bind.WaitMined(ctx, client, deployTx)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	require.Equal(t, deployReceipt.Status, uint64(1))</span>
<span class="term-fg32">+	t.Logf(&quot;Contract Deployed to address %s with TX Hash %s&quot;, deployReceipt.ContractAddress.String(), deployTx.Hash().String())</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Transact</span>
<span class="term-fg32">+	opts := &amp;bind.CallOpts{Context: ctx}</span>
<span class="term-fg32">+	rand, err := contract.Rand(opts)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	require.Equal(t, uint64(0), rand.Uint64())</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	diff, err := contract.Difficulty(opts)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	require.Equal(t, uint64(0), diff.Uint64())</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-f1a0092d256dc3d4dee20836" role="button"
                       aria-expanded="false" aria-controls="id-f1a0092d256dc3d4dee20836">
                        <code>tests/immutable/shanghai_test.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <span class="text-muted">(new)</span>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/immutable/shanghai_test.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+58</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-0</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-f1a0092d256dc3d4dee20836"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;immutable&#47;shanghai_test.go immutable-geth&#47;tests&#47;immutable&#47;shanghai_test.go</span>
<span class="term-fg1">new file mode 100644</span>
<span class="term-fg1">index 0000000000000000000000000000000000000000..ee68c1d29a5aa1b05e52457df6d003d8f66d03dd</span>
<span class="term-fg1">--- &#47;dev&#47;null</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;immutable&#47;shanghai_test.go</span>
<span class="term-fg36">@@ -0,0 +1,58 @@</span>
<span class="term-fg32">+&#47;&#47; Copyright 2024 The Immutable go-ethereum Authors</span>
<span class="term-fg32">+&#47;&#47; This file is part of the Immutable go-ethereum library.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is free software: you can redistribute it and&#47;or modify</span>
<span class="term-fg32">+&#47;&#47; it under the terms of the GNU Lesser General Public License as published by</span>
<span class="term-fg32">+&#47;&#47; the Free Software Foundation, either version 3 of the License, or</span>
<span class="term-fg32">+&#47;&#47; (at your option) any later version.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; The Immutable go-ethereum library is distributed in the hope that it will be useful,</span>
<span class="term-fg32">+&#47;&#47; but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="term-fg32">+&#47;&#47; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="term-fg32">+&#47;&#47; GNU Lesser General Public License for more details.</span>
<span class="term-fg32">+&#47;&#47;</span>
<span class="term-fg32">+&#47;&#47; You should have received a copy of the GNU Lesser General Public License</span>
<span class="term-fg32">+&#47;&#47; along with the Immutable go-ethereum library. If not, see &lt;http:&#47;&#47;www.gnu.org&#47;licenses&#47;&gt;.</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+package test</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+import (</span>
<span class="term-fg32">+	&quot;context&quot;</span>
<span class="term-fg32">+	&quot;testing&quot;</span>
<span class="term-fg32">+	&quot;time&quot;</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;accounts&#47;abi&#47;bind&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;tests&#47;immutable&#47;evm&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;ethereum&#47;go-ethereum&#47;tests&#47;immutable&#47;shanghai&quot;</span>
<span class="term-fg32">+	&quot;github.com&#47;stretchr&#47;testify&#47;require&quot;</span>
<span class="term-fg32">+)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+func TestImmutableShanghai_ShanghaiByteCode_ValidatesPush0AndCoinbaseGas(t *testing.T) {</span>
<span class="term-fg32">+	ctx, cancel := context.WithTimeout(context.Background(), 60*time.Second)</span>
<span class="term-fg32">+	defer cancel()</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Client and 1559</span>
<span class="term-fg32">+	client, err := evm.NewClient(ctx, config.rpcURL, 1, 1)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	txOpts := EIP1559TxOpts(t, ctx, client.EthClient(), config.testUser)</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Deploy the contract, which must have been compiled with solidity version &gt;=0.8.20</span>
<span class="term-fg32">+	_, deployTx, contract, err := shanghai.DeployShanghai(txOpts, client.EthClient())</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	deployReceipt, err := bind.WaitMined(ctx, client, deployTx)</span>
<span class="term-fg32">+	require.Equal(t, deployReceipt.Status, uint64(1))</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	t.Logf(&quot;Contract deployed to address %s with TX Hash %s&quot;, deployReceipt.ContractAddress.String(), deployTx.Hash().String())</span>
<span class="term-fg32">+</span>
<span class="term-fg32">+	&#47;&#47; Transact</span>
<span class="term-fg32">+	tx, err := contract.SetCoinbase(txOpts)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	expectedGasLimit := uint64(400) &#47;&#47; Warm coinbase read should be far less than 2100</span>
<span class="term-fg32">+	intrinsicGas := uint64(21000)   &#47;&#47; Transactions always cost at least 21000 gas</span>
<span class="term-fg32">+	estimatedGas := tx.Gas() - intrinsicGas</span>
<span class="term-fg32">+	require.Less(t, estimatedGas, expectedGasLimit)</span>
<span class="term-fg32">+	transactReceipt, err := bind.WaitMined(ctx, client, tx)</span>
<span class="term-fg32">+	require.NoError(t, err)</span>
<span class="term-fg32">+	actualGas := transactReceipt.GasUsed - intrinsicGas</span>
<span class="term-fg32">+	require.Less(t, actualGas, expectedGasLimit)</span>
<span class="term-fg32">+}</span></div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-49411e8240260d126a589832" role="button"
                       aria-expanded="false" aria-controls="id-49411e8240260d126a589832">
                        <code>tests/state_test.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/tests/state_test.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/state_test.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+1</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-1</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-49411e8240260d126a589832"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;state_test.go immutable-geth&#47;tests&#47;state_test.go</span>
<span class="term-fg1">index 1d749d8bcf52b4fd55f1b63d3b4c86359cef38c6..30e748ad605f1a62eaf22a2d02b4ab6e95d52006 100644</span>
<span class="term-fg1">--- go-ethereum&#47;tests&#47;state_test.go</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;state_test.go</span>
<span class="term-fg36">@@ -284,7 +284,7 @@</span> 			}
&nbsp;
 			&#47;&#47; Prepare the EVM.
 			txContext := core.NewEVMTxContext(msg)
<span class="term-fg31">-			context := core.NewEVMBlockContext(block.Header(), nil, &amp;t.json.Env.Coinbase)</span>
<span class="term-fg32">+			context := core.NewEVMBlockContext(block.Header(), nil, &amp;t.json.Env.Coinbase, config)</span>
 			context.GetHash = vmTestBlockHash
 			context.BaseFee = baseFee
 			evm := vm.NewEVM(context, txContext, state.StateDB, config, vmconfig)</div>
    </div>

            
                <div class="border-bottom"><div class="row">
            <div class="col-12 col-md-4 text-start pe-2">
                
                    <a class="text-muted" data-bs-toggle="collapse" href="#id-3dbe48294ab5c0ab57510baf" role="button"
                       aria-expanded="false" aria-controls="id-3dbe48294ab5c0ab57510baf">
                        <code>tests/state_test_util.go</code>
                    </a>
                
            </div>

            <div class="col-12 col-sm-8 col-md-4 text-start px-2">
                <div class="row">
                    <div class="col-6">
                        
                            <a href="https://github.com/ethereum/go-ethereum/blob/c5ba367eb6232e3eddd7d6226bfd374449c63164/tests/state_test_util.go" target="_blank">go-ethereum <i class="bi bi-github"></i></a>
                        
                    </div>

                    <div class="col-6">
                        
                            <a href="https://github.com/immutable/immutable-geth/blob/f05c916773b30d40b02db377dd9d152ff218aee1/tests/state_test_util.go" target="_blank">immutable-geth <i class="bi bi-github"></i></a>
                        
                    </div>
                </div>
            </div>

            <div class="col-12 col-sm-4 ms-auto ps-2">
                
                    <div class="row line-stat">
                        
                            <div class="text-end"><span class="text-add-ignored">+1</span></div>
                            <div class="text-start"><span class="text-delete-ignored">-1</span></div>
                        
                    </div>
                
            </div>
        </div>
        <div class="collapse patch-content term-container" id="id-3dbe48294ab5c0ab57510baf"><span class="term-fg1">diff --git go-ethereum&#47;tests&#47;state_test_util.go immutable-geth&#47;tests&#47;state_test_util.go</span>
<span class="term-fg1">index c916d26d412aa2659f9cb0758c9c3edce73fdd1f..6d750e5913bc0b881bad040e259971ec09f1cde2 100644</span>
<span class="term-fg1">--- go-ethereum&#47;tests&#47;state_test_util.go</span>
<span class="term-fg1">+++ immutable-geth&#47;tests&#47;state_test_util.go</span>
<span class="term-fg36">@@ -277,7 +277,7 @@</span> 	}
&nbsp;
 	&#47;&#47; Prepare the EVM.
 	txContext := core.NewEVMTxContext(msg)
<span class="term-fg31">-	context := core.NewEVMBlockContext(block.Header(), nil, &amp;t.json.Env.Coinbase)</span>
<span class="term-fg32">+	context := core.NewEVMBlockContext(block.Header(), nil, &amp;t.json.Env.Coinbase, config)</span>
 	context.GetHash = vmTestBlockHash
 	context.BaseFee = baseFee
 	context.Random = nil</div>
    </div>

            
        </div>
        <div>
            
        </div>
    </div>
</div>

                
            </div>
        </main>
    </div>

    <footer class="col-xl-10 col-xxl-8 mx-auto px-3 pt-5 my-5 text-muted border-top">
        <p>Fork-diff overview of <a href="https://github.com/immutable/immutable-geth"><code>immutable-geth</code></a>, a fork of <a href="https://github.com/ethereum/go-ethereum"><code>go-ethereum</code></a>.</p>

    </footer>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js" integrity="sha384-mQ93GR66B00ZXjt0YO5KlohRA5SY2XofN4zfuZxLkoj1gXtW8ANNCe9d5Y3eG5eD" crossorigin="anonymous"></script>
    <script type="text/javascript">
        const storedTheme = localStorage.getItem('theme')

        // Get the preferred theme from the user's OS
        const getPreferredTheme = () => {
            if (storedTheme) {
                return storedTheme
            }

            return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'
        }

        // Set the bootstrap theme
        const setTheme = function (theme) {
            document.documentElement.setAttribute('data-bs-theme', theme)
            if (theme === 'dark') {
                document.getElementById('dark-mode-toggle').setAttribute('checked', true)
                document.getElementById('dark-mode-icon').classList.replace('bi-brightness-high-fill', 'bi-brightness-low')
            } else {
                document.getElementById('dark-mode-toggle').setAttribute('checked', false)
                document.getElementById('dark-mode-icon').classList.replace('bi-brightness-low', 'bi-brightness-high-fill')
            }
        }

        // Returns true if the current theme is dark
        const isDark = () => {
            return document.documentElement.getAttribute('data-bs-theme') === 'dark'
        }

        // Toggles dark mode
        const toggleDarkMode = () => {
            const newTheme = isDark() ? 'light' : 'dark'
            setTheme(newTheme)
            localStorage.setItem('theme', newTheme)
        }

        // Set the preferred theme on page load
        window.onload = () => {
            // Set preferred theme
            setTheme(getPreferredTheme());
            // Initialize tooltips
            const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]')
            const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl))
        }

        // Toggle dark mode when the toggle button is clicked
        addEventListener("click", (event) => {
            if (event.target.id === 'dark-mode-toggle') {
                toggleDarkMode();
                // De-focus the toggle
                document.activeElement.blur()
            }
        });
    </script>
</body>
</html>
